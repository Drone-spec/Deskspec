/*! For license information please see app.js.LICENSE.txt */
(()=>{"use strict";var e,t,s,a={54094:(e,t,s)=>{var a=s(67294),n=s(73935),r=s(93150),i=s.n(r);i().scripting||(i().scripting=new class{executeScript(e){e.func?this._insertJsFunc(e):this._insertJsFiles(e)}insertCSS(e){let t=null;const s=e.files;for(let a=s.length-1;a>=0;--a){const n={file:s[a],runAt:"document_end",frameId:e.target?.frameId};t=this._createCssCallback(e.target.tabId,n,t)}t&&t()}_createJsCallback(e,t,s){return()=>chrome.tabs.executeScript(e,t,s)}_createCssCallback(e,t,s){return()=>chrome.tabs.insertCSS(e,t,s)}_insertJsFiles(e){let t=null;const s=e.files;for(let a=s.length-1;a>=0;--a){const n={file:s[a],runAt:"document_end",frameId:e.target?.frameId};t=this._createJsCallback(e.target.tabId,n,t)}t&&t()}_insertJsFunc(e){const t=JSON.stringify(e.args),s=`;${e.func.name}.apply(window, ${t});`,a={code:e.func.toString()+s,runAt:"document_end",frameId:e.target?.frameId};this._createJsCallback(e.target.tabId,a,null)()}});i().storage.session||(i().storage.session=new class{constructor(){this._storedData={}}async get(e){const t=typeof e;if("string"!==t&&"undefined"!==t)throw new Error(`Expected keys type of "string" but received an unsopprted type: ${t}`);return e?this._storedData[e]?{[e]:this._storedData[e]}:{}:this._storedData}async set(e){if("object"!=typeof e)throw new Error('Expected keys type of "object" but received an unsopprted type: '+typeof e);for(const t in e)this._storedData[t]=JSON.parse(JSON.stringify(e[t]))}async remove(e){delete this._storedData[e]}async clear(){this._storedData={}}});const o=i();var l=s(73727),c=s(16550),m=s(45697),d=s.n(m);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},h.apply(this,arguments)}const p=a.createContext({user:null,users:null,roles:null,rememberMeOptions:{},resources:null,resource:null,shareResources:null,selectedResources:null,selectedUser:null,folders:null,resourceCommentId:null,mustRefreshComments:!1,siteSettings:null,userSettings:null,onCheckIsAuthenticatedRequested:null});function u(e){return class extends a.Component{render(){return a.createElement(p.Consumer,null,(t=>a.createElement(e,h({context:t},this.props))))}}}const g=p;function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},f.apply(this,arguments)}const b=a.createContext({onGoToAdministrationRequested:()=>{},onGoToAdministrationSelfRegistrationRequested:()=>{},onGoToAdministrationMfaRequested:()=>{},onGoToAdministrationUsersDirectoryRequested:()=>{},onGoToAdministrationEmailNotificationsRequested:()=>{},onGoToAdministrationSubscriptionRequested:()=>{},onGoToAdministrationInternationalizationRequested:()=>{},onGoToAdministrationAccountRecoveryRequested:()=>{},onGoToAdministrationSmtpSettingsRequested:()=>{},onGoToAdministrationSsoRequested:()=>{},onGoToPasswordsRequested:()=>{},onGoToUsersRequested:()=>{},onGoToUserSettingsProfileRequested:()=>{},onGoToUserSettingsPassphraseRequested:()=>{},onGoToUserSettingsSecurityTokenRequested:()=>{},onGoToUserSettingsThemeRequested:()=>{},onGoToUserSettingsMfaRequested:()=>{},onGoToUserSettingsKeysRequested:()=>{},onGoToUserSettingsMobileRequested:()=>{},onGoToUserSettingsAccountRecoveryRequested:()=>{},onGoToNewTab:()=>{}});class y extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{onGoToNewTab:this.onGoToNewTab.bind(this),onGoToAdministrationRequested:this.onGoToAdministrationRequested.bind(this),onGoToAdministrationMfaRequested:this.onGoToAdministrationMfaRequested.bind(this),onGoToAdministrationUsersDirectoryRequested:this.onGoToAdministrationUsersDirectoryRequested.bind(this),onGoToAdministrationEmailNotificationsRequested:this.onGoToAdministrationEmailNotificationsRequested.bind(this),onGoToAdministrationSubscriptionRequested:this.onGoToAdministrationSubscriptionRequested.bind(this),onGoToAdministrationInternationalizationRequested:this.onGoToAdministrationInternationalizationRequested.bind(this),onGoToAdministrationAccountRecoveryRequested:this.onGoToAdministrationAccountRecoveryRequested.bind(this),onGoToAdministrationSmtpSettingsRequested:this.onGoToAdministrationSmtpSettingsRequested.bind(this),onGoToAdministrationSelfRegistrationRequested:this.onGoToAdministrationSelfRegistrationRequested.bind(this),onGoToAdministrationSsoRequested:this.onGoToAdministrationSsoRequested.bind(this),onGoToAdministrationMfaPolicyRequested:this.onGoToAdministrationMfaPolicyRequested.bind(this),onGoToPasswordsRequested:this.onGoToPasswordsRequested.bind(this),onGoToUsersRequested:this.onGoToUsersRequested.bind(this),onGoToUserSettingsProfileRequested:this.onGoToUserSettingsProfileRequested.bind(this),onGoToUserSettingsPassphraseRequested:this.onGoToUserSettingsPassphraseRequested.bind(this),onGoToUserSettingsSecurityTokenRequested:this.onGoToUserSettingsSecurityTokenRequested.bind(this),onGoToUserSettingsThemeRequested:this.onGoToUserSettingsThemeRequested.bind(this),onGoToUserSettingsMfaRequested:this.onGoToUserSettingsMfaRequested.bind(this),onGoToUserSettingsKeysRequested:this.onGoToUserSettingsKeysRequested.bind(this),onGoToUserSettingsMobileRequested:this.onGoToUserSettingsMobileRequested.bind(this),onGoToUserSettingsAccountRecoveryRequested:this.onGoToUserSettingsAccountRecoveryRequested.bind(this)}}async goTo(e,t){if(e===this.props.context.name)await this.props.history.push({pathname:t});else{const e=`${this.props.context.userSettings?this.props.context.userSettings.getTrustedDomain():this.props.context.trustedDomain}${t}`;window.open(e,"_parent","noopener,noreferrer")}}onGoToNewTab(e){window.open(e,"_blank","noopener,noreferrer")}async onGoToAdministrationRequested(){let e="/app/administration/email-notification";this.isMfaEnabled?e="/app/administration/mfa":this.isUserDirectoryEnabled?e="/app/administration/users-directory":this.isSmtpSettingsEnable?e="/app/administration/smtp-settings":this.isSelfRegistrationEnable&&(e="/app/administration/self-registation"),await this.goTo("api",e)}async onGoToAdministrationMfaRequested(){await this.goTo("api","/app/administration/mfa")}async onGoToAdministrationMfaPolicyRequested(){await this.goTo("api","/app/administration/mfa-policy")}async onGoToAdministrationSelfRegistrationRequested(){await this.goTo("api","/app/administration/self-registration")}async onGoToAdministrationUsersDirectoryRequested(){await this.goTo("api","/app/administration/users-directory")}async onGoToAdministrationEmailNotificationsRequested(){await this.goTo("api","/app/administration/email-notification")}async onGoToAdministrationSmtpSettingsRequested(){await this.goTo("api","/app/administration/smtp-settings")}async onGoToAdministrationSubscriptionRequested(){await this.goTo("browser-extension","/app/administration/subscription")}async onGoToAdministrationInternationalizationRequested(){await this.goTo("api","/app/administration/internationalization")}async onGoToAdministrationAccountRecoveryRequested(){await this.goTo("browser-extension","/app/administration/account-recovery")}async onGoToAdministrationSsoRequested(){await this.goTo("browser-extension","/app/administration/sso")}get isMfaEnabled(){const e=this.props.context.siteSettings;return e&&e.canIUse("multiFactorAuthentication")}get isUserDirectoryEnabled(){const e=this.props.context.siteSettings;return e&&e.canIUse("directorySync")}get isSmtpSettingsEnable(){const e=this.props.context.siteSettings;return e&&e.canIUse("smtpSettings")}get isSelfRegistrationEnable(){const e=this.props.context.siteSettings;return e&&e.canIUse("selfRegistration")}async onGoToPasswordsRequested(){await this.goTo("browser-extension","/app/passwords")}async onGoToUsersRequested(){await this.goTo("browser-extension","/app/users")}async onGoToUserSettingsProfileRequested(){await this.goTo("browser-extension","/app/settings/profile")}async onGoToUserSettingsPassphraseRequested(){await this.goTo("browser-extension","/app/settings/passphrase")}async onGoToUserSettingsSecurityTokenRequested(){await this.goTo("browser-extension","/app/settings/security-token")}async onGoToUserSettingsThemeRequested(){await this.goTo("browser-extension","/app/settings/theme")}async onGoToUserSettingsMfaRequested(){await this.goTo("api","/app/settings/mfa")}async onGoToUserSettingsKeysRequested(){await this.goTo("browser-extension","/app/settings/keys")}async onGoToUserSettingsMobileRequested(){await this.goTo("browser-extension","/app/settings/mobile")}async onGoToUserSettingsAccountRecoveryRequested(){await this.goTo("browser-extension","/app/settings/account-recovery")}render(){return a.createElement(b.Provider,{value:this.state},this.props.children)}}y.displayName="NavigationContextProvider",y.propTypes={context:d().object,children:d().any,location:d().object,match:d().object,history:d().object};const E=(0,c.EN)(u(y));function v(e){return class extends a.Component{render(){return a.createElement(b.Consumer,null,(t=>a.createElement(e,f({navigationContext:t},this.props))))}}}var C=s(89116),k=s(20570);class w extends a.Component{isSelected(e){let t=!1;return"passwords"===e?t=/^\/app\/(passwords|folders)/.test(this.props.location.pathname):"users"===e?t=/^\/app\/(users|groups)/.test(this.props.location.pathname):"administration"===e&&(t=/^\/app\/administration/.test(this.props.location.pathname)),t}isLoggedInUserAdmin(){return this.props.context.loggedInUser&&"admin"===this.props.context.loggedInUser.role.name}render(){return a.createElement("nav",null,a.createElement("div",{className:"primary navigation top"},a.createElement("ul",null,a.createElement("li",{key:"password"},a.createElement("div",{className:"row "+(this.isSelected("passwords")?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.props.navigationContext.onGoToPasswordsRequested,role:"button"},a.createElement("span",null,a.createElement(C.c,null,"passwords"))))))),a.createElement("li",{key:"users"},a.createElement("div",{className:"row "+(this.isSelected("users")?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.props.navigationContext.onGoToUsersRequested,role:"button"},a.createElement("span",null,a.createElement(C.c,null,"users"))))))),this.isLoggedInUserAdmin()&&a.createElement("li",{key:"administration"},a.createElement("div",{className:"row "+(this.isSelected("administration")?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.props.navigationContext.onGoToAdministrationRequested,role:"button"},a.createElement("span",null,a.createElement(C.c,null,"administration"))))))),a.createElement("li",{key:"help"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{href:"https://help.passbolt.com",role:"button",target:"_blank",rel:"noopener noreferrer"},a.createElement("span",null,a.createElement(C.c,null,"help"))))))),a.createElement("li",{key:"logout",className:"right"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{role:"button",onClick:this.props.context.onLogoutRequested},a.createElement("span",null,a.createElement(C.c,null,"sign out"))))))))))}}w.propTypes={context:d().object,navigationContext:d().any,history:d().object,location:d().object};const S=u((0,c.EN)(v((0,k.Z)("common")(w))));var x=s(44586);function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},N.apply(this,arguments)}const R=a.createContext({feedbacks:[],displaySuccess:()=>{},displayError:()=>{},remove:()=>{}});class I extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{feedbacks:[],displaySuccess:this.displaySuccess.bind(this),displayError:this.displayError.bind(this),remove:this.remove.bind(this)}}async displaySuccess(e){await this.setState({feedbacks:[...this.state.feedbacks,{id:(0,x.Z)(),type:"success",message:e}]})}async displayError(e){await this.setState({feedbacks:[...this.state.feedbacks,{id:(0,x.Z)(),type:"error",message:e}]})}async remove(e){await this.setState({feedbacks:this.state.feedbacks.filter((t=>e.id!==t.id))})}render(){return a.createElement(R.Provider,{value:this.state},this.props.children)}}function D(e){return class extends a.Component{render(){return a.createElement(R.Consumer,null,(t=>a.createElement(e,N({actionFeedbackContext:t},this.props))))}}}I.displayName="ActionFeedbackContextProvider",I.propTypes={children:d().any};class T extends a.Component{static get DEFAULT_WAIT_TO_CLOSE_TIME_IN_MS(){return 500}constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{shouldRender:!0,isPersisted:!1,timeoutId:null}}componentDidMount(){this.displayWithTimer(this.props.displayTimeInMs)}componentDidUpdate(e){const t=e&&e.feedback.id!==this.props.feedback.id,s=e&&this.props.displayTimeInMs&&e.displayTimeInMs!==this.props.displayTimeInMs;t?(this.setState({shouldRender:!0}),this.displayWithTimer(this.props.displayTimeInMs)):s&&this.updateTimer(this.props.displayTimeInMs)}componentWillUnmount(){this.state.timeoutId&&clearTimeout(this.state.timeoutId)}bindCallbacks(){this.persist=this.persist.bind(this),this.displayWithTimer=this.displayWithTimer.bind(this),this.close=this.close.bind(this)}displayWithTimer(e){this.state.timeoutId&&clearTimeout(this.state.timeoutId);const t=setTimeout(this.close,e),s=Date.now();this.setState({timeoutId:t,time:s})}updateTimer(e){const t=e-(Date.now()-this.state.time);t>0?this.displayWithTimer(t):(clearTimeout(this.state.timeoutId),this.close())}persist(){this.state.timeoutId&&!this.state.isPersisted&&(clearTimeout(this.state.timeoutId),this.setState({isPersisted:!0}))}close(){this.setState({shouldRender:!1}),setTimeout(this.props.onClose,T.DEFAULT_WAIT_TO_CLOSE_TIME_IN_MS)}render(){return a.createElement(a.Fragment,null,a.createElement("div",{className:"notification",onMouseOver:this.persist,onMouseLeave:this.displayWithTimer,onClick:this.close},a.createElement("div",{className:`message animated ${this.state.shouldRender?"fadeInUp":"fadeOutUp"} ${this.props.feedback.type}`},a.createElement("span",{className:"content"},a.createElement("strong",null,"success"===this.props.feedback.type&&a.createElement(a.Fragment,null,a.createElement(C.c,null,"Success"),": "),"error"===this.props.feedback.type&&a.createElement(a.Fragment,null,a.createElement(C.c,null,"Error"),": ")),this.props.feedback.message))))}}T.propTypes={feedback:d().object,onClose:d().func,displayTimeInMs:d().number};const A=(0,k.Z)("common")(T);class P extends a.Component{constructor(e){super(e),this.bindCallbacks()}static get DEFAULT_DISPLAY_TIME_IN_MS(){return 5e3}static get DEFAULT_DISPLAY_MIN_TIME_IN_MS(){return 1200}bindCallbacks(){this.close=this.close.bind(this)}get feedbackToDisplay(){return this.props.actionFeedbackContext.feedbacks[0]}get length(){return this.props.actionFeedbackContext.feedbacks.length}get hasFeedbacks(){return this.length>0}async close(e){await this.props.actionFeedbackContext.remove(e)}render(){const e=this.length>1?P.DEFAULT_DISPLAY_MIN_TIME_IN_MS:P.DEFAULT_DISPLAY_TIME_IN_MS;return a.createElement(a.Fragment,null,this.hasFeedbacks&&a.createElement("div",{className:"notification-container"},a.createElement(A,{feedback:this.feedbackToDisplay,onClose:()=>this.close(this.feedbackToDisplay),displayTimeInMs:e})))}}P.propTypes={actionFeedbackContext:d().any};const U=D(P);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_.apply(this,arguments)}const L=a.createContext({dialogs:[],open:()=>{},close:()=>{}});class F extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{dialogs:[],open:(e,t)=>{const s=(0,x.Z)();return this.setState({dialogs:[...this.state.dialogs,{key:s,Dialog:e,DialogProps:t}]}),s},close:e=>this.setState({dialogs:this.state.dialogs.filter((t=>e!==t.key))})}}render(){return a.createElement(L.Provider,{value:this.state},this.props.children)}}function M(e){return class extends a.Component{render(){return a.createElement(L.Consumer,null,(t=>a.createElement(e,_({dialogContext:t},this.props))))}}}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},O.apply(this,arguments)}F.displayName="DialogContextProvider",F.propTypes={children:d().any};class j extends a.Component{constructor(e){super(e),this.bindCallback()}bindCallback(){this.close=this.close.bind(this)}async close(e){const t=this.props.dialogContext.dialogs.find((({key:t})=>t===e));t?.DialogProps?.onClose&&t.DialogProps.onClose(),this.props.dialogContext.close(e)}render(){return a.createElement(a.Fragment,null,this.props.dialogContext.dialogs.map((({key:e,Dialog:t,DialogProps:s})=>a.createElement(t,O({key:e},s,{onClose:()=>this.close(e)})))),this.props.children)}}j.propTypes={dialogContext:d().any,children:d().any};const q=M(j);function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},W.apply(this,arguments)}const z=a.createContext({counter:[],add:()=>{},remove:()=>{}});class G extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{counter:0,add:()=>{this.setState({counter:this.state.counter+1})},remove:()=>{this.setState({counter:Math.min(this.state.counter-1,0)})}}}render(){return a.createElement(z.Provider,{value:this.state},this.props.children)}}function H(e){return class extends a.Component{render(){return a.createElement(z.Consumer,null,(t=>a.createElement(e,W({loadingContext:t},this.props))))}}}G.propTypes={children:d().any};const V=(e,t)=>{if(void 0===e||"string"!=typeof e||!e.length)return!1;if((t=t||{}).whitelistedProtocols&&!Array.isArray(t.whitelistedProtocols))throw new TypeError("The whitelistedProtocols should be an array of string.");if(t.defaultProtocol&&"string"!=typeof t.defaultProtocol)throw new TypeError("The defaultProtocol should be a string.");const s=t.whitelistedProtocols||[K.HTTP,K.HTTPS],a=[K.JAVASCRIPT],n=t.defaultProtocol||"";!/^((?!:\/\/).)*:\/\//.test(e)&&n&&(e=`${n}//${e}`);try{const t=new URL(e);return!a.includes(t.protocol)&&!!s.includes(t.protocol)&&t.href}catch(e){return!1}},K={FTP:"http:",FTPS:"https:",HTTP:"http:",HTTPS:"https:",JAVASCRIPT:"javascript:",SSH:"ssh:"};var B=s(57009),$=s(69496),Z=s.n($);function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Y.apply(this,arguments)}const J=a.createContext({filter:{type:null,payload:null},sorter:{propertyName:"modified",asc:!1},filteredResources:[],selectedResources:[],details:{resource:null,folder:null},scrollTo:{resource:null},refresh:{permissions:!1},resourceFileToImport:null,resourceFileImportResult:null,lockDisplayDetail:!0,resourcesToExport:{resourcesIds:null,foldersIds:null},onLockDetail:()=>{},onResourceScrolled:()=>{},onResourceEdited:()=>{},onResourceDescriptionEdited:()=>{},onResourceDescriptionDecrypted:()=>{},onResourceShared:()=>{},onResourcePermissionsRefreshed:()=>{},onResourceCopied:()=>{},onResourceActivitiesRefreshed:()=>{},onSorterChanged:()=>{},onResourceSelected:{all:()=>{},none:()=>{},multiple:()=>{},range:()=>{},single:()=>{}},onResourceFileToImport:()=>{},onResourceFileImportResult:()=>{},onResourcesToExport:()=>{},onGoToResourceUriRequested:()=>{}});class X extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.initializeProperties(),this.populateDebounced=Z()(this.populate,1e4,{leading:!0,accumulate:!1})}get defaultState(){return{filter:{type:te.NONE},sorter:{propertyName:"modified",asc:!1},filteredResources:[],selectedResources:[],details:{resource:null,folder:null},scrollTo:{resource:null},refresh:{activities:!1,permissions:!1},resourceFileToImport:null,resourceFileImportResult:null,lockDisplayDetail:!0,resourcesToExport:null,onLockDetail:this.handleLockDetail.bind(this),onResourceScrolled:this.handleResourceScrolled.bind(this),onResourceEdited:this.handleResourceEdited.bind(this),onResourceDescriptionEdited:this.handleResourceDescriptionEdited.bind(this),onResourceDescriptionDecrypted:this.handleResourceDescriptionDecryted.bind(this),onResourceShared:this.handleResourceShared.bind(this),onResourcePermissionsRefreshed:this.handleResourcePermissionsRefreshed.bind(this),onResourceCopied:this.handleResourceCopied.bind(this),onResourceActivitiesRefreshed:this.handleResourceActivitiesRefreshed.bind(this),onSorterChanged:this.handleSorterChange.bind(this),onResourceSelected:{all:this.handleAllResourcesSelected.bind(this),none:this.handleNoneResourcesSelected.bind(this),multiple:this.handleMultipleResourcesSelected.bind(this),range:this.handleResourceRangeSelected.bind(this),single:this.handleResourceSelected.bind(this)},onResourceFileToImport:this.handleResourceFileToImport.bind(this),onResourceFileImportResult:this.handleResourceFileImportResult.bind(this),onResourcesToExport:this.handleResourcesToExportChange.bind(this),onGoToResourceUriRequested:this.onGoToResourceUriRequested.bind(this)}}initializeProperties(){this.resources=null,this.folders=null}async componentDidMount(){this.populateDebounced(),this.handleResourcesWaitedFor()}async componentDidUpdate(e,t){await this.handleResourcesLoaded(),await this.handleFoldersChange(),await this.handleResourcesChange(),await this.handleRouteChange(e.location),await this.handleFilterChange(t.filter),await this.redirectAfterSelection()}isFilterEqual(e,t){if(e.type!==t.type)return!1;switch(e.type){case te.GROUP:return e?.payload?.group?.id===t?.payload?.group?.id;case te.FOLDER:return e?.payload?.folder?.id===t?.payload?.folder?.id;case te.TAG:return e?.payload?.tag?.id===t?.payload?.tag?.id;case te.TEXT:return e?.payload===t?.payload;default:return!0}}async handleFilterChange(e){this.isFilterEqual(e,this.state.filter)||e.type!==te.NONE&&(await this.unselectAll(),await this.populateDebounced())}async handleTextFilterChange(e){await this.search({type:te.TEXT,payload:e}),await this.detailNothing()}async handleFoldersChange(){this.props.context.folders!==this.folders&&(this.folders=this.props.context.folders,await this.refreshSearchFilter(),await this.updateDetails())}async handleResourcesChange(){this.props.context.resources&&this.props.context.resources!==this.resources&&(this.resources=this.props.context.resources,await this.search(this.state.filter),await this.updateDetails(),await this.unselectUnknownResources())}async handleRouteChange(e){const t=this.props.location.key!==e.key,s=!this.props.location.key,a=this.state.filter.type===te.NONE;!t&&!a||s||(await this.handleFolderRouteChange(),await this.handleResourceRouteChange())}async handleFolderRouteChange(){if(null!==this.props.context.folders){const e=this.props.match.params.filterByFolderId;if(e){const t=this.props.context.folders.find((t=>t.id===e));t?(await this.search({type:te.FOLDER,payload:{folder:t}}),await this.detailFolder(t)):this.handleUnknownFolder()}}}async handleResourceRouteChange(){const e=this.props.location.pathname.includes("passwords"),t=this.props.match.params.selectedResourceId;e&&(t?this.handleSingleResourceRouteChange(t):this.handleAllResourceRouteChange())}async handleSingleResourceRouteChange(e){if(null!==this.resources){const t=this.resources.find((t=>t.id===e));this.state.filter.type===te.NONE&&await this.search({type:te.ALL}),t?(await this.selectFromRoute(t),await this.scrollTo(t),await this.detailResource(t)):this.handleUnknownResource()}}async handleAllResourceRouteChange(){if(null!==this.resources){const e=this.props.location.state&&this.props.location.state.filter||{type:te.ALL},t=this.state.filter===e;await this.detailNothing(),t||await this.search(e)}}async handleLockDetail(){const e=!this.state.lockDisplayDetail;this.setState({lockDisplayDetail:e})}handleUnknownResource(){this.props.actionFeedbackContext.displayError("The resource does not exist"),this.props.history.push({pathname:"/app/passwords"})}handleUnknownFolder(){this.props.actionFeedbackContext.displayError("The folder does not exist"),this.props.history.push({pathname:"/app/passwords"})}async handleResourceScrolled(){await this.scrollNothing()}async handleResourceEdited(){await this.refreshSelectedResourceActivities()}async handleResourceDescriptionEdited(){await this.refreshSelectedResourceActivities()}async handleResourceDescriptionDecryted(){await this.refreshSelectedResourceActivities()}async handleResourceShared(){await this.refreshSelectedResourceActivities(),await this.refreshSelectedResourcePermissions()}async handleResourcePermissionsRefreshed(){await this.setResourcesPermissionsAsRefreshed()}async handleResourceCopied(){await this.refreshSelectedResourceActivities()}async handleResourceActivitiesRefreshed(){await this.setResourceActivitiesAsRefreshed()}async handleSorterChange(e){await this.updateSorter(e),await this.sort()}async handleAllResourcesSelected(){await this.selectAll(),await this.detailNothing()}async handleNoneResourcesSelected(){await this.unselectAll(),await this.detailNothing()}async handleMultipleResourcesSelected(e){await this.selectMultiple(e),await this.detailsResourceIfSingleSelection()}async handleResourceRangeSelected(e){await this.selectRange(e)}async handleResourceSelected(e){await this.select(e)}handleToggleSidebar(){const e=!this.state.mustDisplaySidebar;this.setState({mustDisplaySidebar:e})}handleResourcesWaitedFor(){this.props.loadingContext.add()}handleResourcesLoaded(){null===this.resources&&this.props.context.resources&&(this.props.loadingContext.remove(),this.handleResourcesLoaded=()=>{})}async handleResourceFileToImport(e){await this.import(e)}async handleResourceFileImportResult(e){await this.updateImportResult(e)}async handleResourcesToExportChange({resourcesIds:e,foldersIds:t}){await this.updateResourcesToExport({resourcesIds:e,foldersIds:t})}onGoToResourceUriRequested(e){const t=V(e.uri,{whiteListedProtocols:se,defaultProtocol:K.HTTPS});t&&window.open(t,"_blank","noopener,noreferrer")}populate(){this.props.context.siteSettings.canIUse("folders")&&this.props.context.port.request("passbolt.folders.update-local-storage"),this.props.context.port.request("passbolt.resources.update-local-storage"),this.props.context.port.request("passbolt.groups.update-local-storage"),this.props.context.port.request("passbolt.users.update-local-storage")}async search(e){const t=e.type===te.RECENTLY_MODIFIED,s={[te.ROOT_FOLDER]:this.searchByRootFolder.bind(this),[te.FOLDER]:this.searchByFolder.bind(this),[te.TAG]:this.searchByTag.bind(this),[te.GROUP]:this.searchByGroup.bind(this),[te.TEXT]:this.searchByText.bind(this),[te.ITEMS_I_OWN]:this.searchByItemsIOwn.bind(this),[te.FAVORITE]:this.searchByFavorite.bind(this),[te.SHARED_WITH_ME]:this.seachBySharedWithMe.bind(this),[te.RECENTLY_MODIFIED]:this.searchByRecentlyModified.bind(this),[te.ALL]:this.searchAll.bind(this),[te.NONE]:()=>{}};await s[e.type](e),t?await this.resetSorter():await this.sort()}async searchAll(e){await this.setState({filter:e,filteredResources:this.resources})}async searchByRootFolder(e){const t=this.resources.filter((e=>!e.folder_parent_id));await this.setState({filter:e,filteredResources:t})}async searchByFolder(e){const t=e.payload.folder.id,s=this.resources.filter((e=>e.folder_parent_id===t));await this.setState({filter:e,filteredResources:s})}async searchByTag(e){const t=e.payload.tag.id,s=this.resources.filter((e=>e.tags&&e.tags.length>0&&e.tags.filter((e=>e.id===t)).length>0));await this.setState({filter:e,filteredResources:s})}async searchByText(e){const t=e.payload,s=t&&t.split(/\s+/)||[""],a=this.props.context.siteSettings.canIUse("tags"),n=(e,t)=>(e=>new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(e),"i"))(e).test(t),r=this.resources.filter((e=>s.every((t=>((e,t)=>((e,t)=>["name","username","uri","description"].some((s=>n(e,t[s]))))(e,t)||a&&((e,t)=>t.tags.some((t=>n(e,t.slug))))(e,t))(t,e)))));await this.setState({filter:e,filteredResources:r})}async searchByGroup(e){const t={"is-shared-with-group":e.payload.group.id};this.props.loadingContext.add();const s=(await this.props.context.port.request("passbolt.resources.find-all",{filters:t})||[]).map((e=>e.id)),a=this.resources.filter((e=>s.includes(e.id)));await this.setState({filter:e,filteredResources:a,selectedResources:[]}),this.props.loadingContext.remove()}async searchByItemsIOwn(e){const t=this.resources.filter((e=>15===e.permission.type));await this.setState({filter:e,filteredResources:t})}async searchByFavorite(e){const t=this.resources.filter((e=>null!==e.favorite));await this.setState({filter:e,filteredResources:t})}async seachBySharedWithMe(e){const t=this.resources.filter((e=>e.permission.type<15));await this.setState({filter:e,filteredResources:t})}async searchByRecentlyModified(e){const t=this.resources.sort(((e,t)=>B.ou.fromISO(t.modified)<B.ou.fromISO(e.modified)?-1:1));await this.setState({filter:e,filteredResources:t})}async refreshSearchFilter(){if(this.state.filter.type===te.FOLDER)if(this.folders.some((e=>e.id===this.state.filter.payload.folder.id))){const e=this.folders.find((e=>e.id===this.state.filter.payload.folder.id)),t=Object.assign(this.state.filter,{payload:{folder:e}});await this.setState({filter:t})}else{const e={type:te.ALL};this.props.history.push({pathname:"/app/passwords",state:{filter:e}})}}async select(e){const t=1===this.state.selectedResources.length&&this.state.selectedResources[0].id===e.id;await this.setState({selectedResources:t?[]:[e]})}async selectFromRoute(e){if(1!==this.state.selectedResources.length||this.state.selectedResources[0].id!==e.id){const t=[e];await this.setState({selectedResources:t})}}async selectMultiple(e){const t=this.state.selectedResources.filter((t=>t.id!==e.id)),s=this.state.selectedResources.length!==t.length?t:[...this.state.selectedResources,e];await this.setState({selectedResources:s})}async selectRange(e){if(0===this.state.selectedResources.length)await this.select(e);else{const t=e=>t=>t.id===e.id,s=e=>this.state.filteredResources.findIndex(t(e)),a=s(this.state.selectedResources[0]),n=s(e);let r;r=a>n?this.state.filteredResources.slice(n,a+1).reverse():this.state.filteredResources.slice(a,n+1),await this.setState({selectedResources:r})}}async selectAll(){await this.setState({selectedResources:[...this.state.filteredResources]})}async unselectAll(){0!==this.state.selectedResources.length&&await this.setState({selectedResources:[]})}async unselectUnknownResources(){const e=this.resources.filter((e=>this.state.selectedResources.some((e=>t=>t.id===e.id)(e))));await this.setState({selectedResources:e})}redirectAfterSelection(){const e=this.props.context.siteSettings.canIUse("folders");if(null!==this.resources&&(!e||null!==this.folders))if(1===this.state.selectedResources.length)this.props.location.pathname!==`/app/passwords/view/${this.state.selectedResources[0].id}`&&this.props.history.push(`/app/passwords/view/${this.state.selectedResources[0].id}`);else{const{filter:e}=this.state;e.type===te.FOLDER?this.props.location.pathname!==`/app/folders/view/${this.state.filter.payload.folder.id}`&&this.props.history.push({pathname:`/app/folders/view/${this.state.filter.payload.folder.id}`}):"/app/passwords"!==this.props.location.pathname&&this.props.history.push({pathname:"/app/passwords",state:{filter:e}})}}async updateSorter(e){const t={propertyName:e,asc:this.state.sorter.propertyName!==e||!this.state.sorter.asc};await this.setState({sorter:t})}async resetSorter(){this.setState({sorter:{propertyName:"modified",asc:!1}})}async sort(){const e=e=>this.state.sorter.asc?e:(e=>(t,s)=>-e(t,s))(e),t="favorite"===this.state.sorter.propertyName?(e,t)=>e===t?0:e?-1:1:(e,t)=>(e||"").localeCompare(t||""),s=((t,s)=>e(((e,a)=>s(e[t],a[t]))))(this.state.sorter.propertyName,t);null!==this.state.filteredResources&&await this.setState({filteredResources:[...this.state.filteredResources.sort(s)]})}async detailFolder(e){await this.setState({details:{folder:e,resource:null}})}async detailResource(e){await this.setState({details:{folder:null,resource:e}})}async detailNothing(){(this.state.details.resource||this.state.details.folder)&&await this.setState({details:{folder:null,resource:null}})}async detailsResourceIfSingleSelection(){1==this.state.selectedResources.length?await this.detailResource(this.state.selectedResources[0]):await this.detailNothing()}async updateDetails(){if(this.state.details.resource||this.state.details.folder)if(this.state.details.resource){const e=this.resources.find((e=>e.id===this.state.details.resource.id));await this.setState({details:{resource:e}})}else{const e=this.folders.find((e=>e.id===this.state.details.folder.id));await this.setState({details:{folder:e}})}}async scrollTo(e){await this.setState({scrollTo:{resource:e}})}async scrollNothing(){await this.setState({scrollTo:{}})}async refreshSelectedResourceActivities(){const e=Object.assign({},this.state.refresh,{activities:!0});await this.setState({refresh:e})}async setResourceActivitiesAsRefreshed(){const e=Object.assign({},this.state.refresh,{activities:!1});await this.setState({refresh:e})}async refreshSelectedResourcePermissions(){const e=Object.assign({},this.state.refresh,{permissions:!0});await this.setState({refresh:e})}async setResourcesPermissionsAsRefreshed(){const e=Object.assign({},this.state.refresh,{permissions:!1});await this.setState({refresh:e})}async import(e){await this.setState({resourceFileToImport:e})}async updateImportResult(e){await this.setState({resourceFileImportResult:e})}async updateResourcesToExport({resourcesIds:e,foldersIds:t}){await this.setState({resourcesToExport:{resourcesIds:e,foldersIds:t}})}render(){return a.createElement(J.Provider,{value:this.state},this.props.children)}}X.displayName="ResourceWorkspaceContextProvider",X.propTypes={context:d().any,children:d().any,location:d().object,match:d().object,history:d().object,actionFeedbackContext:d().object,loadingContext:d().object};const Q=u(H(D((0,c.EN)(X))));function ee(e){return class extends a.Component{render(){return a.createElement(J.Consumer,null,(t=>a.createElement(e,Y({resourceWorkspaceContext:t},this.props))))}}}const te={NONE:"NONE",ALL:"ALL",FOLDER:"FILTER-BY-FOLDER",ROOT_FOLDER:"FILTER-BY-ROOT-FOLDER",TAG:"FILTER-BY-TAG",GROUP:"FILTER-BY-GROUP",TEXT:"FILTER-BY-TEXT-SEARCH",ITEMS_I_OWN:"FILTER-BY-ITEMS-I-OWN",FAVORITE:"FILTER-BY-FAVORITE",SHARED_WITH_ME:"FILTER-BY-SHARED-WITH-ME",RECENTLY_MODIFIED:"FILTER-BY-RECENTLY-MODIFIED"},se=[K.FTP,K.FTPS,K.HTTPS,K.HTTP,K.SSH];function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ae.apply(this,arguments)}const ne=a.createContext({settings:null,lastGeneratedPassword:null,onPasswordGenerated:()=>{},onLastGeneratedPasswordCleared:()=>{}});class re extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{settings:null,lastGeneratedPassword:null,onPasswordGenerated:this.onPasswordGenerated.bind(this),onLastGeneratedPasswordCleared:this.onLastGeneratedPasswordCleared.bind(this)}}async componentDidMount(){await this.initializePasswordGenerator()}async initializePasswordGenerator(){const e=await this.props.context.port.request("passbolt.password-generator.settings");this.setState({settings:e})}async onPasswordGenerated(e,t){await this.changeGenerator(t),await this.updateGeneratedPassword(e)}onLastGeneratedPasswordCleared(){this.setState({lastGeneratedPassword:{}})}changeGenerator(e){const t={...this.state.settings};t.default_generator=e.type,t.generators=t.generators.map((t=>t.type===e.type?e:t)),this.setState({settings:t})}async updateGeneratedPassword(e){await this.setState({lastGeneratedPassword:e})}render(){return a.createElement(ne.Provider,{value:this.state},this.props.children)}}re.displayName="ResourcePasswordGeneratorContextProvider",re.propTypes={context:d().any,children:d().any};const ie=u(re);function oe(e){return class extends a.Component{render(){return a.createElement(ne.Consumer,null,(t=>a.createElement(e,ae({resourcePasswordGeneratorContext:t},this.props))))}}}var le=s(76970),ce=s.n(le);class me extends a.Component{getClassName(){let e=`svg-icon ${this.props.name}`;return this.props.big&&(e+=" icon-only"),this.props.baseline&&(e+=" baseline"),this.props.dim&&(e+=" dim"),e}render(){return a.createElement("span",{className:this.getClassName(),onClick:this.props.onClick},"2-columns"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.97528 1.43999V15.24M7.97528 1.43999H13.3453C13.5466 1.43866 13.7461 1.47733 13.9323 1.55375C14.1185 1.63017 14.2878 1.74282 14.4301 1.88516C14.5725 2.0275 14.6851 2.19669 14.7615 2.38292C14.838 2.56915 14.8766 2.7687 14.8753 2.96999V13.7C14.8766 13.9018 14.838 14.1018 14.7617 14.2886C14.6854 14.4754 14.5729 14.6452 14.4307 14.7883C14.2885 14.9315 14.1194 15.0451 13.9332 15.1226C13.7469 15.2001 13.547 15.24 13.3453 15.24H7.97528V1.43999ZM7.97528 1.43999H2.6153C2.41353 1.43867 2.21346 1.47727 2.02667 1.55357C1.83989 1.62987 1.67005 1.74236 1.52692 1.88457C1.38378 2.02677 1.2702 2.19588 1.19269 2.38217C1.11517 2.56845 1.07525 2.76823 1.07526 2.96999V13.7C1.07526 14.1084 1.2375 14.5001 1.52631 14.7889C1.81511 15.0777 2.20686 15.24 2.6153 15.24H7.97528V1.43999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"3-dots-h"===this.props.name&&a.createElement("svg",{width:"16",height:"3",viewBox:"0 0 16 3",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("circle",{cx:"1.5",cy:"1.5",r:"1.5",fill:"var(--icon-color)",stroke:"none"}),a.createElement("circle",{cx:"8",cy:"1.5",r:"1.5",fill:"var(--icon-color)",stroke:"none"}),a.createElement("circle",{cx:"14.5",cy:"1.5",r:"1.5",fill:"var(--icon-color)",stroke:"none"})),"3-dots-v"===this.props.name&&a.createElement("svg",{width:"3",height:"16",viewBox:"0 0 3 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("circle",{cx:"1.5",cy:"1.5",r:"1.5",fill:"var(--icon-color)",stroke:"none"}),a.createElement("circle",{cx:"1.5",cy:"8",r:"1.5",fill:"var(--icon-color)",stroke:"none"}),a.createElement("circle",{cx:"1.5",cy:"14.5",r:"1.5",fill:"var(--icon-color)",stroke:"none"})),"add"===this.props.name&&a.createElement("svg",{width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M6.51996 1.50999V11.17",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.68994 6.34H11.3499",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"arrow-left"===this.props.name&&a.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M10.62 6.34H0.959961",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M5.77995 11.17L0.949951 6.34L5.77995 1.50999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"arrow-right"===this.props.name&&a.createElement("svg",{width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M1.61993 6.34H11.2799",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M6.47992 1.50999L11.3099 6.34L6.47992 11.17",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"ascending"===this.props.name&&a.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M4.87466 9.07V1.61",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.13467 5.34L4.87466 1.61L8.60464 5.34",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"ban"===this.props.name&&a.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.58527 13.33C10.8935 13.33 13.5753 10.6482 13.5753 7.34001C13.5753 4.03182 10.8935 1.35001 7.58527 1.35001C4.27708 1.35001 1.59528 4.03182 1.59528 7.34001C1.59528 10.6482 4.27708 13.33 7.58527 13.33Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.34528 3.11L11.8152 11.57",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"broken-link"===this.props.name&&a.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.76352 11.73L6.76352 12.73C6.44415 13.0524 6.0633 13.3075 5.64352 13.48C5.22571 13.6553 4.7766 13.7438 4.32352 13.74C3.40986 13.7429 2.53235 13.3833 1.88351 12.74C1.56332 12.4205 1.30928 12.0409 1.13596 11.6231C0.962628 11.2053 0.873383 10.7573 0.873383 10.305C0.873383 9.85264 0.962628 9.40473 1.13596 8.9869C1.30928 8.56907 1.56332 8.18952 1.88351 7.87L2.88351 6.87",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M11.6635 7.82999L12.6635 6.82999C12.986 6.51063 13.241 6.12976 13.4135 5.70999C13.592 5.29282 13.6838 4.84374 13.6835 4.38999C13.6837 3.70751 13.4815 3.0403 13.1024 2.47277C12.7233 1.90524 12.1844 1.4629 11.5539 1.2017C10.9234 0.940496 10.2296 0.872172 9.56021 1.00537C8.89085 1.13857 8.27598 1.46731 7.79349 1.94999L6.79349 2.94999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M11.1735 11.24L3.36349 3.42999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"calendar"===this.props.name&&a.createElement("svg",{width:"15",height:"17",viewBox:"0 0 15 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M12.7348 2.64999H2.7748C1.99055 2.64999 1.35475 3.28575 1.35475 4.06999V14.03C1.35475 14.8142 1.99055 15.45 2.7748 15.45H12.7348C13.519 15.45 14.1548 14.8142 14.1548 14.03V4.06999C14.1548 3.28575 13.519 2.64999 12.7348 2.64999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.5948 1.23V4.07",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M4.9048 1.23V4.07",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.35475 6.92H14.1548",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"camera"===this.props.name&&a.createElement("svg",{width:"18",height:"15",viewBox:"0 0 18 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M16.5953 12.07C16.5926 12.429 16.4482 12.7723 16.1934 13.0252C15.9387 13.2781 15.5941 13.42 15.2352 13.42H3.04523C2.68718 13.42 2.34381 13.2778 2.09064 13.0246C1.83746 12.7714 1.69525 12.428 1.69525 12.07V4.59C1.69525 4.23196 1.83746 3.88858 2.09064 3.63541C2.34381 3.38224 2.68718 3.24001 3.04523 3.24001H5.74518L7.09528 1.24001H11.1452L12.4952 3.24001H15.1953C15.5542 3.24 15.8986 3.38191 16.1534 3.6348C16.4081 3.88769 16.5526 4.23105 16.5552 4.59L16.5953 12.07Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M9.16522 10.72C10.6564 10.72 11.8652 9.51118 11.8652 8.02001C11.8652 6.52884 10.6564 5.32001 9.16522 5.32001C7.67405 5.32001 6.46527 6.52884 6.46527 8.02001C6.46527 9.51118 7.67405 10.72 9.16522 10.72Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"caret-down"===this.props.name&&a.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M1 3L5 7L9 3",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"caret-left"===this.props.name&&a.createElement("svg",{width:"10",height:"10",transform:"rotate(90)",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M1 3L5 7L9 3",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"caret-right"===this.props.name&&a.createElement("svg",{width:"10",height:"10",transform:"rotate(270)",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M1 3L5 7L9 3",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"caret-up"===this.props.name&&a.createElement("svg",{width:"10",height:"10",transform:"rotate(180)",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M1 3L5 7L9 3",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"check"===this.props.name&&a.createElement("svg",{width:"15",height:"11",viewBox:"0 0 15 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.6647 0.940002L4.86478 9.74L0.864777 5.74",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"clock"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.69485 15.18C11.4725 15.18 14.5348 12.1176 14.5348 8.34C14.5348 4.56237 11.4725 1.5 7.69485 1.5C3.91723 1.5 0.854767 4.56237 0.854767 8.34C0.854767 12.1176 3.91723 15.18 7.69485 15.18Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M7.69485 4.23V8.34L10.4248 9.71",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"close-circle"===this.props.name&&a.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.42523 13.33C10.7334 13.33 13.4152 10.6482 13.4152 7.34001C13.4152 4.03182 10.7334 1.35001 7.42523 1.35001C4.11705 1.35001 1.43524 4.03182 1.43524 7.34001C1.43524 10.6482 4.11705 13.33 7.42523 13.33Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M9.12518 5.65001L5.73517 9.03001",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M5.73517 5.65001L9.12518 9.03001",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"close"===this.props.name&&a.createElement("svg",{width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M9.69525 1.2L1.41522 9.48",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.41522 1.2L9.69525 9.48",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"copy-to-clipboard"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.6147 6.27H7.40469C7.22347 6.27 7.04405 6.3057 6.87662 6.37505C6.70919 6.4444 6.55707 6.54605 6.42892 6.6742C6.30078 6.80234 6.19908 6.95447 6.12973 7.1219C6.06038 7.28933 6.02469 7.46878 6.02469 7.65001V13.86C6.02469 14.226 6.17012 14.577 6.42892 14.8358C6.68772 15.0946 7.03869 15.24 7.40469 15.24H13.6147C13.9807 15.24 14.3317 15.0946 14.5905 14.8358C14.8493 14.577 14.9947 14.226 14.9947 13.86V7.65001C14.9947 7.46878 14.959 7.28933 14.8897 7.1219C14.8203 6.95447 14.7186 6.80234 14.5905 6.6742C14.4623 6.54605 14.3102 6.4444 14.1428 6.37505C13.9754 6.3057 13.7959 6.27 13.6147 6.27Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.26468 10.41H2.57468C2.38882 10.4136 2.20425 10.3791 2.03226 10.3086C1.86026 10.2381 1.70449 10.1331 1.57468 10C1.44256 9.86948 1.33818 9.71364 1.26773 9.54181C1.19728 9.36998 1.16224 9.1857 1.1647 9V2.82C1.16281 2.63439 1.19811 2.45027 1.26852 2.27852C1.33894 2.10677 1.44303 1.95086 1.57468 1.82C1.70499 1.68827 1.86107 1.58477 2.03311 1.51596C2.20515 1.44714 2.38946 1.41448 2.57468 1.42H8.7847C8.968 1.41862 9.14969 1.45404 9.31906 1.52416C9.48843 1.59428 9.64204 1.69767 9.77072 1.82822C9.8994 1.95877 10.0006 2.11381 10.0683 2.28417C10.1359 2.45453 10.1687 2.63674 10.1647 2.82V3.51",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"descending"===this.props.name&&a.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M5.40469 1.61V9.07",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M9.13467 5.34L5.40469 9.07L1.6647 5.34",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"document"===this.props.name&&a.createElement("svg",{width:"14",height:"17",viewBox:"0 0 14 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M8.47476 1.39999H2.92471C2.74218 1.39999 2.5615 1.43594 2.39285 1.5058C2.22421 1.57565 2.071 1.67804 1.94193 1.80711C1.81285 1.93619 1.71039 2.08942 1.64053 2.25806C1.57068 2.42671 1.53482 2.60746 1.53482 2.78999V13.89C1.53482 14.0721 1.5708 14.2523 1.64078 14.4204C1.71075 14.5885 1.81333 14.7411 1.94254 14.8694C2.07174 14.9976 2.225 15.0991 2.39359 15.1678C2.56217 15.2366 2.74265 15.2713 2.92471 15.27H11.2448C11.4268 15.2713 11.6073 15.2366 11.7759 15.1678C11.9445 15.0991 12.0979 14.9976 12.2271 14.8694C12.3563 14.7411 12.4587 14.5885 12.5287 14.4204C12.5987 14.2523 12.6348 14.0721 12.6348 13.89V5.58999L8.47476 1.39999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.46475 1.39999V5.56999H12.6248",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M9.85477 9.03H4.30472",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M9.85477 11.81H4.30472",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M5.69473 6.25999H4.99478H4.30472",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"download-a"===this.props.name&&a.createElement("svg",{width:"17",height:"15",viewBox:"0 0 17 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M6.01358 10.65L8.65359 13.29L11.2936 10.65",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.65359 7.34V13.29",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M14.5135 11.36C15.0875 10.9566 15.518 10.3808 15.7425 9.71616C15.9671 9.05151 15.974 8.33258 15.7622 7.66375C15.5504 6.99492 15.131 6.411 14.5648 5.99674C13.9986 5.58248 13.3151 5.35944 12.6135 5.36H11.7835C11.5878 4.58232 11.2178 3.85932 10.7015 3.24567C10.1852 2.63202 9.53617 2.14378 8.80345 1.81786C8.07073 1.49194 7.27349 1.33687 6.47203 1.36438C5.67056 1.39189 4.88587 1.60126 4.17723 1.97666C3.46858 2.35205 2.85455 2.88365 2.38157 3.53126C1.90859 4.17886 1.58909 4.92553 1.44712 5.7148C1.30516 6.50407 1.34445 7.31529 1.56211 8.08712C1.77978 8.85895 2.17005 9.5712 2.70347 10.17",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"download"===this.props.name&&a.createElement("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M15.3233 10.64V13.7C15.3246 13.9018 15.286 14.1018 15.2097 14.2886C15.1334 14.4754 15.0209 14.6452 14.8787 14.7883C14.7365 14.9315 14.5674 15.0451 14.3811 15.1226C14.1949 15.2001 13.9951 15.24 13.7933 15.24H3.06332C2.86109 15.24 2.66081 15.2002 2.47397 15.1228C2.28713 15.0454 2.11737 14.9319 1.97437 14.7889C1.83136 14.6459 1.71793 14.4762 1.64053 14.2893C1.56314 14.1025 1.52332 13.9022 1.52332 13.7V10.64",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M4.59332 6.81L8.43332 10.64L12.2633 6.81",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.43332 10.64V1.44",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"edit"===this.props.name&&a.createElement("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.53454 2.85999H2.70452C2.52292 2.85866 2.34289 2.89345 2.17486 2.96233C2.00683 3.03121 1.85417 3.13281 1.72576 3.26122C1.59735 3.38963 1.49575 3.54229 1.42687 3.71032C1.35799 3.87835 1.32318 4.0584 1.32451 4.23999V13.9C1.31899 14.0852 1.35164 14.2696 1.42046 14.4416C1.48928 14.6136 1.59281 14.7697 1.72454 14.9C1.8554 15.0316 2.01128 15.1357 2.18303 15.2062C2.35478 15.2766 2.53892 15.3119 2.72454 15.31H12.3845C12.7489 15.3048 13.0969 15.1578 13.3546 14.9001C13.6123 14.6424 13.7593 14.2944 13.7645 13.93V9.06999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M12.7045 1.82C12.9733 1.55934 13.3303 1.4094 13.7045 1.4C13.8966 1.39867 14.0871 1.43552 14.2648 1.50842C14.4426 1.58132 14.604 1.68882 14.7399 1.82466C14.8757 1.9605 14.9832 2.12197 15.0561 2.29971C15.129 2.47745 15.1659 2.6679 15.1646 2.86C15.1622 3.04677 15.1229 3.23124 15.0491 3.40284C14.9753 3.57443 14.8685 3.72979 14.7346 3.86L8.18451 10.42L5.42456 11.11L6.11456 8.35L12.7045 1.82Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"envelope"===this.props.name&&a.createElement("svg",{width:"16",height:"13",viewBox:"0 0 16 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M2.96527 1.24001H13.1552C13.493 1.24 13.8171 1.37348 14.0568 1.61137C14.2966 1.84925 14.4326 2.17226 14.4352 2.51V10.16C14.4326 10.4977 14.2966 10.8208 14.0568 11.0586C13.8171 11.2965 13.493 11.43 13.1552 11.43H2.96527C2.62752 11.43 2.30342 11.2965 2.06366 11.0586C1.8239 10.8208 1.68788 10.4977 1.68524 10.16V2.51C1.68788 2.17226 1.8239 1.84925 2.06366 1.61137C2.30342 1.37348 2.62752 1.24 2.96527 1.24001V1.24001Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M14.4352 2.52L8.06525 6.98L1.69525 2.52",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"expand"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M10.4549 1.73H14.8548V6.14",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M6.04483 14.95H1.6348V10.54",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M14.8648 1.73L9.71487 6.87",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.6348 14.95L6.77481 9.81",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"external-link"===this.props.name&&a.createElement("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.2239 9.10001V13.7C13.2239 14.1084 13.0617 14.5001 12.7729 14.7889C12.4841 15.0778 12.0924 15.24 11.6839 15.24H3.25388C3.05289 15.2412 2.85377 15.2019 2.66824 15.1246C2.48272 15.0473 2.31461 14.9335 2.17392 14.79C2.03098 14.6468 1.91764 14.4768 1.84043 14.2898C1.76321 14.1028 1.72363 13.9023 1.72391 13.7V5.27C1.72653 4.86503 1.88859 4.47739 2.17496 4.19103C2.46132 3.90466 2.84891 3.74263 3.25388 3.74001H7.85391",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.9239 1.44H15.5239V6.04",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M7.08389 9.87L15.5239 1.44",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"eye-close"===this.props.name&&a.createElement("svg",{width:"18",height:"17",viewBox:"0 0 18 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M10.2347 9.8C10.0451 10.0025 9.81744 10.1656 9.56473 10.28C9.30808 10.3893 9.0335 10.4503 8.75473 10.46C8.47778 10.4605 8.20314 10.4096 7.94473 10.31C7.68694 10.2031 7.45254 10.0469 7.25473 9.85001C7.05246 9.65668 6.89537 9.42107 6.79471 9.16C6.69246 8.90261 6.64477 8.62678 6.65469 8.35C6.65565 8.07447 6.71357 7.80211 6.82474 7.55C6.94001 7.29486 7.10291 7.06406 7.30472 6.87L10.2347 9.8ZM12.8647 12.44C11.6829 13.3356 10.2473 13.8329 8.76474 13.86C3.93474 13.86 1.17471 8.34 1.17471 8.34C2.03377 6.73809 3.22745 5.33978 4.67471 4.24L12.8647 12.44ZM7.30472 2.98C7.77695 2.87138 8.26016 2.81769 8.74472 2.82C13.5747 2.82 16.3347 8.34 16.3347 8.34C15.9175 9.12411 15.418 9.86159 14.8447 10.54L7.30472 2.98Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.17471 0.75L16.3547 15.93",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"eye-open"===this.props.name&&a.createElement("svg",{width:"17",height:"13",viewBox:"0 0 17 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M0.99472 6.33999C0.99472 6.33999 3.75475 0.819992 8.58475 0.819992C13.4147 0.819992 16.1747 6.33999 16.1747 6.33999C16.1747 6.33999 13.4147 11.86 8.58475 11.86C3.75475 11.86 0.99472 6.33999 0.99472 6.33999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.58475 8.40999C8.99415 8.40999 9.39436 8.28859 9.73477 8.06113C10.0752 7.83368 10.3405 7.51038 10.4972 7.13214C10.6538 6.7539 10.6948 6.33769 10.615 5.93615C10.5351 5.53461 10.3379 5.16577 10.0484 4.87628C9.75894 4.58678 9.3901 4.38964 8.98856 4.30976C8.58702 4.22989 8.17082 4.27089 7.79257 4.42756C7.41433 4.58423 7.09101 4.84955 6.86356 5.18996C6.6361 5.53037 6.51474 5.93058 6.51474 6.33999C6.51474 6.88899 6.7328 7.4155 7.121 7.8037C7.5092 8.1919 8.03575 8.40999 8.58475 8.40999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"filter"===this.props.name&&a.createElement("svg",{width:"18",height:"16",viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M16.8734 1.44H1.54337L7.67337 8.69V13.71L10.7334 15.24V8.69L16.8734 1.44Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"folder"===this.props.name&&a.createElement("svg",{width:"15",height:"13",viewBox:"0 0 15 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M14 10.77C14.0011 10.9326 13.9672 11.0937 13.9006 11.2433C13.834 11.393 13.736 11.528 13.6127 11.64C13.3673 11.8712 13.0363 12.0006 12.6916 12H2.29792C1.95325 12.0006 1.62224 11.8712 1.37683 11.64C1.25729 11.5257 1.16249 11.3901 1.09784 11.2408C1.03319 11.0915 0.999929 10.9316 1 10.77V2.22C1.00148 1.89698 1.13701 1.58771 1.37683 1.36C1.62224 1.12877 1.95325 0.999403 2.29792 1H5.54266L6.85103 2.84H12.6916C13.0363 2.8394 13.3673 2.96877 13.6127 3.2C13.7348 3.31089 13.832 3.44427 13.8986 3.59209C13.9651 3.73991 13.9996 3.89909 14 4.06V10.77Z",fill:"var(--icon-background-color)",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"folders"===this.props.name&&a.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.9438 12.5803C13.9455 12.7685 13.9124 12.9552 13.8464 13.1293C13.7804 13.3035 13.6829 13.4616 13.5595 13.5943C13.309 13.8584 12.972 14.0042 12.6222 13.9999H2.3125C1.96297 14.0031 1.62631 13.8574 1.37525 13.5943C1.25312 13.4611 1.15697 13.3027 1.09257 13.1285C1.02816 12.9543 0.996821 12.7679 1.00035 12.5803V5.92825C0.996282 5.74059 1.02739 5.55399 1.09182 5.37971C1.15626 5.20542 1.25268 5.04707 1.37525 4.91422C1.4979 4.78073 1.64403 4.67516 1.805 4.60376C1.96597 4.53235 2.13853 4.49655 2.3125 4.49847H5.54599L6.8394 6.59751H12.6597C13.0013 6.60275 13.3274 6.75187 13.5689 7.01317C13.8104 7.27447 13.9483 7.62737 13.9531 7.99687L13.9438 12.5803Z",fill:"var(--icon-background-color)",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.04723 2.42985C1.04316 2.24219 1.07426 2.05559 1.1387 1.88131C1.20313 1.70702 1.29955 1.54868 1.42212 1.41582C1.54477 1.28233 1.6909 1.17676 1.85188 1.10535C2.01285 1.03395 2.1854 0.998153 2.35937 1.00007H6.8863L8.17968 3.09911H12.7066C13.0481 3.10435 13.3743 3.25347 13.6158 3.51477C13.8574 3.77607 13.9952 4.12896 14 4.49847",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"info-circle"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M8.25473 15.24C9.61942 15.24 10.9535 14.8353 12.0882 14.0771C13.2229 13.319 14.1072 12.2413 14.6295 10.9805C15.1517 9.71971 15.2884 8.33235 15.0221 6.99388C14.7559 5.65541 14.0987 4.42595 13.1338 3.46097C12.1688 2.49599 10.9393 1.83882 9.60086 1.57259C8.26239 1.30635 6.87504 1.44299 5.61423 1.96524C4.35342 2.48748 3.27579 3.37187 2.51761 4.50657C1.75943 5.64127 1.35471 6.97531 1.35471 8.34C1.35735 10.1692 2.0852 11.9227 3.37863 13.2161C4.67206 14.5095 6.42555 15.2374 8.25473 15.24Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.25473 11.1V8.34",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.25473 5.65V5.59",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"internal-link"===this.props.name&&a.createElement("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M1.52392 8.8V3.28C1.5226 3.038 1.56925 2.79813 1.66125 2.5743C1.75325 2.35046 1.88875 2.14709 2.05987 1.97597C2.231 1.80484 2.43436 1.66936 2.6582 1.57736C2.88204 1.48536 3.12189 1.43867 3.36389 1.44H13.4839C13.9719 1.44 14.4399 1.63386 14.785 1.97892C15.13 2.32399 15.3239 2.792 15.3239 3.28V13.4C15.3229 13.6402 15.2753 13.8779 15.1839 14.1C15.0899 14.3236 14.9542 14.5272 14.7839 14.7C14.4387 15.0443 13.9714 15.2383 13.4839 15.24H7.96393",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M5.35385 6.75999H9.95389V11.4",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.5239 15.24L9.95389 6.75999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"layout"===this.props.name&&a.createElement("svg",{width:"14",height:"15",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M11.8629 1.19H2.30292C1.54629 1.19 0.932922 1.80337 0.932922 2.56V12.12C0.932922 12.8766 1.54629 13.49 2.30292 13.49H11.8629C12.6195 13.49 13.2329 12.8766 13.2329 12.12V2.56C13.2329 1.80337 12.6195 1.19 11.8629 1.19Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M0.932922 5.29001H13.2329",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M5.03296 13.49V5.29001",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"license"===this.props.name&&a.createElement("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M14.2155 8.58999C14.9711 7.80057 15.3874 6.74663 15.3755 5.65392C15.3635 4.5612 14.9242 3.51661 14.1515 2.7439C13.3788 1.97119 12.3342 1.5318 11.2415 1.51986C10.1487 1.50791 9.09484 1.92436 8.30542 2.67999L3.60535 7.38V13.3H9.52539L14.2155 8.58999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M11.2654 5.59L1.51538 15.34",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M12.3154 10.47H6.39539",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"life-ring"===this.props.name&&a.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.70966 13.43C11.0731 13.43 13.7996 10.7034 13.7996 7.34C13.7996 3.97659 11.0731 1.25 7.70966 1.25C4.34624 1.25 1.61969 3.97659 1.61969 7.34C1.61969 10.7034 4.34624 13.43 7.70966 13.43Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M7.70966 9.77999C9.05723 9.77999 10.1497 8.68757 10.1497 7.33999C10.1497 5.99242 9.05723 4.89999 7.70966 4.89999C6.36208 4.89999 5.26971 5.99242 5.26971 7.33999C5.26971 8.68757 6.36208 9.77999 7.70966 9.77999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.40973 3.03L5.98969 5.62",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M9.43964 9.06L12.0197 11.65",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M9.43964 5.62L12.0197 3.03",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M9.43964 5.62L11.5897 3.47",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.40973 11.65L5.98969 9.06",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"link"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M6.84119 9.03C7.13202 9.43825 7.50715 9.77928 7.94119 10.03C8.37534 10.2686 8.85677 10.4086 9.3512 10.44C9.86059 10.4745 10.3709 10.3889 10.8412 10.19C11.3076 10.0211 11.731 9.75138 12.0812 9.39999L14.1512 7.33C14.6209 6.84495 14.938 6.23271 15.0631 5.56918C15.1883 4.90564 15.1159 4.21998 14.8551 3.59716C14.5943 2.97435 14.1564 2.44177 13.5958 2.06543C13.0351 1.68909 12.3764 1.48553 11.7012 1.47999C11.2503 1.47878 10.8036 1.56647 10.3866 1.73806C9.96966 1.90966 9.59061 2.16177 9.27118 2.47999L8.08118 3.58999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M9.64117 7.65C9.34989 7.23849 8.97075 6.89691 8.53118 6.65C8.09831 6.40942 7.61823 6.266 7.12432 6.22974C6.63042 6.19347 6.13455 6.26522 5.67118 6.44C5.20474 6.60886 4.78133 6.87861 4.43118 7.23L2.36119 9.3C1.87601 9.78489 1.54639 10.4034 1.41442 11.0765C1.28246 11.7497 1.35414 12.4469 1.62033 13.079C1.88651 13.7112 2.33511 14.2497 2.90881 14.6257C3.48251 15.0017 4.15529 15.1982 4.84118 15.19C5.29207 15.1912 5.73876 15.1035 6.15573 14.9319C6.57269 14.7603 6.95174 14.5082 7.27117 14.19L8.45117 13.01",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"list"===this.props.name&&a.createElement("svg",{width:"17",height:"12",viewBox:"0 0 17 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M4.95473 1.53999H15.3548",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M4.95473 6.34H15.3548",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M4.95473 11.14H15.3548",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M0.954727 1.53999H0.964737",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M0.954727 6.34H0.964737",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M0.954727 11.14H0.964737",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"log-out"===this.props.name&&a.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M5.44388 13.59H2.68387C2.49801 13.5936 2.31338 13.5591 2.14139 13.4886C1.96939 13.4181 1.81368 13.3131 1.68387 13.18C1.55176 13.0495 1.44737 12.8936 1.37692 12.7218C1.30647 12.55 1.27143 12.3657 1.27389 12.18V2.51C1.272 2.32439 1.3073 2.14028 1.37772 1.96853C1.44813 1.79678 1.55222 1.64087 1.68387 1.51C1.81418 1.37827 1.9702 1.27478 2.14224 1.20596C2.31428 1.13714 2.49866 1.10448 2.68387 1.11001H5.44388",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.2739 10.79L13.7239 7.34L10.2739 3.89",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M13.7239 7.34H5.44388",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"plus-circle"===this.props.name&&a.createElement("svg",{width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M5.38519 9.63999C7.76002 9.63999 9.68524 7.71482 9.68524 5.33999C9.68524 2.96517 7.76002 1.03999 5.38519 1.03999C3.01037 1.03999 1.08527 2.96517 1.08527 5.33999C1.08527 7.71482 3.01037 9.63999 5.38519 9.63999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M5.38519 3.62V7.06",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.66522 5.34H7.10516",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"plus-square"===this.props.name&&a.createElement("svg",{width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M9.12531 1.03999H2.43524C1.90505 1.03999 1.47528 1.4698 1.47528 1.99999V8.68999C1.47528 9.22019 1.90505 9.64999 2.43524 9.64999H9.12531C9.6555 9.64999 10.0853 9.22019 10.0853 8.68999V1.99999C10.0853 1.4698 9.6555 1.03999 9.12531 1.03999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M5.77533 3.42999V7.24999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.8653 5.34H7.68524",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"power"===this.props.name&&a.createElement("svg",{width:"15",height:"17",viewBox:"0 0 15 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M11.9098 4.59C12.7908 5.47109 13.3908 6.59365 13.6338 7.81571C13.8768 9.03777 13.752 10.3045 13.2751 11.4556C12.7983 12.6067 11.9908 13.5906 10.9548 14.2828C9.91882 14.9751 8.70077 15.3445 7.45477 15.3445C6.20878 15.3445 4.99079 14.9751 3.95477 14.2828C2.91876 13.5906 2.11125 12.6067 1.6344 11.4556C1.15755 10.3045 1.03278 9.03777 1.27582 7.81571C1.51885 6.59365 2.11881 5.47109 2.99982 4.59",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M7.47981 1.34V8.34",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"printer"===this.props.name&&a.createElement("svg",{width:"14",height:"15",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M3.38623 5.49V1.17H10.7863V5.49",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.38627 11.04H2.14628C1.98391 11.04 1.82314 11.0079 1.67326 10.9454C1.52337 10.883 1.38734 10.7915 1.27299 10.6762C1.15864 10.5609 1.06822 10.4242 1.007 10.2738C0.945777 10.1234 0.914858 9.96237 0.916178 9.8V6.72001C0.916178 6.39379 1.04586 6.08093 1.27653 5.85026C1.5072 5.61959 1.82006 5.49001 2.14628 5.49001H11.9762C12.3034 5.48999 12.6173 5.61926 12.8495 5.84965C13.0818 6.08003 13.2136 6.39287 13.2162 6.72001V9.8C13.2162 10.1289 13.0856 10.4443 12.8531 10.6768C12.6205 10.9094 12.3051 11.04 11.9762 11.04H10.7463",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.7863 8.56999H3.38623V13.51H10.7863V8.56999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"question-circle"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M8.04996 15.24C9.41465 15.24 10.7487 14.8353 11.8834 14.0771C13.0181 13.319 13.9025 12.2413 14.4247 10.9805C14.947 9.71971 15.0836 8.33235 14.8174 6.99388C14.5511 5.65541 13.894 4.42595 12.929 3.46097C11.964 2.49599 10.7345 1.83882 9.39608 1.57259C8.05761 1.30635 6.67026 1.44299 5.40945 1.96524C4.14864 2.48748 3.071 3.37187 2.31282 4.50657C1.55464 5.64127 1.14996 6.97531 1.14996 8.34C1.14996 10.17 1.87692 11.925 3.17092 13.219C4.46492 14.513 6.21996 15.24 8.04996 15.24Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M6.03998 6.27001C6.20089 5.80813 6.52015 5.41815 6.94115 5.16921C7.36216 4.92026 7.85772 4.82844 8.33997 4.91001C8.8197 4.99744 9.25434 5.24832 9.56998 5.62001C9.88695 5.99449 10.0606 6.46939 10.06 6.96001C10.06 8.34001 7.98997 9.03001 7.98997 9.03001",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.04993 11.79V11.73",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"refresh-1"===this.props.name&&a.createElement("svg",{width:"17",height:"14",viewBox:"0 0 17 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M15.4753 2.14V6.04H11.5753",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.18524 12.54V8.64H5.08527",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M2.81525 5.39C3.33356 3.92951 4.41025 2.73435 5.8089 2.0669C7.20755 1.39945 8.8138 1.31425 10.2752 1.83001C11.097 2.11893 11.8425 2.59081 12.4553 3.21L15.4553 6.04M1.16522 8.64001L4.16522 11.47C4.86357 12.1684 5.72733 12.6787 6.67609 12.9532C7.62484 13.2277 8.62773 13.2575 9.59113 13.0399C10.5545 12.8222 11.4471 12.3642 12.1857 11.7085C12.9243 11.0528 13.485 10.2208 13.8152 9.29",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"refresh"===this.props.name&&a.createElement("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M1.60464 2.06999V6.06999H5.54471",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.25467 9.29999C3.57205 10.2045 4.1047 11.0183 4.80667 11.6711C5.50864 12.3239 6.3588 12.7962 7.28397 13.0471C8.20913 13.2981 9.18158 13.3203 10.1172 13.1117C11.0529 12.9032 11.9237 12.4701 12.6547 11.85C13.2373 11.3277 13.7104 10.695 14.0465 9.98847C14.3827 9.28196 14.5751 8.51572 14.6128 7.73422C14.6505 6.95272 14.5327 6.17152 14.2661 5.43591C13.9996 4.70031 13.5897 4.02495 13.0601 3.44902C12.5305 2.87309 11.8918 2.40804 11.1811 2.08087C10.4703 1.75369 9.70175 1.57089 8.91983 1.54307C8.13792 1.51526 7.3583 1.64298 6.62613 1.91882C5.89396 2.19467 5.22387 2.61315 4.65469 3.14999L1.65469 6.01999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"save"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.4247 15.24H2.69469C2.28625 15.24 1.89456 15.0777 1.60576 14.7889C1.31695 14.5001 1.15471 14.1084 1.15471 13.7V2.96999C1.1547 2.76823 1.19463 2.56845 1.27214 2.38217C1.34965 2.19588 1.46323 2.02677 1.60637 1.88457C1.7495 1.74236 1.91934 1.62987 2.10612 1.55357C2.29291 1.47727 2.49292 1.43867 2.69469 1.43999H11.1247L14.9547 5.26999V13.7C14.956 13.9018 14.9174 14.1018 14.8411 14.2886C14.7648 14.4754 14.6523 14.6452 14.5101 14.7883C14.3679 14.9315 14.1988 15.0451 14.0125 15.1226C13.8262 15.2001 13.6265 15.24 13.4247 15.24Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M11.8947 15.24V9.10999H4.22472V15.24",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M4.22472 1.43999V5.26999H10.3647",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"search"===this.props.name&&a.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.20346 12.17C8.29521 12.17 9.36247 11.8462 10.2702 11.2397C11.178 10.6332 11.8855 9.77105 12.3033 8.7624C12.7211 7.75375 12.8304 6.64387 12.6174 5.57309C12.4044 4.50232 11.8787 3.51875 11.1067 2.74676C10.3347 1.97478 9.35114 1.44905 8.28036 1.23606C7.20959 1.02307 6.09974 1.13238 5.09109 1.55018C4.08245 1.96797 3.22028 2.67548 2.61374 3.58324C2.00719 4.491 1.6835 5.55824 1.6835 6.64999C1.6835 8.11399 2.26506 9.51802 3.30026 10.5532C4.33546 11.5884 5.73947 12.17 7.20346 12.17V12.17Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M14.1035 13.59L11.1035 10.59",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"share"===this.props.name&&a.createElement("svg",{width:"15",height:"16",viewBox:"0 0 15 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M11.4733 5.58C12.6166 5.58 13.5434 4.65323 13.5434 3.51C13.5434 2.36677 12.6166 1.44 11.4733 1.44C10.3301 1.44 9.40335 2.36677 9.40335 3.51C9.40335 4.65323 10.3301 5.58 11.4733 5.58Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.19333 10.41C4.33656 10.41 5.26334 9.48323 5.26334 8.34C5.26334 7.19677 4.33656 6.27 3.19333 6.27C2.0501 6.27 1.12335 7.19677 1.12335 8.34C1.12335 9.48323 2.0501 10.41 3.19333 10.41Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M11.4733 15.24C12.6166 15.24 13.5434 14.3132 13.5434 13.17C13.5434 12.0268 12.6166 11.1 11.4733 11.1C10.3301 11.1 9.40335 12.0268 9.40335 13.17C9.40335 14.3132 10.3301 15.24 11.4733 15.24Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M4.98334 9.38L9.69333 12.13",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M9.69333 4.55L4.98334 7.3",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"star"===this.props.name&&a.createElement("svg",{width:"14",height:"13",viewBox:"0 0 14 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.30478 0.110001L9.32474 4.21L13.8548 4.87L10.5747 8.06L11.3548 12.57L7.30478 10.44L3.25479 12.57L4.03476 8.06L0.754791 4.87L5.28476 4.21L7.30478 0.110001Z",fill:"var(--icon-favorites-color)"})),"star-stroke"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M8 1.77L10.02 5.87L14.55 6.53L11.2699 9.72L12.05 14.23L8 12.1L3.95001 14.23L4.72998 9.72L1.45001 6.53L5.97998 5.87L8 1.77Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinejoin:"round"})),"switch"===this.props.name&&a.createElement("svg",{width:"18",height:"15",viewBox:"0 0 18 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M16.5154 10.8L13.7454 13.58L10.9753 10.8",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M9.58545 1.09999H10.9653C11.7009 1.09999 12.4065 1.39151 12.9276 1.9107C13.4487 2.42989 13.7427 3.13442 13.7454 3.86999V13.59",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.27539 3.87999L4.04541 1.09999L6.81543 3.87999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.19543 13.59H6.81543C6.45083 13.5913 6.08955 13.5206 5.75232 13.382C5.41509 13.2434 5.1085 13.0396 4.85022 12.7822C4.59194 12.5249 4.38702 12.2191 4.24719 11.8823C4.10736 11.5456 4.0354 11.1846 4.0354 10.82V1.12",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"theme-dark"===this.props.name&&a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.14 7.31001C13.0365 8.40623 12.6232 9.45037 11.9483 10.3204C11.2734 11.1904 10.3648 11.8503 9.32868 12.2229C8.29257 12.5956 7.17169 12.6656 6.09724 12.4248C5.02279 12.1841 4.03916 11.6424 3.26118 10.8632C2.4832 10.084 1.94314 9.09942 1.70405 8.02459C1.46497 6.94976 1.53678 5.82909 1.91108 4.79356C2.28539 3.75804 2.94664 2.85046 3.8177 2.17692C4.68876 1.50337 5.73364 1.09169 6.83003 0.990005C6.19481 1.86018 5.8913 2.92863 5.97419 4.0028C6.05709 5.07697 6.52085 6.08621 7.28205 6.84863C8.04326 7.61104 9.05177 8.07648 10.1258 8.16107C11.1998 8.24567 12.2688 7.94385 13.14 7.31001V7.31001Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"theme-light"===this.props.name&&a.createElement("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M8.47571 11.23C10.2541 11.23 11.6957 9.78835 11.6957 8.00999C11.6957 6.23164 10.2541 4.78999 8.47571 4.78999C6.69735 4.78999 5.25574 6.23164 5.25574 8.00999C5.25574 9.78835 6.69735 11.23 8.47571 11.23Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.47571 0.919998V2.21",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.47571 13.82V15.11",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.45569 3L4.37573 3.91",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M12.5757 12.11L13.4857 13.03",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.37573 8.00999H2.66577",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M14.2758 8.00999H15.5657",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.45569 13.03L4.37573 12.11",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M12.5757 3.91L13.4857 3",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"trash"===this.props.name&&a.createElement("svg",{width:"15",height:"16",viewBox:"0 0 15 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M1.30994 4.2H13.6899",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M4.75995 4.19999V2.81999C4.75806 2.63438 4.79335 2.45026 4.86377 2.27851C4.93419 2.10676 5.03829 1.95085 5.16994 1.81999C5.30095 1.68922 5.45711 1.58635 5.62898 1.5176C5.80086 1.44885 5.98488 1.41565 6.16994 1.41999H8.92995C9.11154 1.41866 9.29158 1.45345 9.45961 1.52233C9.62764 1.59121 9.78031 1.69281 9.90872 1.82122C10.0371 1.94963 10.1387 2.10229 10.2076 2.27032C10.2765 2.43835 10.3113 2.6184 10.3099 2.79999V4.17999L4.75995 4.19999ZM12.3799 4.17999V13.84C12.3843 14.0251 12.3511 14.2091 12.2823 14.3809C12.2136 14.5528 12.1107 14.709 11.9799 14.84C11.8491 14.9716 11.6932 15.0758 11.5214 15.1462C11.3497 15.2166 11.1656 15.2519 10.9799 15.25H4.07994C3.7121 15.2474 3.36007 15.1001 3.09996 14.84C2.83985 14.5799 2.69256 14.2278 2.68994 13.86V4.19999L12.3799 4.17999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M6.13995 7.64999V11.79",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.89996 7.64999V11.79",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"txt"===this.props.name&&a.createElement("svg",{width:"17",height:"12",viewBox:"0 0 17 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M12.0753 4.78H0.875366",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M15.2754 1.58H0.875366",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M15.2754 7.98H0.875366",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M12.0753 11.18H0.875366",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"upload-a"===this.props.name&&a.createElement("svg",{width:"17",height:"15",viewBox:"0 0 17 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M10.7482 9.98L8.10822 7.34L5.4682 9.98",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.10822 7.34V13.28",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M13.6383 11.59C14.2828 11.24 14.7924 10.6853 15.0865 10.0134C15.3807 9.34158 15.4426 8.59089 15.2626 7.87992C15.0825 7.16895 14.6707 6.53821 14.0923 6.08732C13.5138 5.63642 12.8018 5.39107 12.0684 5.39H11.2283C11.0717 4.70118 10.7786 4.05078 10.3661 3.47732C9.95362 2.90385 9.43025 2.41898 8.82702 2.05142C8.22379 1.68385 7.553 1.44107 6.85425 1.33744C6.1555 1.23382 5.44297 1.27145 4.75903 1.44813C4.07509 1.6248 3.43358 1.93692 2.87243 2.366C2.31129 2.79507 1.84193 3.33239 1.49219 3.94612C1.14244 4.55985 0.919424 5.23753 0.836302 5.93901C0.753179 6.6405 0.811675 7.35153 1.0083 8.03C1.21212 8.83805 1.60647 9.58555 2.15832 10.21",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.7482 9.98L8.10822 7.34L5.4682 9.98",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"upload"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M15.1234 10.64V13.7C15.1234 14.1067 14.9625 14.4969 14.6758 14.7854C14.3892 15.0739 14.0001 15.2374 13.5934 15.24H2.85333C2.44663 15.2374 2.05752 15.0739 1.77087 14.7854C1.48423 14.4969 1.32333 14.1067 1.32333 13.7V10.64",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M12.0634 5.27L8.22336 1.44L4.39334 5.27",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.22336 1.44V10.64",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"user"===this.props.name&&a.createElement("svg",{width:"13",height:"15",viewBox:"0 0 13 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M11.9329 13.59V12.17C11.9305 11.4474 11.6458 10.7543 11.1395 10.2386C10.6332 9.72301 9.94542 9.42564 9.22295 9.40999H3.70296C3.34014 9.40867 2.98065 9.47915 2.64519 9.61739C2.30974 9.75562 2.00495 9.95887 1.7484 10.2154C1.49185 10.472 1.28858 10.7768 1.15035 11.1122C1.01211 11.4477 0.941629 11.8072 0.94295 12.17V13.59",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M6.41296 6.64999C6.95884 6.64999 7.49247 6.48812 7.94635 6.18485C8.40023 5.88157 8.75396 5.45052 8.96286 4.9462C9.17176 4.44187 9.22643 3.88693 9.11993 3.35154C9.01344 2.81615 8.75056 2.32437 8.36456 1.93838C7.97857 1.55238 7.4868 1.28952 6.95142 1.18302C6.41603 1.07653 5.86107 1.13118 5.35675 1.34008C4.85243 1.54898 4.42138 1.90274 4.1181 2.35662C3.81483 2.8105 3.65295 3.34411 3.65295 3.88999C3.65559 4.62118 3.94723 5.32166 4.46426 5.83869C4.98129 6.35572 5.68178 6.64736 6.41296 6.64999V6.64999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"users"===this.props.name&&a.createElement("svg",{width:"18",height:"15",viewBox:"0 0 18 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M12.1038 13.59V12.17C12.1124 11.799 12.0449 11.4302 11.9056 11.0862C11.7663 10.7423 11.5581 10.4305 11.2938 10.17C11.0319 9.90758 10.7199 9.70061 10.3763 9.56145C10.0326 9.42228 9.66448 9.35376 9.2938 9.35999H3.77378C3.04963 9.38607 2.36453 9.69487 1.8654 10.2202C1.36627 10.7455 1.09287 11.4455 1.1038 12.17V13.59",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M6.6138 6.64999C7.15968 6.64999 7.69331 6.48812 8.14719 6.18485C8.60107 5.88157 8.95483 5.45052 9.16373 4.9462C9.37262 4.44187 9.42727 3.88693 9.32077 3.35154C9.21428 2.81615 8.95139 2.32437 8.5654 1.93838C8.17941 1.55238 7.68764 1.28952 7.15225 1.18302C6.61686 1.07653 6.06191 1.13118 5.55759 1.34008C5.05326 1.54898 4.62221 1.90274 4.31894 2.35662C4.01567 2.8105 3.85379 3.34411 3.85379 3.88999C3.85643 4.62118 4.14804 5.32166 4.66507 5.83869C5.1821 6.35572 5.88261 6.64736 6.6138 6.64999V6.64999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M16.2738 13.59V12.17C16.2709 11.5583 16.0672 10.9645 15.6938 10.48C15.324 9.98829 14.7989 9.63591 14.2038 9.48",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M11.4438 1.22C12.0403 1.37297 12.5662 1.72595 12.9338 2.22C13.3101 2.703 13.5144 3.29774 13.5144 3.91C13.5144 4.52226 13.3101 5.117 12.9338 5.6C12.5662 6.09405 12.0403 6.44703 11.4438 6.6",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"video"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.6053 1.59H3.04523C2.23337 1.59 1.57526 2.24814 1.57526 3.06V13.62C1.57526 14.4319 2.23337 15.09 3.04523 15.09H13.6053C14.4171 15.09 15.0753 14.4319 15.0753 13.62V3.06C15.0753 2.24814 14.4171 1.59 13.6053 1.59Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M4.94525 1.59V15.09",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M11.6953 1.59V15.09",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.57526 8.34H15.0753",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.57526 4.97H4.94525",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.57526 11.71H4.94525",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M11.6953 11.71H15.0753",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M11.6953 4.97H15.0753",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"warning"===this.props.name&&a.createElement("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.04506 1.94L1.39504 11.38C1.30734 11.5316 1.25039 11.699 1.22756 11.8726C1.20473 12.0462 1.21645 12.2227 1.26198 12.3918C1.30751 12.5609 1.38602 12.7193 1.49294 12.858C1.59986 12.9967 1.73308 13.1129 1.88503 13.2C2.08111 13.3184 2.30599 13.3807 2.53505 13.38H13.845C14.0205 13.3787 14.1941 13.3427 14.3556 13.274C14.5171 13.2053 14.6634 13.1054 14.7862 12.9799C14.9089 12.8544 15.0055 12.7058 15.0706 12.5428C15.1356 12.3798 15.1677 12.2055 15.1651 12.03C15.1657 11.8009 15.1034 11.5761 14.985 11.38L9.33498 1.94C9.2446 1.78868 9.12507 1.65685 8.98329 1.55214C8.84152 1.44744 8.68038 1.37195 8.50917 1.33008C8.33797 1.28821 8.1602 1.28079 7.9861 1.30824C7.812 1.33569 7.64503 1.39748 7.49501 1.49C7.312 1.60289 7.15795 1.75699 7.04506 1.94V1.94Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.1951 5.37V8.04",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.1951 10.71H8.20511",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"chevron-left"===this.props.name&&a.createElement("svg",{width:"7",height:"12",viewBox:"0 0 7 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M5.76616 10.805L0.936157 5.975L5.76616 1.145",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"chevron-right"===this.props.name&&a.createElement("svg",{width:"7",height:"12",viewBox:"0 0 7 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M0.766174 1.145L5.59618 5.975L0.766174 10.805",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"cog"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M12.7254 6.42L12.4355 5.7C12.3855 5.13 13.5555 3.92 13.3255 3.7L12.7654 3.13C12.7654 3.13 12.4354 2.80999 12.2054 2.56999C11.9754 2.32999 10.7554 3.57 10.2054 3.47L9.49545 3.17C9.05545 2.8 9.02545 1.11 8.69545 1.11H7.12544C6.79544 1.11 6.77545 2.8 6.33545 3.17L5.61545 3.47C5.05545 3.52 3.84545 2.33999 3.61545 2.56999C3.38545 2.79999 3.05545 3.13 3.05545 3.13L2.49545 3.7C2.25545 3.93 3.43545 5.14 3.38545 5.7L3.08545 6.42C2.72545 6.85 1.08545 6.88001 1.08545 7.21001V8.8C1.08545 9.13 2.77545 9.15 3.08545 9.59L3.38545 10.31C3.38545 10.87 2.25545 12.09 2.49545 12.31L3.05545 12.87L3.61545 13.43C3.85545 13.67 5.06545 12.49 5.61545 12.54L6.33545 12.84C6.77545 13.2 6.79544 14.84 7.12544 14.84H8.72545C9.05545 14.84 9.08545 13.15 9.52545 12.84L10.2354 12.54C10.8054 12.54 12.0154 13.67 12.2354 13.43L12.7955 12.87L13.3555 12.31C13.5855 12.08 12.4155 10.86 12.4655 10.31L12.7254 9.64C13.0954 9.2 14.7854 9.18001 14.7854 8.85001V7.25999C14.8254 6.87999 13.1354 6.85 12.7254 6.42ZM7.88545 10.19C7.45189 10.192 7.02749 10.0652 6.66603 9.82579C6.30457 9.58636 6.02233 9.24502 5.85504 8.84503C5.68775 8.44504 5.64295 8.00439 5.72632 7.57892C5.80969 7.15344 6.01747 6.76228 6.32335 6.455C6.62922 6.14772 7.01941 5.93816 7.4445 5.85284C7.86959 5.76753 8.31044 5.81031 8.7112 5.97577C9.11195 6.14123 9.45458 6.42192 9.69566 6.78227C9.93675 7.14263 10.0654 7.56643 10.0654 8C10.0656 8.57226 9.84174 9.12185 9.44179 9.53114C9.04184 9.94044 8.49756 10.1769 7.92545 10.19H7.88545Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"contrast"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M8.30612 14.875C9.67081 14.875 11.0049 14.4703 12.1396 13.7121C13.2743 12.954 14.1587 11.8763 14.6809 10.6155C15.2032 9.35471 15.3398 7.96734 15.0735 6.62888C14.8073 5.29041 14.1502 4.06094 13.1852 3.09596C12.2202 2.13098 10.9907 1.47382 9.65225 1.20758C8.31378 0.941342 6.92643 1.07799 5.66562 1.60023C4.40481 2.12248 3.32718 3.00687 2.569 4.14157C1.81082 5.27627 1.40613 6.61031 1.40613 7.97501C1.40613 9.805 2.13309 11.56 3.42709 12.854C4.72109 14.1481 6.47613 14.875 8.30612 14.875V14.875Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.30612 1.07501C6.47613 1.07501 4.72109 1.80196 3.42709 3.09596C2.13309 4.38996 1.40613 6.14501 1.40613 7.97501C1.40613 9.805 2.13309 11.56 3.42709 12.854C4.72109 14.1481 6.47613 14.875 8.30612 14.875V1.07501Z",fill:"var(--icon-color)",stroke:"none"})),"copy-to-clipboard-2"===this.props.name&&a.createElement("svg",{width:"14",height:"16",viewBox:"0 0 14 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M11.0061 2.55C11.3774 2.55 11.7335 2.6975 11.9961 2.96005C12.2586 3.2226 12.4061 3.57869 12.4061 3.95V13.75C12.4061 14.1213 12.2586 14.4774 11.9961 14.7399C11.7335 15.0025 11.3774 15.15 11.0061 15.15H2.60611C2.23481 15.15 1.87872 15.0025 1.61617 14.7399C1.35361 14.4774 1.20612 14.1213 1.20612 13.75V3.95C1.20612 3.57869 1.35361 3.2226 1.61617 2.96005C1.87872 2.6975 2.23481 2.55 2.60611 2.55",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.9061 2.22H8.2261C8.2261 1.84339 8.0765 1.48221 7.8102 1.21591C7.54389 0.94961 7.18271 0.800003 6.80611 0.800003C6.4295 0.800003 6.0683 0.94961 5.802 1.21591C5.5357 1.48221 5.38611 1.84339 5.38611 2.22H4.7061C4.52045 2.22 4.3424 2.29374 4.21112 2.42502C4.07985 2.55629 4.0061 2.73435 4.0061 2.92V3.62C4.0061 3.80565 4.07985 3.9837 4.21112 4.11497C4.3424 4.24625 4.52045 4.32001 4.7061 4.32001H8.9061C9.09175 4.32001 9.26979 4.24625 9.40106 4.11497C9.53234 3.9837 9.60611 3.80565 9.60611 3.62V2.92C9.60611 2.73435 9.53234 2.55629 9.40106 2.42502C9.26979 2.29374 9.09175 2.22 8.9061 2.22Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"home-1"===this.props.name&&a.createElement("svg",{width:"15",height:"16",viewBox:"0 0 15 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.54611 0.934998L1.20612 5.86499V13.605C1.20873 13.9781 1.35812 14.3353 1.62198 14.5991C1.88584 14.863 2.24297 15.0124 2.61612 15.015H5.61612V8.755H9.52612V15.015H12.5261C12.8985 15.0098 13.2541 14.8596 13.5174 14.5963C13.7807 14.333 13.931 13.9773 13.9361 13.605V5.86499L7.54611 0.934998Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"home"===this.props.name&&a.createElement("svg",{width:"13",height:"14",viewBox:"0 0 13 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M6.56547 0.764991L0.975466 5.115V11.945C0.974867 12.2743 1.10424 12.5905 1.33547 12.825C1.57112 13.0544 1.88658 13.1835 2.21546 13.185H4.83547V7.665H8.28546V13.185H10.9055C11.2348 13.1856 11.551 13.0562 11.7855 12.825C11.9031 12.7107 11.9965 12.5739 12.0601 12.4227C12.1237 12.2715 12.1561 12.109 12.1555 11.945V5.115L6.56547 0.764991Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"key"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M4.96613 14.385C6.75553 14.385 8.20613 12.9344 8.20613 11.145C8.20613 9.3556 6.75553 7.905 4.96613 7.905C3.17672 7.905 1.72614 9.3556 1.72614 11.145C1.72614 12.9344 3.17672 14.385 4.96613 14.385Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M14.5461 1.565L7.2561 8.845",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M13.3461 5.735L15.2061 3.875",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"lock-open"===this.props.name&&a.createElement("svg",{width:"12",height:"16",viewBox:"0 0 12 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M10.3155 7.4H1.73545C1.31019 7.4 0.965454 7.74475 0.965454 8.17001V14.23C0.965454 14.6553 1.31019 15 1.73545 15H10.3155C10.7407 15 11.0854 14.6553 11.0854 14.23V8.17001C11.0854 7.74475 10.7407 7.4 10.3155 7.4Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinejoin:"round"}),a.createElement("path",{d:"M2.57545 7.4V4.4C2.57413 3.94657 2.66246 3.49735 2.83537 3.07818C3.00828 2.65901 3.26237 2.27817 3.58299 1.95754C3.90362 1.63692 4.28446 1.38283 4.70363 1.20992C5.1228 1.03701 5.57202 0.948684 6.02545 0.950004C6.84173 0.948607 7.6319 1.23752 8.25476 1.76511C8.87762 2.29271 9.29256 3.02462 9.42545 3.83001",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"lock"===this.props.name&&a.createElement("svg",{width:"12",height:"16",viewBox:"0 0 12 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M10.2155 7.41H1.90546C1.49124 7.41 1.15546 7.74579 1.15546 8.16V14.03C1.15546 14.4442 1.49124 14.78 1.90546 14.78H10.2155C10.6297 14.78 10.9655 14.4442 10.9655 14.03V8.16C10.9655 7.74579 10.6297 7.41 10.2155 7.41Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinejoin:"round"}),a.createElement("path",{d:"M2.72546 7.39999V4.52C2.72546 3.63153 3.07841 2.77945 3.70666 2.1512C4.3349 1.52295 5.18699 1.17 6.07546 1.17V1.17C6.96394 1.17 7.81603 1.52295 8.44427 2.1512C9.07252 2.77945 9.42546 3.63153 9.42546 4.52V7.39999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"settings"===this.props.name&&a.createElement("svg",{width:"13",height:"16",viewBox:"0 0 13 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M0.786133 3.105H3.55614",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M5.98615 3.105H11.7262",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M0.786133 7.97501H8.09613",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.5361 7.97501H11.7261",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M0.786133 12.835H3.82614",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M6.2561 12.835H11.7261",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.55615 1.285V4.935",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.09613 6.145V9.795",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.82617 11.015V14.665",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"tag"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.62 8.39256L14.93 4.53256C14.9802 4.38718 14.989 4.23071 14.9554 4.08062C14.9219 3.93053 14.8473 3.79272 14.74 3.68255L12.38 1.32255C12.2698 1.21524 12.132 1.14064 11.9819 1.10709C11.8318 1.07354 11.6754 1.08236 11.53 1.13255L7.66999 2.44256C7.54938 2.48377 7.43989 2.5522 7.34999 2.64256L1.43999 8.62255C1.3638 8.6987 1.30335 8.78912 1.26211 8.88863C1.22087 8.98815 1.19965 9.09483 1.19965 9.20255C1.19965 9.31028 1.22087 9.41694 1.26211 9.51646C1.30335 9.61598 1.3638 9.70641 1.43999 9.78256L6.34999 14.6226C6.42614 14.6987 6.51656 14.7592 6.61608 14.8004C6.7156 14.8417 6.82227 14.8629 6.92999 14.8629C7.03772 14.8629 7.14439 14.8417 7.2439 14.8004C7.34342 14.7592 7.43384 14.6987 7.50999 14.6226L13.44 8.69256C13.5206 8.60648 13.582 8.50421 13.62 8.39256V8.39256Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M11.78 5.34255C12.3433 5.34255 12.8 4.88588 12.8 4.32255C12.8 3.75922 12.3433 3.30256 11.78 3.30256C11.2167 3.30256 10.76 3.75922 10.76 4.32255C10.76 4.88588 11.2167 5.34255 11.78 5.34255Z",fill:"var(--icon-color)",stroke:"none"})),"2-columns-narrow-right"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.4927 1.01001H2.75269C1.90769 1.01001 1.22266 1.69501 1.22266 2.54001V13.28C1.22266 14.125 1.90769 14.81 2.75269 14.81H13.4927C14.3377 14.81 15.0226 14.125 15.0226 13.28V2.54001C15.0226 1.69501 14.3377 1.01001 13.4927 1.01001Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.4227 1.01001V14.81",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"2+2-columns"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.0927 1.01001H2.35266C1.50767 1.01001 0.822693 1.69501 0.822693 2.54001V13.28C0.822693 14.125 1.50767 14.81 2.35266 14.81H13.0927C13.9376 14.81 14.6227 14.125 14.6227 13.28V2.54001C14.6227 1.69501 13.9376 1.01001 13.0927 1.01001Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.0226 1.01001V7.91",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M5.35266 7.91V14.81",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M14.6227 7.91H0.822693",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"3+1-columns"===this.props.name&&a.createElement("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.2927 1.66H2.55267C1.70768 1.66 1.02264 2.34501 1.02264 3.19V13.93C1.02264 14.775 1.70768 15.46 2.55267 15.46H13.2927C14.1377 15.46 14.8227 14.775 14.8227 13.93V3.19C14.8227 2.34501 14.1377 1.66 13.2927 1.66Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M5.62268 1.66V6.51999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.2227 1.66V6.51999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M14.8227 6.51999H1.02264",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"bug"===this.props.name&&a.createElement("svg",{width:"15",height:"16",viewBox:"0 0 15 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.73268 5.40999C8.15113 5.40867 8.56568 5.48993 8.95265 5.64916C9.33962 5.80838 9.6914 6.04242 9.98775 6.33785C10.2841 6.63327 10.5192 6.98427 10.6796 7.37074C10.8401 7.75721 10.9227 8.17154 10.9227 8.58998V9.98998C10.9227 10.836 10.5866 11.6474 9.98836 12.2457C9.39012 12.8439 8.57872 13.18 7.73268 13.18C7.31424 13.18 6.89991 13.0974 6.51344 12.937C6.12697 12.7765 5.77597 12.5414 5.48055 12.245C5.18512 11.9487 4.95111 11.5969 4.79189 11.21C4.63267 10.823 4.55137 10.4084 4.55269 9.98998V8.58998C4.55269 7.74659 4.88772 6.93775 5.48409 6.34139C6.08045 5.74502 6.88929 5.40999 7.73268 5.40999V5.40999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M5.74268 5.41V4.69C5.74268 4.2577 5.91441 3.8431 6.22009 3.53741C6.52578 3.23173 6.94038 3.06 7.37268 3.06H8.09265C8.52495 3.06 8.93955 3.23173 9.24524 3.53741C9.55092 3.8431 9.72266 4.2577 9.72266 4.69V5.41",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M6.06268 1.45999C6.99268 1.64999 7.61268 2.11999 7.62268 2.64999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M9.40265 1.45999C8.47265 1.64999 7.85265 2.11999 7.84265 2.64999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.8627 7.95999L13.5427 6.51001L12.5427 4.31",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.9227 9.29999H13.0226L14.1627 11.8",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.5427 11.51L12.0126 12.78L10.5427 14.91",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M4.52264 7.95999L1.84265 6.51001L2.84265 4.31",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M4.46265 9.29999H2.36267L1.22266 11.8",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M4.84265 11.51L3.36267 12.78L4.84265 14.91",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"cloud"===this.props.name&&a.createElement("svg",{width:"17",height:"13",viewBox:"0 0 17 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M12.2073 5.06497H11.3573C11.1192 4.10573 10.616 3.2328 9.90537 2.54587C9.19474 1.85894 8.30523 1.38569 7.33847 1.18018C6.3717 0.974661 5.36663 1.04515 4.43801 1.38361C3.5094 1.72206 2.69467 2.31484 2.08688 3.09424C1.47909 3.87364 1.10273 4.80825 1.00077 5.79135C0.898818 6.77445 1.07538 7.76642 1.51029 8.65396C1.94521 9.5415 2.62095 10.2889 3.46035 10.8107C4.29975 11.3325 5.26897 11.6077 6.25733 11.605H12.2073C13.0746 11.605 13.9063 11.2605 14.5196 10.6472C15.1328 10.034 15.4773 9.20222 15.4773 8.33496C15.4773 7.4677 15.1328 6.63598 14.5196 6.02274C13.9063 5.40949 13.0746 5.06497 12.2073 5.06497V5.06497Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"columns-caret-left"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.6927 1.01001H2.9527C2.1077 1.01001 1.42267 1.69501 1.42267 2.54001V13.28C1.42267 14.125 2.1077 14.81 2.9527 14.81H13.6927C14.5377 14.81 15.2227 14.125 15.2227 13.28V2.54001C15.2227 1.69501 14.5377 1.01001 13.6927 1.01001Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M6.02271 1.01001V14.81",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M11.9327 5.59L9.61267 7.91L11.9327 10.23",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"columns-caret-right"===this.props.name&&a.createElement("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.8927 1.01001H3.15265C2.30765 1.01001 1.62268 1.69501 1.62268 2.54001V13.28C1.62268 14.125 2.30765 14.81 3.15265 14.81H13.8927C14.7377 14.81 15.4227 14.125 15.4227 13.28V2.54001C15.4227 1.69501 14.7377 1.01001 13.8927 1.01001Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M6.22266 1.01001V14.81",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M9.81268 10.23L12.1327 7.91L9.81268 5.59",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"columns-narrow-left"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.6927 1.01001H2.95267C2.10767 1.01001 1.42267 1.69501 1.42267 2.54001V13.28C1.42267 14.125 2.10767 14.81 2.95267 14.81H13.6927C14.5377 14.81 15.2227 14.125 15.2227 13.28V2.54001C15.2227 1.69501 14.5377 1.01001 13.6927 1.01001Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M6.02264 1.01001V14.81",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"columns"===this.props.name&&a.createElement("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M13.8926 1.66H3.15265C2.30765 1.66 1.62265 2.34501 1.62265 3.19V13.93C1.62265 14.775 2.30765 15.46 3.15265 15.46H13.8926C14.7376 15.46 15.4227 14.775 15.4227 13.93V3.19C15.4227 2.34501 14.7376 1.66 13.8926 1.66Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M6.22266 1.66V15.46",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.8227 1.66V15.46",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"dashboard-2"===this.props.name&&a.createElement("svg",{width:"17",height:"13",viewBox:"0 0 17 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M14.1126 3.82999C15.0921 5.06821 15.6243 6.6012 15.6227 8.17999C15.6218 9.26541 15.3721 10.3362 14.8927 11.31",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M2.20267 11.28C1.72784 10.3157 1.48147 9.25491 1.48267 8.18001C1.48722 7.09544 1.74051 6.02639 2.22309 5.0551C2.70566 4.0838 3.40465 3.23616 4.26624 2.57741C5.12783 1.91865 6.12907 1.46634 7.19291 1.25529C8.25675 1.04424 9.35483 1.08005 10.4027 1.36",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.55267 8.17999L12.4326 2.34",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M15.6227 8.17999H14.0527",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.55267 1.12V2.69",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.56262 3.19L4.67264 4.29999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.49268 8.17999H3.06268",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"dice"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.14615 5.29L1.81615 6.97C1.50297 7.07105 1.24229 7.29153 1.09065 7.58358C0.939009 7.87563 0.908637 8.2157 1.00615 8.52999L2.68616 13.86C2.78515 14.175 3.00477 14.4381 3.29706 14.5917C3.58934 14.7453 3.93054 14.7771 4.24615 14.68L9.57616 13C9.73199 12.9511 9.87662 12.8719 10.0018 12.7669C10.1269 12.6619 10.23 12.5333 10.3053 12.3883C10.3806 12.2433 10.4265 12.0849 10.4403 11.9222C10.4542 11.7595 10.4358 11.5956 10.3862 11.44L8.70616 6.1C8.60511 5.78683 8.38463 5.52612 8.09257 5.37448C7.80052 5.22283 7.46044 5.19249 7.14615 5.29V5.29Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M11.6762 10.09C11.8345 10.1286 11.9988 10.1353 12.1597 10.1098C12.3207 10.0843 12.4749 10.0271 12.6135 9.94154C12.7521 9.85595 12.8724 9.74366 12.9673 9.61122C13.0621 9.47877 13.1297 9.32879 13.1662 9.17L14.4562 3.72001C14.5313 3.40046 14.4766 3.06417 14.3041 2.78486C14.1317 2.50556 13.8555 2.30603 13.5362 2.23002L8.09618 0.940016C7.77417 0.867702 7.43664 0.924619 7.15614 1.09852C6.87565 1.27243 6.67459 1.54943 6.59618 1.87001L6.13617 3.87001",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.43617 9.62C3.878 9.62 4.23618 9.26184 4.23618 8.82001C4.23618 8.37818 3.878 8.01999 3.43617 8.01999C2.99434 8.01999 2.63617 8.37818 2.63617 8.82001C2.63617 9.26184 2.99434 9.62 3.43617 9.62Z",fill:"var(--icon-color)",stroke:"none"}),a.createElement("path",{d:"M6.88617 8.51999C7.328 8.51999 7.68617 8.16183 7.68617 7.72C7.68617 7.27817 7.328 6.92001 6.88617 6.92001C6.44434 6.92001 6.08618 7.27817 6.08618 7.72C6.08618 8.16183 6.44434 8.51999 6.88617 8.51999Z",fill:"var(--icon-color)",stroke:"none"}),a.createElement("path",{d:"M5.69617 10.79C6.13799 10.79 6.49617 10.4318 6.49617 9.98999C6.49617 9.54816 6.13799 9.19 5.69617 9.19C5.25434 9.19 4.89618 9.54816 4.89618 9.98999C4.89618 10.4318 5.25434 10.79 5.69617 10.79Z",fill:"var(--icon-color)",stroke:"none"}),a.createElement("path",{d:"M4.52618 13.05C4.96801 13.05 5.32619 12.6918 5.32619 12.25C5.32619 11.8082 4.96801 11.45 4.52618 11.45C4.08436 11.45 3.7262 11.8082 3.7262 12.25C3.7262 12.6918 4.08436 13.05 4.52618 13.05Z",fill:"var(--icon-color)",stroke:"none"}),a.createElement("path",{d:"M7.96614 11.97C8.40797 11.97 8.76614 11.6118 8.76614 11.17C8.76614 10.7282 8.40797 10.37 7.96614 10.37C7.52431 10.37 7.16614 10.7282 7.16614 11.17C7.16614 11.6118 7.52431 11.97 7.96614 11.97Z",fill:"var(--icon-color)",stroke:"none"}),a.createElement("path",{d:"M11.2362 8.48999C11.678 8.48999 12.0362 8.13183 12.0362 7.69C12.0362 7.24817 11.678 6.89001 11.2362 6.89001C10.7943 6.89001 10.4362 7.24817 10.4362 7.69C10.4362 8.13183 10.7943 8.48999 11.2362 8.48999Z",fill:"var(--icon-color)",stroke:"none"}),a.createElement("path",{d:"M8.54616 4.14001C8.98799 4.14001 9.34616 3.78182 9.34616 3.34C9.34616 2.89817 8.98799 2.54001 8.54616 2.54001C8.10433 2.54001 7.74615 2.89817 7.74615 3.34C7.74615 3.78182 8.10433 4.14001 8.54616 4.14001Z",fill:"var(--icon-color)",stroke:"none"})),"face-ID"===this.props.name&&a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M1.35001 5.07001V2.51001C1.34869 2.33845 1.38134 2.16831 1.44608 2.00943C1.51082 1.85055 1.60637 1.70607 1.72722 1.58429C1.84807 1.46251 1.99183 1.36585 2.15021 1.2999C2.30859 1.23394 2.47845 1.19998 2.65002 1.19998H4.95001",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.72 1.19998H13.29C13.4616 1.19998 13.6315 1.23394 13.7898 1.2999C13.9482 1.36585 14.092 1.46251 14.2128 1.58429C14.3337 1.70607 14.4292 1.85055 14.494 2.00943C14.5587 2.16831 14.5913 2.33845 14.59 2.51001V4.79999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M14.59 10.59V13.16C14.59 13.5057 14.4534 13.8374 14.2098 14.0828C13.9663 14.3282 13.6357 14.4674 13.29 14.47H10.99",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M5.22 14.45H2.67C2.3243 14.4473 1.99366 14.3082 1.75014 14.0628C1.50663 13.8174 1.36999 13.4857 1.37 13.14V10.84",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M4.94 5.53V7.13",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M11.01 5.53V7.13",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M7.97 5.39999V8.23999C7.97002 8.38679 7.9124 8.52774 7.80953 8.63248C7.70666 8.73721 7.56678 8.79737 7.42 8.79999H7.31",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.1 10.28C9.49291 10.8839 8.67138 11.223 7.81503 11.223C6.95867 11.223 6.13715 10.8839 5.53003 10.28",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"fingerprint"===this.props.name&&a.createElement("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M8.68002 16C7.83861 15.3719 7.15609 14.5553 6.68721 13.6158C6.21833 12.6763 5.97612 11.64 5.98003 10.59C6.01806 10.0205 6.27111 9.48669 6.68794 9.09676C7.10478 8.70683 7.65424 8.48989 8.22502 8.48989C8.79581 8.48989 9.34526 8.70683 9.7621 9.09676C10.1789 9.48669 10.432 10.0205 10.47 10.59C10.47 10.8841 10.528 11.1754 10.6405 11.4472C10.7531 11.719 10.9181 11.9659 11.1261 12.1739C11.3341 12.3819 11.581 12.5469 11.8528 12.6595C12.1246 12.772 12.4159 12.83 12.71 12.83C13.0042 12.83 13.2955 12.772 13.5672 12.6595C13.839 12.5469 14.0859 12.3819 14.2939 12.1739C14.5019 11.9659 14.6669 11.719 14.7795 11.4472C14.8921 11.1754 14.95 10.8841 14.95 10.59C14.9417 8.90033 14.2971 7.27584 13.1447 6.04012C11.9923 4.8044 10.4167 4.04814 8.73169 3.92202C7.04672 3.7959 5.37609 4.30918 4.05258 5.35958C2.72907 6.40997 1.84984 7.9204 1.59003 9.58998",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M12.6801 10.59C12.6801 9.39652 12.2059 8.25193 11.362 7.40802C10.5181 6.56411 9.37353 6.09 8.18005 6.09C6.98658 6.09 5.84198 6.56411 4.99807 7.40802C4.15416 8.25193 3.68005 9.39652 3.68005 10.59C3.67942 12.0766 4.04704 13.5402 4.75005 14.85",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M3.52002 2.98998C5.11912 2.00811 6.98513 1.55064 8.85704 1.68153C10.7289 1.81242 12.5131 2.52514 13.96 3.71999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M8.22003 10.59C8.2202 11.6349 8.58483 12.6471 9.2511 13.4521C9.91736 14.2571 10.8435 14.8045 11.87 15",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeMiterlimit:"10",strokeLinecap:"round"})),"folder-root"===this.props.name&&a.createElement("svg",{width:"15",height:"13",viewBox:"0 0 15 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M14 10.7744C14.0001 10.9354 13.9668 11.0948 13.9022 11.2436C13.8375 11.3923 13.7427 11.5275 13.6232 11.6413C13.3765 11.8699 13.0463 11.9985 12.7021 12H2.29791C1.95367 11.9985 1.62347 11.8699 1.37681 11.6413C1.25728 11.5275 1.16248 11.3923 1.09782 11.2436C1.03317 11.0948 0.999929 10.9354 1 10.7744V2.22555C0.999929 2.06459 1.03317 1.90517 1.09782 1.75643C1.16248 1.6077 1.25728 1.47257 1.37681 1.35871C1.62347 1.13012 1.95367 1.00152 2.29791 1H5.55314L6.85105 2.83333H12.7021C13.0463 2.83485 13.3765 2.96345 13.6232 3.19204C13.7427 3.30589 13.8375 3.44106 13.9022 3.58979C13.9668 3.73853 14.0001 3.89792 14 4.05888V10.7744Z",fill:"var(--icon-background-color)",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M7.49995 4.91578L4.25519 7.26721V10.9937C4.25519 11.1733 4.33018 11.3457 4.46366 11.4727C4.59714 11.5998 4.77817 11.6712 4.96694 11.6712H6.46372V8.68208H8.45245V11.6712H9.9597C10.0532 11.6715 10.1458 11.6541 10.232 11.6199C10.3183 11.5856 10.3965 11.5353 10.4621 11.4719C10.5938 11.344 10.6688 11.1727 10.6715 10.9937V7.26721L7.49995 4.91578Z",fill:"var(--icon-color)",stroke:"none"})),"folder-shared"===this.props.name&&a.createElement("svg",{width:"15",height:"13",viewBox:"0 0 15 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M14 10.7744C14.0001 10.9354 13.9668 11.0948 13.9022 11.2436C13.8375 11.3923 13.7427 11.5275 13.6232 11.6413C13.3765 11.8699 13.0463 11.9985 12.7021 12H2.2979C1.95366 11.9985 1.62347 11.8699 1.37681 11.6413C1.25728 11.5275 1.16248 11.3923 1.09782 11.2436C1.03317 11.0948 0.999929 10.9354 1 10.7744V2.22555C0.999929 2.06459 1.03317 1.90517 1.09782 1.75643C1.16248 1.6077 1.25728 1.47256 1.37681 1.35871C1.62347 1.13012 1.95366 1.00152 2.2979 1H5.55314L6.85104 2.83333H12.7021C13.0463 2.83485 13.3765 2.96345 13.6232 3.19204C13.7427 3.30589 13.8375 3.44106 13.9022 3.58979C13.9668 3.73853 14.0001 3.89791 14 4.05888V10.7744Z",fill:"var(--icon-background-color)",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.3889 12V10.7246C10.3922 10.3531 10.2418 9.99517 9.97022 9.72827C9.83273 9.59843 9.66922 9.49625 9.48941 9.42779C9.30959 9.35932 9.11715 9.32597 8.92353 9.32972H6.05557C5.8655 9.3284 5.67704 9.36305 5.50116 9.43168C5.32528 9.50031 5.1655 9.60154 5.03109 9.72948C4.89668 9.85743 4.79034 10.0095 4.71824 10.177C4.64615 10.3444 4.60973 10.5238 4.61112 10.7047V11.9801",fill:"var(--icon-color)",stroke:"none"}),a.createElement("path",{d:"M7.49998 7.97461C7.78567 7.97461 8.06493 7.89397 8.30247 7.74288C8.54001 7.5918 8.72515 7.37705 8.83448 7.1258C8.9438 6.87456 8.97241 6.59808 8.91667 6.33136C8.86094 6.06464 8.72337 5.81965 8.52136 5.62735C8.31935 5.43505 8.06198 5.30409 7.78178 5.25103C7.50159 5.19798 7.21116 5.22523 6.94722 5.3293C6.68329 5.43337 6.45769 5.60961 6.29897 5.83573C6.14025 6.06184 6.05554 6.32766 6.05554 6.59961C6.05554 6.96428 6.20772 7.31404 6.47861 7.5719C6.74949 7.82977 7.11689 7.97461 7.49998 7.97461Z",fill:"var(--icon-color)",stroke:"none"})),"heart-o"===this.props.name&&a.createElement("svg",{width:"17",height:"15",viewBox:"0 0 17 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M8.46701 14.12C8.39968 14.1229 8.33253 14.1109 8.27032 14.085C8.20811 14.0591 8.15238 14.0198 8.10702 13.97L2.98703 9.04L2.75701 8.82L2.30703 8.29C2.10475 8.03461 1.91773 7.76746 1.747 7.48998C1.56775 7.17196 1.42039 6.837 1.30703 6.48998C1.1817 6.1264 1.11749 5.74455 1.11703 5.35998C1.08303 4.84662 1.15416 4.33172 1.32611 3.84682C1.49806 3.36192 1.76721 2.91725 2.11703 2.54C2.50658 2.19036 2.9619 1.92184 3.45639 1.75014C3.95087 1.57845 4.4746 1.50701 4.997 1.54C5.33771 1.5472 5.67517 1.60793 5.997 1.71999C6.34988 1.83562 6.68607 1.99697 6.997 2.19997C7.26741 2.3717 7.52783 2.5587 7.777 2.76C7.99865 2.93314 8.20908 3.12018 8.40701 3.32C8.59918 3.11788 8.80644 2.93068 9.027 2.76C9.247 2.58 9.50703 2.39997 9.80703 2.19997C10.1184 1.99766 10.4545 1.83635 10.807 1.71999C11.1286 1.60695 11.4662 1.54619 11.807 1.54C12.3295 1.50645 12.8534 1.57762 13.3479 1.74935C13.8425 1.92107 14.2978 2.18989 14.687 2.54C15.0388 2.9159 15.3092 3.36039 15.4813 3.84563C15.6534 4.33088 15.7234 4.84641 15.687 5.35998C15.6358 6.06837 15.4442 6.75949 15.1231 7.39303C14.802 8.02656 14.358 8.58983 13.817 9.04998L8.70703 13.97C8.64352 14.0425 8.56002 14.0947 8.46701 14.12Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"heart"===this.props.name&&a.createElement("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M8.05462 13.12C7.98595 13.1217 7.91766 13.1093 7.854 13.0835C7.79034 13.0577 7.73269 13.0191 7.68462 12.97L2.57461 8.04L2.34463 7.82L1.89462 7.29C1.68905 7.03708 1.5019 6.7697 1.33462 6.48998C1.15536 6.17196 1.00798 5.837 0.894616 5.48998C0.769279 5.1264 0.705073 4.74455 0.704614 4.35998C0.670613 3.84662 0.74177 3.33172 0.91372 2.84682C1.08567 2.36192 1.35479 1.91725 1.70461 1.54C2.09386 1.18989 2.54913 0.921074 3.04369 0.74935C3.53826 0.577625 4.06216 0.506451 4.58462 0.539999C4.92533 0.547199 5.26278 0.607934 5.58462 0.719992C5.93749 0.835618 6.27369 0.996973 6.58462 1.19997C6.88462 1.39997 7.14462 1.58 7.36462 1.76C7.58627 1.93314 7.79669 2.12018 7.99462 2.32C8.18679 2.11788 8.39405 1.93068 8.61462 1.76C8.83462 1.58 9.09462 1.39997 9.39462 1.19997C9.70594 0.997665 10.042 0.836354 10.3946 0.719992C10.716 0.606272 11.0537 0.545489 11.3946 0.539999C11.9171 0.506451 12.441 0.577625 12.9355 0.74935C13.4301 0.921074 13.8854 1.18989 14.2746 1.54C14.6264 1.9159 14.8968 2.36039 15.0689 2.84563C15.241 3.33088 15.311 3.84641 15.2746 4.35998C15.2235 5.06837 15.0317 5.75949 14.7107 6.39303C14.3896 7.02656 13.9457 7.58983 13.4046 8.04998L8.29461 12.97C8.23111 13.0425 8.14763 13.0947 8.05462 13.12V13.12Z",fill:"var(--icon-color)",stroke:"none"})),"heartbeat"===this.props.name&&a.createElement("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M14.524 7.18165H9.754L8.55402 13.14L6.14401 1.69998L4.95401 7.03865H1.284",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"Pin"===this.props.name&&a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M8.98903 8.67999L10.849 5.16L11.019 5.32999C11.2505 5.55539 11.5609 5.68152 11.884 5.68152C12.2072 5.68152 12.5175 5.55539 12.749 5.32999C12.863 5.21661 12.9535 5.08183 13.0152 4.93338C13.0769 4.78493 13.1087 4.62576 13.1087 4.465C13.1087 4.30423 13.0769 4.14506 13.0152 3.99661C12.9535 3.84817 12.863 3.71338 12.749 3.60001L10.419 1.26999C10.1896 1.04058 9.87847 0.911713 9.55403 0.911713C9.22959 0.911713 8.91844 1.04058 8.68903 1.26999C8.45961 1.4994 8.33073 1.81057 8.33073 2.13501C8.33073 2.45945 8.45961 2.77059 8.68903 3L8.86903 3.16998L5.33904 5.03C4.87276 4.77332 4.33557 4.67547 3.80873 4.75125C3.28189 4.82703 2.79407 5.07229 2.41904 5.44998L2.00903 5.85001L8.16904 12.01L8.56903 11.61C8.94755 11.2334 9.19324 10.7438 9.26901 10.2152C9.34478 9.68667 9.2465 9.14779 8.98903 8.67999V8.67999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.89906 10.13L1.29907 12.73",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"plug"===this.props.name&&a.createElement("svg",{width:"13",height:"15",viewBox:"0 0 13 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M4.01277 5.26999C3.52129 5.84389 3.26446 6.58213 3.29362 7.33716C3.32278 8.09219 3.63577 8.8084 4.17005 9.34268C4.70434 9.87697 5.42058 10.19 6.17561 10.2191C6.93064 10.2483 7.66884 9.99148 8.24275 9.5L10.3528 7.38998L6.13276 3.16L4.01277 5.26999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M4.01273 9.5L1.96271 11.5C1.7532 11.7098 1.61057 11.9769 1.5528 12.2677C1.49503 12.5585 1.52473 12.8599 1.63816 13.1339C1.75158 13.4078 1.94364 13.642 2.19007 13.8068C2.4365 13.9716 2.72623 14.0597 3.02271 14.06H12.0227",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M8.17273 2.82999L9.46271 1.54001",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M10.6927 5.35001L11.9828 4.06",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M5.58276 2.62L10.8528 7.89001",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"server"===this.props.name&&a.createElement("svg",{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M12.2891 8.79999H2.47908C1.93232 8.79999 1.48907 9.24325 1.48907 9.79001V11.77C1.48907 12.3168 1.93232 12.76 2.47908 12.76H12.2891C12.8358 12.76 13.2791 12.3168 13.2791 11.77V9.79001C13.2791 9.24325 12.8358 8.79999 12.2891 8.79999Z",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.48907 7.01001V5.82999C1.48907 5.56477 1.59443 5.31043 1.78197 5.12289C1.9695 4.93536 2.22386 4.82999 2.48907 4.82999H12.2991C12.5643 4.82999 12.8186 4.93536 13.0062 5.12289C13.1937 5.31043 13.2991 5.56477 13.2991 5.82999V7.01001",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M1.48907 3.04999V1.87C1.48907 1.60478 1.59443 1.35044 1.78197 1.1629C1.9695 0.975366 2.22386 0.869995 2.48907 0.869995H12.2991C12.5643 0.869995 12.8186 0.975366 13.0062 1.1629C13.1937 1.35044 13.2991 1.60478 13.2991 1.87V3.04999",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M3.46906 3.60999C3.88327 3.60999 4.21906 3.2742 4.21906 2.85999C4.21906 2.44577 3.88327 2.10999 3.46906 2.10999C3.05484 2.10999 2.71906 2.44577 2.71906 2.85999C2.71906 3.2742 3.05484 3.60999 3.46906 3.60999Z",fill:"var(--icon-color)",stroke:"none"}),a.createElement("path",{d:"M3.46906 7.57001C3.88327 7.57001 4.21906 7.23422 4.21906 6.82001C4.21906 6.40579 3.88327 6.07001 3.46906 6.07001C3.05484 6.07001 2.71906 6.40579 2.71906 6.82001C2.71906 7.23422 3.05484 7.57001 3.46906 7.57001Z",fill:"var(--icon-color)",stroke:"none"}),a.createElement("path",{d:"M3.46906 11.53C3.88327 11.53 4.21906 11.1942 4.21906 10.78C4.21906 10.3658 3.88327 10.03 3.46906 10.03C3.05484 10.03 2.71906 10.3658 2.71906 10.78C2.71906 11.1942 3.05484 11.53 3.46906 11.53Z",fill:"var(--icon-color)",stroke:"none"})),"share-2"===this.props.name&&a.createElement("svg",{width:"17",height:"14",viewBox:"0 0 17 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M8.11267 11.7L6.36267 13.21L6.32269 7.70999L1.16266 5.44L15.9727 1.45999L10.7827 12.82L8.21265 8.38",fill:"none",stroke:"var(--icon-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"failed"===this.props.name&&a.createElement("svg",{width:"127",height:"127",viewBox:"0 0 127 127",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("circle",{cx:"63.25",cy:"63.1909",r:"61",stroke:"var(--icon-failed-color)",strokeWidth:"4"}),a.createElement("g",{clipPath:"url(#clip0_174_687280)"},a.createElement("path",{d:"M63.249 32.4197L63.249 69.784",stroke:"var(--icon-failed-color)",strokeWidth:"6.66667",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M63.249 85.2234H63.1493",stroke:"var(--icon-failed-color)",strokeWidth:"6.66667",strokeLinecap:"round",strokeLinejoin:"round"})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_174_687280"},a.createElement("rect",{width:"68.1081",height:"68.1081",fill:"var(--icon-exclamation-color)",transform:"translate(29.1959 29.137)"})))),"success"===this.props.name&&a.createElement("svg",{width:"127",height:"127",viewBox:"0 0 127 127",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("circle",{cx:"63.25",cy:"63.1909",r:"61",stroke:"var(--icon-success-color)",strokeWidth:"4"}),a.createElement("path",{d:"M85.9519 46.1641L54.7357 77.3803L40.5465 63.1911",stroke:"var(--icon-success-color)",strokeWidth:"6.69935",strokeLinecap:"round",strokeLinejoin:"round"})),"exclamation"===this.props.name&&a.createElement("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M6.70175 0.0187378C5.51507 0.0187378 4.35498 0.370631 3.36829 1.02992C2.38159 1.68921 1.61254 2.62628 1.15842 3.72264C0.704293 4.81899 0.585428 6.02539 0.816939 7.18927C1.04845 8.35316 1.62007 9.42228 2.45918 10.2614C3.29829 11.1005 4.36718 11.6719 5.53107 11.9035C6.69495 12.135 7.90159 12.0161 8.99794 11.562C10.0943 11.1079 11.0313 10.3389 11.6905 9.35217C12.3498 8.36548 12.7017 7.20539 12.7017 6.0187C12.7017 4.42741 12.0695 2.90129 10.9443 1.77607C9.81911 0.650856 8.29305 0.0187378 6.70175 0.0187378Z",fill:"var(--icon-exclamation-background-color)"}),a.createElement("path",{d:"M6.71118 3.0694L6.71118 6.6279",stroke:"var(--icon-exclamation-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M6.71118 9H6.70169",stroke:"var(--icon-exclamation-color)",vectorEffect:"non-scaling-stroke",strokeWidth:"var(--icon-stroke-width)",strokeLinecap:"round",strokeLinejoin:"round"})),"spinner"===this.props.name&&a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("circle",{cx:"8",cy:"8",r:"8",transform:"translate(1 1)",fill:"none",stroke:"var(--spinner-background)",strokeWidth:"var(--spinner-stroke-width)"}),a.createElement("ellipse",{id:"loading",rx:"8",ry:"8",transform:"translate(9 9)",fill:"none",stroke:"var(--spinner-color)",strokeWidth:"var(--spinner-stroke-width)",strokeLinecap:"round"})))}}me.defaultProps={big:!1,baseline:!1,dim:!1,onClick:()=>{}},me.propTypes={name:d().string,big:d().bool,dim:d().bool,baseline:d().bool,onClick:d().func};const de=me;class he extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleCloseClick=this.handleCloseClick.bind(this)}handleCloseClick(){this.props.onClose()}getClassName(){let e="dialog-close button button-transparent";return this.props.disabled&&(e+=" disabled"),e}render(){return a.createElement("a",{className:this.getClassName(),onClick:this.handleCloseClick,role:"button"},a.createElement(de,{name:"close"}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"Close")))}}he.propTypes={onClose:d().func,disabled:d().bool};const pe=(0,k.Z)("common")(he);class ue extends a.Component{render(){return a.createElement("div",{className:"tooltip"},this.props.children,a.createElement("span",{className:`tooltip-text ${this.props.direction}`},this.props.message))}}ue.defaultProps={direction:"right"},ue.propTypes={children:d().any,message:d().any.isRequired,direction:d().string};const ge=ue;class fe extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleKeyDown=this.handleKeyDown.bind(this),this.handleClose=this.handleClose.bind(this)}handleKeyDown(e){27===e.keyCode&&this.handleClose()}handleClose(){this.props.disabled||this.props.onClose()}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown,{capture:!0})}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown,{capture:!0})}render(){return a.createElement("div",{className:`${this.props.className} dialog-wrapper`},a.createElement("div",{className:"dialog"},a.createElement("div",{className:"dialog-header"},a.createElement("div",{className:"dialog-title-wrapper"},a.createElement("h2",null,a.createElement("span",{className:"dialog-header-title"},this.props.title),this.props.subtitle&&a.createElement("span",{className:"dialog-header-subtitle"},this.props.subtitle)),this.props.tooltip&&""!==this.props.tooltip&&a.createElement(ge,{message:this.props.tooltip},a.createElement(de,{name:"info-circle"}))),a.createElement(pe,{onClose:this.handleClose,disabled:this.props.disabled})),a.createElement("div",{className:"dialog-content"},this.props.children)))}}fe.propTypes={children:d().node,className:d().string,title:d().string,subtitle:d().string,tooltip:d().string,disabled:d().bool,onClose:d().func};const be=fe;class ye extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.getClassName=this.getClassName.bind(this)}getClassName(){let e="button primary";return this.props.warning&&(e+=" warning"),this.props.disabled&&(e+=" disabled"),this.props.processing&&(e+=" processing"),this.props.big&&(e+=" big"),this.props.medium&&(e+=" medium"),this.props.fullWidth&&(e+=" full-width"),e}render(){return a.createElement("button",{type:"submit",className:this.getClassName(),disabled:this.props.disabled},this.props.value||a.createElement(C.c,null,"Save"),this.props.processing&&a.createElement(de,{name:"spinner"}))}}ye.defaultProps={warning:!1},ye.propTypes={processing:d().bool,disabled:d().bool,value:d().string,warning:d().bool,big:d().bool,medium:d().bool,fullWidth:d().bool};const Ee=(0,k.Z)("common")(ye);class ve extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.disabled||this.props.onClick()}getClassName(){let e="cancel";return this.props.disabled&&(e+=" disabled"),e}render(){return a.createElement("a",{className:this.getClassName(),role:"button",onClick:this.handleClick},a.createElement(C.c,null,"Cancel"))}}ve.propTypes={disabled:d().bool,onClick:d().func};const Ce=(0,k.Z)("common")(ve);class ke extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{showErrorDetails:!1}}bindCallbacks(){this.handleKeyDown=this.handleKeyDown.bind(this),this.handleErrorDetailsToggle=this.handleErrorDetailsToggle.bind(this)}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown,{capture:!0})}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown,{capture:!0})}getTitle(){return this.props.title?this.props.title:this.props.t("There was an unexpected error...")}getMessage(){return this.props.error.message}handleKeyDown(e){27!==e.keyCode&&13!==e.keyCode||(e.stopPropagation(),this.props.onClose())}handleErrorDetailsToggle(){this.setState({showErrorDetails:!this.state.showErrorDetails})}get hasErrorDetails(){return Boolean(this.props.error.data?.body)||Boolean(this.props.error.details)}formatErrors(){const e=this.props.error?.details||this.props.error?.data;return JSON.stringify(e,null,4)}render(){return a.createElement(be,{className:"dialog-wrapper error-dialog",onClose:this.props.onClose,title:this.getTitle()},a.createElement("div",{className:"form-content"},a.createElement("p",null,this.getMessage()),this.hasErrorDetails&&a.createElement("div",{className:"accordion error-details"},a.createElement("div",{className:"accordion-header"},a.createElement("a",{onClick:this.handleErrorDetailsToggle},a.createElement(C.c,null,"Error details"),a.createElement(de,{baseline:!0,name:this.state.showErrorDetails?"caret-up":"caret-down"}))),this.state.showErrorDetails&&a.createElement("div",{className:"accordion-content"},a.createElement("div",{className:"input text"},a.createElement("label",{htmlFor:"js_field_debug",className:"visuallyhidden"},a.createElement(C.c,null,"Error details")),a.createElement("textarea",{id:"js_field_debug",defaultValue:this.formatErrors(),readOnly:!0}))))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement("button",{type:"button",className:"button primary warning",onClick:this.props.onClose},"Ok")))}}ke.propTypes={title:d().string,error:d().object.isRequired,onClose:d().func,t:d().func};const we=(0,k.Z)("common")(ke);class Se extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{error:!1}}bindCallbacks(){this.handleError=this.handleError.bind(this)}propsHasUrl(){return this.props.user&&this.props.user.profile&&this.props.user.profile.avatar&&this.props.user.profile.avatar.url&&this.props.user.profile.avatar.url.medium}propsUrlHasProtocol(){return this.props.user.profile.avatar.url.medium.startsWith("https://")||this.props.user.profile.avatar.url.medium.startsWith("http://")}formatUrl(e){return`${this.props.baseUrl}/${e}`}getDefaultAvatarUrl(){return`${this.props.baseUrl}/img/avatar/user.png`}getAvatarSrc(){return!this.state.error&&this.propsHasUrl()?this.propsUrlHasProtocol()?this.props.user.profile.avatar.url.medium:this.formatUrl(this.props.user.profile.avatar.url.medium):this.getDefaultAvatarUrl()}handleError(){console.error(`Could not load avatar image url: ${this.getAvatarSrc()}`),this.setState({error:!0})}getAltText(){return this.props.user&&this.props.user.first_name&&this.props.user.last_name?`Avatar of user ${this.props.user.first_name} ${this.props.user.last_name}.`:"..."}render(){return a.createElement("div",{className:`${this.props.className} ${this.props.attentionRequired?"attention-required":""}`},!this.state.error&&a.createElement("img",{src:this.getAvatarSrc(),onError:this.handleError,alt:this.getAltText()}),this.state.error&&a.createElement("img",{src:this.getDefaultAvatarUrl(),alt:this.getAltText()}),this.props.attentionRequired&&a.createElement(de,{name:"exclamation"}))}}Se.defaultProps={className:"avatar user-avatar"},Se.propTypes={baseUrl:d().string,user:d().object,attentionRequired:d().bool,className:d().string};const xe=Se;class Ne extends a.Component{constructor(e){super(e),this.state=this.getDefaultState()}getDefaultState(){return{error:!1}}getAvatarUrl(){return`${this.props.baseUrl}/img/avatar/group_default.png`}getAltText(){return`Avatar of the ${this.props.name} group.`}render(){return a.createElement("div",{className:"avatar user-avatar"},a.createElement("img",{src:this.getAvatarUrl(),alt:this.getAltText()}))}}Ne.propTypes={baseUrl:d().string,group:d().object,name:d().string};const Re=Ne;class Ie extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleClick=this.handleClick.bind(this)}getTitle(){return this.props.user?`${this.props.user.profile.first_name} ${this.props.user.profile.last_name} (${this.props.user.username})`:`${this.props.group.name}`}getSubtitle(){return this.props.user?this.props.user.gpgkey.fingerprint.substr(this.props.user.gpgkey.fingerprint.length-16).replace(/(.{4})/g,"$1 "):this.props.group?.groups_users?.length>1?`${this.props.group.groups_users.length} group members`:"One group member"}getClassName(){return this.props.selected?"row selected":"row"}handleClick(){this.props.onClick(this.props.id)}render(){return a.createElement("li",{id:"autocomplete-item"},a.createElement("div",{className:this.getClassName()},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell "},a.createElement("a",{role:"button",onClick:this.handleClick},this.props.user&&a.createElement(xe,{user:this.props.user,baseUrl:this.props.baseUrl}),this.props.group&&a.createElement(Re,{group:this.props.group,baseUrl:this.props.baseUrl}),a.createElement("div",{className:"user"},a.createElement("span",{className:"name"},this.getTitle()),a.createElement("span",{className:"details"},this.getSubtitle())))))))}}Ie.propTypes={baseUrl:d().string,id:d().number,user:d().object,group:d().object,selected:d().bool,onClick:d().func};const De=Ie;class Te extends a.Component{render(){return a.createElement("li",null,a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("p",null,"No one found")))))}}const Ae=Te;class Pe extends a.Component{render(){return a.createElement("li",null,a.createElement("div",{className:"row loading"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("div",{className:"loading"},a.createElement(de,{name:"spinner"})),a.createElement("div",{className:"info"},a.createElement("span",{className:"name"},"Loading..."),a.createElement("span",{className:"details"},"Please wait."))))))}}const Ue=Pe;class _e extends a.Component{constructor(e){super(e),this.bindCallbacks(),this.createInputRefs(),this.state=this.getDefaultState(),this.cache={},this.cacheExpiry=1e4}getDefaultState(){return{loading:!0,processing:!1,selected:null,autocompleteItems:null,name:"loading...",nameError:!1}}componentDidMount(){this.setState({loading:!1,name:""},(()=>{this.inputRef.current.focus()})),document.addEventListener("keydown",this.handleKeyDown,{capture:!0})}componentDidUpdate(e){e.disabled!==this.props.disabled&&this.inputRef.current.focus()}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown,{capture:!0})}createInputRefs(){this.listRef=a.createRef(),this.inputRef=a.createRef()}bindCallbacks(){this.handleKeyDown=this.handleKeyDown.bind(this),this.selectNext=this.selectNext.bind(this),this.selectPrevious=this.selectPrevious.bind(this),this.handleAutocompleteChangeDebounced=Z()(this.handleAutocompleteChange.bind(this),150),this.handleSelect=this.handleSelect.bind(this),this.handleInputChange=this.handleInputChange.bind(this)}async getItems(e){return this.setState({processing:!0}),await this.props.searchCallback(e)}async autocompleteSearch(e){return(!this.cache[e]||this.cache[e].cacheExpiry<(new Date).getTime())&&(this.cache[e]=await this.getItems(e),this.cache[e].cacheExpiry=(new Date).getTime()+this.cacheExpiry),this.cache[e]}closeAutocomplete(){this.cache={},this.setState({processing:!1,autocompleteItems:null,selected:null}),this.props.onClose()}handleKeyDown(e){if(!this.state.disabled&&!this.state.processing&&null!==this.state.autocompleteItems){if(40===e.keyCode)return e.preventDefault(),void this.selectNext();if(38===e.keyCode)return e.preventDefault(),void this.selectPrevious();if(13===e.keyCode||9===e.keyCode){if(null===this.state.selected)return;e.preventDefault(),this.handleSelect(this.state.selected)}}}handleSelect(e){const t=this.state.autocompleteItems[e];this.cache={},this.setState({name:""}),this.props.onSelect(t),this.closeAutocomplete()}handleInputChange(e){const t=e.target,s="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState({[a]:s},(()=>{"name"===a&&this.handleAfterNameUpdate()}))}handleAfterNameUpdate(){this.state.name?this.state.name.endsWith(" ")||this.handleAutocompleteChangeDebounced():this.closeAutocomplete()}async handleAutocompleteChange(){const e=this.state.name;if(e)try{const t=await this.autocompleteSearch(e);let s=null;if(t.length>0&&(s=0),this.props.onOpen(),e===this.state.name)return new Promise((e=>{this.setState({autocompleteItems:t,processing:!1,selected:s},e())}))}catch(e){console.error(e),this.closeAutocomplete(),this.setState({serviceError:e.message})}else this.closeAutocomplete()}selectPrevious(){0===this.state.selected||null===this.state.selected?this.setState({selected:this.state.autocompleteItems.length-1}):this.setState({selected:this.state.selected-1}),this.scrollToSelectedItem()}selectNext(){null===this.state.selected||this.state.selected===this.state.autocompleteItems.length-1?this.setState({selected:0}):this.setState({selected:this.state.selected+1}),this.scrollToSelectedItem()}isItemSelected(e){return null!==this.state.selected&&e===this.state.selected}getPlaceholder(){return this.props.disabled?"please wait...":this.props.placeholder}isInputDisabled(){return this.state.loading||this.props.disabled}scrollToSelectedItem(){if(this.state.autocompleteItems&&0!==this.state.autocompleteItems.length){const e=this.listRef.current.scrollHeight/this.state.autocompleteItems.length,t=this.listRef.current.clientHeight,s=t-e*Math.round(t/e),a=e*this.state.selected,n=this.listRef.current.scrollTop;0===a?this.listRef.current.scrollTop=0:a-s<n?this.listRef.current.scrollTop=this.listRef.current.scrollTop-t:a>n+t&&(this.listRef.current.scrollTop=a)}else this.listRef.current.scrollTop=0}static get DISPLAY_LIMIT(){return 10}render(){return a.createElement("div",null,a.createElement("div",null,a.createElement("div",{className:"input text autocomplete "+(this.isInputDisabled()?"disabled":"")},a.createElement("label",{htmlFor:this.props.id},this.props.label),a.createElement("input",{id:this.props.id,name:this.props.name,ref:this.inputRef,maxLength:"64",type:"text",placeholder:this.getPlaceholder(),autoComplete:"off",value:this.state.name,disabled:this.isInputDisabled(),onChange:this.handleInputChange})),(this.state.processing||this.state.autocompleteItems)&&a.createElement("div",{className:"autocomplete-wrapper"},a.createElement("div",{className:"autocomplete-content scroll",ref:this.listRef},a.createElement("ul",null,this.state.processing&&a.createElement(Ue,null),!this.state.processing&&(!this.state.autocompleteItems||!this.state.autocompleteItems.length)&&a.createElement(Ae,null),!this.state.processing&&this.state.autocompleteItems&&this.state.autocompleteItems.map(((e,t)=>e.username?a.createElement(De,{key:t,id:t,user:e,selected:this.isItemSelected(t),onClick:this.handleSelect,baseUrl:this.props.baseUrl}):a.createElement(De,{key:t,id:t,group:e,selected:this.isItemSelected(t),onClick:this.handleSelect,baseUrl:this.props.baseUrl}))))))))}}_e.propTypes={baseUrl:d().string,id:d().string,searchCallback:d().func,onSelect:d().func,onOpen:d().func,onClose:d().func,label:d().string,disabled:d().bool,name:d().string,placeholder:d().string};const Le=_e;class Fe extends a.Component{render(){return a.createElement("li",{className:"row skeleton"},a.createElement("div",{className:"avatar"}),a.createElement("div",{className:"aro"},a.createElement("div",{className:"aro-name"}),a.createElement("div",{className:"aro-details"})),a.createElement("div",{className:"select rights"}),a.createElement("div",{className:"actions"}),a.createElement("div",{className:"shimmer"}))}}Fe.propTypes={};const Me=Fe,Oe=new class{allPropTypes=(...e)=>(...t)=>{const s=e.map((e=>e(...t))).filter(Boolean);if(0===s.length)return;const a=s.map((e=>e.message)).join("\n");return new Error(a)}};class je extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(e),this.bindCallback(),this.createRefs()}getDefaultState(e){return{selectedValue:e.value,search:"",open:!1,style:void 0}}get listItemsFiltered(){const e=this.props.items.filter((e=>e.value!==this.state.selectedValue));return this.props.search&&""!==this.state.search?this.getItemsMatch(e,this.state.search):e}get selectedItemLabel(){const e=this.props.items&&this.props.items.find((e=>e.value===this.state.selectedValue));return e&&e.label||a.createElement(a.Fragment,null,"")}static getDerivedStateFromProps(e,t){return void 0!==e.value&&e.value!==t.selectedValue?{selectedValue:e.value}:null}bindCallback(){this.handleDocumentClickEvent=this.handleDocumentClickEvent.bind(this),this.handleDocumentContextualMenuEvent=this.handleDocumentContextualMenuEvent.bind(this),this.handleDocumentDragStartEvent=this.handleDocumentDragStartEvent.bind(this),this.handleDocumentScrollEvent=this.handleDocumentScrollEvent.bind(this),this.handleSelectClick=this.handleSelectClick.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleItemClick=this.handleItemClick.bind(this),this.handleSelectKeyDown=this.handleSelectKeyDown.bind(this),this.handleItemKeyDown=this.handleItemKeyDown.bind(this),this.handleBlur=this.handleBlur.bind(this)}createRefs(){this.selectedItemRef=a.createRef(),this.selectItemsRef=a.createRef(),this.itemsRef=a.createRef()}componentDidMount(){document.addEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.addEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.addEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0}),document.addEventListener("scroll",this.handleDocumentScrollEvent,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.removeEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.removeEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0}),document.removeEventListener("scroll",this.handleDocumentScrollEvent,{capture:!0})}handleDocumentClickEvent(e){this.selectedItemRef.current.contains(e.target)||this.selectItemsRef.current.contains(e.target)||this.closeSelect()}handleDocumentContextualMenuEvent(e){this.selectedItemRef.current.contains(e.target)||this.selectItemsRef.current.contains(e.target)||this.closeSelect()}handleDocumentDragStartEvent(){this.closeSelect()}handleDocumentScrollEvent(e){this.itemsRef.current.contains(e.target)||this.closeSelect()}handleSelectClick(){if(this.props.disabled)this.closeSelect();else{const e=!this.state.open;e?this.forceVisibilitySelect():this.resetStyleSelect(),this.setState({open:e})}}getFirstParentWithTransform(){let e=this.selectedItemRef.current.parentElement;for(;null!==e&&""===e.style.getPropertyValue("transform");)e=e.parentElement;return e}forceVisibilitySelect(){const e=this.selectedItemRef.current.getBoundingClientRect(),{width:t,height:s}=e;let{top:a,left:n}=e;const r=this.getFirstParentWithTransform();if(r){const e=r.getBoundingClientRect();a-=e.top,n-=e.left}const i={position:"fixed",zIndex:1,width:t,height:s,top:a,left:n};this.setState({style:i})}handleBlur(e){e.currentTarget.contains(e.relatedTarget)||this.closeSelect()}closeSelect(){this.resetStyleSelect(),this.setState({open:!1})}resetStyleSelect(){this.setState({style:void 0})}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}handleItemClick(e){if(this.setState({selectedValue:e.value,open:!1}),"function"==typeof this.props.onChange){const t={target:{value:e.value,name:this.props.name}};this.props.onChange(t)}this.closeSelect()}getItemsMatch(e,t){const s=t&&t.split(/\s+/)||[""];return e.filter((e=>s.every((t=>((e,t)=>(e=>new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(e),"i"))(e).test(t))(t,e.label)))))}handleSelectKeyDown(e){switch(e.keyCode){case 13:return e.stopPropagation(),void this.handleSelectClick();case 40:return e.preventDefault(),e.stopPropagation(),void(this.state.open?this.focusItem(0):this.handleSelectClick());case 38:return e.preventDefault(),e.stopPropagation(),void(this.state.open?this.focusItem(this.listItemsFiltered.length-1):this.handleSelectClick());case 27:return e.stopPropagation(),void this.closeSelect();default:return}}focusItem(e){this.itemsRef.current.childNodes[e]?.focus()}handleItemKeyDown(e,t){switch(e.keyCode){case 13:return e.stopPropagation(),void this.handleItemClick(t);case 40:return e.stopPropagation(),e.preventDefault(),void(e.target.nextSibling?e.target.nextSibling.focus():this.focusItem(0));case 38:return e.stopPropagation(),e.preventDefault(),void(e.target.previousSibling?e.target.previousSibling.focus():this.focusItem(this.listItemsFiltered.length-1));default:return}}hasFilteredItems(){return this.listItemsFiltered.length>0}render(){return a.createElement("div",{className:`select-container ${this.props.className}`,style:{width:this.state.style?.width,height:this.state.style?.height}},a.createElement("div",{onKeyDown:this.handleSelectKeyDown,onBlur:this.handleBlur,id:this.props.id,className:`select ${this.props.direction} ${this.state.open?"open":""}`,style:this.state.style},a.createElement("div",{ref:this.selectedItemRef,className:"selected-value "+(this.props.disabled?"disabled":""),tabIndex:this.props.disabled?-1:0,onClick:this.handleSelectClick},a.createElement("span",{className:"value"},this.selectedItemLabel),a.createElement(de,{name:"caret-down"})),a.createElement("div",{ref:this.selectItemsRef,className:"select-items "+(this.state.open?"visible":"")},this.props.search&&a.createElement(a.Fragment,null,a.createElement("input",{className:"search-input",name:"search",value:this.state.search,onChange:this.handleInputChange,type:"text"}),a.createElement(de,{name:"search"})),a.createElement("ul",{ref:this.itemsRef,className:"items"},this.hasFilteredItems()&&this.listItemsFiltered.map((e=>a.createElement("li",{tabIndex:e.disabled?-1:0,key:e.value,className:"option",onKeyDown:t=>this.handleItemKeyDown(t,e),onClick:()=>this.handleItemClick(e)},e.label))),!this.hasFilteredItems()&&this.props.search&&a.createElement("li",{className:"option no-results"},a.createElement(C.c,null,"No results match")," ",a.createElement("span",null,this.state.search))))))}}je.defaultProps={id:"",name:"select",className:"",direction:"bottom"},je.propTypes={id:d().string,name:d().string,className:d().string,direction:d().oneOf(Object.values({top:"top",bottom:"bottom",left:"left",right:"right"})),search:d().bool,items:d().array.isRequired,value:Oe.allPropTypes(d().oneOfType([d().string,d().number,d().bool]).isRequired,((e,t,s)=>{const a=e[t],n=e.items;if(n.length>0&&n.every((e=>e.value!==a)))return new Error(`Invalid prop ${t} passed to ${s}. Expected the value ${a} in items.`)})),disabled:d().bool,onChange:d().func};const qe=(0,k.Z)("common")(je);class We extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{user:null,fingerprint:null}}async componentDidMount(){await this.populate()}async populate(){const e=this.props.groupUser.user,t=await this.getFingerprintForUser(e.id);this.setState({user:e,fingerprint:t})}async getFingerprintForUser(e){return(await this.props.context.port.request("passbolt.keyring.get-public-key-info-by-user",e)).fingerprint}get isReady(){return null!==this.state.user&&null!==this.state.fingerprint}formatFingerprint(e){const t=e.toUpperCase().replace(/.{4}/g,"$& ");return a.createElement(a.Fragment,null,t.substr(0,24),a.createElement("br",null),t.substr(25))}getUserFullname(){const e=this.state.user;return`${e.profile.first_name} ${e.profile.last_name}`}getTooltipMessage(){return a.createElement(a.Fragment,null,a.createElement("div",{className:"email"},a.createElement("strong",null,this.state.user.username)),a.createElement("div",{className:"fingerprint"},this.formatFingerprint(this.state.fingerprint)))}get isManagerSelectOptions(){return[{value:!1,label:a.createElement(C.c,null,"Member")},{value:!0,label:a.createElement(C.c,null,"Group manager")}]}render(){const e=this.isReady;return a.createElement("li",{className:`row ${this.props.isMemberChanged?"permission-updated":""} ${e?"":"skeleton"}`},e&&a.createElement(a.Fragment,null,a.createElement(xe,{baseUrl:this.props.context.userSettings.getTrustedDomain(),user:this.state.user}),a.createElement("div",{className:"aro"},a.createElement("div",{className:"aro-name"},a.createElement("span",{className:"ellipsis"},this.getUserFullname()),a.createElement(ge,{message:this.getTooltipMessage()},a.createElement(de,{name:"info-circle"}))),a.createElement("div",{className:"permission_changes"},this.props.isMemberAdded&&a.createElement("span",null,a.createElement(C.c,null,"Will be added")),this.props.isMemberChanged&&!this.props.isMemberAdded&&a.createElement("span",null,a.createElement(C.c,null,"Will be updated")),!this.props.isMemberChanged&&!this.props.isMemberAdded&&a.createElement("span",null,a.createElement(C.c,null,"Unchanged")))),a.createElement("div",{className:"rights"},a.createElement(qe,{className:"permission inline",value:this.props.groupUser.is_admin,items:this.isManagerSelectOptions,onChange:e=>this.props.onMemberRoleChange(e,this.props.groupUser),disabled:!this.props.areActionsAllowed,direction:this.props.isLastItemDisplayed?"top":"bottom"})),a.createElement("div",{className:"actions"},a.createElement("a",{title:this.props.t("Remove"),className:"remove-item button button-transparent "+(this.props.areActionsAllowed?"":"disabled"),onClick:e=>this.props.onMemberRemoved(e,this.props.groupUser)},a.createElement(de,{name:"close"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Remove"))))),!e&&a.createElement(a.Fragment,null,a.createElement("div",{className:"avatar"}),a.createElement("div",{className:"aro"},a.createElement("div",{className:"aro-name"}),a.createElement("div",{className:"aro-details"})),a.createElement("div",{className:"select rights"}),a.createElement("div",{className:"actions"}),a.createElement("div",{className:"shimmer"})))}}We.defaultProps={isMemberChanged:!1,isMemberAdded:!1,areActionsAllowed:!1,isLastItemDisplayed:!1},We.propTypes={context:d().any,groupUser:d().object.isRequired,onMemberRoleChange:d().func.isRequired,onMemberRemoved:d().func.isRequired,isMemberChanged:d().bool,isMemberAdded:d().bool,areActionsAllowed:d().bool,isLastItemDisplayed:d().bool,t:d().func};const ze=u((0,k.Z)("common")(We));function Ge(e,t,s){const a=e.length>=t,n=s("this is the maximum size for this field, make sure your data was not truncated");return a?n:""}const He=128,Ve=255;class Ke extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.createRefs(),this.bindHandlers()}get defaultState(){return{groupToEdit:{name:"",groupsUsers:[]},actions:{processing:!1,loading:!0},errors:{},nameWarning:"",validation:{hasAlreadyBeenValidated:!1}}}componentDidMount(){this.populate()}componentDidUpdate(){if(this.groupToEdit&&this.isLoading){const e=Object.assign(this.state.actions,{loading:!1});this.setState({actions:e})}}createRefs(){this.references={name:a.createRef()},this.listRef=a.createRef()}bindHandlers(){this.handleSubmit=this.handleSubmit.bind(this),this.handleClose=this.handleClose.bind(this),this.handleNameChange=this.handleNameChange.bind(this),this.handleMemberRoleChange=this.handleMemberRoleChange.bind(this),this.handleMemberRemoved=this.handleMemberRemoved.bind(this),this.handleAutocompleteSelect=this.handleAutocompleteSelect.bind(this),this.handleAutocompleteClose=this.handleAutocompleteClose.bind(this),this.handleAutocompleteOpen=this.handleAutocompleteOpen.bind(this),this.fetchAutocompleteItems=this.fetchAutocompleteItems.bind(this),this.renderItem=this.renderItem.bind(this)}populate(){const e=this.groupToEdit.name,t=JSON.parse(JSON.stringify(this.groupToEdit.groups_users));t.map(this.decorateGroupUserWithUser.bind(this)),this.sortGroupsUsersAlphabeticallyByUserFullName(t),this.setState({groupToEdit:{name:e,groupsUsers:t}})}sortGroupsUsersAlphabeticallyByUserFullName(e){e.sort(((e,t)=>this.getUserFullname(e.user).localeCompare(this.getUserFullname(t.user))))}decorateGroupUserWithUser(e){return e.user=this.findUser(e.user_id),e}findUser(e){return this.props.context.users.find((t=>t.id===e))}async findUserGpgkey(e){return await this.props.context.port.request("passbolt.keyring.get-public-key-info-by-user",e)}async decorateUsersWithGpgkey(e){return Promise.all(e.map((async e=>Object.assign(e,{gpgkey:await this.findUserGpgkey(e.id)}))))}get groupToEdit(){return this.props.userWorkspaceContext.groupToEdit}get isProcessing(){return this.state.actions.processing}get isLoading(){return this.state.actions.loading}get areActionsAllowed(){return!this.isProcessing&&!this.isLoading}isLoggedInUserAdmin(){return this.props.context.loggedInUser&&"admin"===this.props.context.loggedInUser.role.name}get hasMembersChanges(){const e=this.state.groupToEdit.groupsUsers;return!(this.groupToEdit.groups_users.length===e.length)||e.some((e=>this.isMemberChanged(e)))}get hasMembers(){return this.groupsUsers.length>0}get hasManager(){return this.groupsUsers.filter((e=>e.is_admin)).length>0}get isManager(){return this.groupToEdit.groups_users.some((e=>e.user_id===this.props.context.loggedInUser.id&&e.is_admin))}get groupsUsers(){return this.state.groupToEdit.groupsUsers}get hasSubmitDisabled(){return!this.hasManager||!this.areActionsAllowed}handleNameChange(e){this.updateName(e.target.value)}handleMemberRoleChange(e,t){const s=!0===e.target.value;this.updateMemberRole(t,s)}handleMemberRemoved(e,t){this.removeMember(t)}async handleSubmit(e){e.preventDefault(),this.resetErrors();const t=Object.assign(this.state.actions,{processing:!0});if(this.setState({actions:t}),this.validate(),this.hasErrors())return this.handleValidateError();await this.updateGroup().then(this.onEditSuccess.bind(this)).catch(this.onEditFailure.bind(this)).finally((()=>{const e=Object.assign(this.state.actions,{processing:!1});this.setState({actions:e})}))}handleValidateError(){const e=Object.assign(this.state.actions,{processing:!1});this.setState({actions:e}),this.focusFieldError()}focusFieldError(){this.hasErrors("name")&&this.references.name.current.focus()}handleClose(){this.close()}handleAutocompleteOpen(){this.setState({autocompleteOpen:!0})}handleAutocompleteClose(){this.setState({autocompleteOpen:!1})}handleAutocompleteSelect(e){const t=this.groupToEdit.groups_users.find((t=>t.user_id===e.id));t?this.restoreMember(t):this.addMember(e)}isMember(e){return this.groupsUsers.some((t=>t.user_id===e.id))}isMemberChanged(e){const t=this.groupToEdit.groups_users.find((t=>t.id===e.id));return void 0===t||t.is_admin!==e.is_admin}isMemberAdded(e){return void 0===e.id}updateName(e){if(this.setState({groupToEdit:Object.assign({},this.state.groupToEdit,{name:e})}),this.state.validation.hasAlreadyBeenValidated)this.validateName();else{const t=Ge(e,50,this.translate);this.setState({nameWarning:t})}}updateGroupsUsers(e,t){const s=Object.assign({},this.state.groupToEdit,{groups_users:e});this.setState({groupToEdit:s},(()=>{t&&this.listRef.current.scrollTo(this.groupsUsers.length-1)}))}updateMemberRole(e,t){const s=this.groupsUsers.findIndex((t=>t.user_id===e.user_id));e.is_admin=t,this.groupsUsers[s]=e,this.updateGroupsUsers(this.groupsUsers)}addMember(e){const t=!this.hasManager,s={user_id:e.id,is_admin:t};this.decorateGroupUserWithUser(s),this.groupsUsers.push(s),this.updateGroupsUsers(this.groupsUsers,!0)}restoreMember(e){this.decorateGroupUserWithUser(e),this.groupsUsers.push(e),this.updateGroupsUsers(this.groupsUsers,!0)}removeMember(e){const t=this.groupsUsers.findIndex((t=>t.user_id===e.user_id)),s=this.groupsUsers;s.splice(t,1),this.updateGroupsUsers(s)}validate(){this.validateName(),this.setState({validation:Object.assign({},this.state.validation,{hasAlreadyBeenValidated:!0})})}validateName(){this.resetErrors("name"),""===this.state.groupToEdit.name.trim()&&this.setError("name","empty")}setError(e,t,s){s=s||!0;const a=this.state.errors||{};a[e]=a[e]||{},a[e][t]=s,this.setState({errors:a})}resetErrors(e){let t={};e&&(t=this.state.errors,delete t[e]),this.setState({errors:t})}hasErrors(e,t){const s=this.state.errors||{};if(!s)return!1;if(!e){const e=(e,t)=>e||this.hasErrors(t);return Object.getOwnPropertyNames(s).reduce(e,!1)}return t?s[e]&&void 0!==s[e][t]:"object"==typeof s[e]}hasGroupNameAlreadyExists(e){return e?.body?.name?.group_unique}async updateGroup(){const e={id:this.groupToEdit.id,name:this.state.groupToEdit.name,groups_users:this.groupsUsers.map((e=>({id:e.id||void 0,user_id:e.user_id,is_admin:e.is_admin})))};await this.props.context.port.request("passbolt.groups.update",e)}async onEditSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.translate("The group has been updated successfully")),this.close()}onEditFailure(e){"UserAbortsOperationError"===e.name?this.setState({processing:!1}):this.hasGroupNameAlreadyExists(e.data)?(this.setError("name","alreadyExists"),this.setState({processing:!1})):(console.error(e),this.onError(e),this.setState({processing:!1}))}onError(e){const t={error:e};this.props.dialogContext.open(we,t)}close(){this.props.location.pathname.includes("groups/edit")&&this.props.history.push(this.props.location.pathname.replace("edit","view")),this.props.onClose()}formatFingerprint(e){const t=e.toUpperCase().replace(/.{4}/g,"$& ");return a.createElement(a.Fragment,null,t.substr(0,24),a.createElement("br",null),t.substr(25))}getUserFullname(e){return`${e.profile.first_name} ${e.profile.last_name}`}async fetchAutocompleteItems(e){const t=(e=e.toLowerCase())&&e.split(/\s+/)||[""],s=(e,t)=>(e=>new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(e),"i"))(e).test(t);let a=0;const n=this.props.context.users.filter((e=>{const n=a<Le.DISPLAY_LIMIT&&!0===e.active&&!this.isMember(e)&&(e=>t.every((t=>((e,t)=>((e,t)=>s(e,t.username))(e,t)||((e,t)=>s(e,t.profile.first_name)||s(e,t.profile.last_name))(e,t))(t,e))))(e);return n&&a++,n}));return this.decorateUsersWithGpgkey(n)}renderItem(e,t){const s=this.groupsUsers[e],n=this.isMemberChanged(s),r=this.isMemberAdded(s),i=s.user_id;return a.createElement(ze,{key:i,itemKey:i,isMemberChanged:n,isMemberAdded:r,groupUser:s,onMemberRoleChange:this.handleMemberRoleChange,onMemberRemoved:this.handleMemberRemoved,areActionsAllowed:this.areActionsAllowed,isLastItemDisplayed:t>=2})}renderContainer(e,t){return a.createElement("ul",{className:"permissions groups_users",ref:t},e)}get translate(){return this.props.t}render(){return a.createElement(be,{className:"edit-group-dialog",title:this.translate("Edit group"),onClose:this.handleClose,disabled:!this.areActionsAllowed},this.props.context.loggedInUser&&a.createElement("form",{className:"group-form",onSubmit:this.handleSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input text required ${this.hasErrors("name")?"error":""} ${this.areActionsAllowed&&this.isLoggedInUserAdmin()?"":"disabled"}`},a.createElement("label",{htmlFor:"js_field_name"},a.createElement(C.c,null,"Group name")),a.createElement("input",{id:"group-name-input",ref:this.references.name,value:this.state.groupToEdit.name,maxLength:"50",type:"text",placeholder:this.translate("group name"),onChange:this.handleNameChange,disabled:!this.areActionsAllowed||!this.isLoggedInUserAdmin()}),this.hasErrors("name","empty")&&a.createElement("div",{className:"name error-message"},a.createElement(C.c,null,"A name is required.")),this.hasErrors("name","alreadyExists")&&a.createElement("div",{className:"name error-message"},a.createElement(C.c,null,"The group name already exists.")),this.state.nameWarning&&a.createElement("div",{className:"name warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.nameWarning)),a.createElement("div",{className:"input required"},a.createElement("label",null,a.createElement(C.c,null,"Group members"),this.state.nameWarning&&a.createElement(de,{name:"exclamation"})))),a.createElement("div",{className:"group_members"},a.createElement("div",{className:"form-content scroll permission-edit"},this.isLoading&&a.createElement("ul",{className:"permissions groups_users"},a.createElement(Me,null),a.createElement(Me,null),a.createElement(Me,null)),!this.isLoading&&a.createElement(ce(),{ref:this.listRef,itemRenderer:this.renderItem,itemsRenderer:this.renderContainer,length:this.groupsUsers.length,minSize:4,type:this.groupsUsers.length<3?"simple":"uniform",threshold:30})),!this.isLoading&&!this.hasMembers&&a.createElement("div",{className:"message warning"},a.createElement("span",null,a.createElement(C.c,null,"The group is empty, please add a group manager."))),this.hasMembers&&!this.hasManager&&a.createElement("div",{className:"message error at-least-one-manager"},a.createElement("span",null,a.createElement(C.c,null,"Please make sure there is at least one group manager."))),!this.isLoading&&!this.isManager&&a.createElement("div",{className:"message warning feedback cannot-add-user"},a.createElement("span",null,a.createElement(C.c,null,"Only the group manager can add new people to a group."))),this.hasMembersChanges&&this.hasManager&&a.createElement("div",{className:"message warning feedback"},a.createElement("span",null,a.createElement(C.c,null,"You need to click save for the changes to take place.")))),this.isManager&&a.createElement("div",{className:"form-content permission-add"},a.createElement(Le,{id:"user-name-input",name:"name",label:this.translate("Add people"),placeholder:this.translate("Start typing a person name"),searchCallback:this.fetchAutocompleteItems,onSelect:this.handleAutocompleteSelect,onOpen:this.handleAutocompleteOpen,onClose:this.handleAutocompleteClose,disabled:!this.areActionsAllowed,baseUrl:this.props.context.userSettings.getTrustedDomain()})),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{onClick:this.handleClose,disabled:!this.areActionsAllowed}),a.createElement(Ee,{value:this.translate("Save"),disabled:this.hasSubmitDisabled,processing:this.isProcessing}))))}}Ke.propTypes={context:d().any,actionFeedbackContext:d().any,onClose:d().func,dialogContext:d().any,location:d().object,history:d().object,userWorkspaceContext:d().object,t:d().func};const Be=u((0,c.EN)(Xe(D(M((0,k.Z)("common")(Ke))))));function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},$e.apply(this,arguments)}const Ze=a.createContext({filter:{type:null,payload:null},sorter:{propertyName:"user",asc:!1},filteredUsers:[],selectedUsers:[],details:{user:null,group:null,locked:!0},scrollTo:{user:null},groupToEdit:null,onUserScrolled:()=>{},onDetailsLocked:()=>{},onSorterChanged:()=>{},onUserSelected:{single:()=>{}},onGroupToEdit:()=>{}});class Ye extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.initializeProperties()}get defaultState(){return{filter:{type:Qe.NONE},sorter:{propertyName:"modified",asc:!1},filteredUsers:[],selectedUsers:[],details:{user:null,group:null,locked:!0},scrollTo:{user:null},groupToEdit:null,getTranslatedRoleName:this.getTranslatedRoleName.bind(this),onUserScrolled:this.handleUserScrolled.bind(this),onDetailsLocked:this.handleDetailsLocked.bind(this),onSorterChanged:this.handleSorterChange.bind(this),onUserSelected:{single:this.handleUserSelected.bind(this)},onGroupToEdit:this.handleGroupToEdit.bind(this),isAttentionRequired:this.isAttentionRequired.bind(this)}}initializeProperties(){this.users=null,this.groups=[],this.routeLocationKey=null}componentDidMount(){this.populate(),this.handleUsersWaitedFor()}async componentDidUpdate(e,t){await this.handleFilterChange(t.filter),this.handleUsersLoaded(),await this.handleUsersChange(),await this.handleGroupsChange(),await this.handleRouteChange(e.location)}async handleFilterChange(e){e!==this.state.filter&&e.type!==Qe.NONE&&(this.populate(),await this.unselectAll())}async handleUsersChange(){this.props.context.users&&this.props.context.users!==this.users&&(this.users=this.props.context.users,await this.search(this.state.filter),await this.updateDetails(),await this.unselectUnknownUsers())}async handleGroupsChange(){this.props.context.groups&&this.props.context.groups!==this.groups&&(this.groups=this.props.context.groups,await this.refreshSearchFilter(),await this.updateDetails())}async handleRouteChange(e){const t=this.props.location.key!==e.key,s=this.props.location.key!==this.routeLocationKey;this.routeLocationKey=this.props.location.key;const a=this.state.filter.type===Qe.NONE;(t&&s||a)&&(await this.handleGroupRouteChange(),await this.handleUserRouteChange())}async handleGroupRouteChange(){if(null!==this.users&&null!==this.groups){const e=this.props.match.params.selectedGroupId;if(e&&this.props.context.groups){const t=this.props.context.groups.find((t=>t.id===e));t?(await this.search({type:Qe.GROUP,payload:{group:t}}),await this.detailGroup(t),this.props.location.pathname.includes("edit")&&(await this.updateGroupToEdit(t),this.props.dialogContext.open(Be))):this.handleUnknownGroup()}}}async handleUserRouteChange(){if(this.props.location.pathname.includes("users")||this.props.location.pathname.includes("account-recovery-requests/review")){const e=this.props.match.params.selectedUserId;e?await this.handleSingleUserRouteChange(e):await this.handleAllUserRouteChange()}}async handleSingleUserRouteChange(e){if(null!==this.users){const t=this.users.find((t=>t.id===e));this.state.filter.type===Qe.NONE&&await this.search({type:Qe.ALL}),t?(await this.selectFromRoute(t),await this.scrollTo(t),await this.detailUser(t)):this.handleUnknownUser()}}async handleAllUserRouteChange(){if(null!==this.users){const e=this.props.location.state?.filter||{type:Qe.ALL};await this.search(e),await this.detailNothing()}}async handleDetailsLocked(){await this.lockDetails()}handleUnknownUser(){this.props.actionFeedbackContext.displayError("The user does not exist"),this.props.history.push({pathname:"/app/users"})}handleUnknownGroup(){this.props.actionFeedbackContext.displayError("The group does not exist"),this.props.history.push({pathname:"/app/users"})}async handleUserScrolled(){await this.scrollNothing()}async handleSorterChange(e){await this.updateSorter(e),await this.sort()}async handleUserSelected(e){await this.select(e),this.redirectAfterSelection()}async handleGroupToEdit(e){await this.updateGroupToEdit(e)}handleUsersWaitedFor(){this.props.loadingContext.add()}handleUsersLoaded(){null===this.users&&this.props.context.users&&(this.props.loadingContext.remove(),this.handleUsersLoaded=()=>{})}isAttentionRequired(e){return Boolean(e.pending_account_recovery_request)}populate(){this.props.context.port.request("passbolt.users.update-local-storage"),this.props.context.port.request("passbolt.groups.update-local-storage")}async search(e){const t=e.type===Qe.RECENTLY_MODIFIED,s={[Qe.GROUP]:this.searchByGroup.bind(this),[Qe.TEXT]:this.searchByText.bind(this),[Qe.RECENTLY_MODIFIED]:this.searchByRecentlyModified.bind(this),[Qe.ALL]:this.searchAll.bind(this),[Qe.NONE]:()=>{}};await s[e.type](e),t?await this.resetSorter():await this.sort()}async searchAll(e){await this.setState({filter:e,filteredUsers:this.users})}async searchByGroup(e){const t=e.payload.group.groups_users.map((e=>e.user_id)),s=this.users.filter((e=>t.some((t=>t===e.id))));await this.setState({filter:e,filteredUsers:s})}async searchByText(e){const t=e.payload,s=t&&t.split(/\s+/)||[""],a=(e,t)=>(e=>new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(e),"i"))(e).test(t),n=this.users.filter((e=>s.every((t=>((e,t)=>((e,t)=>a(e,t.username))(e,t)||((e,t)=>a(e,t.profile.first_name)||a(e,t.profile.last_name))(e,t))(t,e)))));await this.setState({filter:e,filteredUsers:n})}async searchByRecentlyModified(e){const t=this.users.sort(((e,t)=>B.ou.fromISO(t.modified)<B.ou.fromISO(e.modified)?-1:1));await this.setState({filter:e,filteredUsers:t})}async refreshSearchFilter(){if(this.state.filter.type===Qe.GROUP)if(this.groups.some((e=>e.id===this.state.filter.payload.group.id))){const e=this.groups.find((e=>e.id===this.state.filter.payload.group.id)),t=Object.assign(this.state.filter,{payload:{group:e}});await this.search(t)}else{const e={type:Qe.ALL};this.props.history.push({pathname:"/app/users",state:{filter:e}})}}async select(e){const t=1===this.state.selectedUsers.length&&this.state.selectedUsers[0].id===e.id;await this.setState({selectedUsers:t?[]:[e]})}async selectFromRoute(e){const t=[e];await this.setState({selectedUsers:t})}async unselectAll(){0!==this.state.selectedUsers.length&&await this.setState({selectedUsers:[]})}async unselectUnknownUsers(){const e=this.state.selectedUsers.filter((e=>this.users.some((e=>t=>t.id===e.id)(e))));await this.setState({selectedUsers:e})}redirectAfterSelection(){if(null!==this.users&&null!==this.groups)if(1===this.state.selectedUsers.length)this.props.history.push(`/app/users/view/${this.state.selectedUsers[0].id}`);else{const{filter:e}=this.state;e.type===Qe.GROUP?this.props.location.pathname!==`/app/groups/view/${this.state.filter.payload.group.id}`&&this.props.history.push({pathname:`/app/groups/view/${this.state.filter.payload.group.id}`}):"/app/users"!==this.props.location.pathname&&this.props.history.push({pathname:"/app/users",state:{filter:e}})}}async updateSorter(e){const t={propertyName:e,asc:this.state.sorter.propertyName!==e||!this.state.sorter.asc};await this.setState({sorter:t})}async resetSorter(){this.setState({sorter:{propertyName:"modified",asc:!1}})}async sort(){const e=e=>this.state.sorter.asc?e:(e=>(t,s)=>-e(t,s))(e),t=(t,s)=>e(((e,a)=>s(e[t],a[t]))),s=t=>e(t),a=e=>`${e.profile.first_name} ${e.profile.last_name}`,n=["modified","last_logged_in"].includes(this.state.sorter.propertyName)?(e,t)=>e?t&&B.ou.fromISO(e)<B.ou.fromISO(t)?-1:1:-1:(e,t)=>(e||"").localeCompare(t||""),r="name"===this.state.sorter.propertyName,i="is_mfa_enabled"===this.state.sorter.propertyName,o="role.name"===this.state.sorter.propertyName,l="attentionRequired"===this.state.sorter.propertyName,c="account_recovery_user_setting.status"===this.state.sorter.propertyName;let m;m=r?s(((e,t)=>a(e).localeCompare(a(t)))):i?s(((e,t)=>t.is_mfa_enabled===e.is_mfa_enabled?0:t.is_mfa_enabled?-1:1)):l?s(((e,t)=>this.isAttentionRequired(t)===this.isAttentionRequired(e)?0:this.isAttentionRequired(t)?1:-1)):o?t("role_id",((e,t)=>this.getTranslatedRoleName(e).localeCompare(this.getTranslatedRoleName(t)))):c?s(((e,t)=>t?.account_recovery_user_setting?.status===e?.account_recovery_user_setting?.status?0:t?.account_recovery_user_setting?.status?-1:1)):t(this.state.sorter.propertyName,n),await this.setState({filteredUsers:this.state.filteredUsers.sort(m)})}async detailGroup(e){const t=this.state.details.locked;await this.setState({details:{group:e,user:null,locked:t}})}async detailUser(e){const t=this.state.details.locked;await this.setState({details:{group:null,user:e,locked:t}})}async detailNothing(){if(this.state.details.user||this.state.details.group){const e=this.state.details.locked;await this.setState({details:{group:null,user:null,locked:e}})}}async lockDetails(){const e=this.state.details,t=this.state.details.locked;await this.setState({details:Object.assign({},e,{locked:!t})})}async updateDetails(){if(this.state.details.user||this.state.details.group){const e=this.state.details.user,t=this.state.details.locked;if(e){const e=this.users.find((e=>e.id===this.state.details.user.id));await this.setState({details:{user:e,group:null,locked:t}})}else{const e=this.groups.find((e=>e.id===this.state.details.group.id));await this.setState({details:{group:e,user:null,locked:t}})}}}async scrollTo(e){await this.setState({scrollTo:{user:e}})}async scrollNothing(){await this.setState({scrollTo:{}})}async updateGroupToEdit(e){await this.setState({groupToEdit:e})}getTranslatedRoleName(e){return this.props.context.roles?this.props.t(this.props.context.roles.find((t=>t.id===e)).name):""}render(){return a.createElement(Ze.Provider,{value:this.state},this.props.children)}}Ye.displayName="UserWorkspaceContextProvider",Ye.propTypes={context:d().any,children:d().any,location:d().object,match:d().object,history:d().object,actionFeedbackContext:d().object,loadingContext:d().object,dialogContext:d().any,t:d().func};const Je=u((0,c.EN)(M(D(H((0,k.Z)("common")(Ye))))));function Xe(e){return class extends a.Component{render(){return a.createElement(Ze.Consumer,null,(t=>a.createElement(e,$e({userWorkspaceContext:t},this.props))))}}}const Qe={NONE:"NONE",ALL:"ALL",GROUP:"FILTER-BY-GROUP",TEXT:"FILTER-BY-TEXT-SEARCH",RECENTLY_MODIFIED:"FILTER-BY-RECENTLY-MODIFIED"};function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},et.apply(this,arguments)}const tt=a.createContext({ContextualMenu:null,show:()=>{},hide:()=>{}});class st extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{contextualMenus:[],show:(e,t)=>this.setState({contextualMenus:[...this.state.contextualMenus,{ContextualMenuComponent:e,componentProps:t}]}),hide:e=>this.setState({contextualMenus:this.state.contextualMenus.filter(((t,s)=>s!==e))})}}render(){return a.createElement(tt.Provider,{value:this.state},this.props.children)}}function at(e){return class extends a.Component{render(){return a.createElement(tt.Consumer,null,(t=>a.createElement(e,et({contextualMenuContext:t},this.props))))}}}function nt(){return nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},nt.apply(this,arguments)}st.displayName="ContextualMenuContextProvider",st.propTypes={children:d().any};class rt extends a.Component{constructor(e){super(e),this.createRefs(),this.bindCallback()}bindCallback(){this.handleHide=this.handleHide.bind(this)}createRefs(){this.elementRef=a.createRef()}handleHide(e){this.props.contextualMenuContext.hide(e)}render(){return a.createElement("div",{ref:this.elementRef},this.props.contextualMenuContext.contextualMenus.map(((e,t)=>a.createElement(e.ContextualMenuComponent,nt({key:t,hide:()=>this.handleHide(t)},e.componentProps)))))}}rt.propTypes={contextualMenuContext:d().any};const it=at(rt);class ot extends a.Component{constructor(e){super(e),this.bindHandlers()}bindHandlers(){this.handleProgressEnd=this.handleProgressEnd.bind(this)}handleProgressEnd(){this.props.onProgressCompleted()}render(){return a.createElement("div",{className:"update-loading-bar"},a.createElement("div",{className:"progress-bar"},a.createElement("span",{className:"progress",onTransitionEnd:this.handleProgressEnd,style:{width:`${this.props.progress}%`||0}})))}}ot.propTypes={progress:d().number,onProgressCompleted:d().func};const lt=ot;class ct extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers()}componentDidUpdate(e){this.handleLoadingCounterChanged(e)}get defaultState(){return{progressRate:0,mustShow:!1}}bindHandlers(){this.handleProgressCompleted=this.handleProgressCompleted.bind(this)}handleProgressCompleted(){100===this.state.progressRate&&this.reset()}handleLoadingCounterChanged(e){if(e.loadingContext.counter!==this.props.loadingContext.counter){const t=0===e.loadingContext.counter&&this.props.loadingContext.counter>0,s=e.loadingContext.counter>0&&0===this.props.loadingContext.counter;t?this.load(80):s&&this.load(100)}}reset(){this.setState({progressRate:0,mustShow:!1})}load(e){this.setState({mustShow:!0}),setTimeout((()=>{this.setState({progressRate:e})}))}render(){return a.createElement("div",{className:"loading-bar-wrapper"},this.state.mustShow&&a.createElement(lt,{progress:this.state.progressRate,onProgressCompleted:this.handleProgressCompleted}))}}ct.propTypes={loadingContext:d().any};const mt=H(ct);class dt extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.createRefs(),this.bindCallbacks()}get defaultState(){return{positionY:this.props.top}}bindCallbacks(){this.handleDocumentClickEvent=this.handleDocumentClickEvent.bind(this),this.handleDocumentContextualMenuEvent=this.handleDocumentContextualMenuEvent.bind(this),this.handleDocumentDragStartEvent=this.handleDocumentDragStartEvent.bind(this),this.handleDocumentScrollEvent=this.handleDocumentScrollEvent.bind(this)}createRefs(){this.elementRef=a.createRef()}componentDidMount(){this.adjustPositionY(),document.addEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.addEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.addEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0}),document.addEventListener("scroll",this.handleDocumentScrollEvent,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.removeEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.removeEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0}),document.removeEventListener("scroll",this.handleDocumentScrollEvent,{capture:!0})}handleDocumentScrollEvent(){this.props.hide()}handleDocumentClickEvent(e){this.elementRef.current.contains(e.target)||(e.stopPropagation(),this.props.hide())}handleDocumentContextualMenuEvent(e){this.elementRef.current.contains(e.target)||this.props.hide()}handleDocumentDragStartEvent(){this.props.hide()}adjustPositionY(){const e=this.elementRef.current.offsetHeight;this.props.top+e>window.innerHeight&&(this.setState({positionY:window.innerHeight-e}),this.elementRef.current.style.zIndex=1e3)}getStyle(){return{position:"absolute",display:"block",left:this.props.left,top:this.state.positionY}}render(){return a.createElement("ul",{ref:this.elementRef,className:`contextual-menu ${this.props.className}`,style:this.getStyle()},this.props.children)}}dt.defaultProps={className:""},dt.propTypes={children:d().any,left:d().number,hide:d().func,top:d().number,className:d().string};const ht=dt;class pt extends a.Component{constructor(e,t){super(e,t),this.state=this.defaultState,this.createInputRefs(),this.bindEventHandlers()}get defaultState(){const e=this.props.context.users.find((e=>e.id===this.props.context.editUserDialogProps.id)),t=this.props.context.roles.find((t=>t.id===e.role_id));return{loading:!0,processing:!1,first_name:e.profile.first_name,first_nameError:null,first_nameWarning:"",last_name:e.profile.last_name,last_nameError:null,last_nameWarning:"",username:e.username,is_admin:"admin"===t.name,hasAlreadyBeenValidated:!1}}componentDidMount(){this.setState({loading:!1},(()=>{this.firstNameRef.current.focus()}))}get isLoggedInUserAsEditing(){return this.props.context.editUserDialogProps&&this.props.context.loggedInUser&&this.props.context.editUserDialogProps.id===this.props.context.loggedInUser.id}createInputRefs(){this.firstNameRef=a.createRef(),this.lastNameRef=a.createRef()}bindEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleFirstNameInputOnKeyUp=this.handleFirstNameInputOnKeyUp.bind(this),this.handleLastNameInputOnKeyUp=this.handleLastNameInputOnKeyUp.bind(this),this.handleCheckboxClick=this.handleCheckboxClick.bind(this)}handleClose(){this.props.context.setContext({editUserDialogProps:null}),this.props.onClose()}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}handleCheckboxClick(e){const t=e.target,s=t.checked,a=t.name;this.setState({[a]:s})}handleFirstNameInputOnKeyUp(){if(this.state.hasAlreadyBeenValidated){const e=this.validateFirstNameInput();this.setState(e)}else{const e=Ge(this.state.first_name,He,this.translate);this.setState({first_nameWarning:e})}}handleLastNameInputOnKeyUp(){if(this.state.hasAlreadyBeenValidated){const e=this.validateLastNameInput();this.setState(e)}else{const e=Ge(this.state.last_name,He,this.translate);this.setState({last_nameWarning:e})}}async handleFormSubmit(e){if(e.preventDefault(),await this.setState({hasAlreadyBeenValidated:!0}),!this.state.processing){if(await this.toggleProcessing(),await this.validate(),this.hasValidationError())return await this.toggleProcessing(),void this.focusFirstFieldError();try{await this.updateUser(),await this.handleSaveSuccess()}catch(e){this.handleSaveError(e)}}}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.translate("The user has been updated successfully")),await this.updateLoggedInUserIfNeeded(),this.props.onClose()}handleSaveError(e){"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e)),this.setState({processing:!1})}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}async toggleProcessing(){const e=this.state.processing;return this.setState({processing:!e})}focusFirstFieldError(){this.state.first_nameError?this.firstNameRef.current.focus():this.state.last_nameError&&this.lastNameRef.current.focus()}async updateUser(){const e=this.props.context.roles.find((e=>this.state.is_admin?"admin"===e.name:"user"===e.name)),t={id:this.props.context.editUserDialogProps.id,username:this.state.username,profile:{first_name:this.state.first_name,last_name:this.state.last_name},role_id:e.id};return await this.props.context.port.request("passbolt.users.update",t)}async updateLoggedInUserIfNeeded(){if(this.isLoggedInUserAsEditing){const e=await this.props.context.port.request("passbolt.users.find-logged-in-user");this.props.context.setContext({loggedInUser:e})}await this.props.context.setContext({editUserDialogProps:null})}async validate(){return await Promise.all([this.validateFirstNameInput(),this.validateLastNameInput()]),this.hasValidationError()}async validateFirstNameInput(){let e=null;return this.state.first_name.trim().length||(e=this.translate("A first name is required.")),this.setState({first_nameError:e})}async validateLastNameInput(){let e=null;return this.state.last_name.trim().length||(e=this.translate("A last name is required.")),this.setState({last_nameError:e})}hasValidationError(){return null!==this.state.first_nameError||null!==this.state.last_nameError}hasAllInputDisabled(){return this.state.processing||this.state.loading}get translate(){return this.props.t}render(){return a.createElement(be,{className:"user-edit-dialog",title:this.translate("Edit User"),onClose:this.handleClose,disabled:this.hasAllInputDisabled()},a.createElement("form",{className:"user-edit-form",onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input text required ${this.state.first_nameError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"user-first-name-input"},a.createElement(C.c,null,"First name"),this.state.first_nameWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"user-first-name-input",name:"first_name",ref:this.firstNameRef,type:"text",value:this.state.first_name,placeholder:this.translate("First name"),required:"required",disabled:this.hasAllInputDisabled(),onKeyUp:this.handleFirstNameInputOnKeyUp,onChange:this.handleInputChange,autoComplete:"off",autoFocus:!0}),this.state.first_nameError&&a.createElement("div",{className:"first_name error-message"},this.state.first_nameError),this.state.first_nameWarning&&a.createElement("div",{className:"firstname warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.first_nameWarning)),a.createElement("div",{className:`input text required ${this.state.last_nameError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"user-last-name-input"},a.createElement(C.c,null,"Last name")),a.createElement("input",{id:"user-last-name-input",name:"last_name",maxLength:"128",ref:this.lastNameRef,type:"text",value:this.state.last_name,placeholder:this.translate("Last name"),required:"required",disabled:this.hasAllInputDisabled(),onKeyUp:this.handleLastNameInputOnKeyUp,onChange:this.handleInputChange,autoComplete:"off",autoFocus:!0}),this.state.last_nameError&&a.createElement("div",{className:"last_name error-message"},this.state.last_nameError),this.state.last_nameWarning&&a.createElement("div",{className:"lastname warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.last_nameWarning)),a.createElement("div",{className:"input text required disabled"},a.createElement("label",{htmlFor:"user-username-input"},a.createElement(C.c,null,"Username / Email"),this.state.last_nameWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"user-username-input",name:"username",maxLength:"128",type:"text",value:this.state.username,placeholder:this.translate("Username"),required:"required",disabled:!0,autoComplete:"off",autoFocus:!0})),a.createElement("div",{className:"input checkbox-wrapper "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",{htmlFor:"is_admin_checkbox"},a.createElement(C.c,null,"Role")),a.createElement("div",{className:"input checkbox"},a.createElement("input",{id:"is_admin_checkbox",name:"is_admin",disabled:this.isLoggedInUserAsEditing||this.hasAllInputDisabled(),onChange:this.handleCheckboxClick,checked:this.state.is_admin,type:"checkbox"}),a.createElement("label",{htmlFor:"is_admin_checkbox"}," ",a.createElement(C.c,null,"This user is an administrator"))),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"Note: Administrators can add and delete users; They can also create groups and assign group managers; By default they can not see all passwords.")))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleClose}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Save")}))))}}pt.propTypes={context:d().any,actionFeedbackContext:d().any,onClose:d().func,dialogContext:d().any,t:d().func};const ut=u(D(M((0,k.Z)("common")(pt))));class gt extends a.Component{constructor(e,t){super(e,t),this.state=this.defaultState,this.bindEventHandlers()}get defaultState(){return{actions:{processing:!1}}}bindEventHandlers(){this.handleConfirm=this.handleConfirm.bind(this),this.handleClose=this.handleClose.bind(this)}get user(){return this.props.userWorkspaceContext.selectedUsers[0]}get isProcessing(){return this.state.actions.processing}get areActionsDisabled(){return this.isProcessing}handleConfirm(e){e.preventDefault(),this.disableMFA()}handleClose(){this.close()}async disableMFA(){await this.setState({actions:{processing:!0}}),await this.props.context.port.request("passbolt.mfa.disable-for-user",this.user.id).then(this.onDisableMFASuccess.bind(this)).catch(this.onDisableMFAFailure.bind(this))}async onDisableMFASuccess(){await this.setState({actions:{processing:!1}}),this.props.actionFeedbackContext.displaySuccess(this.translate("Multi-factor authentication has been disabled successfully")),this.props.onClose()}onDisableMFAFailure(e){this.setState({actions:{processing:!1}});const t={error:e};this.props.dialogContext.open(we,t)}close(){this.props.onClose()}get translate(){return this.props.t}render(){const e=`${this.user.profile.first_name} ${this.user.profile.last_name}`,t=this.user.username;return a.createElement(be,{title:this.translate("Are you sure?"),onClose:this.handleClose,disabled:this.areActionsDisabled},a.createElement("form",{onSubmit:this.handleConfirm,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("p",null,a.createElement(C.c,null,"You are about to disable second-factor authentication (MFA) for the user ",a.createElement("strong",null,{name:e}," (",{username:t},")"),".")),a.createElement("p",null,a.createElement(C.c,null,"Existing settings will be lost. This action cannot be undone."))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.areActionsDisabled,onClick:this.handleClose}),a.createElement(Ee,{value:this.translate("Disable MFA"),warning:!0,processing:this.isProcessing,disabled:this.areActionsDisabled}))))}}gt.propTypes={context:d().any,actionFeedbackContext:d().any,onClose:d().func,dialogContext:d().any,userWorkspaceContext:d().any,t:d().func};const ft=u(Xe(D(M((0,k.Z)("common")(gt)))));class bt extends a.Component{constructor(e,t){super(e,t),this.initializeProperties(),this.state=this.getDefaultState(),this.initEventHandlers()}initializeProperties(){this.groupsErrors=this.getGroupsErrors(),this.groupsGroupsUsersOptions=this.getGroupsGroupsUsersOptionsMap(),this.foldersErrors=this.getFoldersErrors(),this.resourcesErrors=this.getResourcesErrors(),this.acosPermissionsOptions=this.getAcosPermissionsOptionsMap()}getDefaultState(){return{processing:!1,owners:this.populateDefaultOwners(),managers:this.populateDefaultManagers()}}initEventHandlers(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleOnChangeOwner=this.handleOnChangeOwner.bind(this),this.handleOnChangeManager=this.handleOnChangeManager.bind(this)}getGroupsErrors(){const e=this.props.context.deleteUserWithConflictsDialogProps.errors;return(e.groups&&e.groups.sole_manager||[]).sort(((e,t)=>e.name.localeCompare(t.name)))}getFoldersErrors(){const e=this.props.context.deleteUserWithConflictsDialogProps.errors;return(e.folders&&e.folders.sole_owner||[]).sort(((e,t)=>e.name.localeCompare(t.name)))}getResourcesErrors(){const e=this.props.context.deleteUserWithConflictsDialogProps.errors;return(e.resources&&e.resources.sole_owner||[]).sort(((e,t)=>e.name.localeCompare(t.name)))}getGroupsGroupsUsersOptionsMap(){return this.groupsErrors.reduce(((e,t)=>Object.assign(e,{[t.id]:this.getGroupGroupsUsersOptions(t)})),{})}getGroupGroupsUsersOptions(e){let t=e.groups_users;return t=this.filterOutUserToDeleteFromGroupsUsers(t),t=this.decorateGroupsUsersWithUserEntity(t),t=this.sortGroupsUsersAlphabeticallyByUserFullName(t),t}filterOutUserToDeleteFromGroupsUsers(e){return e.filter((e=>e.user_id!==this.userToDelete.id))}decorateGroupsUsersWithUserEntity(e){return e.forEach((e=>e.user=this.getUser(e.user_id))),e}sortGroupsUsersAlphabeticallyByUserFullName(e){return e.sort(((e,t)=>this.getUserFullName(e.user).localeCompare(this.getUserFullName(t.user))))}getAcosPermissionsOptionsMap(){const e={};return this.resourcesErrors.forEach((t=>{e[t.id]=this.getAcoPermissionsOptions(t)})),this.foldersErrors.forEach((t=>{e[t.id]=this.getAcoPermissionsOptions(t)})),e}getAcoPermissionsOptions(e){let t=e.permissions;return t=this.filterOutUserToDeleteFromPermissions(t),t=this.decoratePermissionWithAcoEntity(t),t=this.sortPermissionsAlphabeticallyByAcoName(t),t}filterOutUserToDeleteFromPermissions(e){return e.filter((e=>e.aro_foreign_key!==this.userToDelete.id))}decoratePermissionWithAcoEntity(e){return e.forEach((e=>{"Group"===e.aro?e.group=this.getGroup(e.aro_foreign_key):e.user=this.getUser(e.aro_foreign_key)})),e}sortPermissionsAlphabeticallyByAcoName(e){return e.sort(((e,t)=>{const s="Group"===e.aro?e.group.name:this.getUserFullName(e.user),a="Group"===t.aro?t.group.name:this.getUserFullName(t.user);return s.localeCompare(a)}))}getUser(e){return this.props.context.users.find((t=>t.id===e))}getGroup(e){return this.props.context.groups.find((t=>t.id===e))}getUserFullName(e){return`${e.profile.first_name} ${e.profile.last_name}`}async handleFormSubmit(e){e.preventDefault(),this.state.processing||await this.delete()}handleCloseClick(){this.props.onClose(),this.props.context.setContext({deleteUserWithConflictsDialogProps:null})}handleOnChangeOwner(e,t){const s=e.target.value,a=this.state.owners;Object.assign(a,{[t]:s}),this.setState({owners:a})}handleOnChangeManager(e,t){const s=e.target.value,a=this.state.managers;Object.assign(a,{[t]:s}),this.setState({managers:a})}createPermissionOwnersTransfer(){if(null!=this.state.owners){const e=[];for(const[t,s]of Object.entries(this.state.owners))e.push({id:s,aco_foreign_key:t});return e}return null}createPermissionManagersTransfer(){if(null!==this.state.managers){const e=[];for(const[t,s]of Object.entries(this.state.managers))e.push({id:s,group_id:t});return e}return null}createUserDeleteTransfer(){const e={};return(this.hasResourcesConflict()||this.hasFolderConflict())&&(e.owners=this.createPermissionOwnersTransfer()),this.hasGroupsConflict()&&(e.managers=this.createPermissionManagersTransfer()),e}async delete(){this.setState({processing:!0});try{const e=this.createUserDeleteTransfer();this.props.loadingContext.add(),await this.props.context.port.request("passbolt.users.delete",this.userToDelete.id,e),this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The user has been deleted successfully")),this.props.onClose(),this.props.context.setContext({deleteUserWithConflictsDialogProps:null})}catch(e){this.props.loadingContext.remove(),"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e)),this.setState({processing:!1})}}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}populateDefaultOwners(){const e={};return this.hasResourcesConflict()&&this.resourcesErrors.forEach((t=>{const s=this.acosPermissionsOptions[t.id][0];s&&(e[t.id]=s.id)})),this.hasFolderConflict()&&this.foldersErrors.forEach((t=>{const s=this.acosPermissionsOptions[t.id][0];s&&(e[t.id]=s.id)})),e}populateDefaultManagers(){return this.groupsErrors.reduce(((e,t)=>{const s=this.groupsGroupsUsersOptions[t.id][0];return Object.assign(e,{[t.id]:s.id})}),{})}get userToDelete(){return this.props.context.deleteUserWithConflictsDialogProps.user}hasFolderConflict(){return this.foldersErrors&&this.foldersErrors.length>0}hasResourcesConflict(){return this.resourcesErrors&&this.resourcesErrors.length>0}hasGroupsConflict(){return this.groupsErrors&&this.groupsErrors.length>0}getAcoPermissionsList(e){const t=e=>"User"===e.aro&&this.getUserOptionLabel(e.user)||"Group"===e.aro&&e.group.name;return this.acosPermissionsOptions[e]?.map((e=>({value:e.id,label:t(e)})))||[]}getGroupUsersList(e){return this.groupsGroupsUsersOptions[e]?.map((e=>({value:e.id,label:this.getUserOptionLabel(e.user)})))||[]}getUserOptionLabel(e){return`${e.profile.first_name} ${e.profile.last_name} (${e.username})`}hasAllInputDisabled(){return this.state.processing}get translate(){return this.props.t}render(){return a.createElement(be,{title:this.translate("You cannot delete this user!"),onClose:this.handleCloseClick,disabled:this.state.processing,className:"delete-user-dialog"},a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content intro"},a.createElement("p",null,a.createElement(C.c,null,"You are about to delete the user ",a.createElement("strong",{className:"dialog-variable"},{user:this.getUserFullName(this.userToDelete)}),".")),a.createElement("p",null,a.createElement(C.c,null,"This user is the sole owner of some content. You need to transfer the ownership to others to continue."))),a.createElement("div",{className:"ownership-transfer"},this.hasFolderConflict()&&a.createElement("div",null,a.createElement("h3",null,a.createElement(C.c,null,"Folders")),a.createElement("ul",{className:"ownership-transfer-items"},this.foldersErrors.map((e=>a.createElement("li",{key:e.id},a.createElement("div",{className:"select-wrapper input required "+(this.state.processing?"disabled":"")},a.createElement("label",{htmlFor:"transfer_folder_owner"},e.name," (",a.createElement(C.c,null,"Folder"),") ",a.createElement(C.c,null,"new owner"),":"),a.createElement(qe,{className:"form-element",value:this.state.owners[e.id],items:this.getAcoPermissionsList(e.id),onChange:t=>this.handleOnChangeOwner(t,e.id)}))))))),this.hasResourcesConflict()&&a.createElement("div",null,a.createElement("h3",null,"Passwords"),a.createElement("ul",{className:"ownership-transfer-items"},this.resourcesErrors.map((e=>a.createElement("li",{key:e.id},a.createElement("div",{className:"select-wrapper input required "+(this.state.processing?"disabled":"")},a.createElement("label",{htmlFor:"transfer_resource_owner"},e.name," (",a.createElement(C.c,null,"Password"),") ",a.createElement(C.c,null,"new owner"),":"),a.createElement(qe,{className:"form-element",value:this.state.owners[e.id],items:this.getAcoPermissionsList(e.id),onChange:t=>this.handleOnChangeOwner(t,e.id)}))))))),this.hasGroupsConflict()&&a.createElement("div",null,a.createElement("h3",null,"Groups"),a.createElement("ul",{className:"ownership-transfer-items"},this.groupsErrors.map((e=>a.createElement("li",{key:e.id},a.createElement("div",{className:"select-wrapper input required "+(this.state.processing?"disabled":"")},a.createElement("label",{htmlFor:"transfer_group_manager"},e.name," (",a.createElement(C.c,null,"Group"),") ",a.createElement(C.c,null,"new manager"),":"),a.createElement(qe,{className:"form-element",value:this.state.managers[e.id],items:this.getGroupUsersList(e.id),onChange:t=>this.handleOnChangeManager(t,e.id)})))))))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleCloseClick}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Delete"),warning:!0}))))}}bt.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,dialogContext:d().any,loadingContext:d().any,t:d().func};const yt=u(H(D(M((0,k.Z)("common")(bt)))));class Et extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.initEventHandlers()}getDefaultState(){return{processing:!1}}initEventHandlers(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}async handleFormSubmit(e){e.preventDefault(),this.state.processing||await this.delete()}handleCloseClick(){this.props.onClose(),this.props.context.setContext({deleteUserDialogProps:null})}async delete(){this.setState({processing:!0});try{this.props.loadingContext.add(),await this.props.context.port.request("passbolt.users.delete",this.props.context.deleteUserDialogProps.user.id),this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The user has been deleted successfully")),this.props.onClose(),this.props.context.setContext({deleteUserDialogProps:null})}catch(e){this.props.loadingContext.remove(),"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e)),this.setState({processing:!1})}}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}hasAllInputDisabled(){return this.state.processing}getUser(){return`${this.props.context.deleteUserDialogProps.user.profile.first_name} ${this.props.context.deleteUserDialogProps.user.profile.last_name} (${this.props.context.deleteUserDialogProps.user.username})`}get translate(){return this.props.t}render(){return a.createElement(be,{title:this.translate("Delete user?"),onClose:this.handleCloseClick,disabled:this.state.processing,className:"delete-user-dialog"},a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("p",null,a.createElement(C.c,null,"Are you sure you want to delete ",a.createElement("strong",{className:"dialog-variable"},{user:this.getUser()}),"?")),a.createElement("p",null,a.createElement(C.c,null,"This action cant be undone. All the data associated with this user will be permanently deleted."))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleCloseClick}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Delete"),warning:!0}))))}}Et.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,dialogContext:d().any,loadingContext:d().any,t:d().func};const vt=u(H(D(M((0,k.Z)("common")(Et)))));function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Ct.apply(this,arguments)}const kt=a.createContext({workflows:[],start:()=>{},stop:()=>{}});class wt extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{workflows:[],start:(e,t)=>{const s=(0,x.Z)();return this.setState({workflows:[...this.state.workflows,{key:s,Workflow:e,workflowProps:t}]}),s},stop:async e=>await this.setState({workflows:this.state.workflows.filter((t=>e!==t.key))})}}render(){return a.createElement(kt.Provider,{value:this.state},this.props.children)}}function St(e){return class extends a.Component{render(){return a.createElement(kt.Consumer,null,(t=>a.createElement(e,Ct({workflowContext:t},this.props))))}}}function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},xt.apply(this,arguments)}wt.displayName="WorkflowContextProvider",wt.propTypes={children:d().any};const Nt=a.createContext({accountRecoveryOrganizationPolicy:null,status:null,findAccountRecoveryPolicy:()=>{},getOrganizationPolicy:()=>{},getRequestor:()=>{},getRequestedDate:()=>{},getPolicy:()=>{},getUserAccountRecoverySubscriptionStatus:()=>{},isAccountRecoveryChoiceRequired:()=>{},isPolicyEnabled:()=>{},loadAccountRecoveryPolicy:()=>{},reloadAccountRecoveryPolicy:()=>{}});class Rt extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{accountRecoveryOrganizationPolicy:null,status:null,findAccountRecoveryPolicy:this.findAccountRecoveryPolicy.bind(this),getOrganizationPolicy:this.getOrganizationPolicy.bind(this),getRequestor:this.getRequestor.bind(this),getRequestedDate:this.getRequestedDate.bind(this),getPolicy:this.getPolicy.bind(this),getUserAccountRecoverySubscriptionStatus:this.getUserAccountRecoverySubscriptionStatus.bind(this),setUserAccountRecoveryStatus:this.setUserAccountRecoveryStatus.bind(this),isAccountRecoveryChoiceRequired:this.isAccountRecoveryChoiceRequired.bind(this),isPolicyEnabled:this.isPolicyEnabled.bind(this),loadAccountRecoveryPolicy:this.loadAccountRecoveryPolicy.bind(this),reloadAccountRecoveryPolicy:this.reloadAccountRecoveryPolicy.bind(this)}}async loadAccountRecoveryPolicy(){null===this.state.accountRecoveryOrganizationPolicy&&await this.findAccountRecoveryPolicy()}async reloadAccountRecoveryPolicy(){await this.findAccountRecoveryPolicy()}async findAccountRecoveryPolicy(){if(!this.props.context.siteSettings.canIUse("accountRecovery"))return;const e=this.props.context.loggedInUser;if(!e)return;const t=await this.props.accountRecoveryUserService.getOrganizationAccountRecoverySettings(),s=e.account_recovery_user_setting?.status||Rt.STATUS_PENDING;this.setState({accountRecoveryOrganizationPolicy:t,status:s})}getOrganizationPolicy(){return this.state.accountRecoveryOrganizationPolicy}getRequestedDate(){return this.getOrganizationPolicy()?.modified}getRequestor(){return this.getOrganizationPolicy()?.creator}getPolicy(){return this.getOrganizationPolicy()?.policy}getUserAccountRecoverySubscriptionStatus(){return this.state.status}setUserAccountRecoveryStatus(e){this.setState({status:e})}isAccountRecoveryChoiceRequired(){if(null===this.getOrganizationPolicy())return!1;const e=this.getPolicy();return this.state.status===Rt.STATUS_PENDING&&e!==Rt.POLICY_DISABLED}isPolicyEnabled(){const e=this.getPolicy();return e&&e!==Rt.POLICY_DISABLED}static get STATUS_PENDING(){return"pending"}static get POLICY_DISABLED(){return"disabled"}static get POLICY_MANDATORY(){return"mandatory"}static get POLICY_OPT_OUT(){return"opt-out"}static get STATUS_APPROVED(){return"approved"}render(){return a.createElement(Nt.Provider,{value:this.state},this.props.children)}}Rt.propTypes={context:d().any.isRequired,children:d().any,accountRecoveryUserService:d().object.isRequired};const It=u(Rt);function Dt(e){return class extends a.Component{render(){return a.createElement(Nt.Consumer,null,(t=>a.createElement(e,xt({accountRecoveryContext:t},this.props))))}}}class Tt extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{viewPassword:!1,hasPassphraseFocus:!1}}bindCallbacks(){this.handleInputChange=this.handleInputChange.bind(this),this.handlePasswordInputFocus=this.handlePasswordInputFocus.bind(this),this.handlePasswordInputBlur=this.handlePasswordInputBlur.bind(this),this.handleViewPasswordButtonClick=this.handleViewPasswordButtonClick.bind(this)}handleInputChange(e){this.props.onChange(e)}handlePasswordInputFocus(){this.setState({hasPassphraseFocus:!0})}handlePasswordInputBlur(){this.setState({hasPassphraseFocus:!1})}handleViewPasswordButtonClick(){this.props.disabled||this.setState({viewPassword:!this.state.viewPassword})}get securityTokenStyle(){const e={background:this.props.securityToken.textColor,color:this.props.securityToken.backgroundColor},t={background:this.props.securityToken.backgroundColor,color:this.props.securityToken.textColor};return this.state.hasPassphraseFocus?e:t}get passphraseInputStyle(){const e={background:this.props.securityToken.backgroundColor,color:this.props.securityToken.textColor,"--passphrase-placeholder-color":this.props.securityToken.textColor};return this.state.hasPassphraseFocus?e:void 0}get previewStyle(){const e={"--icon-color":this.props.securityToken.textColor,"--icon-background-color":this.props.securityToken.backgroundColor};return this.state.hasPassphraseFocus?e:void 0}render(){return a.createElement("div",{className:"input password "+(this.props.securityToken?"security":""),style:this.props.securityToken?this.passphraseInputStyle:void 0},a.createElement("input",{id:this.props.id,name:this.props.name,maxLength:"4096",placeholder:this.props.placeholder,type:this.state.viewPassword&&!this.props.disabled?"text":"password",onKeyUp:this.props.onKeyUp,value:this.props.value,onFocus:this.handlePasswordInputFocus,onBlur:this.handlePasswordInputBlur,onChange:this.handleInputChange,disabled:this.props.disabled,readOnly:this.props.readOnly,autoComplete:this.props.autoComplete,ref:this.props.inputRef}),this.props.preview&&a.createElement("div",{className:"password-view-wrapper"},a.createElement("a",{onClick:this.handleViewPasswordButtonClick,style:this.props.securityToken?this.previewStyle:void 0,className:"password-view infield button button-transparent "+(this.props.disabled?"disabled":"")},!this.state.viewPassword&&a.createElement(de,{name:"eye-open"}),this.state.viewPassword&&a.createElement(de,{name:"eye-close"}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"View")))),this.props.securityToken&&a.createElement("div",{className:"security-token-wrapper"},a.createElement("span",{className:"security-token",style:this.securityTokenStyle},this.props.securityToken.code)))}}Tt.defaultProps={id:"",name:"",autoComplete:"off"},Tt.propTypes={context:d().any,id:d().string,name:d().string,value:d().string.isRequired,placeholder:d().string,autoComplete:d().string,inputRef:d().object,disabled:d().bool,readOnly:d().bool,preview:d().bool,onChange:d().func.isRequired,onKeyUp:d().func,securityToken:d().shape({code:d().string,backgroundColor:d().string,textColor:d().string})};const At=(0,k.Z)("common")(Tt);class Pt extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks(),this.createInputRef()}get defaultState(){return{processing:!1,key:"",keyError:"",password:"",passwordError:"",passwordWarning:"",hasAlreadyBeenValidated:!1,selectedFile:null}}bindCallbacks(){this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleKeyInputKeyUp=this.handleKeyInputKeyUp.bind(this),this.handlePasswordInputKeyUp=this.handlePasswordInputKeyUp.bind(this),this.handleSelectFile=this.handleSelectFile.bind(this),this.handleSelectOrganizationKeyFile=this.handleSelectOrganizationKeyFile.bind(this)}createInputRef(){this.keyInputRef=a.createRef(),this.fileUploaderRef=a.createRef(),this.passwordInputRef=a.createRef()}handleKeyInputKeyUp(){if(this.state.hasAlreadyBeenValidated){const e=this.validateKeyInput();this.setState(e)}}async handleSelectOrganizationKeyFile(e){const[t]=e.target.files,s=await this.readOrganizationKeyFile(t);await this.fillOrganizationKey(s),this.setState({selectedFile:t}),this.state.hasAlreadyBeenValidated&&await this.validate()}readOrganizationKeyFile(e){const t=new FileReader;return new Promise(((s,a)=>{t.onloadend=()=>{try{s(t.result)}catch(e){a(e)}},t.readAsText(e)}))}async fillOrganizationKey(e){await this.setState({key:e})}validateKeyInput(){const e=this.state.key.trim();let t="";return e.length||(t=this.translate("An organization key is required.")),new Promise((e=>{this.setState({keyError:t},e)}))}focusFirstFieldError(){this.state.keyError?this.keyInputRef.current.focus():this.state.passwordError&&this.passwordInputRef.current.focus()}handlePasswordInputKeyUp(){if(this.state.hasAlreadyBeenValidated){const e=this.validatePasswordInput();this.setState(e)}else{const e=this.state.password.length>=4096,t=this.translate("this is the maximum size for this field, make sure your data was not truncated"),s=e?t:"";this.setState({passwordWarning:s})}}validatePasswordInput(){const e=this.state.password;let t="";return e.length||(t=this.translate("A password is required.")),new Promise((e=>{this.setState({passwordError:t},e)}))}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}handleSelectFile(){this.fileUploaderRef.current.click()}async handleFormSubmit(e){e.preventDefault(),this.state.processing||await this.save()}async save(){if(this.setState({hasAlreadyBeenValidated:!0}),await this.toggleProcessing(),!await this.validate())return this.handleValidateError(),void await this.toggleProcessing();const e={armored_key:this.state.key,passphrase:this.state.password};try{await this.props.context.port.request("passbolt.account-recovery.validate-organization-private-key",e),await this.props.onSubmit(e),await this.toggleProcessing(),this.props.onClose()}catch(e){await this.handleSubmitError(e),await this.toggleProcessing()}}async handleSubmitError(e){"UserAbortsOperationError"!==e.name&&("WrongOrganizationRecoveryKeyError"===e.name?this.setState({expectedFingerprintError:e.expectedFingerprint}):"InvalidMasterPasswordError"===e.name?this.setState({passwordError:this.translate("This is not a valid passphrase.")}):"BadSignatureMessageGpgKeyError"===e.name||"GpgKeyError"===e.name?this.setState({keyError:e.message}):(console.error("Uncaught uncontrolled error"),this.onUnexpectedError(e)))}onUnexpectedError(e){const t={error:e};this.props.dialogContext.open(we,t)}handleValidateError(){this.focusFirstFieldError()}async validate(){return this.setState({keyError:"",passwordError:"",expectedFingerprintError:""}),await Promise.all([this.validateKeyInput(),this.validatePasswordInput()]),""===this.state.keyError&&""===this.state.passwordError}async toggleProcessing(){await this.setState({processing:!this.state.processing})}hasAllInputDisabled(){return this.state.processing}handleCloseClick(){this.props.onClose()}formatFingerprint(e){if(!e)return a.createElement(a.Fragment,null);const t=e.toUpperCase().replace(/.{4}/g,"$& ");return a.createElement(a.Fragment,null,t.substr(0,24),a.createElement("br",null),t.substr(25))}get selectedFilename(){return this.state.selectedFile?this.state.selectedFile.name:""}get translate(){return this.props.t}render(){return a.createElement(be,{title:this.translate("Organization Recovery Key"),onClose:this.handleCloseClick,disabled:this.state.processing,className:"provide-organization-recover-key-dialog"},a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content provide-organization-key"},a.createElement("div",{className:"input textarea required "+(this.state.keyError||this.state.expectedFingerprintError?"error":"")},a.createElement("label",{htmlFor:"organization-recover-form-key"},a.createElement(C.c,null,"Enter the private key used by your organization for account recovery")),a.createElement("textarea",{id:"organization-recover-form-key",name:"key",value:this.state.key,onKeyUp:this.handleKeyInputKeyUp,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),ref:this.keyInputRef,className:"required",placeholder:this.translate("Paste the OpenPGP Private key here"),required:"required",autoComplete:"off",autoFocus:!0})),a.createElement("div",{className:"input file"},a.createElement("input",{type:"file",id:"dialog-import-private-key",ref:this.fileUploaderRef,disabled:this.hasAllInputDisabled(),onChange:this.handleSelectOrganizationKeyFile}),a.createElement("label",{htmlFor:"dialog-import-private-key"},a.createElement(C.c,null,"Select a file to import")),a.createElement("div",{className:"input-file-inline"},a.createElement("input",{type:"text",disabled:!0,placeholder:this.translate("No file selected"),defaultValue:this.selectedFilename}),a.createElement("button",{className:"button primary",type:"button",disabled:this.hasAllInputDisabled(),onClick:this.handleSelectFile},a.createElement("span",null,a.createElement(C.c,null,"Choose a file")))),this.state.keyError&&a.createElement("div",{className:"key error-message"},this.state.keyError),this.state.expectedFingerprintError&&a.createElement("div",{className:"key error-message"},a.createElement(C.c,null,"Error, this is not the current organization recovery key."),a.createElement("br",null),a.createElement(C.c,null,"Expected fingerprint:"),a.createElement("br",null),a.createElement("br",null),a.createElement("span",{className:"fingerprint"},this.formatFingerprint(this.state.expectedFingerprintError)))),a.createElement("div",{className:"input-password-wrapper input required "+(this.state.passwordError?"error":"")},a.createElement("label",{htmlFor:"generate-organization-key-form-password"},a.createElement(C.c,null,"Organization key passphrase"),this.state.passwordWarning&&a.createElement(de,{name:"exclamation"})),a.createElement(At,{id:"generate-organization-key-form-password",name:"password",placeholder:this.translate("Passphrase"),autoComplete:"new-password",onKeyUp:this.handlePasswordInputKeyUp,value:this.state.password,securityToken:this.props.context.userSettings.getSecurityToken(),preview:!0,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),inputRef:this.passwordInputRef}),this.state.passwordError&&a.createElement("div",{className:"password error-message"},this.state.passwordError),this.state.passwordWarning&&a.createElement("div",{className:"password warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.passwordWarning))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleCloseClick}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Submit")}))))}}Pt.propTypes={context:d().any.isRequired,onClose:d().func,onSubmit:d().func,actionFeedbackContext:d().any,dialogContext:d().object,t:d().func};const Ut=u(M((0,k.Z)("common")(Pt)));class _t extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{status:"rejected",processing:!1}}bindCallbacks(){this.handleSubmit=this.handleSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this)}async toggleProcessing(){await this.setState({processing:!this.state.processing})}get isProcessing(){return this.state.processing}async handleSubmit(e){e.preventDefault(),this.state.processing||await this.submit()}async submit(){await this.toggleProcessing();try{await this.props.onSubmit(this.state.status),await this.toggleProcessing(),this.props.onClose()}catch(e){await this.toggleProcessing(),this.onUnexpectedError(e)}}onUnexpectedError(e){const t={error:e};this.props.dialogContext.open(we,t)}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}get fingerprint(){const e=this.props.accountRecoveryRequest.fingerprint.toUpperCase().replace(/.{4}/g,"$& ");return a.createElement(a.Fragment,null,e.substr(0,24),a.createElement("br",null),e.substr(25))}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}get creator(){return this.props.accountRecoveryRequest.creator}get creatorFirstName(){return this.creator.profile.first_name}get date(){return this.props.accountRecoveryRequest.created}handleCloseClick(){this.props.onCancel(),this.props.onClose()}get translate(){return this.props.t}render(){const e=this.creatorFirstName;return a.createElement(be,{title:this.translate("Review account recovery request"),onClose:this.handleCloseClick,disabled:this.state.processing,className:"review-account-recovery-dialog"},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"form-content"},a.createElement("ul",null,a.createElement("li",{className:"usercard-detailed-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",null,a.createElement(ge,{message:this.fingerprint,direction:"bottom"},a.createElement("span",{className:"name-with-tooltip"},e)),"",a.createElement("span",{className:"name"},a.createElement(C.c,null,"requested an account recovery"))),a.createElement("div",{className:"subinfo light"},this.formatDateTimeAgo(this.date)))),a.createElement(xe,{user:this.creator,baseUrl:this.props.context.userSettings.getTrustedDomain(),attentionRequired:!0}))),a.createElement("label",null,a.createElement(C.c,null,"How do you want to proceed?")),a.createElement("div",{className:"radiolist-alt"},a.createElement("div",{className:"input radio "+("rejected"===this.state.status?"checked":"")},a.createElement("input",{type:"radio",value:"rejected",onChange:this.handleInputChange,name:"status",checked:"rejected"===this.state.status,id:"statusRecoverAccountReject",disabled:this.isProcessing}),a.createElement("label",{htmlFor:"statusRecoverAccountReject"},a.createElement("span",{className:"name"},a.createElement(C.c,null,"Reject")),a.createElement("span",{className:"info"},a.createElement(C.c,null,{requesterFirstname:e}," did not initiate this request.")))),a.createElement("div",{className:"input radio "+("approved"===this.state.status?"checked":"")},a.createElement("input",{type:"radio",value:"approved",onChange:this.handleInputChange,name:"status",checked:"approved"===this.state.status,id:"statusRecoverAccountAccept",disabled:this.isProcessing}),a.createElement("label",{htmlFor:"statusRecoverAccountAccept"},a.createElement("span",{className:"name"},a.createElement(C.c,null,"Approve")),a.createElement("span",{className:"info"},a.createElement(C.c,null,"I verified with ",a.createElement("span",null,{requesterFirstname:e})," that the request is valid.")))))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.passbolt.com/faq/start/account-recovery/review-request",className:"button button-left "+(this.isProcessing?"disabled":""),disabled:this.isProcessing},a.createElement(C.c,null,"Learn more")),a.createElement(Ce,{disabled:this.isProcessing,onClick:this.handleCloseClick}),a.createElement(Ee,{value:this.translate("Submit"),disabled:this.isProcessing,processing:this.isProcessing}))))}}_t.propTypes={context:d().any.isRequired,accountRecoveryRequest:d().object.isRequired,dialogContext:d().object,onClose:d().func,onCancel:d().func,onSubmit:d().func,t:d().func};const Lt=u(M((0,k.Z)("common")(_t)));class Ft extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{responseStatus:null,accountRecoveryRequest:null,currentOpenedDialog:null}}async componentDidMount(){await this.props.accountRecoveryContext.loadAccountRecoveryPolicy(),await this.getAccountRecoveryRequest(),await this.displayReviewAccountRecoveryDialog()}async getAccountRecoveryRequest(){let e=this.props.accountRecoveryRequest;e||(e=await this.props.context.port.request("passbolt.account-recovery.get-request",this.props.accountRecoveryRequestId)),this.setState({accountRecoveryRequest:e})}bindCallbacks(){this.handleCancelDialog=this.handleCancelDialog.bind(this),this.reviewAccountRecoveryRequest=this.reviewAccountRecoveryRequest.bind(this),this.handleSave=this.handleSave.bind(this),this.handleError=this.handleError.bind(this)}async displayReviewAccountRecoveryDialog(){const e=this.props.dialogContext.open(Lt,{accountRecoveryRequest:this.state.accountRecoveryRequest,onCancel:this.handleCancelDialog,onSubmit:this.reviewAccountRecoveryRequest});this.setState({currentOpenedDialog:e})}displayProvideAccountRecoveryOrganizationKeyDialog(){const e=this.props.dialogContext.open(Ut,{onCancel:this.handleCancelDialog,onSubmit:this.handleSave});this.setState({currentOpenedDialog:e})}handleCancelDialog(){this.props.onStop(),this.props.dialogContext.close(this.state.currentOpenedDialog)}reviewAccountRecoveryRequest(e){this.setState({responseStatus:e}),"approved"!==e?this.handleSave():this.displayProvideAccountRecoveryOrganizationKeyDialog()}async handleSave(e){try{await this.props.context.port.request("passbolt.account-recovery.review-request",this.state.accountRecoveryRequest.id,this.state.responseStatus,e),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The account recovery review has been saved successfully")),this.props.onStop()}catch(e){if("UserAbortsOperationError"===e.name)return;console.log(e),this.handleError(e)}}async handleError(e){const t={error:e};this.props.dialogContext.open(we,t),this.props.onStop(),this.props.dialogContext.close(this.state.currentOpenedDialog)}render(){return a.createElement(a.Fragment,null)}}const Mt=(e,t,s)=>{if(!e.accountRecoveryRequestId&&!e.accountRecoveryRequest)return new Error(`One of 'accountRecoveryRequestId' or 'accountRecoveryRequest' is required by '${s}' component.`);e.accountRecoveryRequestId&&d().checkPropTypes({accountRecoveryRequestId:d().string},e,t,s),e.accountRecoveryRequest&&d().checkPropTypes({accountRecoveryRequestId:d().object},e,t,s)};Ft.propTypes={onStop:d().func.isRequired,dialogContext:d().any,actionFeedbackContext:d().object,accountRecoveryContext:d().object,context:d().object,accountRecoveryRequestId:Mt,accountRecoveryRequest:Mt,t:d().func};const Ot=u(Dt(M(D((0,k.Z)("common")(Ft)))));class jt{static async copy(e,t){if(navigator.clipboard)try{await navigator.clipboard.writeText(e)}catch{jt.copyWithBrowserExtension(e,t)}else jt.copyWithBrowserExtension(e,t)}static copyWithBrowserExtension(e,t){t.request("passbolt.clipboard.copy",e)}}const qt=jt;class Wt extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handlePermalinkCopy=this.handlePermalinkCopy.bind(this),this.handlePublicKeyCopy=this.handlePublicKeyCopy.bind(this),this.handleUsernameCopy=this.handleUsernameCopy.bind(this),this.handleEditClickEvent=this.handleEditClickEvent.bind(this),this.handleResendInviteClickEvent=this.handleResendInviteClickEvent.bind(this),this.handleDeleteClickEvent=this.handleDeleteClickEvent.bind(this),this.handleDisableMfaEvent=this.handleDisableMfaEvent.bind(this),this.handleReviewRecoveryRequestClickEvent=this.handleReviewRecoveryRequestClickEvent.bind(this)}get canIUseMfa(){return this.props.context.siteSettings.canIUse("multiFactorAuthentication")&&this.isLoggedInUserAdmin()}get canDisableMfaForUser(){return this.props.user.is_mfa_enabled}get user(){return this.props.user}get canIUseResend(){return this.isLoggedInUserAdmin()}get canResendInviteToUser(){return this.user&&!this.user.active}async handlePermalinkCopy(){const e=`${this.props.context.userSettings.getTrustedDomain()}/app/users/view/${this.user.id}`;await qt.copy(e,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The permalink has been copied to clipboard")),this.props.hide()}async handleUsernameCopy(){const e=`${this.user.username}`;await qt.copy(e,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The email has been copied to clipboard")),this.props.hide()}async handlePublicKeyCopy(){const e=await this.props.context.port.request("passbolt.keyring.get-public-key-info-by-user",this.user.id);await qt.copy(e.armored_key,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The public key has been copied to clipboard")),this.props.hide()}handleEditClickEvent(){const e={id:this.user.id};this.props.context.setContext({editUserDialogProps:e}),this.props.dialogContext.open(ut),this.props.hide()}handleResendInviteClickEvent(){this.resendInvite()}handleDisableMfaEvent(){this.disableMFA()}async handleDeleteClickEvent(){try{await this.props.context.port.request("passbolt.users.delete-dry-run",this.user.id),this.displayDeleteUserDialog()}catch(e){"DeleteDryRunError"===e.name?this.displayDeleteUserWithConflictsDialog(e.errors):this.handleError(e)}this.props.hide()}displayDeleteUserDialog(){const e={user:this.user};this.props.context.setContext({deleteUserDialogProps:e}),this.props.dialogContext.open(vt)}displayDeleteUserWithConflictsDialog(e){const t={user:this.user,errors:e};this.props.context.setContext({deleteUserWithConflictsDialogProps:t}),this.props.dialogContext.open(yt)}handleReviewRecoveryRequestClickEvent(){const e=this.user.pending_account_recovery_request.id;this.props.workflowContext.start(Ot,{accountRecoveryRequestId:e}),this.props.hide()}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}canIUseEdit(){return this.isLoggedInUserAdmin()}canIUseDelete(){return this.isLoggedInUserAdmin()}canIReviewAccountRecoveryRequest(){return this.props.context.siteSettings.canIUse("accountRecovery")&&this.isLoggedInUserAdmin()}canDeleteUser(){return this.props.context.loggedInUser.id!==this.user.id}canCopyPublicKey(){return this.user.active}hasPendingAccountRecoveryRequest(){return this.user&&Boolean(this.user.pending_account_recovery_request)}isLoggedInUserAdmin(){return this.props.context.loggedInUser&&"admin"===this.props.context.loggedInUser.role.name}disableMFA(){this.props.dialogContext.open(ft),this.props.hide()}resendInvite(){this.props.context.port.request("passbolt.users.resend-invite",this.user.username).then(this.onResendInviteSuccess.bind(this)).catch(this.onResendInviteFailure.bind(this))}onResendInviteSuccess(){this.props.actionFeedbackContext.displaySuccess(this.translate("The invite has been resent successfully")),this.props.hide()}onResendInviteFailure(e){const t={error:e};this.props.hide(),this.props.dialogContext.open(we,t)}get translate(){return this.props.t}render(){return a.createElement(ht,{hide:this.props.hide,left:this.props.left,top:this.props.top},a.createElement("li",{key:"copy-user-permalink",className:"opened"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handlePermalinkCopy},a.createElement("span",null,a.createElement(C.c,null,"Copy permalink"))))))),a.createElement("li",{key:"copy-public-key",className:"opened"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handlePublicKeyCopy,className:this.canCopyPublicKey()?"":"disabled"},a.createElement("span",null,a.createElement(C.c,null,"Copy public key"))))))),a.createElement("li",{key:"copy-username",className:"separator-after opened"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleUsernameCopy},a.createElement("span",null,a.createElement(C.c,null,"Copy email address"))))))),this.canIUseEdit()&&a.createElement("li",{key:"edit-user",className:"ready"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"edit",onClick:this.handleEditClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Edit"))))))),this.canIUseResend&&a.createElement("li",{key:"resend-invite-user",className:"ready"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"resend",onClick:this.handleResendInviteClickEvent,className:this.canResendInviteToUser?"":"disabled"},a.createElement("span",null,a.createElement(C.c,null,"Resend invite"))))))),this.canIUseMfa&&a.createElement("li",{key:"disable-user-mfa",className:"ready"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"disable-mfa",onClick:this.handleDisableMfaEvent,className:this.canDisableMfaForUser?"":"disabled"},a.createElement("span",null,a.createElement(C.c,null,"Disable MFA"))))))),this.canIUseDelete()&&a.createElement("li",{key:"delete-user",className:"ready"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"delete",onClick:this.handleDeleteClickEvent,className:this.canDeleteUser()?"":"disabled"},a.createElement("span",null,a.createElement(C.c,null,"Delete"))))))),this.canIReviewAccountRecoveryRequest()&&a.createElement("li",{key:"review-recovery-user",className:"ready"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"review-recovery",onClick:this.handleReviewRecoveryRequestClickEvent,className:this.hasPendingAccountRecoveryRequest()?"":"disabled"},a.createElement("span",null,a.createElement(C.c,null,"Review recovery request"))))))))}}Wt.propTypes={context:d().any,hide:d().func,left:d().number,top:d().number,workflowContext:d().any,dialogContext:d().any,user:d().object,actionFeedbackContext:d().any,t:d().func};const zt=u(St(M(D((0,k.Z)("common")(Wt)))));class Gt extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.initEventHandlers(),this.createRefs()}getDefaultState(){return{}}initEventHandlers(){this.handleUserSelected=this.handleUserSelected.bind(this),this.handleUserRightClick=this.handleUserRightClick.bind(this),this.handleCheckboxWrapperClick=this.handleCheckboxWrapperClick.bind(this),this.handleSortByColumnClick=this.handleSortByColumnClick.bind(this)}createRefs(){this.listRef=a.createRef(),this.dragFeedbackElement=a.createRef()}componentDidMount(){this.props.accountRecoveryContext.loadAccountRecoveryPolicy()}componentDidUpdate(){this.handleUserScroll()}handleUserScroll(){const e=this.props.userWorkspaceContext.scrollTo.user;e&&(this.scrollTo(e.id),this.props.userWorkspaceContext.onUserScrolled())}async handleUserSelected(e,t){e.preventDefault(),e.stopPropagation(),await this.selectUser(t)}async handleUserRightClick(e,t){e.preventDefault(),this.displayContextualMenu(e,t),await this.selectUserIfNotAlreadySelected(t)}handleCheckboxWrapperClick(e,t){e.stopPropagation(),this.props.userWorkspaceContext.onUserSelected.single(t)}async handleSortByColumnClick(e,t){this.props.userWorkspaceContext.onSorterChanged(t)}get users(){return this.props.userWorkspaceContext.filteredUsers}get selectedUsers(){return this.props.userWorkspaceContext.selectedUsers}isUserSelected(e){return this.props.userWorkspaceContext.selectedUsers.some((t=>e.id===t.id))}displayContextualMenu(e,t){const s={left:e.pageX,top:e.pageY,user:t};this.props.contextualMenuContext.show(zt,s)}async selectUser(e){await this.props.userWorkspaceContext.onUserSelected.single(e)}scrollTo(e){const t=this.users.findIndex((t=>t.id===e)),[s,a]=this.listRef.current.getVisibleRange();(t<s||t>a)&&this.listRef.current.scrollTo(t)}async selectUserIfNotAlreadySelected(e){const[t]=this.props.userWorkspaceContext.selectedUsers;(!t||t.id!==e.id)&&await this.selectUser(e)}renderTable(e,t){return a.createElement("table",{style:{MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none"}},a.createElement("tbody",{ref:t},e))}isSortedColumn(e){return this.props.userWorkspaceContext.sorter.propertyName===e}isSortedAsc(){return this.props.userWorkspaceContext.sorter.asc}isLoggedInUserAdmin(){return this.props.context.loggedInUser&&"admin"===this.props.context.loggedInUser.role.name}hasAttentionRequiredColumn(){return this.props.context.siteSettings.canIUse("accountRecovery")&&this.isLoggedInUserAdmin()}hasMfaColumn(){return this.props.context.siteSettings.canIUse("multiFactorAuthentication")&&this.isLoggedInUserAdmin()}hasAccountRecoveryColumn(){return this.props.context.siteSettings.canIUse("accountRecovery")&&this.isLoggedInUserAdmin()&&this.props.accountRecoveryContext.isPolicyEnabled()}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}renderItem(e,t){const s=this.users[e],n=this.isUserSelected(s),r=this.formatDateTimeAgo(s.modified),i=s.last_logged_in?this.formatDateTimeAgo(s.last_logged_in):"",o=this.props.userWorkspaceContext.getTranslatedRoleName(s.role_id),l=s.is_mfa_enabled?this.translate("Enabled"):this.translate("Disabled"),c=`${n?"selected":""} ${s.active?"":"inactive"}`,m=Boolean(s.pending_account_recovery_request);return a.createElement("tr",{id:`user_${s.id}`,key:t,className:c,onClick:e=>this.handleUserSelected(e,s),onContextMenu:e=>this.handleUserRightClick(e,s)},a.createElement("td",{className:"cell-multiple-select selections s-cell"},a.createElement("div",{className:"input checkbox"},a.createElement("input",{type:"checkbox",id:`checkbox_multiple_select_checkbox_${s.id}`,checked:n,readOnly:!0,onClick:e=>this.handleCheckboxWrapperClick(e,s)}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"Select user")))),this.hasAttentionRequiredColumn()&&a.createElement("td",{className:"s-cell attention-required"},m&&a.createElement(de,{name:"exclamation",baseline:!0})),a.createElement("td",{className:"cell-name l-cell"},a.createElement("div",{title:`${s.profile.first_name} ${s.profile.last_name}`},`${s.profile.first_name} ${s.profile.last_name}`)),a.createElement("td",{className:"cell-username l-cell username"},a.createElement("div",{title:s.username},s.username)),a.createElement("td",{className:"cell-role m-cell role"},a.createElement("div",{title:o},o)),a.createElement("td",{className:"cell-modified m-cell"},a.createElement("div",{title:s.modified},r)),a.createElement("td",{className:"cell-last_logged_in m-cell"},a.createElement("div",{title:s.last_logged_in},i)),this.hasMfaColumn()&&a.createElement("td",{className:"cell-is_mfa_enabled m-cell"},a.createElement("div",null,l)),this.hasAccountRecoveryColumn()&&a.createElement("td",{className:"cell-is_account_recovery_enabled m-cell"},a.createElement("div",null,{approved:a.createElement(C.c,null,"Approved"),rejected:a.createElement(C.c,null,"Rejected"),[void 0]:a.createElement(C.c,null,"Pending")}[s?.account_recovery_user_setting?.status])))}get translate(){return this.props.t}render(){const e=null!==this.users,t=e&&0===this.users.length,s=this.props.userWorkspaceContext.filter.type;return a.createElement("div",{className:"tableview ready "+(t?"empty":"")},!e&&a.createElement("div",{className:"empty-content"}),e&&a.createElement(a.Fragment,null,t&&s===Qe.TEXT&&a.createElement("div",{className:"empty-content"},a.createElement("h2",null,a.createElement(C.c,null,"None of the users matched this search.")),a.createElement("p",{className:"try-another-search"},a.createElement(C.c,null,"Try another search or use the left panel to navigate into your organization."))),!t&&a.createElement(a.Fragment,null,a.createElement("div",{className:"tableview-header"},a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{className:"cell-multiple-select selections s-cell"},a.createElement("div",{className:"input checkbox"},a.createElement("input",{type:"checkbox",name:"select all",checked:!1,readOnly:!0}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"Select all")))),this.hasAttentionRequiredColumn()&&a.createElement("th",{className:"s-cell attention-required"},a.createElement("a",{onClick:e=>this.handleSortByColumnClick(e,"attentionRequired")},a.createElement("div",{className:"cell-header"},a.createElement("span",{className:"cell-header-text"},a.createElement(de,{name:"exclamation",baseline:!0})),a.createElement("span",{className:"cell-header-icon-sort"},this.isSortedColumn("attentionRequired")&&this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-up"}),this.isSortedColumn("attentionRequired")&&!this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-down"}))))),a.createElement("th",{className:"cell-name l-cell sortable"},a.createElement("a",{onClick:e=>this.handleSortByColumnClick(e,"name")},a.createElement("div",{className:"cell-header"},a.createElement("span",{className:"cell-header-text"},a.createElement(C.c,null,"Name")),a.createElement("span",{className:"cell-header-icon-sort"},this.isSortedColumn("name")&&this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-up"}),this.isSortedColumn("name")&&!this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-down"}))))),a.createElement("th",{className:"cell-username l-cell username sortable"},a.createElement("a",{onClick:e=>this.handleSortByColumnClick(e,"username")},a.createElement("div",{className:"cell-header"},a.createElement("span",{className:"cell-header-text"},a.createElement(C.c,null,"Username")),a.createElement("span",{className:"cell-header-icon-sort"},this.isSortedColumn("username")&&this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-up"}),this.isSortedColumn("username")&&!this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-down"}))))),a.createElement("th",{className:"cell-role m-cell role sortable"},a.createElement("a",{onClick:e=>this.handleSortByColumnClick(e,"role.name")},a.createElement("div",{className:"cell-header"},a.createElement("span",{className:"cell-header-text"},a.createElement(C.c,null,"Role")),a.createElement("span",{className:"cell-header-icon-sort"},this.isSortedColumn("role.name")&&this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-up"}),this.isSortedColumn("role.name")&&!this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-down"}))))),a.createElement("th",{className:"cell-modified m-cell sortable"},a.createElement("a",{onClick:e=>this.handleSortByColumnClick(e,"modified")},a.createElement("div",{className:"cell-header"},a.createElement("span",{className:"cell-header-text"},a.createElement(C.c,null,"Modified")),a.createElement("span",{className:"cell-header-icon-sort"},this.isSortedColumn("modified")&&this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-up"}),this.isSortedColumn("modified")&&!this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-down"}))))),a.createElement("th",{className:"cell-last_logged_in m-cell sortable"},a.createElement("a",{onClick:e=>this.handleSortByColumnClick(e,"last_logged_in")},a.createElement("div",{className:"cell-header"},a.createElement("span",{className:"cell-header-text"},a.createElement(C.c,null,"Last logged in")),a.createElement("span",{className:"cell-header-icon-sort"},this.isSortedColumn("last_logged_in")&&this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-up"}),this.isSortedColumn("last_logged_in")&&!this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-down"}))))),this.hasMfaColumn()&&a.createElement("th",{className:"cell-is_mfa_enabled m-cell sortable"},a.createElement("a",{onClick:e=>this.handleSortByColumnClick(e,"is_mfa_enabled")},a.createElement("div",{className:"cell-header"},a.createElement("span",{className:"cell-header-text"},a.createElement(C.c,null,"MFA")),a.createElement("span",{className:"cell-header-icon-sort"},this.isSortedColumn("is_mfa_enabled")&&this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-up"}),this.isSortedColumn("is_mfa_enabled")&&!this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-down"}))))),this.hasAccountRecoveryColumn()&&a.createElement("th",{className:"cell-account_recovery_user_setting_status m-cell sortable"},a.createElement("a",{onClick:e=>this.handleSortByColumnClick(e,"account_recovery_user_setting.status")},a.createElement("div",{className:"cell-header"},a.createElement("span",{className:"cell-header-text"},a.createElement(C.c,null,"Account recovery")),a.createElement("span",{className:"cell-header-icon-sort"},this.isSortedColumn("account_recovery_user_setting.status")&&this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-up"}),this.isSortedColumn("account_recovery_user_setting.status")&&!this.isSortedAsc()&&a.createElement(de,{baseline:!0,name:"caret-down"}))))))))),a.createElement("div",{className:"tableview-content scroll"},a.createElement(ce(),{itemRenderer:(e,t)=>this.renderItem(e,t),itemsRenderer:(e,t)=>this.renderTable(e,t),length:this.users.length,pageSize:20,minSize:20,type:"uniform",ref:this.listRef})))))}}Gt.propTypes={context:d().any,userWorkspaceContext:d().any,actionFeedbackContext:d().any,contextualMenuContext:d().any,accountRecoveryContext:d().object,t:d().func};const Ht=u((0,c.EN)(D(at(Xe(Dt((0,k.Z)("common")(Gt)))))));class Vt extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers()}get defaultState(){return{open:!0}}bindHandlers(){this.handleTitleClicked=this.handleTitleClicked.bind(this)}componentDidMount(){this.props.accountRecoveryContext.loadAccountRecoveryPolicy()}get user(){return this.props.userWorkspaceContext.details.user}getRoleName(){if(this.props.context.roles){const e=this.props.context.roles.find((e=>e.id===this.user.role_id));return e?e.name:""}return""}handleTitleClicked(){this.setState({open:!this.state.open})}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}isLoggedInUserAdmin(){return this.props.context.loggedInUser&&"admin"===this.props.context.loggedInUser.role.name}hasMfaSection(){return this.props.context.siteSettings.canIUse("multiFactorAuthentication")&&this.isLoggedInUserAdmin()&&this.user.active}hasAccountRecoverySection(){return this.props.context.siteSettings.canIUse("accountRecovery")&&this.isLoggedInUserAdmin()&&this.props.accountRecoveryContext.isPolicyEnabled()&&this.user.active}get translate(){return this.props.t}render(){const e=this.getRoleName(),t=this.formatDateTimeAgo(this.user.modified),s=this.user.active?this.translate("Activated"):this.translate("Activation pending");return a.createElement("div",{className:"detailed-information accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClicked,role:"button"},a.createElement(C.c,null,"Information"),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("div",{className:"accordion-content"},a.createElement("ul",null,a.createElement("li",{className:"role"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Role")),a.createElement("span",{className:"value capitalize"},e)),a.createElement("li",{className:"modified"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Modified")),a.createElement("span",{className:"value",title:this.user.modified},t)),a.createElement("li",{className:"status"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Status")),a.createElement("span",{className:"value"},s)),this.hasAccountRecoverySection()&&a.createElement("li",{className:"account-recovery-status"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Account recovery")),a.createElement("span",{className:"value"},{approved:a.createElement(C.c,null,"Approved"),rejected:a.createElement(C.c,null,"Rejected"),[void 0]:a.createElement(C.c,null,"Pending")}[this.user?.account_recovery_user_setting?.status])),this.hasMfaSection()&&a.createElement("li",{className:"mfa"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"MFA")),a.createElement("span",{className:"value"},{[!0]:a.createElement(C.c,null,"Enabled"),[!1]:a.createElement(C.c,null,"Disabled"),[void 0]:a.createElement(C.c,null,"Disabled")}[this.user?.is_mfa_enabled])))))}}Vt.propTypes={context:d().any,userWorkspaceContext:d().object,accountRecoveryContext:d().object,t:d().func};const Kt=u(Xe(Dt((0,k.Z)("common")(Vt))));class Bt extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers()}get defaultState(){return{open:!1}}bindHandlers(){this.handleTitleClicked=this.handleTitleClicked.bind(this)}get groups(){const{groups:e}=this.props.context;if(!e)return[];const t=this.props.userWorkspaceContext.details.user;if(t){const s=e=>e.groups_users.some((e=>e.user_id===t.id)),a=e=>e.groups_users.find((e=>e.user_id===t.id)),n=e=>e.is_admin?this.translate("Group manager"):this.translate("Member"),r=e=>Object.assign({},e,{role:n(a(e))});return e.filter(s).map(r)}return[]}get baseUrl(){return this.props.context.userSettings.getTrustedDomain()}handleTitleClicked(){this.setState({open:!this.state.open})}get translate(){return this.props.t}render(){const e=this.groups,t=e.length>0;return a.createElement("div",{className:"detailed-user-groups accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClicked,role:"button"},"Groups",this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("div",{className:"accordion-content"},a.createElement("ul",null,this.state.open&&t&&e.map((e=>a.createElement("li",{key:e.id,className:"permission usercard-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",{className:"name"},e.name),a.createElement("div",{className:"subinfo"},e.role))),a.createElement(Re,{group:e,baseUrl:this.baseUrl})))),!t&&a.createElement("em",{className:"empty-feedback empty-group-feedback"},a.createElement(C.c,null,"The user is not a member of any group yet")))))}}Bt.propTypes={context:d().any,userWorkspaceContext:d().object,t:d().func};const $t=u(Xe((0,k.Z)("common")(Bt)));class Zt extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers()}get defaultState(){return{open:!1,gpgkeyInfo:{},loading:!1}}bindHandlers(){this.handleTitleClicked=this.handleTitleClicked.bind(this),this.handlePublicKeyCopy=this.handlePublicKeyCopy.bind(this)}async componentDidUpdate(e){await this.handleUserChange(e.userWorkspaceContext.details.user)}async handleUserChange(e){this.state.open&&this.user.id!==e.id&&await this.fetchGpgkeyInfo()}async fetchGpgkeyInfo(){const e=await this.props.context.port.request("passbolt.keyring.get-public-key-info-by-user",this.user.id),t=e.fingerprint,s=this.gpgkeyType[e.algorithm],a=this.formatDate(e.created);let n;n=null===e.expires?"n/a":"Infinity"===e.expires?this.translate("Never"):this.formatDate(e.expires);const r={fingerprint:t,type:s,created:a,expires:n,armoredKey:e.armored_key};this.setState({gpgkeyInfo:r})}formatDate(e){try{return B.ou.fromJSDate(new Date(e)).setLocale(this.props.context.locale).toLocaleString(B.ou.DATETIME_FULL)}catch(e){return""}}get gpgkeyType(){return{rsa:"RSA",elgamal:"Elgamal",dsa:"DSA",ecdh:"ECDH",ecdsa:"ECDSA",eddsa:"EdDSA",aedh:"AEDH",aedsa:"AEDSA"}}get user(){return this.props.userWorkspaceContext.details.user}formatFingerprint(e){const t=(e=e||"").toUpperCase().replace(/.{4}/g,"$& ");return a.createElement(a.Fragment,null,t.substr(0,24),a.createElement("br",null),t.substr(25))}async handleTitleClicked(){this.state.open?await this.setState({gpgkeyInfo:{},open:!1}):(await this.setState({open:!0,loading:!0}),await this.fetchGpgkeyInfo(),await this.setState({loading:!1}))}async handlePublicKeyCopy(){const e=this.state.gpgkeyInfo.armoredKey;await qt.copy(e,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The public key has been copied to clipboard"))}get translate(){return this.props.t}render(){const e=this.state.loading;return a.createElement("div",{className:"key-information accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClicked,role:"button"},a.createElement(C.c,null,"Public key"),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("div",{className:"accordion-content"},e&&a.createElement("ul",null,a.createElement("li",{className:"processing-wrapper"},a.createElement(de,{name:"spinner"}),a.createElement("span",{className:"processing-text"},a.createElement(C.c,null,"Retrieving public key")))),!e&&a.createElement("ul",null,a.createElement("li",{className:"fingerprint"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Fingerprint")),a.createElement("span",{className:"value"},this.formatFingerprint(this.state.gpgkeyInfo.fingerprint))),a.createElement("li",{className:"type"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Type")),a.createElement("span",{className:"value"},this.state.gpgkeyInfo.type)),a.createElement("li",{className:"created"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Created")),a.createElement("span",{className:"value"},this.state.gpgkeyInfo.created)),a.createElement("li",{className:"expires"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Expires")),a.createElement("span",{className:"value"},this.state.gpgkeyInfo.expires)),a.createElement("li",{className:"key"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Public key")),a.createElement("span",{className:"value"},a.createElement("a",{className:"button button-icon copy-public-key",onClick:this.handlePublicKeyCopy},a.createElement(de,{name:"copy-to-clipboard"})))),a.createElement("li",{className:"gpgkey"},a.createElement("textarea",{className:"code",value:this.state.gpgkeyInfo.armoredKey,disabled:!0})))))}}Zt.propTypes={context:d().any,userWorkspaceContext:d().object,actionFeedbackContext:d().object,t:d().func,i18n:d().any};const Yt=u(D(Xe((0,k.Z)("common")(Zt))));class Jt extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers()}get defaultState(){return{loading:!0,open:!1,userRequests:[]}}async componentDidUpdate(e){await this.handleUserChange(e.userWorkspaceContext.details.user),await this.handleUserPendingAccountRecoveryRequestChange(e.userWorkspaceContext.details.user)}async handleUserChange(e){if(this.selectedUser.id!==e.id&&this.state.open){const e=Object.assign({},this.defaultState,{open:!0});await this.setState(e),await this.findUserRequests(),this.setState({loading:!1})}}async handleUserPendingAccountRecoveryRequestChange(e){this.state.open&&e?.pending_account_recovery_request?.status!==this.props.userWorkspaceContext.details.user?.pending_account_recovery_request?.status&&(await this.setState({loading:!0}),await this.findUserRequests(),await this.setState({loading:!1}))}bindHandlers(){this.handleTitleClicked=this.handleTitleClicked.bind(this),this.handleReviewClicked=this.handleReviewClicked.bind(this)}async handleTitleClicked(){if(this.state.open){const e=this.defaultState;this.setState(e)}else await this.setState({loading:!0,open:!0}),await this.findUserRequests(),this.setState({loading:!1})}handleReviewClicked(){const e=this.selectedUser.pending_account_recovery_request.id;this.props.workflowContext.start(Ot,{accountRecoveryRequestId:e})}async findUserRequests(){const e=(await this.props.context.port.request("passbolt.account-recovery.get-user-requests",this.selectedUser.id)).sort(((e,t)=>new Date(t.created)-new Date(e.created)));this.setState({userRequests:e})}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.props.t("Just now"):t.toRelative({locale:this.props.context.locale})}get selectedUser(){return this.props.userWorkspaceContext.details.user}get isAccountRecoveryPending(){return Boolean(this.selectedUser.pending_account_recovery_request)}get hasUserRequests(){return this.state.userRequests.length>0}get previousAccountRecoveryRequest(){return this.isAccountRecoveryPending?this.state.userRequests.length>1?this.state.userRequests[1]:null:this.hasUserRequests?this.state.userRequests[0]:null}capitalizeFirstLetter(e){return e[0].toUpperCase()+e.slice(1)}render(){return a.createElement("div",{className:"detailed-account-recovery accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClicked,role:"button"},a.createElement(C.c,null,"Account recovery"),this.isAccountRecoveryPending&&a.createElement(de,{name:"exclamation",baseline:!0}),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("div",{className:"accordion-content"},this.state.loading&&a.createElement("div",{className:"processing-wrapper"},a.createElement(de,{name:"spinner"}),a.createElement("span",{className:"processing-text"},a.createElement(C.c,null,"Retrieving account recovery"))),!this.state.loading&&a.createElement("ul",null,this.isAccountRecoveryPending&&a.createElement("li",{className:"pending-request-status"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Current status")),a.createElement("a",{className:"button",role:"button",onClick:this.handleReviewClicked},"Review")),a.createElement("li",{className:"previous-request"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Previous recovery")),a.createElement("span",{className:"value"},this.previousAccountRecoveryRequest?`${this.capitalizeFirstLetter(this.previousAccountRecoveryRequest.status)} ${this.formatDateTimeAgo(this.previousAccountRecoveryRequest.created)}`:"Never")),a.createElement("li",{className:"requests-count"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Number of recovery")),a.createElement("span",{className:"value"},this.state.userRequests.length)))))}}Jt.propTypes={context:d().any,userWorkspaceContext:d().object,workflowContext:d().any,t:d().func};const Xt=u(St(Xe((0,k.Z)("common")(Jt))));class Qt extends a.Component{constructor(e){super(e),this.bindCallbacks()}componentDidMount(){this.props.accountRecoveryContext.loadAccountRecoveryPolicy()}bindCallbacks(){this.handlePermalinkClick=this.handlePermalinkClick.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this)}get user(){return this.props.userWorkspaceContext.details.user}get baseUrl(){return this.props.context.userSettings.getTrustedDomain()}async handlePermalinkClick(){const e=`${this.props.context.userSettings.getTrustedDomain()}/app/users/view/${this.user.id}`;await qt.copy(e,this.props.context.port),await this.props.actionFeedbackContext.displaySuccess(this.translate("The permalink has been copied to clipboard"))}handleCloseClick(){this.props.userWorkspaceContext.onDetailsLocked()}get translate(){return this.props.t}isLoggedInUserAdmin(){return this.props.context.loggedInUser&&"admin"===this.props.context.loggedInUser.role.name}isAccountRecoveryEnabled(){return this.props.accountRecoveryContext.isPolicyEnabled()}get hasAttentionRequired(){return this.isAccountRecoveryEnabled()&&Boolean(this.user.pending_account_recovery_request)}render(){return a.createElement("div",{className:"panel aside ready"},a.createElement("div",{className:"sidebar user"},a.createElement("div",{className:"sidebar-header"},a.createElement("div",{className:"teaser-image  "+(this.hasAttentionRequired?"attention-required":"")},a.createElement(xe,{user:this.user,baseUrl:this.baseUrl,attentionRequired:this.hasAttentionRequired})),a.createElement("h3",null,a.createElement("div",{className:"title-wrapper"},a.createElement("span",{className:"name"},`${this.user.profile.first_name} ${this.user.profile.last_name}`),a.createElement("a",{className:"title-link",title:this.translate("Copy the link to this user"),onClick:this.handlePermalinkClick},a.createElement(de,{name:"link"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Copy the link to this user")))),a.createElement("span",{className:"subtitle"},this.user.username)),a.createElement("a",{className:"dialog-close",onClick:this.handleCloseClick},a.createElement(de,{name:"close"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Close")))),a.createElement(Kt,null),this.user.active&&a.createElement($t,null),this.user.active&&a.createElement(Yt,null),this.isAccountRecoveryEnabled()&&this.user.active&&this.isLoggedInUserAdmin()&&a.createElement(Xt,null)))}}Qt.propTypes={context:d().any,actionFeedbackContext:d().any,userWorkspaceContext:d().any,accountRecoveryContext:d().object,t:d().func};const es=u(Dt(Xe(D((0,k.Z)("common")(Qt)))));class ts extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks(),this.createRefs()}get defaultState(){return{moreMenuOpen:!1}}bindCallbacks(){this.handleDocumentClickEvent=this.handleDocumentClickEvent.bind(this),this.handleDetailsLockedEvent=this.handleDetailsLockedEvent.bind(this),this.handleEditClickEvent=this.handleEditClickEvent.bind(this),this.handleDeleteClickEvent=this.handleDeleteClickEvent.bind(this),this.handleMoreClickEvent=this.handleMoreClickEvent.bind(this),this.handleDisableMfaEvent=this.handleDisableMfaEvent.bind(this),this.handleCopyPermalinkEvent=this.handleCopyPermalinkEvent.bind(this),this.handleResendInviteClickEvent=this.handleResendInviteClickEvent.bind(this),this.handleReviewRecoveryRequestEvent=this.handleReviewRecoveryRequestEvent.bind(this)}createRefs(){this.moreMenuRef=a.createRef()}componentDidMount(){document.addEventListener("click",this.handleDocumentClickEvent,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClickEvent,{capture:!0})}get canDelete(){const e=this.selectedUser&&this.props.context.loggedInUser.id!==this.selectedUser.id;return!this.isButtonDisabled()&&e}handleDetailsLockedEvent(){this.props.userWorkspaceContext.onDetailsLocked()}handleCopyPermalinkEvent(){this.copyPermalink()}handleResendInviteClickEvent(){this.resendInvite()}hasDetailsLocked(){return this.props.userWorkspaceContext.details.locked}handleEditClickEvent(){const e={id:this.selectedUser.id};this.props.context.setContext({editUserDialogProps:e}),this.props.dialogContext.open(ut)}async handleDeleteClickEvent(){try{await this.props.context.port.request("passbolt.users.delete-dry-run",this.selectedUser.id),this.displayDeleteUserDialog()}catch(e){"DeleteDryRunError"===e.name?this.displayDeleteUserWithConflictsDialog(e.errors):this.handleError(e)}}displayDeleteUserDialog(){const e={user:this.selectedUser};this.props.context.setContext({deleteUserDialogProps:e}),this.props.dialogContext.open(vt)}displayDeleteUserWithConflictsDialog(e){const t={user:this.selectedUser,errors:e};this.props.context.setContext({deleteUserWithConflictsDialogProps:t}),this.props.dialogContext.open(yt)}handleError(e){const t={message:e.message};this.props.context.setContext({errorDialogProps:t}),this.props.dialogContext.open(we)}handleMoreClickEvent(){this.toggleMoreMenu()}handleDisableMfaEvent(){this.disableMFA()}handleDocumentClickEvent(e){this.moreMenuRef.current&&this.moreMenuRef.current.contains(e.target)||this.closeMoreMenu()}handleReviewRecoveryRequestEvent(){this.closeMoreMenu();const e=this.selectedUser.pending_account_recovery_request.id;this.props.workflowContext.start(Ot,{accountRecoveryRequestId:e})}get selectedUser(){return this.props.userWorkspaceContext.selectedUsers[0]}get hasMoreActionAllowed(){return this.hasOneUserSelected()}get canCopyPermalink(){return Boolean(this.selectedUser)}get canIUseMfa(){return this.props.context.siteSettings.canIUse("multiFactorAuthentication")}get canDisableMfaForUser(){return this.selectedUser&&this.selectedUser.is_mfa_enabled}get canIUseResend(){return this.isLoggedInUserAdmin()}get canResendInviteToUser(){return this.selectedUser&&!this.selectedUser.active}canIReviewAccountRecoveryRequest(){return this.props.context.siteSettings.canIUse("accountRecovery")&&this.isLoggedInUserAdmin()}hasPendingAccountRecoveryRequest(){return this.selectedUser&&Boolean(this.selectedUser.pending_account_recovery_request)}hasOneUserSelected(){return 1===this.props.userWorkspaceContext.selectedUsers.length}isButtonDisabled(){return!this.hasOneUserSelected()}isLoggedInUserAdmin(){return this.props.context.loggedInUser&&"admin"===this.props.context.loggedInUser.role.name}disableMFA(){this.closeMoreMenu(),this.props.dialogContext.open(ft)}toggleMoreMenu(){const e=!this.state.moreMenuOpen;this.setState({moreMenuOpen:e})}closeMoreMenu(){this.setState({moreMenuOpen:!1})}async copyPermalink(){this.closeMoreMenu();const e=`${this.props.context.userSettings.getTrustedDomain()}/app/users/view/${this.selectedUser.id}`;await qt.copy(e,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The permalink has been copied to clipboard"))}resendInvite(){this.props.context.port.request("passbolt.users.resend-invite",this.selectedUser.username).then(this.onResendInviteSuccess.bind(this)).catch(this.onResendInviteFailure.bind(this))}onResendInviteSuccess(){this.props.actionFeedbackContext.displaySuccess(this.translate("The invite has been resent successfully")),this.toggleMoreMenu()}onResendInviteFailure(e){const t={error:e};this.toggleMoreMenu(),this.props.dialogContext.open(we,t)}get translate(){return this.props.t}render(){return a.createElement("div",{className:"col2_3 actions-wrapper"},a.createElement("div",{className:"actions"},this.isLoggedInUserAdmin()&&a.createElement("ul",null,a.createElement("li",null,a.createElement("a",{className:"button "+(this.isButtonDisabled()?"disabled":""),onClick:this.handleEditClickEvent},a.createElement(de,{name:"edit"}),a.createElement("span",null,a.createElement(C.c,null,"Edit")))),a.createElement("li",null,a.createElement("a",{className:"button "+(this.canDelete?"":"disabled"),onClick:this.handleDeleteClickEvent},a.createElement(de,{name:"trash"}),a.createElement("span",null,a.createElement(C.c,null,"Delete")))),a.createElement("div",{className:"dropdown",ref:this.moreMenuRef},a.createElement("a",{className:`button more ${this.state.moreMenuOpen?"open":""} ${this.hasMoreActionAllowed?"":"disabled"}`,onClick:this.handleMoreClickEvent},a.createElement("span",null,a.createElement(C.c,null,"More")),a.createElement(de,{name:"caret-down"})),a.createElement("ul",{className:"dropdown-content menu right "+(this.state.moreMenuOpen?"visible":"")},a.createElement("li",{id:"copy-user-permalink",className:"separator-after"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleCopyPermalinkEvent,className:this.canCopyPermalink?"":"disabled"},a.createElement("span",null,a.createElement(C.c,null,"Copy permalink to clipboard"))))))),this.canIUseResend&&a.createElement("li",{id:"resend-invite-user",className:"separator-after"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleResendInviteClickEvent,className:this.canResendInviteToUser?"":"disabled"},a.createElement("span",null,a.createElement(C.c,null,"Resend invite"))))))),this.canIUseMfa&&a.createElement("li",{id:"disable-mfa-action",className:""},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"disable-mfa",onClick:this.handleDisableMfaEvent,className:this.canDisableMfaForUser?"":"disabled"},a.createElement("span",null,a.createElement(C.c,null,"Disable MFA"))))))),this.canIReviewAccountRecoveryRequest()&&a.createElement("li",{key:"review-recovery-user"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"review-recovery",onClick:this.handleReviewRecoveryRequestEvent,className:this.hasPendingAccountRecoveryRequest()?"":"disabled"},a.createElement("span",null,a.createElement(C.c,null,"Review recovery request"))))))))))),a.createElement("div",{className:"actions secondary"},a.createElement("ul",null,a.createElement("li",null,a.createElement("a",{className:"button button-toggle info "+(this.hasDetailsLocked()?"selected":""),onClick:this.handleDetailsLockedEvent},a.createElement(de,{name:"info-circle",big:!0}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"View detail")))))))}}ts.propTypes={context:d().any,userWorkspaceContext:d().any,workflowContext:d().any,dialogContext:d().any,actionFeedbackContext:d().object,t:d().func};const ss=u(D(St(M(Xe((0,k.Z)("common")(ts))))));class as extends a.Component{render(){return a.createElement("div",{className:"col1"},a.createElement("div",{className:"logo-svg no-img"},a.createElement("svg",{height:"25px",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 30 450 20"},a.createElement("g",{clipPath:"url(#clip0)"},a.createElement("path",{d:"M12.1114 26.4938V52.609h7.4182c4.9203 0 8.3266-1.0597 10.3704-3.1035 2.0438-2.0438 3.0278-5.5258 3.0278-10.2947 0-4.6175-.9083-7.8724-2.8007-9.7648-1.8924-2.0438-5.0717-2.9522-9.6891-2.9522h-8.3266zM0 16.5776h23.3144c7.0398 0 12.4899 2.0438 16.4261 6.2071 3.9362 4.1633 5.9043 9.9162 5.9043 17.2588 0 3.0278-.3785 5.8286-1.2111 8.3265-.8327 2.498-2.0438 4.8446-3.7091 6.8884-1.9681 2.498-4.3904 4.3147-7.1155 5.4501-2.8007 1.0598-6.4342 1.5896-11.0516 1.5896H12.1114v16.5775H0v-62.298zM70.0188 53.1389H85.158v-9.462H70.9272c-2.8008 0-4.7689.3785-5.8287 1.1354-1.0597.757-1.5896 2.1195-1.5896 4.0119 0 1.5896.4542 2.7251 1.2869 3.4063.8326.6056 2.5736.9084 5.223.9084zM53.9712 16.5776h24.7527c6.2827 0 10.9759 1.4383 14.1551 4.3147 3.1793 2.8765 4.7689 7.1155 4.7689 12.7927v28.6888H65.0985c-4.5417 0-8.0994-1.1354-10.5217-3.4063s-3.6334-5.5258-3.6334-9.7648c0-5.223 1.3625-8.9322 4.1633-11.203 2.8007-2.2709 7.4939-3.4064 14.0794-3.4064h15.8962v-1.1354c0-2.7251-.8326-4.6175-2.4222-5.7529-1.5897-1.1355-4.3904-1.6653-8.5537-1.6653H53.9712v-9.4621zM107.488 52.8356h25.51c2.271 0 3.936-.3784 4.92-1.0597 1.06-.6813 1.59-1.8167 1.59-3.4063 0-1.5897-.53-2.7251-1.59-3.4064-1.059-.7569-2.725-1.1354-4.92-1.1354h-10.446c-6.207 0-10.37-.9841-12.566-2.8765-2.195-1.8924-3.255-5.2987-3.255-10.0676 0-4.9202 1.287-8.5536 3.937-10.9002 2.649-2.3466 6.737-3.482 12.187-3.482h25.964v9.5377h-21.347c-3.482 0-5.753.3028-6.812.9083-1.06.6056-1.59 1.6654-1.59 3.255 0 1.4382.454 2.498 1.362 3.1035.909.6813 2.423.9841 4.391.9841h10.976c4.996 0 8.856 1.2111 11.43 3.5577 2.649 2.3466 3.936 5.6772 3.936 10.0676 0 4.239-1.211 7.721-3.558 10.3704-2.346 2.6493-5.298 4.0119-9.007 4.0119h-31.112v-9.4621zM159.113 52.8356h25.51c2.271 0 3.936-.3784 4.92-1.0597 1.06-.6813 1.59-1.8167 1.59-3.4063 0-1.5897-.53-2.7251-1.59-3.4064-1.059-.7569-2.725-1.1354-4.92-1.1354h-10.446c-6.207 0-10.37-.9841-12.566-2.8765-2.195-1.8924-3.255-5.2987-3.255-10.0676 0-4.9202 1.287-8.5536 3.937-10.9002 2.649-2.3466 6.737-3.482 12.187-3.482h25.964v9.5377h-21.347c-3.482 0-5.753.3028-6.812.9083-1.06.6056-1.59 1.6654-1.59 3.255 0 1.4382.454 2.498 1.362 3.1035.909.6813 2.423.9841 4.391.9841h10.976c4.996 0 8.856 1.2111 11.43 3.5577 2.649 2.3466 3.936 5.6772 3.936 10.0676 0 4.239-1.211 7.721-3.558 10.3704-2.346 2.6493-5.298 4.0119-9.007 4.0119h-31.263v-9.4621h.151zM223.607 0v16.5775h10.37c4.617 0 8.251.5298 11.052 1.6653 2.8 1.0597 5.147 2.8764 7.115 5.3744 1.665 2.1195 2.876 4.3904 3.709 6.9641.833 2.4979 1.211 5.2987 1.211 8.3265 0 7.3426-1.968 13.0955-5.904 17.2588-3.936 4.1633-9.386 6.2071-16.426 6.2071h-23.315V0h12.188zm7.342 26.4937h-7.418v26.1152h8.326c4.618 0 7.873-.9841 9.69-2.8765 1.892-1.9681 2.8-5.223 2.8-9.9162 0-4.7689-1.059-8.1752-3.103-10.219-1.968-2.1195-5.45-3.1035-10.295-3.1035zM274.172 39.5132c0 4.3904.984 7.721 3.027 10.219 2.044 2.4223 4.845 3.6334 8.554 3.6334 3.633 0 6.434-1.2111 8.554-3.6334 2.044-2.4223 3.103-5.8286 3.103-10.219s-1.059-7.721-3.103-10.1433c-2.044-2.4222-4.845-3.6334-8.554-3.6334-3.633 0-6.434 1.2112-8.554 3.6334-2.043 2.4223-3.027 5.8286-3.027 10.1433zm35.88 0c0 7.1912-2.196 12.9441-6.586 17.2588-4.39 4.2389-10.219 6.4341-17.637 6.4341-7.418 0-13.323-2.1195-17.713-6.4341-4.391-4.3147-6.586-9.9919-6.586-17.1831 0-7.1911 2.195-12.944 6.586-17.2587 4.39-4.3147 10.295-6.5099 17.713-6.5099 7.342 0 13.247 2.1952 17.637 6.5099 4.39 4.239 6.586 9.9919 6.586 17.183zM329.884 62.3737h-12.565V0h12.565v62.3737zM335.712 16.5775h8.554V0h12.111v16.5775h12.793v9.1592h-12.793v18.4699c0 3.4063.606 5.7529 1.742 7.1154 1.135 1.2869 3.179 1.9681 6.055 1.9681h4.996v9.1593h-11.127c-4.466 0-7.873-1.2112-10.295-3.7091-2.346-2.498-3.558-6.0557-3.558-10.6732V25.7367h-8.553v-9.1592h.075z",fill:"var(--icon-color)"}),a.createElement("path",{d:"M446.532 30.884L419.433 5.52579c-2.347-2.19519-6.056-2.19519-8.478 0L393.923 21.4977c4.466 1.6653 7.948 5.3744 9.235 9.9919h23.012c1.211 0 2.119.984 2.119 2.1195v3.482c0 1.2111-.984 2.1195-2.119 2.1195h-2.649v4.9202c0 1.2112-.985 2.1195-2.12 2.1195h-5.829c-1.211 0-2.119-.984-2.119-2.1195v-4.9202h-10.219c-1.287 4.6932-4.769 8.478-9.311 10.0676l17.108 15.9719c2.346 2.1952 6.055 2.1952 8.478 0l27.023-25.3582c2.574-2.4223 2.574-6.5099 0-9.0079z",fill:"#E10600"}),a.createElement("path",{d:"M388.927 28.3862c-1.135 0-2.195.3028-3.179.757-2.271 1.1354-3.86 3.482-3.86 6.2071 0 2.6493 1.438 4.9202 3.633 6.1314.984.5298 2.12.8326 3.331.8326 3.86 0 6.964-3.1035 6.964-6.964.151-3.7848-3.028-6.9641-6.889-6.9641z",fill:"#E10600"})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0"},a.createElement("path",{fill:"#fff",d:"M0 0h448.5v78.9511H0z"})))),a.createElement("h1",null,a.createElement("span",null,"Passbolt"))))}}const ns=as,rs="mandatory";class is extends Error{constructor(e,t){super(e),this.name="PassboltApiFetchError",this.data=t||{}}}const os=is;class ls extends Error{constructor(){super("An internal error occurred. The server response could not be parsed. Please contact your administrator."),this.name="PassboltBadResponseError"}}const cs=ls;class ms extends Error{constructor(e){super(e=e||"The service is unavailable"),this.name="PassboltServiceUnavailableError"}}const ds=ms;class hs{constructor(e){if(this.options=e,!this.options.getBaseUrl())throw new TypeError("ApiClient constructor error: baseUrl is required.");if(!this.options.getResourceName())throw new TypeError("ApiClient constructor error: resourceName is required.");try{let e=this.options.getBaseUrl().toString();e.endsWith("/")&&(e=e.slice(0,-1)),this.baseUrl=`${e}/${this.options.getResourceName()}`,this.baseUrl=new URL(this.baseUrl)}catch(e){throw new TypeError("ApiClient constructor error: b.")}this.apiVersion="api-version=v2"}getDefaultHeaders(){return{Accept:"application/json","content-type":"application/json"}}buildFetchOptions(){return{credentials:"include",headers:{...this.getDefaultHeaders(),...this.options.getHeaders()}}}async get(e,t){this.assertValidId(e);const s=this.buildUrl(`${this.baseUrl}/${e}`,t||{});return this.fetchAndHandleResponse("GET",s)}async delete(e,t,s,a){let n;this.assertValidId(e),void 0===a&&(a=!1),n=a?this.buildUrl(`${this.baseUrl}/${e}/dry-run`,s||{}):this.buildUrl(`${this.baseUrl}/${e}`,s||{});let r=null;return t&&(r=this.buildBody(t)),this.fetchAndHandleResponse("DELETE",n,r)}async findAll(e){const t=this.buildUrl(this.baseUrl.toString(),e||{});return await this.fetchAndHandleResponse("GET",t)}async create(e,t){const s=this.buildUrl(this.baseUrl.toString(),t||{}),a=this.buildBody(e);return this.fetchAndHandleResponse("POST",s,a)}async update(e,t,s,a){let n;this.assertValidId(e),void 0===a&&(a=!1),n=a?this.buildUrl(`${this.baseUrl}/${e}/dry-run`,s||{}):this.buildUrl(`${this.baseUrl}/${e}`,s||{});let r=null;return t&&(r=this.buildBody(t)),this.fetchAndHandleResponse("PUT",n,r)}assertValidId(e){if(!e)throw new TypeError("ApiClient.assertValidId error: id cannot be empty");if("string"!=typeof e)throw new TypeError("ApiClient.assertValidId error: id should be a string")}assertMethod(e){"string"!=typeof e&&new TypeError("ApiClient.assertValidMethod method should be a string."),["GET","POST","PUT","DELETE"].indexOf(e)<0&&new TypeError(`ApiClient.assertValidMethod error: method ${e} is not supported.`)}assertUrl(e){if(!e)throw new TypeError("ApliClient.assertUrl error: url is required.");if(!(e instanceof URL))throw new TypeError("ApliClient.assertUrl error: url should be a valid URL object.")}assertBody(e){"string"!=typeof e&&new TypeError("ApiClient.assertBody error: body should be a string.")}buildBody(e){return JSON.stringify(e)}buildUrl(e,t){if("string"!=typeof e)throw new TypeError("ApiClient.buildUrl error: url should be a string.");const s=new URL(`${e}.json?${this.apiVersion}`);t=t||{};for(const[e,a]of Object.entries(t)){if("string"!=typeof e)throw new TypeError("ApiClient.buildUrl error: urlOptions key should be a string.");if("string"==typeof a)s.searchParams.append(e,a);else{if(!Array.isArray(a))throw new TypeError("ApiClient.buildUrl error: urlOptions value should be a string or array.");a.forEach((t=>{s.searchParams.append(e,t)}))}}return s}async fetchAndHandleResponse(e,t,s,a){let n,r;this.assertUrl(t),this.assertMethod(e),s&&this.assertBody(s);const i={...this.buildFetchOptions(),...a};i.method=e,s&&(i.body=s);try{n=await fetch(t.toString(),i)}catch(e){throw new ds(e.message)}try{r=await n.json()}catch(e){throw new cs}if(!n.ok){const e=r.header.message;throw new os(e,{code:n.status,body:r.body})}return r}}const ps=class{constructor(e){this.apiClientOptions=e}async findAllSettings(){return this.initClient(),(await this.apiClient.findAll()).body}async save(e){return this.initClient(),(await this.apiClient.create(e)).body}async getUserSettings(){return this.initClient("setup/select"),(await this.apiClient.findAll()).body}initClient(e="settings"){this.apiClientOptions.setResourceName(`mfa/${e}`),this.apiClient=new hs(this.apiClientOptions)}},us=class{constructor(e){e.setResourceName("mfa-policies/settings"),this.apiClient=new hs(e)}async find(){return(await this.apiClient.findAll()).body}async save(e){await this.apiClient.create(e)}};function gs(){return gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},gs.apply(this,arguments)}const fs=a.createContext({getPolicy:()=>{},findPolicy:()=>{},setProcessing:()=>{},isProcessing:()=>{},clearContext:()=>{},isMfaChoiceRequired:()=>{},checkMfaChoiceRequired:()=>{}});class bs extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.props.context.getApiClientOptions&&(this.mfaService=new ps(this.props.context.getApiClientOptions()),this.mfaPolicyService=new us(this.props.context.getApiClientOptions()))}get defaultState(){return{policy:null,processing:!0,mfaSettings:null,mfaChoiceRequired:!1,getPolicy:this.getPolicy.bind(this),findPolicy:this.findPolicy.bind(this),findMfaSettings:this.findMfaSettings.bind(this),isProcessing:this.isProcessing.bind(this),setProcessing:this.setProcessing.bind(this),hasMfaSettings:this.hasMfaSettings.bind(this),clearContext:this.clearContext.bind(this),checkMfaChoiceRequired:this.checkMfaChoiceRequired.bind(this),isMfaChoiceRequired:this.isMfaChoiceRequired.bind(this)}}async findPolicy(){this.setProcessing(!0);let e=null;e=this.mfaPolicyService?(await this.mfaPolicyService.find()).policy:await this.props.context.port.request("passbolt.mfa-policy.get-policy"),this.setState({policy:e}),this.setProcessing(!1)}async findMfaSettings(){this.setProcessing(!0);let e=null;e=this.mfaService?(await this.mfaService.getUserSettings()).MfaAccountSettings:await this.props.context.port.request("passbolt.mfa-policy.get-mfa-settings"),this.setState({mfaSettings:e}),this.setProcessing(!1)}getPolicy(){return this.state.policy}hasMfaSettings(){if(this.state.mfaSettings)return Object.values(this.state.mfaSettings).some((e=>e))}isProcessing(){return this.state.processing}setProcessing(e){this.setState({processing:e})}clearContext(){const{policy:e,processing:t}=this.defaultState;this.setState({policy:e,processing:t})}async checkMfaChoiceRequired(){if(await this.findPolicy(),null===this.getPolicy()||this.getPolicy()!==rs)return!1;await this.findMfaSettings(),this.setState({mfaChoiceRequired:!this.hasMfaSettings()})}isMfaChoiceRequired(){return this.state.mfaChoiceRequired}render(){return a.createElement(fs.Provider,{value:this.state},this.props.children)}}bs.propTypes={context:d().any,children:d().any};const ys=u(bs);function Es(e){return class extends a.Component{render(){return a.createElement(fs.Consumer,null,(t=>a.createElement(e,gs({mfaContext:t},this.props))))}}}class vs extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks(),this.createRefs()}getDefaultState(){return{open:!1,loading:!0}}bindCallbacks(){this.handleDocumentClickEvent=this.handleDocumentClickEvent.bind(this),this.handleDocumentContextualMenuEvent=this.handleDocumentContextualMenuEvent.bind(this),this.handleDocumentDragStartEvent=this.handleDocumentDragStartEvent.bind(this),this.handleToggleMenuClick=this.handleToggleMenuClick.bind(this),this.handleProfileClick=this.handleProfileClick.bind(this),this.handleThemeClick=this.handleThemeClick.bind(this),this.handleMobileAppsClick=this.handleMobileAppsClick.bind(this)}componentDidMount(){document.addEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.addEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.addEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0}),this.props.mfaContext.checkMfaChoiceRequired()}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.removeEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.removeEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0})}createRefs(){this.userBadgeMenuRef=a.createRef()}get canIUseThemeCapability(){return this.props.context.siteSettings&&this.props.context.siteSettings.canIUse("accountSettings")}get canIUseMobileCapability(){return this.props.context.siteSettings&&this.props.context.siteSettings.canIUse("mobile")}handleDocumentClickEvent(e){this.userBadgeMenuRef.current.contains(e.target)||this.closeUserBadgeMenu()}handleDocumentContextualMenuEvent(e){this.userBadgeMenuRef.current.contains(e.target)||this.closeUserBadgeMenu()}handleDocumentDragStartEvent(){this.closeUserBadgeMenu()}closeUserBadgeMenu(){this.setState({open:!1})}getUserFullName(){return this.props.user&&this.props.user.profile?`${this.props.user.profile.first_name} ${this.props.user.profile.last_name}`:"..."}getUserUsername(){return this.props.user&&this.props.user.username?`${this.props.user.username}`:"..."}handleToggleMenuClick(e){e.preventDefault();const t=!this.state.open;this.setState({open:t})}handleProfileClick(){this.props.navigationContext.onGoToUserSettingsProfileRequested(),this.closeUserBadgeMenu()}handleThemeClick(){this.props.navigationContext.onGoToUserSettingsThemeRequested(),this.closeUserBadgeMenu()}handleMobileAppsClick(){this.props.navigationContext.onGoToUserSettingsMobileRequested(),this.closeUserBadgeMenu()}get attentionRequired(){return this.props.accountRecoveryContext.isAccountRecoveryChoiceRequired()||this.props.mfaContext.isMfaChoiceRequired()}render(){return a.createElement("div",{className:"col3 profile-wrapper"},a.createElement("div",{className:"user profile dropdown",ref:this.userBadgeMenuRef},a.createElement("div",{className:"avatar-with-name button "+(this.state.open?"open":""),onClick:this.handleToggleMenuClick},a.createElement(xe,{user:this.props.user,className:"avatar picture left-cell",baseUrl:this.props.baseUrl,attentionRequired:this.attentionRequired}),a.createElement("div",{className:"details center-cell"},a.createElement("span",{className:"name"},this.getUserFullName()),a.createElement("span",{className:"email"},this.getUserUsername())),a.createElement("div",{className:"more right-cell"},a.createElement("a",{role:"button"},a.createElement(de,{name:"caret-down"})))),this.state.open&&a.createElement("ul",{className:"dropdown-content right visible"},a.createElement("li",{key:"profile"},a.createElement("div",{className:"row"},a.createElement("a",{role:"button",tabIndex:"1",onClick:this.handleProfileClick},a.createElement("span",null,a.createElement(C.c,null,"Profile")),this.attentionRequired&&a.createElement(de,{name:"exclamation",baseline:!0})))),this.canIUseThemeCapability&&a.createElement("li",{key:"theme"},a.createElement("div",{className:"row"},a.createElement("a",{role:"button",tabIndex:"2",onClick:this.handleThemeClick},a.createElement("span",null,a.createElement(C.c,null,"Theme"))))),this.canIUseMobileCapability&&a.createElement("li",{key:"mobile"},a.createElement("div",{className:"row"},a.createElement("a",{role:"button",tabIndex:"3",onClick:this.handleMobileAppsClick},a.createElement("span",null,a.createElement(C.c,null,"Mobile Apps")),a.createElement("span",{className:"chips new"},"new")))))))}}vs.propTypes={context:d().object,navigationContext:d().any,mfaContext:d().object,accountRecoveryContext:d().object,baseUrl:d().string,user:d().object};const Cs=u(v(Dt(Es((0,k.Z)("common")(vs)))));class ks extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleFilterClickEvent=this.handleFilterClickEvent.bind(this),this.handleHide=this.handleHide.bind(this)}handleFilterClickEvent(e){this.props.onFilterSelected(e),this.handleHide()}handleHide(){"function"==typeof this.props.onBeforeHide&&this.props.onBeforeHide(),this.props.hide()}render(){return a.createElement(ht,{hide:this.handleHide,left:this.props.left,top:this.props.top,className:this.props.className},a.createElement("li",{key:"option-filter-all-groups",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"all-groups",onClick:()=>this.handleFilterClickEvent(Ps.all)},a.createElement("span",null,a.createElement(C.c,null,"All groups"))))))),a.createElement("li",{key:"option-filter-groups-manage",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"groups-manage",onClick:()=>this.handleFilterClickEvent(Ps.manage)},a.createElement("span",null,a.createElement(C.c,null,"Groups I manage"))))))),a.createElement("li",{key:"option-filter-groups-member",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"groups-member",onClick:()=>this.handleFilterClickEvent(Ps.member)},a.createElement("span",null,a.createElement(C.c,null,"Groups I am member of"))))))))}}ks.propTypes={onFilterSelected:d().func,left:d().number,hide:d().func,onBeforeHide:d().func,top:d().number,className:d().string};const ws=(0,k.Z)("common")(ks);class Ss extends a.Component{constructor(e,t){super(e,t),this.initializeProperties(),this.state=this.defaultState,this.initEventHandlers()}initializeProperties(){this.foldersErrors=this.getFoldersErrors(),this.resourcesErrors=this.getResourcesErrors(),this.acosPermissionsOptions=this.getAcosPermissionsOptionsMap()}get defaultState(){return{processing:!1,owners:this.populateDefaultOwners()}}initEventHandlers(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleOnChangeOwner=this.handleOnChangeOwner.bind(this)}getFoldersErrors(){const e=this.props.context.deleteGroupWithConflictsDialogProps.errors;return(e.folders&&e.folders.sole_owner||[]).sort(((e,t)=>e.name.localeCompare(t.name)))}getResourcesErrors(){const e=this.props.context.deleteGroupWithConflictsDialogProps.errors;return(e.resources&&e.resources.sole_owner||[]).sort(((e,t)=>e.name.localeCompare(t.name)))}getAcosPermissionsOptionsMap(){const e={};return this.resourcesErrors.forEach((t=>{e[t.id]=this.getAcoPermissionsOptions(t)})),this.foldersErrors.forEach((t=>{e[t.id]=this.getAcoPermissionsOptions(t)})),e}getAcoPermissionsOptions(e){let t=e.permissions;return t=this.filterOutGroupToDeleteFromPermissions(t),t=this.decoratePermissionWithAcoEntity(t),t=this.sortPermissionsAlphabeticallyByAcoName(t),t}filterOutGroupToDeleteFromPermissions(e){return e.filter((e=>e.aro_foreign_key!==this.groupToDelete.id))}decoratePermissionWithAcoEntity(e){return e.forEach((e=>{"Group"===e.aro?e.group=this.getGroup(e.aro_foreign_key):e.user=this.getUser(e.aro_foreign_key)})),e}sortPermissionsAlphabeticallyByAcoName(e){return e.sort(((e,t)=>{const s="Group"===e.aro?e.group.name:this.getUserFullName(e.user),a="Group"===t.aro?t.group.name:this.getUserFullName(t.user);return s.localeCompare(a)}))}getUser(e){return this.props.context.users.find((t=>t.id===e))}getGroup(e){return this.props.context.groups.find((t=>t.id===e))}getUserFullName(e){return`${e.profile.first_name} ${e.profile.last_name}`}async handleFormSubmit(e){e.preventDefault(),this.state.processing||await this.delete()}handleCloseClick(){this.props.onClose(),this.props.context.setContext({deleteUserWithConflictsDialogProps:null})}handleOnChangeOwner(e,t){const s=e.target.value,a=this.state.owners;Object.assign(a,{[t]:s}),this.setState({owners:a})}createPermissionOwnersTransfer(){if(null!=this.state.owners){const e=[];for(const[t,s]of Object.entries(this.state.owners))e.push({id:s,aco_foreign_key:t});return e}return null}createUserDeleteTransfer(){return{owners:this.createPermissionOwnersTransfer()}}async delete(){this.setState({processing:!0});try{const e=this.createUserDeleteTransfer();this.props.loadingContext.add(),await this.props.context.port.request("passbolt.groups.delete",this.groupToDelete.id,e),this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The group has been deleted successfully")),this.props.onClose(),this.props.context.setContext({deleteUserWithConflictsDialogProps:null})}catch(e){this.props.loadingContext.remove(),"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e)),this.setState({processing:!1})}}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}hasAllInputDisabled(){return this.state.processing}populateDefaultOwners(){const e={};return this.hasResourcesConflict()&&this.resourcesErrors.forEach((t=>{const s=this.acosPermissionsOptions[t.id][0];s&&(e[t.id]=s.id)})),this.hasFolderConflict()&&this.foldersErrors.forEach((t=>{const s=this.acosPermissionsOptions[t.id][0];s&&(e[t.id]=s.id)})),e}get groupToDelete(){return this.props.context.deleteGroupWithConflictsDialogProps.group}hasFolderConflict(){return this.foldersErrors&&this.foldersErrors.length>0}hasResourcesConflict(){return this.resourcesErrors&&this.resourcesErrors.length>0}getAcoPermissionsList(e){const t=e=>"User"===e.aro&&this.getUserOptionLabel(e.user)||"Group"===e.aro&&e.group.name;return this.acosPermissionsOptions[e]?.map((e=>({value:e.id,label:t(e)})))||[]}getUserOptionLabel(e){return`${e.profile.first_name} ${e.profile.last_name} (${e.username})`}get translate(){return this.props.t}render(){return a.createElement(be,{title:this.translate("You cannot delete this group!"),onClose:this.handleCloseClick,disabled:this.state.processing,className:"delete-group-dialog"},a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content intro"},a.createElement("p",null,a.createElement(C.c,null,"You are about to delete the group ",a.createElement("strong",{className:"dialog-variable"},{groupName:this.groupToDelete.name}),".")),a.createElement("p",null,a.createElement(C.c,null,"This group is the sole owner of some content. You need to transfer the ownership to others to continue."))),a.createElement("div",{className:"ownership-transfer"},this.hasFolderConflict()&&a.createElement("div",null,a.createElement("h3",null,a.createElement(C.c,null,"Folders")),a.createElement("ul",{className:"ownership-transfer-items"},this.foldersErrors.map((e=>a.createElement("li",{key:e.id},a.createElement("div",{className:"select-wrapper input required "+(this.state.processing?"disabled":"")},a.createElement("label",{htmlFor:"transfer_folder_owner"},e.name," ",a.createElement(C.c,null,"(Folder) new owner:")),a.createElement(qe,{className:"form-element",value:this.state.owners[e.id],items:this.getAcoPermissionsList(e.id),onChange:t=>this.handleOnChangeOwner(t,e.id)}))))))),this.hasResourcesConflict()&&a.createElement("div",null,a.createElement("h3",null,a.createElement(C.c,null,"Passwords")),a.createElement("ul",{className:"ownership-transfer-items"},this.resourcesErrors.map((e=>a.createElement("li",{key:e.id},a.createElement("div",{className:"select-wrapper input required "+(this.state.processing?"disabled":"")},a.createElement("label",{htmlFor:"transfer_resource_owner"},e.name," (",a.createElement(C.c,null,"Password"),") ",a.createElement(C.c,null,"new owner"),":"),a.createElement(qe,{className:"form-element",value:this.state.owners[e.id],items:this.getAcoPermissionsList(e.id),onChange:t=>this.handleOnChangeOwner(t,e.id)})))))))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleCloseClick}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Delete"),warning:!0}))))}}Ss.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,dialogContext:d().any,loadingContext:d().any,t:d().func};const xs=u(H(D(M((0,k.Z)("common")(Ss)))));class Ns extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.initEventHandlers()}getDefaultState(){return{processing:!1}}initEventHandlers(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}async handleFormSubmit(e){e.preventDefault(),this.state.processing||await this.delete()}handleCloseClick(){this.props.onClose(),this.props.context.setContext({deleteGroupDialogProps:null})}async delete(){this.setState({processing:!0});try{this.props.loadingContext.add(),await this.props.context.port.request("passbolt.groups.delete",this.group.id),this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The group has been deleted successfully")),this.props.onClose(),this.props.context.setContext({deleteGroupDialogProps:null})}catch(e){this.props.loadingContext.remove(),"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e)),this.setState({processing:!1})}}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}hasAllInputDisabled(){return this.state.processing}get group(){return this.props.context.deleteGroupDialogProps.group}get translate(){return this.props.t}render(){return a.createElement(be,{title:this.translate("Delete group?"),onClose:this.handleCloseClick,disabled:this.state.processing,className:"delete-group-dialog"},a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("p",null,a.createElement(C.c,null,"Are you sure you want to delete the group ",a.createElement("strong",{className:"dialog-variable"},{groupName:this.group.name}),"?")),a.createElement("p",null,a.createElement(C.c,null,"This action cant be undone. Users in this group may lose access to the content shared with it."))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleCloseClick}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Delete"),warning:!0}))))}}Ns.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,dialogContext:d().any,loadingContext:d().any,t:d().func};const Rs=u(H(D(M((0,k.Z)("common")(Ns)))));class Is extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleDeleteClickEvent=this.handleDeleteClickEvent.bind(this),this.handleEditGroup=this.handleEditGroup.bind(this),this.handleHide=this.handleHide.bind(this)}get group(){return this.props.group}get isCurrentUserAdmin(){return this.props.context.loggedInUser&&"admin"===this.props.context.loggedInUser.role.name}async handleDeleteClickEvent(){try{await this.props.context.port.request("passbolt.groups.delete-dry-run",this.group.id),this.displayDeleteGroupDialog()}catch(e){"DeleteDryRunError"===e.name?this.displayDeleteGroupWithConflictsDialog(e.errors):this.handleError(e)}this.handleHide()}displayDeleteGroupDialog(){const e={group:this.group};this.props.context.setContext({deleteGroupDialogProps:e}),this.props.dialogContext.open(Rs)}displayDeleteGroupWithConflictsDialog(e){const t={group:this.group,errors:e};this.props.context.setContext({deleteGroupWithConflictsDialogProps:t}),this.props.dialogContext.open(xs)}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}async handleEditGroup(){await this.props.userWorkspaceContext.onGroupToEdit(this.props.group),this.props.dialogContext.open(Be),this.handleHide()}handleHide(){"function"==typeof this.props.onBeforeHide&&this.props.onBeforeHide(this.props.group.id),this.props.hide()}render(){return a.createElement(ht,{hide:this.handleHide,left:this.props.left,top:this.props.top,className:this.props.className},a.createElement("li",{key:"option-filter-all-groups",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"edit-group",onClick:this.handleEditGroup},a.createElement("span",null,a.createElement(C.c,null,"Edit group"))))))),this.isCurrentUserAdmin&&a.createElement("li",{key:"option-delete-group",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"delete-group",onClick:this.handleDeleteClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Delete Group"))))))))}}Is.propTypes={context:d().any,hide:d().func,onBeforeHide:d().func,left:d().number,top:d().number,group:d().object,className:d().string,dialogContext:d().any,userWorkspaceContext:d().object};const Ds=u(Xe(M((0,k.Z)("common")(Is))));class Ts extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{open:!0,title:this.translate("All groups"),filterType:null,moreTitleMenuOpen:!1,moreMenuOpenGroupId:null}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleTitleMoreClickEvent=this.handleTitleMoreClickEvent.bind(this),this.handleCloseTitleMoreMenu=this.handleCloseTitleMoreMenu.bind(this),this.handleTitleContextualMenuEvent=this.handleTitleContextualMenuEvent.bind(this),this.handleFilterGroupType=this.handleFilterGroupType.bind(this),this.handleGroupSelected=this.handleGroupSelected.bind(this),this.handleMoreClickEvent=this.handleMoreClickEvent.bind(this),this.handleCloseMoreMenu=this.handleCloseMoreMenu.bind(this),this.handleContextualMenuEvent=this.handleContextualMenuEvent.bind(this)}handleTitleClickEvent(){const e=!this.state.open;this.setState({open:e})}handleTitleContextualMenuEvent(e){e.preventDefault(),this.showContextualMenu(e.pageY,e.pageX)}handleTitleMoreClickEvent(e){const t=!this.state.moreTitleMenuOpen;if(this.setState({moreTitleMenuOpen:t}),t){const{left:t,top:s}=e.currentTarget.getBoundingClientRect();this.showContextualMenu(s+18,t,"right")}}handleCloseTitleMoreMenu(){this.setState({moreTitleMenuOpen:!1})}handleContextualMenuEvent(e,t){if(e.preventDefault(),this.isCurrentUserAdmin){const s=e.pageY,a={group:t,left:e.pageX,top:s};this.props.contextualMenuContext.show(Ds,a)}}handleGroupSelected(e,t){const{id:s}=t;this.props.history.push(`/app/groups/view/${s}`)}handleFilterGroupType(e){this.setState({filterType:e},(()=>{this.updateTitle()}))}handleMoreClickEvent(e,t){const s=this.state.moreMenuOpenGroupId===t.id?null:t.id;if(this.setState({moreMenuOpenGroupId:s}),s){const{left:s,top:a}=e.currentTarget.getBoundingClientRect(),n={group:t,left:s,top:a+18,className:"right",onBeforeHide:this.handleCloseMoreMenu};this.props.contextualMenuContext.show(Ds,n)}}handleCloseMoreMenu(e){this.state.moreMenuOpenGroupId===e&&this.setState({moreMenuOpenGroupId:null})}get titles(){return{[Ps.manage]:this.translate("Groups I manage"),[Ps.member]:this.translate("Groups I am member of"),default:this.translate("All groups")}}get filters(){return{[Ps.manage]:e=>e.my_group_user&&e.my_group_user.is_admin,[Ps.member]:e=>e.my_group_user&&!e.my_group_user.is_admin,[Ps.all]:e=>e}}get filteredGroups(){const e=this.state.filterType||Ps.all,t=this.filters[e];return this.groupsSorted.filter(t)}get isCurrentUserAdmin(){return this.props.context.loggedInUser&&"admin"===this.props.context.loggedInUser.role.name}get groups(){return this.props.context.groups}get groupsSorted(){return this.groups.sort(((e,t)=>e.name.localeCompare(t.name)))}showContextualMenu(e,t,s=""){const a={left:t,onFilterSelected:this.handleFilterGroupType,onBeforeHide:this.handleCloseTitleMoreMenu,top:e,className:s};this.props.contextualMenuContext.show(ws,a)}updateTitle(){const e=this.titles[this.state.filterType]||this.titles.default;this.setState({title:e})}isLoading(){return null===this.groups}hasGroup(){return this.filteredGroups.length>0}isSelected(e){const t=this.props.userWorkspaceContext.filter.type===Qe.GROUP,s=this.props.userWorkspaceContext.filter.payload,a=s&&s.group;return t&&a.id===e.id}canShowMore(e){const t=e.my_group_user&&e.my_group_user.is_admin;return this.isCurrentUserAdmin||t}get translate(){return this.props.t}render(){return a.createElement("div",{className:"navigation-secondary-tree navigation-secondary navigation-groups accordion"},a.createElement("ul",{className:"accordion-header"},a.createElement("li",{className:"node root "+(this.state.open?"open":"close")},a.createElement("div",{className:"row title"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("h3",null,a.createElement("span",{className:"folders-label",onClick:this.handleTitleClickEvent},a.createElement("a",{role:"button",onContextMenu:this.handleTitleContextualMenuEvent},a.createElement(a.Fragment,null,this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})),this.state.title))))),a.createElement("div",{className:"dropdown right-cell more-ctrl"},a.createElement("a",{className:"button "+(this.state.moreTitleMenuOpen?"open":""),onClick:this.handleTitleMoreClickEvent},a.createElement(de,{name:"3-dots-h"})))))),this.state.open&&a.createElement("div",{className:"accordion-content"},this.isLoading()&&a.createElement("div",{className:"processing-wrapper"},a.createElement(de,{name:"spinner"}),a.createElement("span",{className:"processing-text"},a.createElement(C.c,null,"Retrieving groups"))),!this.isLoading()&&!this.hasGroup()&&a.createElement("em",{className:"empty-content"},a.createElement(C.c,null,"empty")),!this.isLoading()&&this.hasGroup()&&a.createElement("ul",{className:"tree ready"},this.filteredGroups.map((e=>a.createElement("li",{className:"node root group-item",key:e.id},a.createElement("div",{className:"row  "+(this.isSelected(e)?"selected":"")},a.createElement("div",{className:"main-cell-wrapper",onClick:t=>this.handleGroupSelected(t,e),onContextMenu:t=>this.handleContextualMenuEvent(t,e)},a.createElement("div",{className:"main-cell"},a.createElement("a",{title:e.name},a.createElement(de,{name:"users"}),a.createElement("span",{className:"ellipsis"},e.name)))),this.canShowMore(e)&&a.createElement("div",{className:"dropdown right-cell more-ctrl"},a.createElement("a",{onClick:t=>this.handleMoreClickEvent(t,e),className:"button "+(this.state.moreMenuOpenGroupId===e.id?"open":"")},a.createElement(de,{name:"3-dots-h"}))))))))))}}Ts.propTypes={context:d().any,userWorkspaceContext:d().any,history:d().object,contextualMenuContext:d().any,t:d().func};const As=u((0,c.EN)(Xe(at((0,k.Z)("common")(Ts))))),Ps={all:"all",manage:"manage",member:"member"};class Us extends a.Component{constructor(e){super(e),this.bindHandlers()}bindHandlers(){this.handleAllItemsClick=this.handleAllItemsClick.bind(this),this.handleRecentlyModifiedClick=this.handleRecentlyModifiedClick.bind(this)}get isAllItemsSelected(){return this.props.userWorkspaceContext.filter.type===Qe.ALL}get isRecentlyModifiedSelected(){return this.props.userWorkspaceContext.filter.type===Qe.RECENTLY_MODIFIED}handleAllItemsClick(){const e={type:Qe.ALL};this.props.history.push({pathname:"/app/users",state:{filter:e}})}handleRecentlyModifiedClick(){const e={type:Qe.RECENTLY_MODIFIED};this.props.history.push({pathname:"/app/users",state:{filter:e}})}render(){return a.createElement("div",{className:"navigation-secondary navigation-shortcuts"},a.createElement("ul",null,a.createElement("li",null,a.createElement("div",{className:"row "+(this.isAllItemsSelected?"selected":""),onClick:this.handleAllItemsClick},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"all-users"},a.createElement("span",null,a.createElement(C.c,null,"All users"))))))),a.createElement("li",null,a.createElement("div",{className:"row "+(this.isRecentlyModifiedSelected?"selected":""),onClick:this.handleRecentlyModifiedClick},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"recently-modified"},a.createElement("span",null,a.createElement(C.c,null,"Recently modified")))))))))}}Us.propTypes={history:d().object,userWorkspaceContext:d().object};const _s=(0,c.EN)(Xe((0,k.Z)("common")(Us)));class Ls extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks(),this.createReferences()}bindCallbacks(){this.handleChangeEvent=this.handleChangeEvent.bind(this),this.handleSubmitButtonFocus=this.handleSubmitButtonFocus.bind(this),this.handleSubmitButtonBlur=this.handleSubmitButtonBlur.bind(this),this.handleOnSubmitEvent=this.handleOnSubmitEvent.bind(this)}get defaultState(){return{hasSubmitButtonFocus:!1}}createReferences(){this.searchInputRef=a.createRef()}handleChangeEvent(e){const t=e.target.value;this.props.onSearch&&this.props.onSearch(t)}handleSubmitButtonFocus(){this.setState({hasSubmitButtonFocus:!0})}handleSubmitButtonBlur(){this.setState({hasSubmitButtonFocus:!1})}handleOnSubmitEvent(e){if(e.preventDefault(),this.props.onSearch){const e=this.searchInputRef.current.value;this.props.onSearch(e)}}render(){return a.createElement("div",{className:"col2 search-wrapper"},a.createElement("form",{className:"search",onSubmit:this.handleOnSubmitEvent},a.createElement("div",{className:`input search required ${this.state.hasSubmitButtonFocus?"no-focus":""} ${this.props.disabled?"disabled":""}`},a.createElement("label",null,a.createElement(C.c,null,"Search")),a.createElement("input",{ref:this.searchInputRef,className:"required",type:"search",disabled:this.props.disabled?"disabled":"",onChange:this.handleChangeEvent,placeholder:this.props.placeholder||this.props.t("Search"),value:this.props.value}),a.createElement("div",{className:"search-button-wrapper"},a.createElement("button",{className:"button button-transparent",value:this.props.t("Search"),onBlur:this.handleSubmitButtonBlur,onFocus:this.handleSubmitButtonFocus,type:"submit",disabled:this.props.disabled?"disabled":""},a.createElement(de,{name:"search"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Search")))))))}}Ls.propTypes={disabled:d().bool,onSearch:d().func,placeholder:d().string,value:d().string,t:d().func},Ls.defaultProps={disabled:!1};const Fs=(0,k.Z)("common")(Ls);class Ms extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}bindCallbacks(){this.handleSearchEvent=this.handleSearchEvent.bind(this)}get defaultState(){return{text:"",debounceTimeoutIt:null}}componentDidUpdate(e){this.handleFilterChanged(e.userWorkspaceContext.filter)}componentWillUnmount(){clearTimeout(this.state.debounceTimeoutIt)}handleFilterChanged(e){const t=e.type===Qe.TEXT,s=this.props.userWorkspaceContext.filter.type===Qe.TEXT;t&&!s&&this.setState({text:""})}handleSearchEvent(e){this.search(e)}search(e){clearTimeout(this.state.debounceTimeoutId);const t=setTimeout((()=>{const t={type:Qe.TEXT,payload:e};this.props.history.push({pathname:"/app/users",state:{filter:t}})}),300);this.setState({debounceTimeoutId:t,text:e})}render(){return a.createElement(Fs,{disabled:this.props.disabled,onSearch:this.handleSearchEvent,placeholder:this.props.t("Search users"),value:this.state.text})}}Ms.propTypes={disabled:d().bool,userWorkspaceContext:d().object,history:d().object,t:d().func};const Os=(0,c.EN)(Xe((0,k.Z)("common")(Ms)));class js extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers()}get defaultState(){return{open:!0}}bindHandlers(){this.handleTitleClicked=this.handleTitleClicked.bind(this)}get group(){return this.props.userWorkspaceContext.details.group}handleTitleClicked(){this.setState({open:!this.state.open})}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}get translate(){return this.props.t}render(){const e=this.formatDateTimeAgo(this.group.created),t=this.formatDateTimeAgo(this.group.modified),s=this.props.context.users.find((e=>e.id===this.group.modified_by)),n=s?`${s.profile.first_name} ${s.profile.last_name}`:this.translate("Unknown user"),r=this.group.groups_users.length;return a.createElement("div",{className:"detailed-information accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClicked,role:"button"},a.createElement(C.c,null,"Information"),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("div",{className:"accordion-content"},a.createElement("ul",null,a.createElement("li",{className:"created"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Created")),a.createElement("span",{className:"value",title:this.group.created},e)),a.createElement("li",{className:"modified"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Modified")),a.createElement("span",{className:"value",title:this.group.modified},t)),a.createElement("li",{className:"modified-by"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Modified by")),a.createElement("span",{className:"value"},n)),a.createElement("li",{className:"members"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Members")),a.createElement("span",{className:"value"},r)))))}}js.propTypes={context:d().any,userWorkspaceContext:d().object,t:d().func};const qs=u(Xe((0,k.Z)("common")(js)));class Ws extends a.Component{get user(){return this.props.context.users.find((e=>e.id===this.props.groupUser.user_id))}get roleName(){return this.props.groupUser.is_admin?"Group manager":"Member"}get baseUrl(){return this.props.context.userSettings.getTrustedDomain()}render(){return a.createElement("li",{key:this.user.id,className:"permission usercard-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",{className:"name"},`${this.user.profile.first_name} ${this.user.profile.last_name}`),a.createElement("div",{className:"subinfo"},this.props.t(this.roleName)))),a.createElement(xe,{user:this.user,baseUrl:this.baseUrl}))}}Ws.propTypes={context:d().any,groupUser:d().object,userWorkspaceContext:d().object,t:d().func};const zs=u(Xe((0,k.Z)("common")(Ws)));class Gs extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers()}get defaultState(){return{open:!1}}bindHandlers(){this.handleTitleClicked=this.handleTitleClicked.bind(this),this.handleEditGroup=this.handleEditGroup.bind(this)}get group(){return this.props.userWorkspaceContext.details.group}get baseUrl(){return this.props.context.userSettings.getTrustedDomain()}handleTitleClicked(){this.setState({open:!this.state.open})}async handleEditGroup(){await this.props.userWorkspaceContext.onGroupToEdit(this.group),this.props.dialogContext.open(Be)}isLoading(){return!this.props.context.users}render(){return a.createElement("div",{className:"detailed-information accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClicked,role:"button"},a.createElement(C.c,null,"Group members"),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("div",{className:"accordion-content"},a.createElement("a",{className:"section-action button button-transparent",onClick:this.handleEditGroup},a.createElement(de,{name:"edit"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Edit"))),this.isLoading()&&a.createElement("div",{className:"processing-wrapper"},a.createElement(de,{name:"spinner"}),a.createElement("span",{className:"processing-text"},a.createElement(C.c,null,"Retrieving group members"))),!this.isLoading()&&this.state.open&&a.createElement(a.Fragment,null,a.createElement("ul",null,this.group.groups_users.map((e=>a.createElement(zs,{key:e.id,groupUser:e})))))))}}Gs.propTypes={context:d().any,userWorkspaceContext:d().object,dialogContext:d().object};const Hs=u(M(Xe((0,k.Z)("common")(Gs))));class Vs extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handlePermalinkClick=this.handlePermalinkClick.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this)}get group(){return this.props.userWorkspaceContext.details.group}get baseUrl(){return this.props.context.userSettings.getTrustedDomain()}async handlePermalinkClick(){const e=`${this.props.context.userSettings.getTrustedDomain()}/app/groups/view/${this.group.id}`;await qt.copy(e,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The permalink has been copied to clipboard"))}handleCloseClick(){this.props.userWorkspaceContext.onDetailsLocked()}get translate(){return this.props.t}render(){return a.createElement("div",{className:"panel aside ready"},a.createElement("div",{className:"sidebar user"},a.createElement("div",{className:"sidebar-header"},a.createElement("div",{className:"teaser-image"},a.createElement(Re,{group:this.group,baseUrl:this.baseUrl})),a.createElement("h3",null,a.createElement("div",{className:"title-wrapper"},a.createElement("span",{className:"name sidebar-header-title"},this.group.name),a.createElement("a",{className:"title-link",title:this.translate("Copy the link to this group"),onClick:this.handlePermalinkClick},a.createElement(de,{name:"link"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Copy the link to this group")))),a.createElement("span",{className:"subtitle"},a.createElement(C.c,null,"Group"))),a.createElement("a",{className:"dialog-close button button-transparent",onClick:this.handleCloseClick},a.createElement(de,{name:"close"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Close"))))),a.createElement(qs,null),a.createElement(Hs,null))}}Vs.propTypes={context:d().any,actionFeedbackContext:d().any,userWorkspaceContext:d().any,t:d().func};const Ks=u(D(Xe((0,k.Z)("common")(Vs))));var Bs=s(49853),$s=s.n(Bs);class Zs extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.createInputRefs(),this.bindEventHandlers()}componentDidMount(){this.setState({loading:!1},(()=>{this.firstNameRef.current.focus()}))}get defaultState(){return{loading:!0,processing:!1,first_name:"",first_nameError:null,first_nameWarning:"",last_name:"",last_nameError:null,last_nameWarning:"",username:"",usernameError:null,usernameWarning:"",is_admin:!1,hasAlreadyBeenValidated:!1}}createInputRefs(){this.firstNameRef=a.createRef(),this.lastNameRef=a.createRef(),this.usernameRef=a.createRef()}bindEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleFirstNameInputKeyUp=this.handleFirstNameInputKeyUp.bind(this),this.handleLastNameInputOnKeyUp=this.handleLastNameInputOnKeyUp.bind(this),this.handleUsernameInputOnKeyUp=this.handleUsernameInputOnKeyUp.bind(this),this.handleCheckboxClick=this.handleCheckboxClick.bind(this)}handleClose(){this.props.onClose()}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}handleCheckboxClick(e){const t=e.target,s=t.checked,a=t.name;this.setState({[a]:s})}handleFirstNameInputKeyUp(){if(this.state.hasAlreadyBeenValidated){const e=this.validateFirstNameInput();this.setState(e)}else{const e=Ge(this.state.first_name,He,this.translate);this.setState({first_nameWarning:e})}}handleLastNameInputOnKeyUp(){if(this.state.hasAlreadyBeenValidated){const e=this.validateLastNameInput();this.setState(e)}else{const e=Ge(this.state.last_name,He,this.translate);this.setState({last_nameWarning:e})}}handleUsernameInputOnKeyUp(){if(this.state.hasAlreadyBeenValidated){const e=this.validateUsernameInput();this.setState(e)}else{const e=Ge(this.state.username,He,this.translate);this.setState({usernameWarning:e})}}async handleFormSubmit(e){if(e.preventDefault(),await this.setState({hasAlreadyBeenValidated:!0}),!this.state.processing){if(await this.toggleProcessing(),await this.validate(),this.hasValidationError())return await this.toggleProcessing(),void this.focusFirstFieldError();try{await this.createUser(),await this.handleSaveSuccess()}catch(e){this.handleSaveError(e)}}}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.translate("The user has been added successfully")),this.props.onClose()}handleSaveError(e){"UserAbortsOperationError"===e.name?this.setState({processing:!1}):this.hasUsernameAlreadyExists(e.data)?this.setState({processing:!1,usernameError:e.data.body.username.uniqueUsername}):(console.error(e),this.handleError(e),this.setState({processing:!1}))}hasUsernameAlreadyExists(e){return e&&e.body&&e.body.username&&e.body.username.uniqueUsername}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}async toggleProcessing(){const e=this.state.processing;return this.setState({processing:!e})}focusFirstFieldError(){this.state.first_nameError?this.firstNameRef.current.focus():this.state.last_nameError?this.lastNameRef.current.focus():this.state.username&&this.usernameRef.current.focus()}async createUser(){const e=this.props.context.roles.find((e=>this.state.is_admin?"admin"===e.name:"user"===e.name)),t={profile:{first_name:this.state.first_name,last_name:this.state.last_name},username:this.state.username.trim(),role_id:e.id};return await this.props.context.port.request("passbolt.users.create",t)}async validate(){return await Promise.all([this.validateFirstNameInput(),this.validateLastNameInput(),this.validateUsernameInput()]),this.hasValidationError()}async validateFirstNameInput(){let e=null;return this.state.first_name.trim().length||(e=this.translate("A first name is required.")),this.setState({first_nameError:e})}async validateLastNameInput(){let e=null;return this.state.last_name.trim().length||(e=this.translate("A last name is required.")),this.setState({last_nameError:e})}async validateUsernameInput(){let e=null;const t=this.state.username.trim();return t.length?this.isEmail(t)||(e=this.translate("The username should be a valid username address.")):e=this.translate("A username is required."),this.setState({usernameError:e})}isEmail(e){return $s()("^[\\p{L}0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[\\p{L}0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[_\\p{L}0-9][-_\\p{L}0-9]*\\.)*(?:[\\p{L}0-9][-\\p{L}0-9]{0,62})\\.(?:(?:[a-z]{2}\\.)?[a-z]{2,})$").test(e)}hasValidationError(){return null!==this.state.first_nameError||null!==this.state.last_nameError||null!==this.state.usernameError}hasAllInputDisabled(){return this.state.processing||this.state.loading}get translate(){return this.props.t}render(){return a.createElement(be,{className:"user-create-dialog",title:this.translate("Add User"),onClose:this.handleClose,disabled:this.hasAllInputDisabled()},a.createElement("form",{className:"user-create-form",onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input text required ${this.state.first_nameError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"user-first-name-input"},a.createElement(C.c,null,"First name"),this.state.first_nameWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"user-first-name-input",name:"first_name",ref:this.firstNameRef,type:"text",value:this.state.first_name,placeholder:this.translate("First name"),required:"required",disabled:this.hasAllInputDisabled(),maxLength:"128",onKeyUp:this.handleFirstNameInputKeyUp,onChange:this.handleInputChange,autoComplete:"off",autoFocus:!0}),this.state.first_nameError&&a.createElement("div",{className:"first_name error-message"},this.state.first_nameError),this.state.first_nameWarning&&a.createElement("div",{className:"firstname warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.first_nameWarning)),a.createElement("div",{className:`input text required ${this.state.last_nameError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"user-last-name-input"},a.createElement(C.c,null,"Last name"),this.state.last_nameWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"user-last-name-input",name:"last_name",ref:this.lastNameRef,maxLength:"128",type:"text",value:this.state.last_name,placeholder:this.translate("Last name"),required:"required",disabled:this.hasAllInputDisabled(),onKeyUp:this.handleLastNameInputOnKeyUp,onChange:this.handleInputChange,autoComplete:"off",autoFocus:!0}),this.state.last_nameError&&a.createElement("div",{className:"last_name error-message"},this.state.last_nameError),this.state.last_nameWarning&&a.createElement("div",{className:"lastname warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.last_nameWarning)),a.createElement("div",{className:`input text required ${this.state.usernameError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"user-username-input"},a.createElement(C.c,null,"Username / Email"),this.state.usernameWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"user-username-input",name:"username",maxLength:"128",ref:this.usernameRef,type:"text",value:this.state.username,placeholder:this.translate("Email"),required:"required",disabled:this.hasAllInputDisabled(),onKeyUp:this.handleUsernameInputOnKeyUp,onChange:this.handleInputChange,autoComplete:"off",autoFocus:!0}),this.state.usernameError&&a.createElement("div",{className:"username error-message"},this.state.usernameError),this.state.usernameWarning&&a.createElement("div",{className:"username warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.usernameWarning)),a.createElement("div",{className:"input checkbox-wrapper "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",{htmlFor:"is_admin_checkbox"},a.createElement(C.c,null,"Role")),a.createElement("div",{className:"input checkbox"},a.createElement("input",{id:"is_admin_checkbox",name:"is_admin",onChange:this.handleCheckboxClick,checked:this.state.is_admin,disabled:this.hasAllInputDisabled(),type:"checkbox"}),a.createElement("label",{htmlFor:"is_admin_checkbox"}," ",a.createElement(C.c,null,"This user is an administrator"))),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"Note: Administrators can add and delete users; They can also create groups and assign group managers; By default they can not see all passwords.")))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleClose}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Save")}))))}}Zs.propTypes={context:d().any,actionFeedbackContext:d().any,onClose:d().func,dialogContext:d().any,t:d().func};const Ys=u(D(M((0,k.Z)("common")(Zs))));class Js extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindEventHandlers(),this.createRef()}get defaultState(){return{loading:!0,processing:!1,name:"",nameError:"",nameWarning:"",groups_users:[],autocompleteOpen:!1}}bindEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleAutocompleteSelect=this.handleAutocompleteSelect.bind(this),this.handleAutocompleteClose=this.handleAutocompleteClose.bind(this),this.handleAutocompleteOpen=this.handleAutocompleteOpen.bind(this),this.fetchAutocompleteItems=this.fetchAutocompleteItems.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleNameInputKeyUp=this.handleNameInputKeyUp.bind(this),this.handleSelectUpdate=this.handleSelectUpdate.bind(this),this.handleDeleteClickEvent=this.handleDeleteClickEvent.bind(this),this.renderItem=this.renderItem.bind(this),this.renderContainer=this.renderContainer.bind(this)}createRef(){this.groupUsersListRef=a.createRef(),this.nameInputRef=a.createRef()}async componentDidMount(){await this.addCurrentUser(),this.setState({loading:!1},(()=>{this.nameInputRef.current.focus()}))}handleClose(){this.props.onClose()}handleAutocompleteOpen(){this.setState({autocompleteOpen:!0})}handleAutocompleteClose(){this.setState({autocompleteOpen:!1})}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}handleNameInputKeyUp(){const e=this.validateNameInput();this.setState(e);const t=Ge(this.state.name,50,this.translate);this.setState({nameWarning:t})}handleSelectUpdate(e,t){const s=!0===e.target.value,a=Object.assign(this.state.groups_users),n=a.findIndex((e=>e.user.id===t));a[n]=Object.assign(a[n],{is_admin:s}),this.setState({groups_users:a})}handleDeleteClickEvent(e,t){const s=Object.assign(this.state.groups_users),a=s.findIndex((e=>e.user.id===t));s.splice(a,1),this.setState({groups_users:s})}async handleFormSubmit(e){if(e.preventDefault(),await this.validate()){if(!this.state.processing){await this.toggleProcessing();try{await this.createGroup(),await this.handleSaveSuccess()}catch(e){this.handleSaveError(e)}}}else this.handleValidateError()}handleValidateError(){this.setState({processing:!1}),this.focusFieldError()}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.translate("The group has been created successfully.")),this.props.onClose()}handleSaveError(e){"UserAbortsOperationError"===e.name?this.setState({processing:!1}):this.hasGroupNameAlreadyExists(e.data)?this.setState({processing:!1,nameError:e.data.body.name.group_unique}):(console.error(e),this.handleError(e),this.setState({processing:!1}))}hasGroupNameAlreadyExists(e){return e&&e.body&&e.body.name&&e.body.name.group_unique}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}async addCurrentUser(){const[e]=await this.decorateUsersWithGpgKey([this.props.context.loggedInUser]);this.state.groups_users.push({user:e,is_admin:!0})}async toggleProcessing(){const e=this.state.processing;return this.setState({processing:!e})}focusFieldError(){this.state.nameError&&this.nameInputRef.current.focus()}validateNameInput(){const e=this.state.name.trim();let t="";return e.length||(t=this.translate("A name is required.")),new Promise((e=>{this.setState({nameError:t},e)}))}async validate(){return this.setState({error:"",nameError:""}),await this.validateNameInput(),""===this.state.nameError}handleAutocompleteSelect(e){const t=this.state.groups_users,s=0===this.state.groups_users.length;t.push({user:e,is_admin:s}),this.setState({groups_users:t},(()=>{this.groupUsersListRef.current.scrollTo(t.length-1)}))}async createGroup(){const e=this.state.groups_users.map((e=>({user_id:e.user.id,is_admin:e.is_admin}))),t={name:this.state.name,groups_users:e};return await this.props.context.port.request("passbolt.groups.create",t)}async fetchAutocompleteItems(e){const t=(e=e.toLowerCase())&&e.split(/\s+/)||[""],s=e=>this.state.groups_users.some((t=>t.user.id===e.id)),a=(e,t)=>(e=>new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(e),"i"))(e).test(t);let n=0;const r=this.props.context.users.filter((e=>{const r=n<Le.DISPLAY_LIMIT&&!0===e.active&&!s(e)&&(e=>t.every((t=>((e,t)=>((e,t)=>a(e,t.username))(e,t)||((e,t)=>a(e,t.profile.first_name)||a(e,t.profile.last_name))(e,t))(t,e))))(e);return r&&n++,r}));return this.decorateUsersWithGpgKey(r)}async decorateUsersWithGpgKey(e){return await Promise.all(e.map((async e=>Object.assign(e,{gpgkey:await this.props.context.port.request("passbolt.keyring.get-public-key-info-by-user",e.id)}))))}hasAllInputDisabled(){return this.state.processing||this.state.loading}hasManager(){return this.hasMembers()&&this.state.groups_users.some((e=>!0===e.is_admin))}hasMembers(){return this.state.groups_users.length>0}hasSubmitDisabled(){return!this.hasManager()||this.hasAllInputDisabled()}getUserFullname(e){return`${e.profile.first_name} ${e.profile.last_name}`}formatFingerprint(e){const t=e.toUpperCase().replace(/.{4}/g,"$& ");return a.createElement(a.Fragment,null,t.substr(0,24),a.createElement("br",null),t.substr(25))}getTooltipMessage(e){return a.createElement(a.Fragment,null,a.createElement("div",{className:"email"},a.createElement("strong",null,e.user.username)),a.createElement("div",{className:"fingerprint"},this.formatFingerprint(e.user.gpgkey.fingerprint)))}get permissions(){return[{value:!1,label:this.translate("Member")},{value:!0,label:this.translate("Group manager")}]}renderItem(e,t){const s=this.state.groups_users[e],n=s.user.id;return a.createElement(ze,{key:n,itemKey:n,groupUser:s,onMemberRoleChange:e=>this.handleSelectUpdate(e,s.user.id),onMemberRemoved:e=>this.handleDeleteClickEvent(e,s.user.id),isLastItemDisplayed:t>=2,isMemberChanged:!0,isMemberAdded:!0,areActionsAllowed:!this.hasAllInputDisabled()})}renderContainer(e,t){return a.createElement("ul",{className:"permissions groups_users",ref:t},e)}get translate(){return this.props.t}render(){return a.createElement(be,{title:this.translate("Create group"),className:"edit-group-dialog",onClose:this.handleClose,disabled:this.hasAllInputDisabled()},a.createElement("form",{className:"group-form",onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input text required ${this.state.nameError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"group_name"},a.createElement(C.c,null,"Group name"),this.state.nameWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"group-name-input",name:"name",className:"required",maxLength:"50",type:"text",placeholder:this.translate("group name"),onKeyUp:this.handleNameInputKeyUp,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),ref:this.nameInputRef}),this.state.nameError&&a.createElement("div",{className:"name error-message"},this.state.nameError),this.state.nameWarning&&a.createElement("div",{className:"name warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.nameWarning)),a.createElement("div",{className:"input required"},a.createElement("label",{htmlFor:"group_permission"},a.createElement(C.c,null,"Group members")))),a.createElement("div",{className:"group_members"},a.createElement("div",{className:"form-content scroll permission-edit"},this.hasMembers()&&a.createElement(ce(),{ref:this.groupUsersListRef,itemRenderer:this.renderItem,itemsRenderer:this.renderContainer,length:this.state.groups_users.length,minSize:4,type:this.state.groups_users.length<3?"simple":"uniform",threshold:30})),!this.hasMembers()&&a.createElement("div",{className:"message warning"},a.createElement("span",null,a.createElement(C.c,null,"The group is empty, please add a group manager."))),this.hasMembers()&&!this.hasManager()&&a.createElement("div",{className:"message error"},a.createElement("span",null,a.createElement(C.c,null,"Please make sure there is at least one group manager."))),this.hasManager()&&a.createElement("div",{className:"message warning"},a.createElement("span",null,a.createElement(C.c,null,"You need to click save for the changes to take place."))),this.state.nameWarning&&a.createElement("div",{className:"message warning"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.nameWarning),a.createElement("div",{className:"form-content permission-add"},a.createElement(Le,{id:"user-name-input",name:"name",label:this.translate("Add people"),placeholder:this.translate("Start typing a person name"),searchCallback:this.fetchAutocompleteItems,onSelect:this.handleAutocompleteSelect,onOpen:this.handleAutocompleteOpen,onClose:this.handleAutocompleteClose,disabled:this.hasAllInputDisabled(),baseUrl:this.props.context.userSettings.getTrustedDomain()}))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleClose}),a.createElement(Ee,{disabled:this.hasSubmitDisabled(),processing:this.state.processing,value:this.translate("Save")}))))}}Js.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,dialogContext:d().any,t:d().func};const Xs=u(D(M((0,k.Z)("common")(Js))));class Qs extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks(),this.createRefs()}get defaultState(){return{createMenuOpen:!1}}bindCallbacks(){this.handleDocumentClickEvent=this.handleDocumentClickEvent.bind(this),this.handleDocumentContextualMenuEvent=this.handleDocumentContextualMenuEvent.bind(this),this.handleDocumentDragStartEvent=this.handleDocumentDragStartEvent.bind(this),this.handleCreateClickEvent=this.handleCreateClickEvent.bind(this),this.handleCreateMenuUserClickEvent=this.handleCreateMenuUserClickEvent.bind(this),this.handleCreateMenuGroupClickEvent=this.handleCreateMenuGroupClickEvent.bind(this)}componentDidMount(){document.addEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.addEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.addEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.removeEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.removeEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0})}createRefs(){this.createMenuRef=a.createRef()}handleDocumentClickEvent(e){this.createMenuRef.current&&this.createMenuRef.current.contains(e.target)||this.handleCloseCreateMenu()}handleDocumentContextualMenuEvent(e){this.createMenuRef.current.contains(e.target)||this.handleCloseCreateMenu()}handleDocumentDragStartEvent(){this.handleCloseCreateMenu()}handleCreateClickEvent(){const e=!this.state.createMenuOpen;this.setState({createMenuOpen:e})}handleCreateMenuUserClickEvent(){this.openCreateUserDialog(),this.handleCloseCreateMenu()}openCreateUserDialog(){this.props.dialogContext.open(Ys)}handleCreateMenuGroupClickEvent(){this.openCreateGroupDialog(),this.handleCloseCreateMenu()}openCreateGroupDialog(){this.props.dialogContext.open(Xs)}handleCloseCreateMenu(){this.setState({createMenuOpen:!1})}canIUseCreate(){return this.isLoggedInUserAdmin()}isLoggedInUserAdmin(){return this.props.context.loggedInUser&&"admin"===this.props.context.loggedInUser.role.name}render(){return a.createElement("div",{className:"col1 main-action-wrapper"},this.canIUseCreate()&&a.createElement("div",{className:"dropdown",ref:this.createMenuRef},a.createElement("a",{className:"button create primary "+(this.state.createMenuOpen?"open":""),onClick:this.handleCreateClickEvent},a.createElement(de,{name:"add"}),a.createElement("span",null,a.createElement(C.c,null,"Create"))),a.createElement("ul",{className:"dropdown-content menu right "+(this.state.createMenuOpen?"visible":"")},a.createElement("li",{id:"user_action"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleCreateMenuUserClickEvent},a.createElement("span",null,a.createElement(C.c,null,"New user"))))))),a.createElement("li",{id:"group_action"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleCreateMenuGroupClickEvent},a.createElement("span",null,a.createElement(C.c,null,"New group"))))))))))}}Qs.propTypes={context:d().any,dialogContext:d().any};const ea=u(M((0,k.Z)("common")(Qs)));class ta extends a.Component{render(){let e=0;return a.createElement("div",{className:"breadcrumbs"},a.createElement("ul",{className:"menu"},this.props.items&&this.props.items.map((t=>(e++,a.createElement("li",{className:"ellipsis",key:e},t))))))}}ta.propTypes={items:d().array};const sa=ta;class aa extends a.Component{render(){return a.createElement("a",{onClick:this.props.onClick},this.props.name)}}aa.propTypes={name:d().string,onClick:d().func};const na=aa;class ra extends a.Component{get items(){const e=[this.allUsersBreadcrumb];switch(this.props.userWorkspaceContext.filter.type){case Qe.NONE:return[];case Qe.ALL:return e;case Qe.TEXT:{const t=!this.props.userWorkspaceContext.filter.payload,s=this.props.userWorkspaceContext.filter.payload;return t?e:[...e,this.getLastBreadcrumb(`${this.translate("Search:")} ${s}`)]}case Qe.RECENTLY_MODIFIED:return[...e,this.getLastBreadcrumb(this.translate("Recently modified"))];case Qe.GROUP:{const t=this.props.userWorkspaceContext.filter.payload.group,s=t&&t.name||this.translate("N/A");return[...e,this.getLastBreadcrumb(`${s} ${this.translate("(group)")}`)]}}return[]}get allUsersBreadcrumb(){return a.createElement(na,{name:this.translate("All users"),onClick:this.props.navigationContext.onGoToUsersRequested})}getLastBreadcrumb(e){return a.createElement(na,{name:e,onClick:this.onLastBreadcrumbClick.bind(this)})}async onLastBreadcrumbClick(){const e=this.props.location.pathname;this.props.history.push({pathname:e})}get translate(){return this.props.t}render(){return a.createElement(sa,{items:this.items})}}ra.propTypes={userWorkspaceContext:d().object,location:d().object,history:d().object,navigationContext:d().any,t:d().func};const ia=(0,c.EN)(v(Xe((0,k.Z)("common")(ra))));class oa extends a.Component{componentDidMount(){this.handleRoute()}async handleRoute(){const e=this.props.match.params.accountRecoveryRequestId;let t;try{t=await this.props.context.port.request("passbolt.account-recovery.get-request",e)}catch(e){return void this.handleAccountRecoveryRequestNotFound()}const s=this.props.context.users.find((e=>e.id===t.user_id));s?(await this.props.userWorkspaceContext.onUserSelected.single(s),this.props.workflowContext.start(Ot,{accountRecoveryRequest:t})):this.handleAccountRecoveryRequestUserNotFound()}handleAccountRecoveryRequestNotFound(){this.props.actionFeedbackContext.displayError(this.props.t("The account recovery request does not exist."))}handleAccountRecoveryRequestUserNotFound(){this.props.actionFeedbackContext.displayError(this.props.t("The user who requested an account recovery does not exist."))}render(){return a.createElement(a.Fragment,null)}}oa.propTypes={actionFeedbackContext:d().any,context:d().any,history:d().object,match:d().object,t:d().func,userWorkspaceContext:d().any,workflowContext:d().any};const la=u(Xe(D(St((0,c.EN)((0,k.Z)("common")(oa))))));class ca extends a.Component{get mustDisplayUserDetails(){const{details:e}=this.props.userWorkspaceContext;return e.user&&e.locked}get mustDisplayGroupDetails(){const{details:e}=this.props.userWorkspaceContext;return e.group&&e.locked}render(){return a.createElement("div",null,this.props.context.users&&a.createElement(c.AW,{path:"/app/account-recovery/requests/review/:accountRecoveryRequestId",component:la}),a.createElement("div",{className:"header second"},a.createElement(ns,null),a.createElement(Os,null),a.createElement(Cs,{baseUrl:this.props.context.userSettings.getTrustedDomain(),user:this.props.context.loggedInUser})),a.createElement("div",{className:"header third"},a.createElement(ea,null),a.createElement(ss,null)),a.createElement("div",{className:"panel main"},a.createElement("div",{className:"panel left"},a.createElement(_s,null),a.createElement(As,null)),a.createElement("div",{className:"panel middle"},a.createElement(ia,null),a.createElement(Ht,null),this.mustDisplayUserDetails&&a.createElement(es,null),this.mustDisplayGroupDetails&&a.createElement(Ks,null))))}}ca.propTypes={context:d().any,history:d().any,userWorkspaceContext:d().any};const ma=u((0,c.EN)(Xe(ca)));class da extends a.Component{render(){return a.createElement(c.l_,{to:"/app/passwords"})}}const ha=(0,c.EN)(da);class pa extends a.Component{get isMfaEnabled(){return this.props.context.siteSettings.canIUse("multiFactorAuthentication")}get canIUseThemeCapability(){return this.props.context.siteSettings&&this.props.context.siteSettings.canIUse("accountSettings")}get canIUseMobileCapability(){return this.props.context.siteSettings&&this.props.context.siteSettings.canIUse("mobile")}get canIUseAccountRecoveryCapability(){return this.props.context.siteSettings&&this.props.context.siteSettings.canIUse("accountRecovery")}render(){const e=e=>this.props.location.pathname.endsWith(e);return a.createElement("div",{className:"navigation-secondary navigation-shortcuts"},a.createElement("ul",null,a.createElement("li",null,a.createElement("div",{className:"row "+(e("profile")?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.props.navigationContext.onGoToUserSettingsProfileRequested},a.createElement("span",null,a.createElement(C.c,null,"Profile"))))))),a.createElement("li",null,a.createElement("div",{className:"row "+(e("keys")?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.props.navigationContext.onGoToUserSettingsKeysRequested},a.createElement("span",null,a.createElement(C.c,null,"Keys inspector"))))))),a.createElement("li",null,a.createElement("div",{className:"row "+(e("passphrase")?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.props.navigationContext.onGoToUserSettingsPassphraseRequested},a.createElement("span",null,a.createElement(C.c,null,"Passphrase"))))))),a.createElement("li",null,a.createElement("div",{className:"row "+(e("security-token")?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.props.navigationContext.onGoToUserSettingsSecurityTokenRequested},a.createElement("span",null,a.createElement(C.c,null,"Security token"))))))),this.canIUseThemeCapability&&a.createElement("li",null,a.createElement("div",{className:"row "+(e("theme")?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.props.navigationContext.onGoToUserSettingsThemeRequested},a.createElement("span",null,a.createElement(C.c,null,"Theme"))))))),this.isMfaEnabled&&a.createElement("li",null,a.createElement("div",{className:"row "+(e("mfa")?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.props.navigationContext.onGoToUserSettingsMfaRequested},a.createElement("span",null,a.createElement(C.c,null,"Multi Factor Authentication")),this.props.hasPendingMfaChoice&&a.createElement(de,{name:"exclamation",baseline:!0})))))),this.canIUseAccountRecoveryCapability&&a.createElement("li",null,a.createElement("div",{className:"row "+(e("account-recovery")?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.props.navigationContext.onGoToUserSettingsAccountRecoveryRequested},a.createElement("span",null,a.createElement(C.c,null,"Account Recovery")),this.props.hasPendingAccountRecoveryChoice&&a.createElement(de,{name:"exclamation",baseline:!0})))))),this.canIUseMobileCapability&&a.createElement("li",null,a.createElement("div",{className:"row "+(e("mobile")?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.props.navigationContext.onGoToUserSettingsMobileRequested},a.createElement("span",null,a.createElement(C.c,null,"Mobile setup")))))))))}}pa.propTypes={context:d().any,navigationContext:d().any,history:d().object,location:d().object,hasPendingAccountRecoveryChoice:d().bool,hasPendingMfaChoice:d().bool};const ua=u((0,c.EN)(v((0,k.Z)("common")(pa))));class ga extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers(),this.createReferences()}get defaultState(){return{avatarFile:null,actions:{processing:!1},errors:{message:null},validation:{hasAlreadyBeenValidated:!1}}}createReferences(){this.fileUploaderRef=a.createRef()}get user(){return this.props.context.loggedInUser}get isProcessing(){return this.state.actions.processing}get areActionsAllowed(){return!this.isProcessing}get hasValidationError(){return null!==this.state.errors.message}bindHandlers(){this.handleSelectFile=this.handleSelectFile.bind(this),this.handleAvatarFileSelected=this.handleAvatarFileSelected.bind(this),this.handleUpload=this.handleUpload.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleClose=this.handleClose.bind(this)}handleSelectFile(){this.fileUploaderRef.current.click()}async handleAvatarFileSelected(e){const[t]=e.target.files;if(await this.select(t),this.state.validation.hasAlreadyBeenValidated){const e=this.validateAvatarInput();this.setState(e)}}handleUpload(e){e.preventDefault(),this.upload()}handleCancel(){this.close()}handleClose(){this.close()}async select(e){await this.setState({avatarFile:e})}async upload(){if(this.state.actions.processing)return;if(await this.setState({validation:{hasAlreadyBeenValidated:!0}}),await this.toggleProcessing(),await this.validateAvatarInput(),this.hasValidationError)return void await this.toggleProcessing();const e=await this.createAvatarDto();await this.props.context.port.request("passbolt.users.update-avatar",this.user.id,e).then(this.onUploadSuccess.bind(this)).catch(this.onUploadFailure.bind(this))}async createAvatarDto(){const{fileBase64:e,mimeType:t}=await this.readFile();return{fileBase64:e,mimeType:t,filename:this.selectedFilename}}async validateAvatarInput(){let e=null;return this.state.avatarFile||(e=this.translate("A file is required.")),this.setState({errors:{message:e}})}async onUploadSuccess(){await this.toggleProcessing(),await this.refreshUserProfile(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The user has been updated successfully")),this.props.onClose()}async onUploadFailure(e){if(console.error(e),await this.toggleProcessing(),this.hasFileError(e.data))this.setState({errors:{message:e.data.body.profile.avatar.file.validMimeType}});else{const t={error:e};this.props.dialogContext.open(we,t)}}hasFileError(e){return e&&e.body&&e.body.profile&&e.body.profile.avatar&&e.body.profile.avatar.file&&e.body.profile.avatar.file.validMimeType}close(){this.props.onClose()}readFile(){const e=new FileReader;return new Promise(((t,s)=>{e.onloadend=e=>{try{const s=e.target.result,a=s.split(",")[1],n=s.split(",")[0].split(":")[1].split(";")[0];t({fileBase64:a,mimeType:n})}catch(e){s(e)}},e.readAsDataURL(this.state.avatarFile)}))}async toggleProcessing(){const e=this.state.actions.processing;await this.setState({actions:Object.assign(this.state.actions,{processing:!e})})}async refreshUserProfile(){const e=await this.props.context.port.request("passbolt.users.find-logged-in-user");this.props.context.setContext({loggedInUser:e})}get selectedFilename(){return this.state.avatarFile?this.state.avatarFile.name:""}get translate(){return this.props.t}render(){return a.createElement(be,{className:"update-avatar-dialog",onClose:this.handleClose,disabled:!this.areActionsAllowed,title:this.translate("Edit Avatar")},a.createElement("form",{onSubmit:this.handleUpload,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input file required ${this.areActionsAllowed?"":"disabled"} ${this.hasValidationError?"error":""}`},a.createElement("input",{id:"dialog-upload-avatar-input",type:"file",ref:this.fileUploaderRef,onChange:this.handleAvatarFileSelected,accept:"image/*"}),a.createElement("label",{htmlFor:"dialog-upload-avatar-input"},a.createElement(C.c,null,"Avatar")),a.createElement("div",{className:"input-file-inline"},a.createElement("input",{type:"text",disabled:!0,placeholder:this.translate("No file selected"),defaultValue:this.selectedFilename}),a.createElement("a",{className:"button primary "+(this.areActionsAllowed?"":"disabled"),onClick:this.handleSelectFile},a.createElement("span",{className:"ellipsis"},a.createElement(C.c,null,"Choose a file")))),this.state.errors.message&&a.createElement("div",{className:"error-message"},this.state.errors.message))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:!this.areActionsAllowed,processing:this.isProcessing,onClick:this.handleCancel}),a.createElement(Ee,{disabled:!this.areActionsAllowed,processing:this.isProcessing,value:this.translate("Save")}))))}}ga.propTypes={context:d().any,onClose:d().func,dialogContext:d().object,actionFeedbackContext:d().object,t:d().func};const fa=u(D(M((0,k.Z)("common")(ga))));function ba(){return ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ba.apply(this,arguments)}const ya=a.createContext({state:null,oldPassphrase:null,onIntroductionPassphraseRequested:()=>{},onProvidePassphraseRequested:()=>{},onCheckProvidePassphraseRequested:()=>{},onUpdatePassphraseRequested:()=>{},onGoToIntroductionPassphraseRequested:()=>{},onDownloadRecoveryKitRequested:()=>{},onUpdateSecurityTokenRequested:()=>{},onUpdateUserLocaleRequested:()=>{}});class Ea extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{state:ka.INITIAL_STATE,oldPassphrase:null,onIntroductionPassphraseRequested:this.onIntroductionPassphraseRequested.bind(this),onProvidePassphraseRequested:this.onProvidePassphraseRequested.bind(this),onCheckProvidePassphraseRequested:this.onCheckProvidePassphraseRequested.bind(this),onUpdatePassphraseRequested:this.onUpdatePassphraseRequested.bind(this),onGoToIntroductionPassphraseRequested:this.onGoToIntroductionPassphraseRequested.bind(this),onDownloadRecoveryKitRequested:this.onDownloadRecoveryKitRequested.bind(this),onUpdateSecurityTokenRequested:this.onUpdateSecurityTokenRequested.bind(this),onUpdateLocaleUserRequested:this.handleUpdateLocaleUserRequested.bind(this)}}async onIntroductionPassphraseRequested(){await this.setState({state:ka.PASSPHRASE_INTRODUCTION})}async onProvidePassphraseRequested(){await this.setState({state:ka.PASSPHRASE_TO_PROVIDE_REQUESTED})}async onCheckProvidePassphraseRequested(e){await this.props.context.port.request("passbolt.auth.verify-passphrase",e),await this.setState({state:ka.PASSPHRASE_TO_PROVIDE_CHECKED,oldPassphrase:e})}async onGoToIntroductionPassphraseRequested(){await this.setState({state:ka.PASSPHRASE_INTRODUCTION,oldPassphrase:null})}async onUpdatePassphraseRequested(e){await this.props.context.port.request("passbolt.user.update-private-key",this.state.oldPassphrase,e),await this.setState({state:ka.PASSPHRASE_UPDATED,oldPassphrase:null})}async onDownloadRecoveryKitRequested(){await this.props.context.port.request("passbolt.keyring.download-my-private-key")}async onUpdateSecurityTokenRequested(e){await this.props.context.port.request("passbolt.users.update-security-token",e)}async handleUpdateLocaleUserRequested(e){await this.props.context.port.request("passbolt.locale.update-user-locale",e)}render(){return a.createElement(ya.Provider,{value:this.state},this.props.children)}}Ea.propTypes={context:d().any,children:d().any};const va=u(Ea);function Ca(e){return class extends a.Component{render(){return a.createElement(ya.Consumer,null,(t=>a.createElement(e,ba({userSettingsContext:t},this.props))))}}}const ka={INITIAL_STATE:"Initial State",PASSPHRASE_INTRODUCTION:"Passphrase Introduction",PASSPHRASE_TO_PROVIDE_REQUESTED:"Passphrase To Provide Requested",PASSPHRASE_TO_PROVIDE_CHECKED:"Passphrase To Provide Checked",PASSPHRASE_UPDATED:"Passphrase Updated"};class wa extends a.Component{constructor(e){super(e),this.bindHandlers()}get user(){return this.props.context.loggedInUser}bindHandlers(){this.handleUploadPicture=this.handleUploadPicture.bind(this)}handleUploadPicture(){this.props.dialogContext.open(fa)}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}get userLocaleLabel(){const e=(this.props.context.siteSettings.supportedLocales||[]).find((e=>e.locale===this.props.context.locale));return e?e.label:"N/A"}get translate(){return this.props.t}get canIUseLocale(){return this.props.context.siteSettings.canIUse("locale")}render(){return a.createElement("div",{className:"grid grid-responsive-12 profile-detailed-information"},this.user&&a.createElement("div",{className:"row"},a.createElement("div",{className:"profile col6 main-column"},a.createElement("h3",null,a.createElement(C.c,null,"Profile")),a.createElement("table",{className:"table-info profile"},a.createElement("tbody",null,a.createElement("tr",{className:"name"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Name")),a.createElement("td",{className:"value"},`${this.user.profile.first_name} ${this.user.profile.last_name}`)),a.createElement("tr",{className:"email"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Email")),a.createElement("td",{className:"value"},this.user.username)),a.createElement("tr",{className:"role"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Role")),a.createElement("td",{className:"value"},this.user.role.name)),a.createElement("tr",{className:"modified"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Modified")),a.createElement("td",{className:"value"},this.formatDateTimeAgo(this.user.modified))),a.createElement("tr",{className:"created"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Created")),a.createElement("td",{className:"value"},this.formatDateTimeAgo(this.user.created))))),this.canIUseLocale&&a.createElement(a.Fragment,null,a.createElement("h4",null,a.createElement(C.c,null,"Internationalisation")),a.createElement("table",{className:"table-info profile"},a.createElement("tbody",null,a.createElement("tr",{className:"locale"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Language")),a.createElement("td",{className:"value"},this.userLocaleLabel)))))),a.createElement("div",{className:"col5 secondary-column last"},a.createElement("div",{className:"sidebar"},a.createElement("h3",null,a.createElement(C.c,null,"Avatar")),a.createElement("div",{className:"avatar"},a.createElement("div",{className:"value"},a.createElement(xe,{user:this.props.context.loggedInUser,baseUrl:this.props.context.userSettings.getTrustedDomain(),className:""})),a.createElement("button",{className:"button edit-avatar-action",title:this.translate("Upload a new avatar picture"),type:"button",onClick:this.handleUploadPicture},a.createElement(de,{name:"upload"}),a.createElement("span",{className:"help-text"},a.createElement(C.c,null,"Upload a new avatar picture"))))))))}}wa.propTypes={context:d().any,dialogContext:d().object,userSettingsContext:d().object,t:d().func,i18n:d().any};const Sa=u(M(Ca((0,k.Z)("common")(wa))));class xa extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{themes:[],selectedTheme:null}}async componentDidMount(){await this.populate()}bindHandlers(){this.handleThemeSelected=this.handleThemeSelected.bind(this)}async handleThemeSelected(e,t){await this.select(t)}async populate(){this.props.loadingContext.add();const e=await this.props.context.port.request("passbolt.themes.find-all"),t=this.props.context.userSettings.getTheme();await this.setState({themes:e,selectedTheme:t}),this.props.loadingContext.remove()}async select(e){this.state.selectedTheme===e.name||(await this.setState({selectedTheme:e.name}),this.props.context.port.request("passbolt.themes.change",e.name).then(this.onSelectSuccess.bind(this)).catch(this.onSelectFailure.bind(this)))}async onSelectSuccess(){await this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The theme has been updated successfully"))}async onSelectFailure(e){await this.props.loadingContext.remove();const t={error:e};this.props.dialogContext.open(we,t)}render(){const e=e=>this.state.selectedTheme===e.name?"selected":"";return a.createElement("div",{className:"grid grid-responsive-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-column"},a.createElement("h3",null,"Theme"),a.createElement("div",{className:"themes"},a.createElement("div",{className:"col12"},a.createElement("ul",null,this.state.themes.map((t=>a.createElement("li",{key:t.id},a.createElement("div",{className:`main-cell theme ${e(t)}`},a.createElement("a",{onClick:e=>this.handleThemeSelected(e,t)},a.createElement("img",{src:t.preview}),a.createElement("div",{className:"theme-desc"},t.name))))))))))))}}xa.propTypes={context:d().any,actionFeedbackContext:d().object,dialogContext:d().object,loadingContext:d().object,t:d().func};const Na=u(D(M(H((0,k.Z)("common")(xa)))));class Ra extends a.Component{get items(){return[a.createElement(na,{key:"bread-1",name:this.translate("All users"),onClick:this.props.navigationContext.onGoToUsersRequested}),a.createElement(na,{key:"bread-2",name:this.loggedInUserName,onClick:this.props.navigationContext.onGoToUserSettingsProfileRequested}),a.createElement(na,{key:"bread-3",name:this.getLastBreadcrumbItemName,onClick:this.onLastBreadcrumbClick.bind(this)})]}get loggedInUserName(){const e=this.props.context.loggedInUser;return e?`${e.profile.first_name} ${e.profile.last_name}`:""}get getLastBreadcrumbItemName(){const e={profile:this.translate("Profile"),passphrase:this.translate("Passphrase"),"security-token":this.translate("Security token"),theme:this.translate("Theme"),mfa:this.translate("Multi Factor Authentication"),keys:this.translate("Keys inspector"),mobile:this.translate("Mobile transfer"),"account-recovery":this.translate("Account Recovery"),"smtp-settings":this.translate("Email server")};return e[Object.keys(e).find((e=>this.props.location.pathname.endsWith(e)))]}async onLastBreadcrumbClick(){const e=this.props.location.pathname;this.props.history.push({pathname:e})}get translate(){return this.props.t}render(){return a.createElement(sa,{items:this.items})}}Ra.propTypes={context:d().any,location:d().object,history:d().object,navigationContext:d().any,t:d().func};const Ia=u((0,c.EN)(v((0,k.Z)("common")(Ra))));class Da extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers(),this.createReferences()}async componentDidMount(){await this.populate()}get defaultState(){return{profile:{first_name:"",last_name:"",username:"",locale:"en-UK"},actions:{processing:!1},errors:{isFirstnameEmpty:!1,isLastnameEmpty:!1},hasAlreadyBeenValidated:!1}}get isProcessing(){return this.state.actions.processing}get areActionsAllowed(){return!this.isProcessing}get hasErrors(){return Object.values(this.state.errors).some((e=>e))}bindHandlers(){this.handleInputChange=this.handleInputChange.bind(this),this.handleClose=this.handleClose.bind(this),this.handleSave=this.handleSave.bind(this)}createReferences(){this.firstnameRef=a.createRef(),this.lastnameRef=a.createRef()}async handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({profile:Object.assign(this.state.profile,{[a]:s})}),this.state.hasAlreadyBeenValidated&&await this.validate()}handleClose(){this.close()}async handleSave(e){e.preventDefault(),await this.save()}async populate(){const{first_name:e,last_name:t}=this.props.context.loggedInUser.profile,s=this.props.context.locale;await this.setState({profile:{first_name:e,last_name:t,locale:s}})}async save(){if(await this.setState({hasAlreadyBeenValidated:!0}),await this.toggleProcessing(),await this.validate(),this.hasErrors)return await this.toggleProcessing(),void this.focusFirstFieldError();await this.updateUserProfile().then(this.onSaveSuccess.bind(this)).catch(this.onSaveError.bind(this))}async updateUserProfile(){const e=this.buildUserToUpdateDto();if(await this.props.context.port.request("passbolt.users.update",e),this.canIUseLocale){const e=this.buildLocaleToUpdateDto();await this.props.userSettingsContext.onUpdateLocaleUserRequested(e)}}buildUserToUpdateDto(){const{id:e,username:t}=this.props.context.loggedInUser;return{id:e,username:t,profile:{first_name:this.state.profile.first_name,last_name:this.state.profile.last_name}}}buildLocaleToUpdateDto(){return{locale:this.state.profile.locale}}async onSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.translate("The user has been updated successfully"));const e=await this.props.context.port.request("passbolt.users.find-logged-in-user");this.props.context.setContext({loggedInUser:e}),this.props.context.onUpdateLocaleRequested(),this.props.onClose()}async onSaveError(e){await this.toggleProcessing();const t={error:e};this.props.dialogContext.open(we,t)}close(){this.props.onClose()}async validate(){const e=e=>0===e.trim().length,t={isFirstnameEmpty:e(this.state.profile.first_name),isLastnameEmpty:e(this.state.profile.last_name)};await this.setState({errors:t})}focusFirstFieldError(){this.state.errors.isFirstnameEmpty?this.firstnameRef.current.focus():this.state.errors.isLastnameEmpty&&this.lastnameRef.current.focus()}async toggleProcessing(){const e=this.state.actions.processing;return this.setState({actions:Object.assign(this.state.actions,{processing:!e})})}get translate(){return this.props.t}get supportedLocales(){return this.props.context.siteSettings.supportedLocales?this.props.context.siteSettings.supportedLocales.map((e=>({value:e.locale,label:e.label}))):[]}get canIUseLocale(){return this.props.context.siteSettings.canIUse("locale")}render(){const e=this.state.errors.isFirstnameEmpty?"error":"",t=this.state.errors.isLastnameEmpty?"error":"";return a.createElement(be,{title:this.translate("Edit profile"),onClose:this.handleClose,disabled:!this.areActionsAllowed},a.createElement("form",{className:"user-edit-form",onSubmit:this.handleSave,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input text required ${e} ${this.areActionsAllowed?"":"disabled"}`},a.createElement("label",{htmlFor:"user-profile-firstname-input"},a.createElement(C.c,null,"First name")),a.createElement("input",{id:"user-profile-firstname-input",name:"first_name",type:"text",placeholder:this.translate("First name"),required:"required",autoComplete:"off",autoFocus:!0,ref:this.firstnameRef,value:this.state.profile.first_name,onChange:this.handleInputChange,disabled:!this.areActionsAllowed}),this.state.errors.isFirstnameEmpty&&a.createElement("div",{className:"first_name error-message"},a.createElement(C.c,null,"A first name is required."))),a.createElement("div",{className:`input text required ${t} ${this.areActionsAllowed?"":"disabled"}`},a.createElement("label",{htmlFor:"user-profile-lastname-input"},a.createElement(C.c,null,"Last name")),a.createElement("input",{id:"user-profile-lastname-input",name:"last_name",type:"text",placeholder:this.translate("Last name"),required:"required",autoComplete:"off",ref:this.lastnameRef,value:this.state.profile.last_name,onChange:this.handleInputChange,disabled:!this.areActionsAllowed}),this.state.errors.isLastnameEmpty&&a.createElement("div",{className:"last_name error-message"},a.createElement(C.c,null,"A last name is required."))),a.createElement("div",{className:"input text required disabled"},a.createElement("label",{htmlFor:"user-profile-username-input"},a.createElement(C.c,null,"Username / Email")),a.createElement("input",{id:"user-profile-username-input",name:"username",type:"text",disabled:!0,value:this.props.context.loggedInUser.username})),this.canIUseLocale&&a.createElement("div",{className:"select-wrapper input required "+(this.areActionsAllowed?"":"disabled")},a.createElement("label",{htmlFor:"user-profile-locale-input"},a.createElement(C.c,null,"Language")),a.createElement(qe,{id:"user-profile-locale-input",name:"locale",value:this.state.profile.locale,items:this.supportedLocales,disabled:!this.areActionsAllowed,onChange:this.handleInputChange}))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:!this.areActionsAllowed,onClick:this.handleClose}),a.createElement(Ee,{disabled:!this.areActionsAllowed,processing:this.isProcessing,value:this.translate("Save")}))))}}Da.propTypes={context:d().any,onClose:d().func,dialogContext:d().object,userSettingsContext:d().object,actionFeedbackContext:d().object,t:d().func};const Ta=u(D(M(Ca((0,k.Z)("common")(Da)))));class Aa extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleEdit=this.handleEdit.bind(this),this.handleDownloadPublicKey=this.handleDownloadPublicKey.bind(this),this.handleDownloadPrivateKey=this.handleDownloadPrivateKey.bind(this)}handleEdit(){this.props.dialogContext.open(Ta)}async handleDownloadPublicKey(){await this.props.context.port.request("passbolt.keyring.download-my-public-key")}async handleDownloadPrivateKey(){await this.props.context.port.request("passbolt.keyring.download-my-private-key")}render(){const{path:e}=this.props.match;return a.createElement("div",{className:"col2_3 actions-wrapper"},a.createElement("div",{className:"actions"},a.createElement("ul",{className:"ready"},a.createElement(c.AW,{path:`${e}/profile`},a.createElement("li",null,a.createElement("a",{className:"button ready",onClick:this.handleEdit},a.createElement(de,{name:"edit"}),a.createElement("span",null,a.createElement(C.c,null,"Edit"))))),a.createElement(c.AW,{path:`${e}/keys`},a.createElement("li",null,a.createElement("a",{className:"button ready",onClick:this.handleDownloadPublicKey},a.createElement(de,{name:"download"}),a.createElement("span",null,a.createElement(C.c,null,"Public")))),a.createElement("li",null,a.createElement("a",{className:"button ready",onClick:this.handleDownloadPrivateKey},a.createElement(de,{name:"download"}),a.createElement("span",null,a.createElement(C.c,null,"Private"))))))))}}Aa.propTypes={context:d().any,match:d().object,dialogContext:d().any};const Pa=u((0,c.EN)(M((0,k.Z)("common")(Aa))));class Ua extends a.Component{constructor(e){super(e),this.state=this.defaultState}async componentDidMount(){await this.populate()}async componentDidUpdate(){await this.populateIfNeeded()}get defaultState(){return{gpgKeyInfo:null}}get user(){return this.props.context.loggedInUser}async populate(){if(this.user){const e=await this.fetchGpgkeyInfo();await this.setState({gpgKeyInfo:e})}}async populateIfNeeded(){const e=this.user&&!this.state.gpgKeyInfo,t=this.user&&this.state.gpgKeyInfo;if(e){const e=await this.fetchGpgkeyInfo();await this.setState({gpgKeyInfo:e})}else t&&(this.populateIfNeeded=()=>{})}async fetchGpgkeyInfo(){const e=await this.props.context.port.request("passbolt.keyring.get-public-key-info-by-user",this.user.id),t=e.key_id,s=this.gpgkeyType[e.algorithm],a=e.user_ids,n=this.formatDate(e.created);let r;return r=null===e.expires?"n/a":"Infinity"===e.expires?this.translate("Never"):this.formatDate(e.expires),{keyId:t,type:s,uIds:a,created:n,expires:r,armoredKey:e.armored_key,fingerprint:e.fingerprint,length:e.length}}get gpgkeyType(){return{rsa:"RSA",elgamal:"Elgamal",dsa:"DSA",ecdh:"ECDH",ecdsa:"ECDSA",eddsa:"EdDSA",aedh:"AEDH",aedsa:"AEDSA"}}formatDate(e){try{return B.ou.fromJSDate(new Date(e)).setLocale(this.props.context.locale).toLocaleString(B.ou.DATETIME_FULL)}catch(e){return""}}get gpgKeyInfo(){return this.state.gpgKeyInfo||{}}get fingerprint(){let e=this.gpgKeyInfo.fingerprint;return e&&(e=e.toUpperCase().replace(/.{4}(?=.)/g,"$& "),e=a.createElement(a.Fragment,null,e.substr(0,24),a.createElement("br",null),e.substr(25))),e}get uId(){const e=this.gpgKeyInfo.uIds&&this.gpgKeyInfo.uIds[0];return e?`${e.name} <${e.email}>`:""}get translate(){return this.props.t}render(){return a.createElement("div",{className:"grid grid-responsive-12 profile-key-inspector-information"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col6 main-column key-info"},a.createElement("h3",null,a.createElement(C.c,null,"Information for public and secret key")),a.createElement("table",{className:"table-info",id:"privkeyinfo"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,a.createElement(C.c,null,"Key Id")),a.createElement("td",{className:"keyId"},a.createElement(ge,{message:this.translate("sorry you can only have one key set at the moment"),direction:"top"},a.createElement(qe,{className:"inline",id:"keyId",value:this.gpgKeyInfo.keyId,items:[{value:this.gpgKeyInfo.keyId,label:this.gpgKeyInfo.keyId}],disabled:!0})))),a.createElement("tr",null,a.createElement("td",null,a.createElement(C.c,null,"Uid")),a.createElement("td",{className:"uid"},this.uId)),a.createElement("tr",null,a.createElement("td",null,a.createElement(C.c,null,"Fingerprint")),a.createElement("td",{className:"fingerprint"},this.fingerprint)),a.createElement("tr",null,a.createElement("td",null,a.createElement(C.c,null,"Created")),a.createElement("td",{className:"created"},this.gpgKeyInfo.created)),a.createElement("tr",null,a.createElement("td",null,a.createElement(C.c,null,"Expires")),a.createElement("td",{className:"expires"},this.gpgKeyInfo.expires)),a.createElement("tr",null,a.createElement("td",null,a.createElement(C.c,null,"Key length")),a.createElement("td",{className:"length"},this.gpgKeyInfo.length)),a.createElement("tr",null,a.createElement("td",null,a.createElement(C.c,null,"Algorithm")),a.createElement("td",{className:"algorithm"},this.gpgKeyInfo.type))))),a.createElement("div",{className:"col6 secondary-column last key-export"},a.createElement("div",{className:"sidebar"},a.createElement("h3",null,a.createElement(C.c,null,"Public key block")),a.createElement("div",{className:"input textarea gpgkey",rel:"publicKey"},a.createElement("textarea",{defaultValue:this.gpgKeyInfo.armoredKey,className:"fluid code",readOnly:!0}))))))}}Ua.propTypes={context:d().any,t:d().func,i18n:d().any};const _a=u((0,k.Z)("common")(Ua));class La extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{processing:!1,understandPassphrase:!1,understandPassphraseError:null}}bindCallbacks(){this.handleInputChange=this.handleInputChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}async toggleProcessing(){await this.setState({processing:!this.state.processing})}handleInputChange(e){const t=e.target,s="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState({[a]:s})}handleSubmit(e){e.preventDefault(),this.startUpdatePassphrase()}async startUpdatePassphrase(){if(!this.state.processing){if(await this.toggleProcessing(),await this.validateUnderstandPassphrase(),this.hasValidationError())return void await this.toggleProcessing();this.props.userSettingsContext.onProvidePassphraseRequested()}}async validateUnderstandPassphrase(){const e=!this.state.understandPassphrase;return this.setState({understandPassphraseError:e})}hasValidationError(){return this.state.understandPassphraseError}hasAllInputDisabled(){return this.state.processing}render(){return a.createElement("div",{className:"grid grid-responsive-12 profile-passphrase"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col7 main-column"},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("h3",null,a.createElement(C.c,null,"Before getting started...")),a.createElement("div",{className:"password-management-bg"}),a.createElement("p",null,a.createElement(C.c,null,"The passphrase is stored on your device and never sent server side."),"",a.createElement(C.c,null,"Changing your passphrase will only change it locally."),"",a.createElement(C.c,null,"If you have multiple browsers configured, the passphrase will need to be changed in all places individually.")),a.createElement("div",{className:"input checkbox "+(this.state.understandPassphraseError?"error":"")},a.createElement("input",{id:"passphrase-update-understand",type:"checkbox",checked:this.state.understandPassphrase,disabled:this.hasAllInputDisabled(),name:"understandPassphrase",onChange:this.handleInputChange}),a.createElement("label",{htmlFor:"passphrase-update-understand"}," ",a.createElement(C.c,null,"Ok, I understand what I need to do."))),a.createElement("div",{className:"submit-wrapper"},a.createElement("button",{className:"button primary submit",type:"submit",disabled:this.hasAllInputDisabled()},a.createElement(C.c,null,"Start"))))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"What is the role of the passphrase?")),a.createElement("p",null,a.createElement(C.c,null,"The passphrase is used to encrypt your secret key, which is required to decrypt your secrets, such as the passwords.")),a.createElement("p",null,a.createElement(C.c,null,"Without the private key and the passphrase it is not possible to decrypt!")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/tech/auth.html",target:"_blank",rel:"noopener noreferrer"},a.createElement("span",null,a.createElement(C.c,null,"Learn more")))))))}}La.propTypes={userSettingsContext:d().object};const Fa=Ca((0,k.Z)("common")(La));class Ma extends a.Component{render(){return a.createElement("div",{className:"login-processing"},a.createElement("h1",null,this.props.title),a.createElement("div",{className:"processing-wrapper"},a.createElement(de,{name:"spinner"})))}}Ma.propTypes={title:d().oneOfType([d().arrayOf(d().node),d().node,d().string])},Ma.defaultProps={title:a.createElement(C.c,null,"Please wait...")};const Oa=(0,k.Z)("common")(Ma);class ja extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks(),this.createInputRef()}get defaultState(){return{processing:!1,passphrase:"",passphraseError:null}}bindCallbacks(){this.handleInputChange=this.handleInputChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}createInputRef(){this.passphraseInputRef=a.createRef()}componentDidMount(){this.focusOnPassphrase()}focusOnPassphrase(){this.passphraseInputRef.current.focus()}async toggleProcessing(){await this.setState({processing:!this.state.processing})}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}async handleSubmit(e){e.preventDefault(),this.state.processing||(await this.toggleProcessing(),await this.checkPassphrase())}async checkPassphrase(){this.props.userSettingsContext.onCheckProvidePassphraseRequested(this.state.passphrase).catch(this.onCheckFailure.bind(this))}onCheckFailure(e){if(this.toggleProcessing(),"InvalidMasterPasswordError"===e.name)this.setState({passphraseError:this.translate("The passphrase is invalid.")});else{const t={error:e};this.props.dialogContext.open(we,t)}}handleCancel(){this.props.userSettingsContext.onGoToIntroductionPassphraseRequested()}IsValidPassphrase(){return""!==this.state.passphrase.trim()}hasAllInputDisabled(){return this.state.processing}mustBeDisabled(){return this.hasAllInputDisabled()||!this.IsValidPassphrase()}get translate(){return this.props.t}render(){return a.createElement("div",{className:"grid grid-responsive-12 profile-passphrase"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col7 main-column"},a.createElement("form",{className:"enter-passphrase",onSubmit:this.handleSubmit},a.createElement("h3",null,a.createElement(C.c,null,"Please enter your passphrase to continue")),a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input-password-wrapper input required ${this.state.passphraseError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"passphrase-input"},a.createElement(C.c,null,"Passphrase")),a.createElement(At,{id:"passphrase-input",autoComplete:"off",name:"passphrase",placeholder:this.translate("Passphrase"),inputRef:this.passphraseInputRef,value:this.state.passphrase,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),preview:!0,securityToken:this.props.context.userSettings.getSecurityToken()}),this.state.passphraseError&&a.createElement("div",{className:"error-message"},this.state.passphraseError),!this.state.passphraseError&&a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"You need to enter your current passphrase.")))),a.createElement("div",{className:"submit-wrapper"},a.createElement("button",{className:"button cancel",type:"button",disabled:this.hasAllInputDisabled(),onClick:this.handleCancel},a.createElement(C.c,null,"Cancel")),a.createElement(Ee,{primary:!0,disabled:this.mustBeDisabled(),processing:this.state.processing,value:this.translate("Verify")})))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"What if I forgot my passphrase?")),a.createElement("p",null,a.createElement(C.c,null,"Unfortunately you need your passphrase in order to continue. If you forgot it, please contact your administrator.")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/faq/start/passphrase-recovery",target:"_blank",rel:"noopener noreferrer"},a.createElement("span",null,a.createElement(C.c,null,"Learn more")))))))}}ja.propTypes={context:d().any,userSettingsContext:d().object,dialogContext:d().any,t:d().func};const qa=u(M(Ca((0,k.Z)("common")(ja))));class Wa extends a.Component{render(){return a.createElement("div",{className:"illustration icon-feedback"},a.createElement("div",{className:this.props.name}))}}Wa.defaultProps={},Wa.propTypes={name:d().string};const za=Wa;class Ga extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleDownloadBackup=this.handleDownloadBackup.bind(this)}handleDownloadBackup(){this.download()}async download(){await this.props.userSettingsContext.onDownloadRecoveryKitRequested()}render(){return a.createElement("div",{className:"grid grid-responsive-12 profile-passphrase"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col7 main-column last"},a.createElement("h3",null,a.createElement(C.c,null,"The passphrase was updated!")),a.createElement("div",{className:"feedback-card"},a.createElement(za,{name:"success"}),a.createElement("div",{className:"additional-information"},a.createElement("p",null,a.createElement(C.c,null,"Your passphrase has been changed. Make sure you keep a backup of your secret key encrypted with this new passphrase.")),a.createElement("p",null,a.createElement(C.c,null,"Keep this backup in a safe place, you will need it in case of emergency.")),a.createElement("button",{type:"button",className:"button primary",onClick:this.handleDownloadBackup},a.createElement(C.c,null,"Download backup")))))))}}Ga.propTypes={userSettingsContext:d().object};const Ha=Ca((0,k.Z)("common")(Ga));var Va=s(49911);class Ka extends Error{constructor(e){super(e=e||"The external service is unavailable"),this.name="ExternalServiceUnavailableError"}}const Ba=Ka;class $a extends Error{constructor(e){super(e=e||"An error occurred when requesting the external service."),this.name="ExternalServiceError"}}const Za=$a;class Ya{static async pwnedPasswords(e){if("string"!=typeof e){const e=new Error("Input password must be a string.");return Promise.reject(e)}const t=new Va.Z("SHA-1","TEXT");t.update(e);const s=t.getHash("HEX"),a=s.substr(0,5),n=s.substr(5),r="https://api.pwnedpasswords.com/range/"+a;let i;try{i=await fetch(r)}catch(e){throw new Ba("pwnedpasswords API service is not available")}if(200!==i.status)throw new Za(`Failed to request pwnedpasswords API: ${i.status}`);return(await i.text()).split("\n").map((e=>e.split(":"))).filter((e=>e[0].toLowerCase()===n)).map((e=>Number(e[1]))).shift()||0}}const Ja=[{id:"not_available",label:"n/a",strength:0},{id:"very-weak",label:"very weak",strength:1},{id:"weak",label:"weak",strength:60},{id:"fair",label:"fair",strength:80},{id:"strong",label:"strong",strength:112},{id:"very-strong",label:"very strong",strength:128}],Xa={alpha:{size:26,data:"abcdefghijklmnopqrstuvwxyz",pattern:/[a-z]/},uppercase:{size:26,data:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",pattern:/[A-Z]/},digit:{size:10,data:"0123456789",pattern:/[0-9]/},special:{size:32,data:"!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",pattern:/[!"#$%&\'\(\)*+,\-./:;<=>?@\[\\\]^_`{|}~]/}};class Qa{static randomRange(e,t){const s=new Uint32Array(1);window.crypto.getRandomValues(s);const a=s[0]/4294967296;return Math.floor(a*(t-e+1))+e}static calculEntropy(e,t){return e&&t?e*(Math.log(t)/Math.log(2)):0}static entropy(e=""){let t=0;for(const s in Xa)e.match(Xa[s].pattern)&&(t+=Xa[s].size);return this.calculEntropy(e.length,t)}static getStrength(e){e=e||"";const t=this.entropy(e);return Ja.reduce(((e,s)=>e?s.strength>e.strength&&t>=s.strength?s:e:s))}static matchMasks(e){const t={};for(const s in Xa)t[s]=!1,e.match(Xa[s].pattern)&&(t[s]=!0);return t}static generate(e,t){let s="",a=[];e=e||18,t=t||["alpha","uppercase","digit","special"];for(const e in t)a=[...a,...Xa[t[e]].data];let n=0;const r=this.calculEntropy(e,a.length);do{s="";for(let t=0;t<e;t++)s+=a[this.randomRange(0,a.length-1)]}while(this.entropy(s)<r&&n++<10);return s}static async ispwned(e){return await Ya.pwnedPasswords(e)>0}}const en={"en-UK":["abdominal","acclimate","accompany","activator","acuteness","aerospace","affecting","affection","affidavit","affiliate","afflicted","afterglow","afterlife","aftermath","aftermost","afternoon","aggregate","agonizing","agreeable","agreeably","agreement","alabaster","albatross","algorithm","alienable","alongside","amazingly","ambiguity","ambiguous","ambitious","ambulance","amendable","amendment","amplifier","amusement","anaerobic","anatomist","angelfish","angriness","anguished","animating","animation","animosity","announcer","answering","antarctic","anthology","antiquely","antiquity","antitoxic","antitrust","antiviral","antivirus","appealing","appeasing","appendage","appetizer","appliance","applicant","appointee","appraisal","appraiser","apprehend","arbitrary","arbitrate","armadillo","arrogance","ascension","ascertain","asparagus","astrology","astronaut","astronomy","atrocious","attendant","attention","attentive","attractor","attribute","audacious","augmented","authentic","autograph","automaker","automated","automatic","autopilot","available","avalanche","backboard","backboned","backfield","backlands","backlight","backpedal","backshift","backspace","backstage","backtrack","backwater","bacterium","bagginess","balancing","bannister","barometer","barracuda","barricade","bartender","basically","battalion","battering","blanching","blandness","blaspheme","blasphemy","blatantly","blunderer","bodacious","boogeyman","boogieman","boondocks","borrowing","botanical","boundless","bountiful","breeching","brilliant","briskness","broadband","broadcast","broadness","broadside","broadways","bronchial","brownnose","brutishly","buccaneer","bucktooth","buckwheat","bulginess","bulldozer","bullfight","bunkhouse","cabdriver","calculate","calibrate","camcorder","canopener","capillary","capricorn","captivate","captivity","cardboard","cardstock","carefully","caregiver","caretaker","carnation","carnivore","carpenter","carpentry","carrousel","cartridge","cartwheel","catatonic","catchable","cathedral","cattishly","caucasian","causation","cauterize","celestial","certainly","certainty","certified","challenge","chamomile","chaperone","character","charbroil","chemicals","cherisher","chihuahua","childcare","childhood","childless","childlike","chokehold","circulate","clamshell","clergyman","clubhouse","clustered","coagulant","coastland","coastline","cofounder","cognition","cognitive","coherence","collected","collector","collision","commodity","commodore","commotion","commuting","compacted","compacter","compactly","compactor","companion","component","composite","composure","comprised","computing","concerned","concierge","condiment","condition","conducive","conductor","confidant","confident","confiding","configure","confining","confusing","confusion","congenial","congested","conjoined","connected","connector","consensus","consoling","consonant","constable","constrain","constrict","construct","consuming","container","contented","contently","contusion","copartner","cornbread","cornfield","cornflake","cornstalk","corporate","corroding","corrosive","cosmetics","cosponsor","countable","countdown","countless","crabgrass","craftsman","craftwork","cranberry","craziness","creamlike","creatable","crestless","crispness","crudeness","cruelness","crummiest","crunching","crushable","cubbyhole","culminate","cultivate","cupbearer","curliness","curvature","custodian","customary","customize","cytoplasm","cytoplast","dandelion","daredevil","darkening","darwinism","dastardly","deafening","dealmaker","debatable","decathlon","deceiving","deception","deceptive","decidable","decimeter","decompose","decorated","decorator","dedicator","defection","defective","defendant","defensive","deflation","deflected","deflector","degrading","dehydrate","delegator","delicious","delighted","delirious","deliverer","demanding","demeaning","democracy","demystify","denatured","deodorant","deodorize","departure","depletion","depravity","deprecate","desecrate","deserving","designate","designing","deskbound","destitute","detection","detective","detention","detergent","detonator","deviation","devotedly","devouring","dexterity","dexterous","diagnoses","diagnosis","diaphragm","dictation","difficult","diffusion","diffusive","diligence","dinginess","direction","directive","directory","dirtiness","disbelief","discharge","discourse","disengage","disfigure","disinfect","disliking","dislocate","dismantle","disparate","disparity","dispersal","dispersed","disperser","displease","disregard","dividable","divisible","divisibly","dizziness","dollhouse","doorframe","dormitory","dragonfly","dragonish","drainable","drainpipe","dramatize","dreadlock","dreamboat","dreamland","dreamless","dreamlike","drinkable","drop-down","dubiously","duplicate","duplicity","dwindling","earthlike","earthling","earthworm","eastbound","eastcoast","eccentric","ecologist","economist","ecosphere","ecosystem","education","effective","efficient","eggbeater","egomaniac","egotistic","elaborate","eldercare","electable","elevating","elevation","eliminate","elongated","eloquence","elsewhere","embattled","embellish","embroider","emergency","emphasize","empirical","emptiness","enactment","enchanted","enchilada","enclosure","encounter","encourage","endearing","endocrine","endorphin","endowment","endurable","endurance","energetic","engraving","enigmatic","enjoyable","enjoyably","enjoyment","enlarging","enlighten","entangled","entertain","entourage","enunciate","epidermal","epidermis","epileptic","equipment","equivocal","eradicate","ergonomic","escalator","escapable","esophagus","espionage","essential","establish","estimator","estranged","ethically","euphemism","evaluator","evaporate","everglade","evergreen","everybody","evolution","excavator","exceeding","exception","excitable","excluding","exclusion","exclusive","excretion","excretory","excursion","excusable","excusably","exemplary","exemplify","exemption","exerciser","exfoliate","exonerate","expansion","expansive","expectant","expedited","expediter","expensive","expletive","exploring","exposable","expulsion","exquisite","extending","extenuate","extortion","extradite","extrovert","extruding","exuberant","facecloth","faceplate","facsimile","factsheet","fanciness","fantasize","fantastic","favorable","favorably","ferocious","festivity","fidgeting","financial","finishing","flagstick","flagstone","flammable","flashback","flashbulb","flashcard","flattered","flatterer","flavorful","flavoring","footboard","footprint","fragility","fragrance","fraternal","freemason","freestyle","freezable","frequency","frightful","frigidity","frivolous","frostbite","frostlike","frugality","frustrate","gainfully","gallantly","gallstone","galvanize","gathering","gentleman","geography","geologist","geometric","geriatric","germicide","germinate","germproof","gestation","gibberish","giddiness","gigahertz","gladiator","glamorous","glandular","glorified","glorifier","glutinous","goldsmith","goofiness","graceless","gradation","gradually","grappling","gratified","gratitude","graveness","graveyard","gravitate","greedless","greyhound","grievance","grimacing","griminess","grumbling","guacamole","guileless","gumminess","habitable","hamburger","hamstring","handbrake","handclasp","handcraft","handiness","handiwork","handlebar","handprint","handsfree","handshake","handstand","handwoven","handwrite","hankering","haphazard","happening","happiness","hardcover","hardening","hardiness","hardwired","harmonica","harmonics","harmonize","hastiness","hatchback","hatchling","headboard","headcount","headdress","headfirst","headphone","headpiece","headscarf","headstand","headstone","heaviness","heftiness","hemstitch","herbicide","hesitancy","humiliate","humongous","humorless","hunchback","hundredth","hurricane","huskiness","hydration","hydroxide","hyperlink","hypertext","hypnotism","hypnotist","hypnotize","hypocrisy","hypocrite","ibuprofen","idealness","identical","illicitly","imaginary","imitation","immersion","immorally","immovable","immovably","impatient","impending","imperfect","implement","implicate","implosion","implosive","important","impotence","impotency","imprecise","impromptu","improving","improvise","imprudent","impulsive","irregular","irritable","irritably","isolating","isolation","italicize","itinerary","jackknife","jailbreak","jailhouse","jaywalker","jeeringly","jockstrap","jolliness","joylessly","jubilance","judgingly","judiciary","juiciness","justifier","kilometer","kinswoman","laborious","landowner","landscape","landslide","lankiness","legislate","legwarmer","lethargic","levitator","liability","librarian","limelight","litigator","livestock","lubricant","lubricate","luckiness","lucrative","ludicrous","luminance","lumpiness","lunchroom","lunchtime","luridness","lustfully","lustiness","luxurious","lyrically","machinist","magnesium","magnetism","magnetize","magnifier","magnitude","majorette","makeshift","malformed","mammogram","mandatory","manhandle","manicotti","manifesto","manliness","marauding","margarine","margarita","marmalade","marshland","marsupial","marvelous","masculine","matchbook","matchless","maternity","matriarch","matrimony","mayflower","modulator","moistness","molecular","monastery","moneybags","moneyless","moneywise","monologue","monstrous","moodiness","moonlight","moonscape","moonshine","moonstone","morbidity","mortality","mortician","mortified","mothproof","motivator","motocross","mountable","mousiness","moustache","multitask","multitude","mummified","municipal","murkiness","murmuring","mushiness","muskiness","mustiness","mutilated","mutilator","mystified","nanometer","nastiness","navigator","nebulizer","neglector","negligent","negotiate","neurology","ninetieth","numerator","nuttiness","obedience","oblivious","obnoxious","obscurity","observant","observing","obsession","obsessive","obstinate","obtrusive","occultist","occupancy","onslaught","operating","operation","operative","oppressed","oppressor","opulently","outnumber","outplayed","outskirts","outsource","outspoken","overblown","overboard","overbuilt","overcrowd","overdraft","overdrawn","overdress","overdrive","overeager","overeater","overexert","overgrown","overjoyed","overlabor","overlying","overnight","overplant","overpower","overprice","overreach","overreact","overshoot","oversight","oversized","oversleep","overspend","overstate","overstock","overstuff","oversweet","overthrow","overvalue","overwrite","oxidation","oxidizing","pacemaker","palatable","palpitate","panhandle","panoramic","pantomime","pantyhose","paparazzi","parachute","paragraph","paralegal","paralyses","paralysis","paramedic","parameter","paramount","parasitic","parchment","partition","partridge","passenger","passivism","patchwork","paternity","patriarch","patronage","patronize","pavestone","pediatric","pedometer","penholder","penniless","pentagram","percolate","perennial","perfected","perfectly","periscope","perkiness","perpetual","perplexed","persecute","persevere","persuaded","persuader","pessimism","pessimist","pesticide","petroleum","petticoat","pettiness","phonebook","phoniness","phosphate","plausible","plausibly","playgroup","playhouse","playmaker","plaything","plentiful","plexiglas","plutonium","pointless","polyester","polygraph","porcupine","portfolio","postnasal","powdering","prankster","preaching","precision","predefine","preflight","preformed","pregnancy","preheated","prelaunch","preoccupy","preschool","prescribe","preseason","president","presuming","pretended","pretender","prevalent","prewashed","primarily","privatize","proactive","probation","probiotic","procedure","procreate","profanity","professed","professor","profusely","prognosis","projector","prolonged","promenade","prominent","promotion","pronounce","proofread","propeller","proponent","protector","prototype","protozoan","providing","provoking","provolone","proximity","prudishly","publisher","pulmonary","pulverize","punctuate","punctured","pureblood","purgatory","purposely","pursuable","pushchair","pushiness","pyromania","qualified","qualifier","quartered","quarterly","quickness","quicksand","quickstep","quintuple","quizzical","quotation","radiantly","radiation","rancidity","ravishing","reacquire","reanalyze","reappoint","reapprove","rearrange","rebalance","recapture","recharger","recipient","reclining","reclusive","recognize","recollect","reconcile","reconfirm","reconvene","rectangle","rectified","recycling","reexamine","referable","reference","refinance","reflected","reflector","reformist","refueling","refurbish","refurnish","refutable","registrar","regretful","regulator","rehydrate","reimburse","reiterate","rejoicing","relapsing","relatable","relenting","relieving","reluctant","remindful","remission","remodeler","removable","rendering","rendition","renewable","renewably","renovator","repackage","repacking","repayment","repossess","repressed","reprimand","reprocess","reproduce","reprogram","reptilian","repugnant","repulsion","repulsive","repurpose","reputable","reputably","requisite","reshuffle","residence","residency","resilient","resistant","resisting","resurface","resurrect","retaining","retaliate","retention","retrieval","retriever","reverence","reversing","reversion","revisable","revivable","revocable","revolving","riverbank","riverboat","riverside","rockiness","rockslide","roundness","roundworm","runaround","sacrament","sacrifice","saddlebag","safeguard","safehouse","salvaging","salvation","sanctuary","sandblast","sandpaper","sandstone","sandstorm","sanitizer","sappiness","sarcastic","sasquatch","satirical","satisfied","sauciness","saxophone","scapegoat","scarecrow","scariness","scavenger","schematic","schilling","scientist","scorebook","scorecard","scoreless","scoundrel","scrambled","scrambler","scrimmage","scrounger","sculpture","secluding","seclusion","sectional","selection","selective","semicolon","semifinal","semisweet","sensation","sensitive","sensitize","sensually","september","sequester","serotonin","sevenfold","seventeen","shadiness","shakiness","sharpener","sharpness","shiftless","shininess","shivering","shortcake","shorthand","shortlist","shortness","shortwave","showpiece","showplace","shredding","shrubbery","shuffling","silliness","similarly","simmering","sincerity","situation","sixtyfold","skedaddle","skintight","skyrocket","slackness","slapstick","sliceable","slideshow","slighting","slingshot","slouching","smartness","smilingly","smokeless","smokiness","smuggling","snowboard","snowbound","snowdrift","snowfield","snowflake","snowiness","snowstorm","spearfish","spearhead","spearmint","spectacle","spectator","speculate","spellbind","spendable","spherical","spiritism","spiritual","splashing","spokesman","spotlight","sprinkled","sprinkler","squatting","squealing","squeamish","squeezing","squishier","stability","stabilize","stainable","stainless","stalemate","staleness","starboard","stargazer","starlight","startling","statistic","statutory","steadfast","steadying","steerable","steersman","stegosaur","sterility","sterilize","sternness","stiffness","stillness","stimulant","stimulate","stipulate","stonewall","stoneware","stonework","stoplight","stoppable","stopwatch","storeroom","storewide","straggler","straining","strangely","strategic","strenuous","strongbox","strongman","structure","stumbling","stylishly","subarctic","subatomic","subdivide","subheader","submarine","submersed","submitter","subscribe","subscript","subsector","subsiding","subsidize","substance","subsystem","subwoofer","succulent","suffering","suffocate","sulphuric","superbowl","superglue","superhero","supernova","supervise","supremacy","surcharge","surfacing","surfboard","surrender","surrogate","surviving","sustained","sustainer","swaddling","swampland","swiftness","swimmable","symphonic","synthesis","synthetic","tableware","tackiness","taekwondo","tarantula","tastiness","theatrics","thesaurus","thickness","thirstily","thirsting","threefold","throbbing","throwaway","throwback","thwarting","tightness","tightrope","tinderbox","tiptoeing","tradition","trailside","transform","translate","transpire","transport","transpose","trapezoid","treachery","treadmill","trembling","tribesman","tributary","trickster","trifocals","trimester","troubling","trustable","trustless","turbulent","twentieth","twiddling","twistable","ultimatum","umbilical","unabashed","unadorned","unadvised","unaligned","unaltered","unarmored","unashamed","unaudited","unbalance","unblended","unblessed","unbounded","unbraided","unbuckled","uncertain","unchanged","uncharted","unclaimed","unclamped","unclothed","uncolored","uncorrupt","uncounted","uncrushed","uncurious","undamaged","undaunted","undecided","undefined","undercoat","undercook","underdone","underfeed","underfoot","undergrad","underhand","underline","underling","undermine","undermost","underpaid","underpass","underrate","undertake","undertone","undertook","underwear","underwent","underwire","undesired","undiluted","undivided","undrafted","undrilled","uneatable","unelected","unengaged","unethical","unexpired","unexposed","unfailing","unfeeling","unfitting","unfixable","unfocused","unfounded","unfrosted","ungreased","unguarded","unhappily","unhealthy","unhearing","unhelpful","unhitched","uniformed","uniformly","unimpeded","uninjured","uninstall","uninsured","uninvited","unisexual","universal","unknotted","unknowing","unlearned","unleveled","unlighted","unlikable","unlimited","unlivable","unlocking","unlovable","unluckily","unmanaged","unmasking","unmatched","unmindful","unmixable","unmovable","unnamable","unnatural","unnerving","unnoticed","unopposed","unpainted","unpiloted","unplanned","unplanted","unpleased","unpledged","unpopular","unraveled","unreached","unreeling","unrefined","unrelated","unretired","unrevised","unrivaled","unroasted","unruffled","unscathed","unscented","unsecured","unselfish","unsettled","unshackle","unsheathe","unshipped","unsightly","unskilled","unspoiled","unstaffed","unstamped","unsterile","unstirred","unstopped","unstuffed","unstylish","untainted","untangled","untoasted","untouched","untracked","untrained","untreated","untrimmed","unvarying","unveiling","unvisited","unwarlike","unwatched","unwelcome","unwilling","unwitting","unwomanly","unworldly","unworried","unwrapped","unwritten","upcountry","uplifting","urologist","uselessly","vagrantly","vagueness","valuables","vaporizer","vehicular","veneering","ventricle","verbalize","vertebrae","viability","viewpoint","vindicate","violation","viscosity","vivacious","vividness","wackiness","washbasin","washboard","washcloth","washhouse","washstand","whimsical","wieldable","wikipedia","willfully","willpower","wolverine","womanhood","womankind","womanless","womanlike","worrisome","worsening","worshiper","wrongdoer","wrongness","yesterday","zestfully","zigzagged","zookeeper","zoologist","abnormal","abrasion","abrasive","abruptly","absentee","absently","absinthe","absolute","abstract","accuracy","accurate","accustom","achiness","acquaint","activate","activism","activist","activity","aeration","aerobics","affected","affluent","aflutter","agnostic","agreeing","alienate","alkaline","alkalize","almighty","alphabet","although","altitude","aluminum","amaretto","ambiance","ambition","amicably","ammonium","amniotic","amperage","amusable","anaconda","aneurism","animator","annotate","annoying","annually","anointer","anteater","antelope","antennae","antibody","antidote","antihero","antiques","antirust","anyplace","anything","anywhere","appendix","appetite","applause","approach","approval","aptitude","aqueduct","ardently","arguable","arguably","armchair","arrogant","aspirate","astonish","atlantic","atonable","attendee","attitude","atypical","audacity","audience","audition","autistic","avenging","aversion","aviation","babbling","backache","backdrop","backfire","backhand","backlash","backless","backpack","backrest","backroom","backside","backslid","backspin","backstab","backtalk","backward","backwash","backyard","bacteria","baffling","baguette","bakeshop","balsamic","banister","bankable","bankbook","banknote","bankroll","barbecue","bargraph","baritone","barrette","barstool","barterer","battered","blatancy","blighted","blinking","blissful","blizzard","bloating","bloomers","blooming","blustery","boastful","boasting","bondless","bonehead","boneless","bonelike","bootlace","borrower","botanist","bottling","bouncing","bounding","breeches","breeding","brethren","broiling","bronzing","browbeat","browsing","bruising","brunette","brussels","bubbling","buckshot","buckskin","buddhism","buddhist","bullfrog","bullhorn","bullring","bullseye","bullwhip","bunkmate","busybody","cadillac","calamari","calamity","calculus","camisole","campfire","campsite","canister","cannabis","capacity","cardigan","cardinal","careless","carmaker","carnival","cartload","cassette","casually","casualty","catacomb","catalyst","catalyze","catapult","cataract","catching","catering","catfight","cathouse","cautious","cavalier","celibacy","celibate","ceramics","ceremony","cesarean","cesspool","chaffing","champion","chaplain","charcoal","charging","charting","chastise","chastity","chatroom","chatting","cheating","chewable","childish","chirping","chitchat","chivalry","chloride","chlorine","choosing","chowtime","cilantro","cinnamon","circling","circular","citation","clambake","clanking","clapping","clarinet","clavicle","clerical","climatic","clinking","closable","clothing","clubbing","clumsily","coasting","coauthor","coeditor","cogwheel","coherent","cohesive","coleslaw","coliseum","collapse","colonial","colonist","colonize","colossal","commence","commerce","composed","composer","compound","compress","computer","conceded","conclude","concrete","condense","confetti","confider","confined","conflict","confound","confront","confused","congrats","congress","conjuror","constant","consumer","contempt","contents","contrite","cornball","cornhusk","cornmeal","coronary","corporal","corridor","cosigner","counting","covenant","coveting","coziness","crabbing","crablike","crabmeat","cradling","craftily","crawfish","crawlers","crawling","crayfish","creasing","creation","creative","creature","credible","credibly","crescent","cresting","crewless","crewmate","cringing","crisping","criteria","crumpled","cruncher","crusader","crushing","cucumber","cufflink","culinary","culpable","cultural","customer","cylinder","daffodil","daintily","dallying","dandruff","dangling","daringly","darkened","darkness","darkroom","datebook","daughter","daunting","daybreak","daydream","daylight","dazzling","deafness","debating","debtless","deceased","deceiver","december","decipher","declared","decrease","dedicate","deepness","defacing","defender","deferral","deferred","defiance","defiling","definite","deflator","deforest","degraded","degrease","dejected","delegate","deletion","delicacy","delicate","delirium","delivery","delusion","demeanor","democrat","demotion","deniable","departed","deplored","depraved","deputize","deranged","designed","designer","deskwork","desolate","destruct","detached","detector","detonate","detoxify","deviancy","deviator","devotion","devourer","devoutly","diabetes","diabetic","diabolic","diameter","dictator","diffused","diffuser","dilation","diligent","diminish","directed","directly","direness","disabled","disagree","disallow","disarray","disaster","disburse","disclose","discolor","discount","discover","disgrace","dislodge","disloyal","dismount","disorder","dispatch","dispense","displace","disposal","disprove","dissuade","distance","distaste","distinct","distract","distress","district","distrust","dividend","dividers","dividing","divinely","divinity","division","divisive","divorcee","doctrine","document","domelike","domestic","dominion","dominoes","donation","doorbell","doorknob","doornail","doorpost","doorstep","doorstop","doubling","dragging","dragster","drainage","dramatic","dreadful","dreamily","drearily","drilling","drinking","dripping","drivable","driveway","dropkick","drowsily","duckbill","duckling","ducktail","dullness","dumpling","dumpster","duration","dwelling","dynamite","dyslexia","dyslexic","earphone","earpiece","earplugs","easiness","eastward","economic","edginess","educated","educator","eggplant","eggshell","election","elective","elephant","elevator","eligible","eligibly","elliptic","eloquent","embezzle","embolism","emission","emoticon","empathic","emphases","emphasis","emphatic","employed","employee","employer","emporium","encircle","encroach","endanger","endeared","endpoint","enduring","energize","enforced","enforcer","engaging","engraved","engraver","enjoying","enlarged","enlisted","enquirer","entering","enticing","entrench","entryway","envelope","enviable","enviably","envision","epidemic","epidural","epilepsy","epilogue","epiphany","equation","erasable","escalate","escapade","escapist","escargot","espresso","esteemed","estimate","estrogen","eternity","evacuate","evaluate","everyday","everyone","evidence","excavate","exchange","exciting","existing","exorcism","exorcist","expenses","expiring","explicit","exponent","exporter","exposure","extended","exterior","external","fabulous","facebook","facedown","faceless","facelift","facility","familiar","famished","fastball","fastness","favoring","favorite","felt-tip","feminine","feminism","feminist","feminize","fernlike","ferocity","festival","fiddling","fidelity","fiftieth","figurine","filtrate","finalist","finalize","fineness","finished","finisher","fiscally","flagpole","flagship","flanking","flannels","flashily","flashing","flatfoot","flatness","flattery","flatware","flatworm","flavored","flaxseed","flogging","flounder","flypaper","follicle","fondling","fondness","football","footbath","footgear","foothill","foothold","footless","footnote","footpath","footrest","footsore","footwear","footwork","founding","fountain","fraction","fracture","fragment","fragrant","freckled","freckles","freebase","freefall","freehand","freeload","freeness","freeware","freewill","freezing","frenzied","frequent","friction","frighten","frigidly","frostily","frosting","fructose","frugally","galleria","gambling","gangrene","gatherer","gauntlet","generous","genetics","geologic","geometry","geranium","germless","gigabyte","gigantic","giggling","giveaway","glancing","glaucoma","gleaming","gloating","gloomily","glorious","glowworm","goatskin","goldfish","goldmine","goofball","gorgeous","graceful","gracious","gradient","graduate","graffiti","grafting","granddad","grandkid","grandson","granular","gratuity","greasily","greedily","greeting","grieving","grievous","grinning","groggily","grooving","grudging","grueling","grumpily","guidable","guidance","gullible","gurgling","gyration","habitant","habitual","handball","handbook","handcart","handclap","handcuff","handgrip","handheld","handling","handmade","handpick","handrail","handwash","handwork","handyman","hangnail","hangover","happiest","hardcopy","hardcore","harddisk","hardened","hardener","hardhead","hardness","hardship","hardware","hardwood","harmless","hatchery","hatching","hazelnut","haziness","headache","headband","headgear","headlamp","headless","headlock","headrest","headroom","headsman","headwear","helpless","helpline","henchman","heritage","hesitant","hesitate","hexagram","huddling","humbling","humility","humorist","humorous","humpback","hungrily","huntress","huntsman","hydrated","hydrogen","hypnoses","hypnosis","hypnotic","idealism","idealist","idealize","identify","identity","ideology","ignition","illusion","illusive","imagines","imbecile","immature","imminent","immobile","immodest","immortal","immunity","immunize","impaired","impeding","imperial","implicit","impolite","importer","imposing","impotent","imprison","improper","impurity","irrigate","irritant","irritate","islamist","isolated","jailbird","jalapeno","jaundice","jingling","jokester","jokingly","joyfully","joystick","jubilant","judicial","juggling","junction","juncture","junkyard","justness","juvenile","kangaroo","keenness","kerchief","kerosene","kilobyte","kilogram","kilowatt","kindling","kindness","kissable","knapsack","knickers","laboring","labrador","ladylike","landfall","landfill","landlady","landless","landline","landlord","landmark","landmass","landmine","landside","language","latitude","latticed","lavender","laxative","laziness","lecturer","leggings","lethargy","leverage","levitate","licorice","ligament","likeness","likewise","limpness","linguini","linguist","linoleum","litigate","luckless","lukewarm","luminous","lunchbox","luncheon","lushness","lustrous","lyricism","lyricist","macarena","macaroni","magazine","magician","magnetic","magnolia","mahogany","majestic","majority","makeover","managing","mandarin","mandolin","manicure","manpower","marathon","marbling","marigold","maritime","massager","matchbox","matching","material","maternal","maturely","maturing","maturity","maverick","maximize","mobility","mobilize","modified","moisture","molasses","molecule","molehill","monetary","monetize","mongoose","monkhood","monogamy","monogram","monopoly","monorail","monotone","monotype","monoxide","monsieur","monument","moonbeam","moonlike","moonrise","moonwalk","morality","morbidly","morphine","morphing","mortally","mortuary","mothball","motivate","mountain","mounting","mournful","mulberry","multiple","multiply","mumbling","munchkin","muscular","mushroom","mutation","national","nativity","naturist","nautical","navigate","nearness","neatness","negation","negative","negligee","neurosis","neurotic","nickname","nicotine","nineteen","nintendo","numbness","numerate","numerous","nuptials","nutrient","nutshell","obedient","obituary","obligate","oblivion","observer","obsessed","obsolete","obstacle","obstruct","occupant","occupier","ointment","olympics","omission","omnivore","oncoming","onlooker","onscreen","operable","operator","opponent","opposing","opposite","outboard","outbound","outbreak","outburst","outclass","outdated","outdoors","outfield","outflank","outgoing","outhouse","outlying","outmatch","outreach","outright","outscore","outshine","outshoot","outsider","outsmart","outtakes","outthink","outweigh","overarch","overbill","overbite","overbook","overcast","overcoat","overcome","overcook","overfeed","overfill","overflow","overfull","overhand","overhang","overhaul","overhead","overhear","overheat","overhung","overkill","overlaid","overload","overlook","overlord","overpass","overplay","overrate","override","overripe","overrule","overshot","oversold","overstay","overstep","overtake","overtime","overtone","overture","overturn","overview","oxymoron","pacifier","pacifism","pacifist","paddling","palpable","pampered","pamperer","pamphlet","pancreas","pandemic","panorama","parabola","parakeet","paralyze","parasail","parasite","parmesan","passable","passably","passcode","passerby","passover","passport","password","pastrami","paternal","patience","pavement","pavilion","paycheck","payphone","peculiar","peddling","pedicure","pedigree","pegboard","penalize","penknife","pentagon","perceive","perjurer","peroxide","petition","phrasing","placidly","platform","platinum","platonic","platypus","playable","playback","playlist","playmate","playroom","playtime","pleading","plethora","plunging","pointing","politely","popsicle","populace","populate","porridge","portable","porthole","portside","possible","possibly","postcard","pouncing","powdered","praising","prancing","prankish","preacher","preamble","precinct","predator","pregnant","premiere","premises","prenatal","preorder","pretense","previous","prideful","princess","pristine","probable","probably","proclaim","procurer","prodigal","profound","progress","prologue","promoter","prompter","promptly","proofing","properly","property","proposal","protegee","protract","protrude","provable","provided","provider","province","prowling","punctual","punisher","purchase","purebred","pureness","purifier","purplish","pursuant","purveyor","pushcart","pushover","puzzling","quadrant","quaintly","quarters","quotable","radiance","radiated","radiator","railroad","rambling","reabsorb","reaction","reactive","reaffirm","reappear","rearview","reassign","reassure","reattach","reburial","rebuttal","reckless","recliner","recovery","recreate","recycled","recycler","reemerge","refinery","refining","refinish","reforest","reformat","reformed","reformer","refreeze","refusing","register","registry","regulate","rekindle","relation","relative","reliable","reliably","reliance","relocate","remedial","remember","reminder","removing","renderer","renegade","renounce","renovate","rentable","reoccupy","repaying","repeated","repeater","rephrase","reporter","reproach","resample","research","reselect","reseller","resemble","resident","residual","resigned","resolute","resolved","resonant","resonate","resource","resubmit","resupply","retainer","retiring","retorted","reusable","reverend","reversal","revision","reviving","revolver","richness","riddance","ripeness","ripening","rippling","riverbed","riveting","robotics","rockband","rockfish","rocklike","rockstar","roulette","rounding","roundish","rumbling","sabotage","saddling","safeness","salaried","salutary","sampling","sanction","sanctity","sandbank","sandfish","sandworm","sanitary","satiable","saturate","saturday","scalding","scallion","scalping","scanning","scarcity","scarring","schedule","scheming","schnapps","scolding","scorpion","scouring","scouting","scowling","scrabble","scraggly","scribble","scribing","scrubbed","scrubber","scrutiny","sculptor","secluded","securely","security","sedation","sedative","sediment","seducing","selected","selector","semantic","semester","semisoft","senorita","sensuous","sequence","serrated","sessions","settling","severity","shakable","shamrock","shelving","shifting","shoplift","shopping","shoptalk","shortage","shortcut","showcase","showdown","showgirl","showroom","shrapnel","shredder","shrewdly","shrouded","shucking","siberian","silenced","silencer","simplify","singular","sinister","situated","sixtieth","sizzling","skeletal","skeleton","skillful","skimming","skimpily","skincare","skinhead","skinless","skinning","skipping","skirmish","skydiver","skylight","slacking","slapping","slashing","slighted","slightly","slimness","slinging","slobbery","sloppily","smashing","smelting","smuggler","smugness","sneezing","snipping","snowbird","snowdrop","snowfall","snowless","snowplow","snowshoe","snowsuit","snugness","spearman","specimen","speckled","spectrum","spelling","spending","spinning","spinster","spirited","splashed","splatter","splendid","splendor","splicing","splinter","splotchy","spoilage","spoiling","spookily","sporting","spotless","spotting","spyglass","squabble","squander","squatted","squatter","squealer","squeegee","squiggle","squiggly","stagnant","stagnate","staining","stalling","stallion","stapling","stardust","starfish","starless","starring","starship","starting","starving","steadier","steadily","steering","sterling","stifling","stimulus","stingily","stinging","stingray","stinking","stoppage","stopping","storable","stowaway","straddle","strained","strainer","stranger","strangle","strategy","strength","stricken","striking","striving","stroller","strongly","struggle","stubborn","stuffing","stunning","sturdily","stylized","subduing","subfloor","subgroup","sublease","sublevel","submerge","subpanel","subprime","subsonic","subtitle","subtotal","subtract","sufferer","suffrage","suitable","suitably","suitcase","sulphate","superior","superjet","superman","supermom","supplier","sureness","surgical","surprise","surround","survival","survivor","suspense","swapping","swimming","swimsuit","swimwear","swinging","sycamore","sympathy","symphony","syndrome","synopses","synopsis","tableful","tackling","tactical","tactless","talisman","tameness","tapeless","tapering","tapestry","tartness","tattered","tattling","theology","theorize","thespian","thieving","thievish","thinness","thinning","thirteen","thousand","threaten","thriving","throttle","throwing","thumping","thursday","tidiness","tightwad","tingling","tinkling","tinsmith","traction","trailing","tranquil","transfer","trapdoor","trapping","traverse","travesty","treading","trespass","triangle","tribunal","trickery","trickily","tricking","tricolor","tricycle","trillion","trimming","trimness","tripping","trolling","trombone","tropical","trousers","trustful","trusting","tubeless","tumbling","turbofan","turbojet","tweezers","twilight","twisting","ultimate","umbrella","unafraid","unbeaten","unbiased","unbitten","unbolted","unbridle","unbroken","unbundle","unburned","unbutton","uncapped","uncaring","uncoated","uncoiled","uncombed","uncommon","uncooked","uncouple","uncurled","underage","underarm","undercut","underdog","underfed","underpay","undertow","underuse","undocked","undusted","unearned","uneasily","unedited","unending","unenvied","unfasten","unfilled","unfitted","unflawed","unframed","unfreeze","unfrozen","unfunded","unglazed","ungloved","ungraded","unguided","unharmed","unheated","unhidden","unicycle","uniquely","unissued","universe","unjustly","unlawful","unleaded","unlinked","unlisted","unloaded","unloader","unlocked","unlovely","unloving","unmanned","unmapped","unmarked","unmasked","unmolded","unmoving","unneeded","unopened","unpadded","unpaired","unpeeled","unpicked","unpinned","unplowed","unproven","unranked","unrented","unrigged","unrushed","unsaddle","unsalted","unsavory","unsealed","unseated","unseeing","unseemly","unselect","unshaken","unshaved","unshaven","unsigned","unsliced","unsmooth","unsocial","unsoiled","unsolved","unsorted","unspoken","unstable","unsteady","unstitch","unsubtle","unsubtly","unsuited","untagged","untapped","unthawed","unthread","untimely","untitled","unturned","unusable","unvalued","unvaried","unveiled","unvented","unviable","unwanted","unwashed","unwieldy","unworthy","upcoming","upheaval","uplifted","uprising","upstairs","upstream","upstroke","upturned","urethane","vacation","vagabond","vagrancy","vanquish","variable","variably","vascular","vaseline","vastness","velocity","vendetta","vengeful","venomous","verbally","vertical","vexingly","vicinity","viewable","viewless","vigorous","vineyard","violator","virtuous","viselike","visiting","vitality","vitalize","vitamins","vocalist","vocalize","vocation","volatile","washable","washbowl","washroom","waviness","whacking","whenever","whisking","whomever","whooping","wildcard","wildfire","wildfowl","wildland","wildlife","wildness","winnings","wireless","wisplike","wobbling","wreckage","wrecking","wrongful","yearbook","yearling","yearning","zeppelin","abdomen","abiding","ability","abreast","abridge","absence","absolve","abstain","acclaim","account","acetone","acquire","acrobat","acronym","actress","acutely","aerosol","affront","ageless","agility","agonize","aground","alfalfa","algebra","almanac","alright","amenity","amiable","ammonia","amnesty","amplify","amusing","anagram","anatomy","anchovy","ancient","android","angelic","angling","angrily","angular","animate","annuity","another","antacid","anthill","antonym","anybody","anymore","anytime","apostle","appease","applaud","applied","approve","apricot","armband","armhole","armless","armoire","armored","armrest","arousal","arrange","arrival","ashamed","aspirin","astound","astride","atrophy","attempt","auction","audible","audibly","average","aviator","awkward","backing","backlit","backlog","badland","badness","baggage","bagging","bagpipe","balance","balcony","banking","banshee","barbell","barcode","barista","barmaid","barrack","barrier","battery","batting","bazooka","blabber","bladder","blaming","blazing","blemish","blinked","blinker","bloated","blooper","blubber","blurred","boaster","bobbing","bobsled","bobtail","bolster","bonanza","bonding","bonfire","booting","bootleg","borough","boxlike","breeder","brewery","brewing","bridged","brigade","brisket","briskly","bristle","brittle","broaden","broadly","broiler","brought","budding","buffalo","buffing","buffoon","bulldog","bullion","bullish","bullpen","bunkbed","busload","cabbage","caboose","cadmium","cahoots","calcium","caliber","caloric","calorie","calzone","camping","candied","canning","canteen","capable","capably","capital","capitol","capsize","capsule","caption","captive","capture","caramel","caravan","cardiac","carless","carload","carnage","carpool","carport","carried","cartoon","carving","carwash","cascade","catalog","catcall","catcher","caterer","catfish","catlike","cattail","catwalk","causing","caution","cavalry","certify","chalice","chamber","channel","chapped","chapter","charger","chariot","charity","charred","charter","chasing","chatter","cheddar","chemist","chevron","chewing","choking","chooser","chowder","citable","citadel","citizen","clapped","clapper","clarify","clarity","clatter","cleaver","clicker","climate","clobber","cloning","closure","clothes","clubbed","clutter","coastal","coaster","cobbler","coconut","coexist","collage","collide","comfort","commend","comment","commode","commute","company","compare","compile","compost","comrade","concave","conceal","concept","concert","concise","condone","conduit","confess","confirm","conform","conical","conjure","consent","console","consult","contact","contend","contest","context","contort","contour","control","convene","convent","copilot","copious","corncob","coroner","correct","corrode","corsage","cottage","country","courier","coveted","coyness","crafter","cranial","cranium","craving","crazily","creamed","creamer","crested","crevice","crewman","cricket","crimson","crinkle","crinkly","crisped","crisply","critter","crouton","crowbar","crucial","crudely","cruelly","cruelty","crumpet","crunchy","crushed","crusher","cryptic","crystal","cubical","cubicle","culprit","culture","cupcake","cupping","curable","curator","curling","cursive","curtain","custard","custody","customs","cycling","cyclist","dancing","darkish","darling","dawdler","daycare","daylong","dayroom","daytime","dazzler","dealing","debrief","decency","decibel","decimal","decline","default","defense","defiant","deflate","defraud","defrost","delouse","density","dentist","denture","deplete","depress","deprive","derived","deserve","desktop","despair","despise","despite","destiny","detract","devalue","deviant","deviate","devious","devotee","diagram","dictate","dimness","dingbat","diocese","dioxide","diploma","dipping","disband","discard","discern","discuss","disdain","disjoin","dislike","dismiss","disobey","display","dispose","dispute","disrupt","distant","distill","distort","divided","dolphin","donated","donator","doorman","doormat","doorway","drained","drainer","drapery","drastic","dreaded","dribble","driller","driving","drizzle","drizzly","dropbox","droplet","dropout","dropper","duchess","ducking","dumping","durable","durably","dutiful","dwelled","dweller","dwindle","dynamic","dynasty","earache","eardrum","earflap","earlobe","earmark","earmuff","earring","earshot","earthen","earthly","easeful","easiest","eatable","eclipse","ecology","economy","edition","effects","egotism","elastic","elderly","elevate","elitism","ellipse","elusive","embargo","embassy","emblaze","emerald","emotion","empathy","emperor","empower","emptier","enclose","encrust","encrypt","endless","endnote","endorse","engaged","engorge","engross","enhance","enjoyer","enslave","ensnare","entitle","entrust","entwine","envious","episode","equator","equinox","erasure","erratic","esquire","essence","etching","eternal","ethanol","evacuee","evasion","evasive","evident","exalted","example","exclaim","exclude","exhaust","expanse","explain","explode","exploit","explore","express","extinct","extrude","faceted","faction","factoid","factual","faculty","failing","falsify","fanatic","fancied","fanfare","fanning","fantasy","fascism","fasting","favored","federal","fencing","ferment","festive","fiction","fidgety","fifteen","figment","filling","finally","finance","finicky","finless","finlike","flaccid","flagman","flakily","flanked","flaring","flatbed","flatten","flattop","fleshed","florist","flyable","flyaway","flyover","footage","footing","footman","footpad","footsie","founder","fragile","framing","frantic","fraying","freebee","freebie","freedom","freeing","freeway","freight","fretful","fretted","frisbee","fritter","frosted","gaining","gallery","gallows","gangway","garbage","garland","garment","garnish","gauging","generic","gentile","geology","gestate","gesture","getaway","getting","giddily","gimmick","gizzard","glacial","glacier","glamour","glaring","glazing","gleeful","gliding","glimmer","glimpse","glisten","glitter","gloater","glorify","glowing","glucose","glutton","goggles","goliath","gondola","gosling","grading","grafted","grandly","grandma","grandpa","granite","granola","grapple","gratify","grating","gravity","grazing","greeter","grimace","gristle","grouped","growing","gruffly","grumble","grumbly","guiding","gumball","gumdrop","gumming","gutless","guzzler","habitat","hacking","hacksaw","haggler","halogen","hammock","hamster","handbag","handful","handgun","handled","handler","handoff","handsaw","handset","hangout","happier","happily","hardhat","harmful","harmony","harness","harpist","harvest","hastily","hatchet","hatless","heading","headset","headway","heavily","heaving","hedging","helpful","helping","hemlock","heroics","heroism","herring","herself","hexagon","humming","hunting","hurling","hurried","husband","hydrant","iciness","ideally","imaging","imitate","immerse","impeach","implant","implode","impound","imprint","improve","impulse","islamic","isotope","issuing","italics","jackpot","janitor","january","jarring","jasmine","jawless","jawline","jaybird","jellied","jitters","jittery","jogging","joining","joyride","jugular","jujitsu","jukebox","juniper","junkman","justice","justify","karaoke","kindred","kinetic","kinfolk","kinship","kinsman","kissing","kitchen","kleenex","krypton","labored","laborer","ladybug","lagging","landing","lantern","lapping","latrine","launder","laundry","legible","legibly","legroom","legwork","leotard","letdown","lettuce","liberty","library","licking","lifting","liftoff","limeade","limping","linseed","liquefy","liqueur","livable","lividly","luckily","lullaby","lumping","lumpish","lustily","machine","magenta","magical","magnify","majesty","mammary","manager","manatee","mandate","manhole","manhood","manhunt","mankind","manlike","manmade","mannish","marbled","marbles","marital","married","marxism","mashing","massive","mastiff","matador","matcher","maximum","moaning","mobster","modular","moisten","mollusk","mongrel","monitor","monsoon","monthly","moocher","moonlit","morally","mortify","mounted","mourner","movable","mullets","mummify","mundane","mushily","mustang","mustard","mutable","myspace","mystify","napping","nastily","natural","nearest","nemeses","nemesis","nervous","neutron","nuclear","nucleus","nullify","numbing","numeral","numeric","nursery","nursing","nurture","nutcase","nutlike","obliged","obscure","obvious","octagon","october","octopus","ominous","onboard","ongoing","onshore","onstage","opacity","operate","opossum","osmosis","outback","outcast","outcome","outgrow","outlast","outline","outlook","outmost","outpost","outpour","outrage","outrank","outsell","outward","overact","overall","overbid","overdue","overfed","overlap","overlay","overpay","overrun","overtly","overuse","oxidant","oxidize","pacific","padding","padlock","pajamas","pampers","pancake","panning","panther","paprika","papyrus","paradox","parched","parking","parkway","parsley","parsnip","partake","parting","partner","passage","passing","passion","passive","pastime","pasture","patient","patriot","payable","payback","payment","payroll","pelican","penalty","pendant","pending","pennant","pension","percent","perfume","perjury","petunia","phantom","phoenix","phonics","placard","placate","planner","plaster","plastic","plating","platter","playful","playing","playoff","playpen","playset","pliable","plunder","plywood","pointed","pointer","polygon","polymer","popcorn","popular","portion","postage","postbox","posting","posture","postwar","pouring","powdery","pranker","praying","preachy","precise","precook","predict","preface","pregame","prelude","premium","prepaid","preplan","preshow","presoak","presume","preteen","pretext","pretzel","prevail","prevent","preview","primary","primate","privacy","private","probing","problem","process","prodigy","produce","product","profane","profile","progeny","program","propose","prorate","proving","provoke","prowess","prowler","pruning","psychic","pulsate","pungent","purging","puritan","pursuit","pushing","pushpin","putdown","pyramid","quaking","qualify","quality","quantum","quarrel","quartet","quicken","quickly","quintet","ragweed","railcar","railing","railway","ranging","ranking","ransack","ranting","rasping","ravioli","reactor","reapply","reawake","rebirth","rebound","rebuild","rebuilt","recital","reclaim","recluse","recolor","recount","rectify","reenact","reenter","reentry","referee","refined","refocus","refract","refrain","refresh","refried","refusal","regalia","regally","regress","regroup","regular","reissue","rejoice","relapse","related","relearn","release","reliant","relieve","relight","remarry","rematch","remnant","remorse","removal","removed","remover","renewal","renewed","reoccur","reorder","repaint","replace","replica","reprint","reprise","reptile","request","require","reroute","rescuer","reshape","reshoot","residue","respect","rethink","retinal","retired","retiree","retouch","retrace","retract","retrain","retread","retreat","retrial","retying","reunion","reunite","reveler","revenge","revenue","revered","reverse","revisit","revival","reviver","rewrite","ribcage","rickety","ricotta","rifling","rigging","rimless","rinsing","ripcord","ripping","riptide","risotto","ritalin","riveter","roaming","robbing","rocking","rotting","rotunda","roundup","routine","routing","rubbing","rubdown","rummage","rundown","running","rupture","sabbath","saddled","sadness","saffron","sagging","salvage","sandbag","sandbar","sandbox","sanding","sandlot","sandpit","sapling","sarcasm","sardine","satchel","satisfy","savanna","savings","scabbed","scalded","scaling","scallop","scandal","scanner","scarily","scholar","science","scooter","scoring","scoured","scratch","scrawny","scrooge","scruffy","scrunch","scuttle","secrecy","secular","segment","seismic","seizing","seltzer","seminar","senator","serpent","service","serving","setback","setting","seventh","seventy","shadily","shading","shakily","shaking","shallot","shallow","shampoo","shaping","sharper","sharpie","sharply","shelter","shifter","shimmer","shindig","shingle","shining","shopper","shorten","shorter","shortly","showbiz","showing","showman","showoff","shrivel","shudder","shuffle","siamese","sibling","sighing","silicon","sincere","singing","sinless","sinuous","sitting","sixfold","sixteen","sixties","sizable","sizably","skating","skeptic","skilled","skillet","skimmed","skimmer","skipper","skittle","skyline","skyward","slacked","slacker","slander","slashed","slather","slicing","sliding","sloping","slouchy","smartly","smasher","smashup","smitten","smoking","smolder","smother","snagged","snaking","snippet","snooper","snoring","snorkel","snowcap","snowman","snuggle","species","specked","speller","spender","spinach","spindle","spinner","spinout","spirits","splashy","splurge","spoiled","spoiler","sponsor","spotted","spotter","spousal","sputter","squeeze","squishy","stadium","staging","stained","stamina","stammer","stardom","staring","starlet","starlit","starter","startle","startup","starved","stature","statute","staunch","stellar","stencil","sterile","sternum","stiffen","stiffly","stimuli","stinger","stipend","stoning","stopped","stopper","storage","stowing","stratus","stretch","strudel","stubbed","stubble","stubbly","student","studied","stuffed","stumble","stunned","stunner","styling","stylist","subdued","subject","sublime","subplot","subside","subsidy","subsoil","subtext","subtype","subzero","suction","suffice","suggest","sulfate","sulfide","sulfite","support","supreme","surface","surgery","surging","surname","surpass","surplus","surreal","survive","suspect","suspend","swagger","swifter","swiftly","swimmer","swinger","swizzle","swooned","symptom","synapse","synergy","t-shirt","tabasco","tabloid","tacking","tactful","tactics","tactile","tadpole","tainted","tannery","tanning","tantrum","tapered","tapioca","tapping","tarnish","tasting","theater","thermal","thermos","thicken","thicket","thimble","thinner","thirsty","thrower","thyself","tidings","tighten","tightly","tigress","timothy","tinfoil","tinwork","tipping","tracing","tractor","trading","traffic","tragedy","traitor","trapeze","trapped","trapper","treason","trekker","tremble","tribune","tribute","triceps","trickle","trident","trilogy","trimmer","trinity","triumph","trivial","trodden","tropics","trouble","truffle","trustee","tubular","tucking","tuesday","tuition","turbine","turmoil","twiddle","twisted","twister","twitter","unaired","unawake","unaware","unbaked","unblock","unboxed","uncanny","unchain","uncheck","uncivil","unclasp","uncloak","uncouth","uncover","uncross","uncrown","uncured","undated","undergo","undoing","undress","undying","unearth","uneaten","unequal","unfazed","unfiled","unfixed","ungodly","unhappy","unheard","unhinge","unicorn","unified","unifier","unkempt","unknown","unlaced","unlatch","unleash","unlined","unloved","unlucky","unmixed","unmoral","unmoved","unnamed","unnerve","unpaved","unquote","unrated","unrobed","unsaved","unscrew","unstuck","unsworn","untaken","untamed","untaxed","untimed","untried","untruth","untwist","untying","unusual","unvocal","unweave","unwired","unwound","unwoven","upchuck","upfront","upgrade","upright","upriver","upscale","upstage","upstart","upstate","upswing","uptight","uranium","urgency","urology","useable","utensil","utility","utilize","vacancy","vaguely","valiant","vanilla","vantage","variety","various","varmint","varnish","varsity","varying","vending","venture","verbose","verdict","version","vertigo","veteran","victory","viewing","village","villain","vintage","violate","virtual","viscous","visible","visibly","visitor","vitally","vividly","vocally","voicing","voltage","volumes","voucher","walmart","wannabe","wanting","washday","washing","washout","washtub","wasting","whoever","whoopee","wielder","wildcat","willing","wincing","winking","wistful","womanly","worried","worrier","wrangle","wrecker","wriggle","wriggly","wrinkle","wrinkly","writing","written","wronged","wrongly","wrought","yanking","yapping","yelling","yiddish","zealous","zipfile","zipping","zoology","abacus","ablaze","abroad","absurd","accent","aching","acting","action","active","affair","affirm","afford","aflame","afloat","afraid","agency","agenda","aghast","agreed","aliens","almost","alumni","always","ambush","amends","amount","amulet","amused","amuser","anchor","anemia","anemic","angled","angler","angles","animal","anthem","antics","antler","anyhow","anyone","anyway","apache","appear","armful","arming","armory","around","arrest","arrive","ascend","ascent","asleep","aspect","aspire","astute","atrium","attach","attain","attest","attire","august","author","autism","avatar","avenge","avenue","awaken","awhile","awning","babble","babied","baboon","backed","backer","backup","badass","baffle","bagful","bagged","baggie","bakery","baking","bamboo","banana","banish","banked","banker","banner","banter","barbed","barber","barley","barman","barrel","basics","basket","batboy","battle","bauble","blazer","bleach","blinks","blouse","bluish","blurry","bobbed","bobble","bobcat","bogged","boggle","bonded","bonnet","bonsai","booted","bootie","boring","botany","bottle","bottom","bounce","bouncy","bovine","boxcar","boxing","breach","breath","breeze","breezy","bright","broken","broker","bronco","bronze","browse","brunch","bubble","bubbly","bucked","bucket","buckle","budget","buffed","buffer","bulgur","bundle","bungee","bunion","busboy","busily","cabana","cabbie","cackle","cactus","caddie","camera","camper","campus","canary","cancel","candle","canine","canned","cannon","cannot","canola","canopy","canyon","capped","carbon","carded","caress","caring","carrot","cartel","carton","casing","casino","casket","catchy","catnap","catnip","catsup","cattle","caucus","causal","caviar","cavity","celery","celtic","cement","census","chance","change","chaste","chatty","cheese","cheesy","cherub","chewer","chirpy","choice","choosy","chosen","chrome","chubby","chummy","cinema","circle","circus","citric","citrus","clammy","clamor","clause","clench","clever","client","clinic","clique","clover","clumsy","clunky","clutch","cobalt","cobweb","coerce","coffee","collar","collie","colony","coming","common","compel","comply","concur","copied","copier","coping","copper","cornea","corned","corner","corral","corset","cortex","cosmic","cosmos","cotton","county","cozily","cradle","crafty","crayon","crazed","crease","create","credit","creole","cringe","crispy","crouch","crummy","crying","cuddle","cuddly","cupped","curdle","curfew","curing","curled","curler","cursor","curtly","curtsy","cussed","cyclic","cymbal","dagger","dainty","dander","danger","dangle","dating","daybed","deacon","dealer","debate","debtor","debunk","decade","deceit","decent","decode","decree","deduce","deduct","deepen","deeply","deface","defame","defeat","defile","define","deftly","defuse","degree","delete","deluge","deluxe","demise","demote","denial","denote","dental","depict","deploy","deport","depose","deputy","derail","detail","detest","device","diaper","dicing","dilute","dimmed","dimmer","dimple","dinghy","dining","dinner","dipped","dipper","disarm","dismay","disown","diving","doable","docile","dollar","dollop","domain","doodle","dorsal","dosage","dotted","douche","dreamt","dreamy","dreary","drench","drippy","driven","driver","drudge","dubbed","duffel","dugout","duller","duplex","duress","during","earful","earthy","earwig","easily","easing","easter","eatery","eating","eclair","edging","editor","effort","egging","eggnog","either","elated","eldest","eleven","elixir","embark","emblem","embody","emboss","enable","enamel","encode","encore","ending","energy","engine","engulf","enrage","enrich","enroll","ensure","entail","entire","entity","entomb","entrap","entree","enzyme","equate","equity","erased","eraser","errand","errant","eskimo","estate","ethics","evolve","excess","excuse","exhale","exhume","exodus","expand","expend","expert","expire","expose","extent","extras","fabric","facial","facing","factor","fading","falcon","family","famine","faster","faucet","fedora","feeble","feisty","feline","fender","ferret","ferris","fervor","fester","fiddle","figure","filing","filled","filler","filter","finale","finite","flashy","flatly","fleshy","flight","flinch","floral","flying","follow","fondly","fondue","footer","fossil","foster","frayed","freely","french","frenzy","friday","fridge","friend","fringe","frolic","frosty","frozen","frying","galley","gallon","galore","gaming","gander","gangly","garage","garden","gargle","garlic","garnet","garter","gating","gazing","geiger","gender","gently","gerbil","giblet","giggle","giggly","gigolo","gilled","girdle","giving","gladly","glance","glider","glitch","glitzy","gloomy","gluten","gnarly","google","gopher","gorged","gossip","gothic","gotten","graded","grader","granny","gravel","graves","greedy","grinch","groggy","groove","groovy","ground","grower","grudge","grunge","gurgle","gutter","hacked","hacker","halved","halves","hamlet","hamper","handed","hangup","hankie","harbor","hardly","hassle","hatbox","hatred","hazard","hazily","hazing","headed","header","helium","helmet","helper","herald","herbal","hermit","hubcap","huddle","humble","humbly","hummus","humped","humvee","hunger","hungry","hunter","hurdle","hurled","hurler","hurray","husked","hybrid","hyphen","idiocy","ignore","iguana","impale","impart","impish","impose","impure","iodine","iodize","iphone","itunes","jackal","jacket","jailer","jargon","jersey","jester","jigsaw","jingle","jockey","jogger","jovial","joyous","juggle","jumble","junior","junkie","jurist","justly","karate","keenly","kennel","kettle","kimono","kindle","kindly","kisser","kitten","kosher","ladder","ladies","lagged","lagoon","landed","lapdog","lapped","laptop","lather","latter","launch","laurel","lavish","lazily","legacy","legend","legged","legume","length","lesser","letter","levers","liable","lifter","likely","liking","lining","linked","liquid","litmus","litter","little","lively","living","lizard","lugged","lumber","lunacy","lushly","luster","luxury","lyrics","maggot","maimed","making","mammal","manger","mangle","manila","manned","mantis","mantra","manual","margin","marina","marine","marlin","maroon","marrow","marshy","mascot","mashed","masses","mating","matrix","matron","matted","matter","mayday","moaner","mobile","mocker","mockup","modify","module","monday","mooing","mooned","morale","mosaic","motion","motive","moving","mowing","mulled","mumble","muppet","museum","musket","muster","mutate","mutiny","mutual","muzzle","myself","naming","napkin","napped","narrow","native","nature","nearby","nearly","neatly","nebula","nectar","negate","nephew","neuron","neuter","nibble","nimble","nimbly","nuclei","nugget","number","numbly","nutmeg","nuzzle","object","oblong","obtain","obtuse","occupy","ocelot","octane","online","onward","oppose","outage","outbid","outfit","outing","outlet","output","outwit","oxford","oxygen","oyster","pacify","padded","paddle","paging","palace","paltry","panama","pantry","papaya","parade","parcel","pardon","parish","parlor","parole","parrot","parted","partly","pasted","pastel","pastor","patchy","patrol","pauper","paving","pawing","payday","paying","pebble","pebbly","pectin","pellet","pelvis","pencil","penpal","perish","pester","petite","petted","phobia","phoney","phrase","plasma","plated","player","pledge","plenty","plural","pointy","poison","poking","police","policy","polish","poncho","poplar","popper","porous","portal","portly","posing","possum","postal","posted","poster","pounce","powwow","prance","prayer","precut","prefix","prelaw","prepay","preppy","preset","pretty","prewar","primal","primer","prison","prissy","pronto","proofs","proton","proved","proven","prozac","public","pucker","pueblo","pumice","pummel","puppet","purely","purify","purist","purity","purple","pusher","pushup","puzzle","python","quarry","quench","quiver","racing","racism","racoon","radial","radish","raffle","ragged","raging","raider","raisin","raking","ramble","ramrod","random","ranged","ranger","ranked","rarity","rascal","ravage","ravine","raving","reason","rebate","reboot","reborn","rebuff","recall","recant","recast","recede","recent","recess","recite","recoil","recopy","record","recoup","rectal","refill","reflex","reflux","refold","refund","refuse","refute","regain","reggae","regime","region","reheat","rehire","rejoin","relish","relive","reload","relock","remake","remark","remedy","remold","remote","rename","rental","rented","renter","reopen","repair","repave","repeal","repent","replay","repose","repost","resale","reseal","resend","resent","resize","resort","result","resume","retail","retake","retold","retool","return","retype","reveal","reverb","revert","revise","revoke","revolt","reward","rewash","rewind","rewire","reword","rework","rewrap","ribbon","riches","richly","ridden","riding","rimmed","ripple","rising","roamer","robust","rocker","rocket","roping","roster","rotten","roving","rubbed","rubber","rubble","ruckus","rudder","ruined","rumble","runner","runway","sacred","sadden","safari","safely","salami","salary","saline","saloon","salute","sample","sandal","sanded","savage","savior","scabby","scarce","scared","scenic","scheme","scorch","scored","scorer","scotch","scouts","screen","scribe","script","scroll","scurvy","second","secret","sector","sedate","seduce","seldom","senate","senior","septic","septum","sequel","series","sermon","sesame","settle","shabby","shaded","shadow","shanty","sheath","shelve","sherry","shield","shifty","shimmy","shorts","shorty","shower","shrank","shriek","shrill","shrimp","shrine","shrink","shrubs","shrunk","siding","sierra","siesta","silent","silica","silver","simile","simple","simply","singer","single","sinner","sister","sitcom","sitter","sizing","sizzle","skater","sketch","skewed","skewer","skiing","skinny","slacks","sleeve","sliced","slicer","slider","slinky","sliver","slogan","sloped","sloppy","sludge","smoked","smooth","smudge","smudgy","smugly","snazzy","sneeze","snitch","snooze","snugly","specks","speech","sphere","sphinx","spider","spiffy","spinal","spiral","spleen","splice","spoils","spoken","sponge","spongy","spooky","sports","sporty","spotty","spouse","sprain","sprang","sprawl","spring","sprint","sprite","sprout","spruce","sprung","squall","squash","squeak","squint","squire","squirt","stable","staple","starch","starry","static","statue","status","stench","stereo","stifle","stingy","stinky","stitch","stooge","streak","stream","street","stress","strewn","strict","stride","strife","strike","strive","strobe","strode","struck","strung","stucco","studio","stuffy","stupor","sturdy","stylus","sublet","subpar","subtly","suburb","subway","sudden","sudoku","suffix","suitor","sulfur","sullen","sultry","supper","supply","surely","surfer","survey","swerve","switch","swivel","swoosh","system","tables","tablet","tackle","taking","talcum","tamale","tamper","tanned","target","tarmac","tartar","tartly","tassel","tattle","tattoo","tavern","thesis","thinly","thirty","thrash","thread","thrift","thrill","thrive","throat","throng","tidbit","tiling","timing","tingle","tingly","tinker","tinsel","tipoff","tipped","tipper","tiptop","tiring","tissue","trance","travel","treble","tremor","trench","triage","tricky","trifle","tripod","trophy","trough","trowel","trunks","tumble","turban","turkey","turret","turtle","twelve","twenty","twisty","twitch","tycoon","umpire","unable","unbend","unbent","unclad","unclip","unclog","uncork","undead","undone","unease","uneasy","uneven","unfair","unfold","unglue","unholy","unhook","unison","unkind","unless","unmade","unpack","unpaid","unplug","unread","unreal","unrest","unripe","unroll","unruly","unsafe","unsaid","unseen","unsent","unsnap","unsold","unsure","untidy","untold","untrue","unused","unwary","unwell","unwind","unworn","upbeat","update","upheld","uphill","uphold","upload","uproar","uproot","upside","uptake","uptown","upward","upwind","urchin","urgent","urging","usable","utmost","utopia","vacant","vacate","valium","valley","vanish","vanity","varied","vastly","veggie","velcro","velvet","vendor","verify","versus","vessel","viable","viewer","violet","violin","vision","volley","voting","voyage","waffle","waggle","waking","walnut","walrus","wanted","wasabi","washed","washer","waving","whacky","whinny","whoops","widely","widget","wilder","wildly","willed","willow","winner","winter","wiring","wisdom","wizard","wobble","wobbly","wooing","wreath","wrench","yearly","yippee","yogurt","yonder","zodiac","zombie","zoning","abide","acorn","affix","afoot","agent","agile","aging","agony","ahead","alarm","album","alias","alibi","alike","alive","aloft","aloha","alone","aloof","amaze","amber","amigo","amino","amiss","among","ample","amply","amuck","anger","anime","ankle","annex","antsy","anvil","aorta","apple","apply","april","apron","aptly","arena","argue","arise","armed","aroma","arose","array","arson","ashen","ashes","aside","askew","atlas","attic","audio","avert","avoid","await","award","aware","awoke","bacon","badge","badly","bagel","baggy","baked","balmy","banjo","barge","basil","basin","basis","batch","baton","blade","blame","blank","blast","bleak","bleep","blend","bless","blimp","bling","blitz","bluff","blunt","blurb","blurt","blush","bogus","boned","boney","bonus","booth","boots","boozy","borax","botch","boxer","briar","bribe","brick","bride","bring","brink","brook","broom","brunt","brush","brute","buddy","buggy","bulge","bully","bunch","bunny","cable","cache","cacti","caddy","cadet","cameo","canal","candy","canon","carat","cargo","carol","carry","carve","catty","cause","cedar","chafe","chain","chair","chant","chaos","chaps","charm","chase","cheek","cheer","chemo","chess","chest","chevy","chewy","chief","chili","chill","chimp","chive","chomp","chuck","chump","chunk","churn","chute","cider","cinch","civic","civil","claim","clamp","clang","clash","clasp","class","clean","clear","cleat","cleft","clerk","cling","cloak","clock","clone","cloud","clump","coach","cocoa","comfy","comic","comma","conch","coral","corny","couch","cough","could","cover","cramp","crane","crank","crate","crave","crazy","creed","creme","crepe","crept","cried","crier","crimp","croak","crock","crook","croon","cross","crowd","crown","crumb","crust","cupid","curly","curry","curse","curve","curvy","cushy","cycle","daily","dairy","daisy","dance","dandy","dares","dealt","debit","debug","decaf","decal","decay","decoy","defog","deity","delay","delta","denim","dense","depth","derby","deuce","diary","dimly","diner","dingo","dingy","ditch","ditto","ditzy","dizzy","dodge","dodgy","doily","doing","dolly","donor","donut","doozy","dowry","drank","dress","dried","drier","drift","drone","drool","droop","drove","drown","ducky","duvet","dwarf","dweeb","eagle","early","easel","eaten","ebony","ebook","ecard","eject","elbow","elite","elope","elude","elves","email","ember","emcee","emote","empty","ended","envoy","equal","error","erupt","essay","ether","evade","evict","evoke","exact","exert","exile","expel","fable","false","fancy","feast","femur","fence","ferry","fetal","fetch","fever","fiber","fifth","fifty","filth","finch","finer","flail","flaky","flame","flask","flick","flier","fling","flint","flirt","float","flock","floss","flyer","folic","foyer","frail","frame","frays","fresh","fried","frill","frisk","front","froth","frown","fruit","gaffe","gains","gamma","gauze","gecko","genre","gents","getup","giant","giddy","gills","given","giver","gizmo","glade","glare","glass","glory","gloss","glove","going","gonad","gooey","goofy","grain","grant","grape","graph","grasp","grass","gravy","green","grief","grill","grime","grimy","groin","groom","grope","grout","grove","growl","grunt","guide","guise","gully","gummy","gusto","gusty","haiku","hanky","happy","hardy","harsh","haste","hasty","haunt","haven","heave","hedge","hefty","hence","henna","herbs","hertz","human","humid","hurry","icing","idiom","igloo","image","imply","irate","issue","ivory","jaunt","jawed","jelly","jiffy","jimmy","jolly","judge","juice","juicy","jumbo","juror","kabob","karma","kebab","kitty","knelt","knoll","koala","kooky","kudos","ladle","lance","lanky","lapel","large","lasso","latch","legal","lemon","level","lilac","lilly","limes","limit","lingo","lived","liver","lucid","lunar","lurch","lusty","lying","macaw","magma","maker","mango","mangy","manly","manor","march","mardi","marry","mauve","maybe","mocha","molar","moody","morse","mossy","motor","motto","mouse","mousy","mouth","movie","mower","mulch","mumbo","mummy","mumps","mural","murky","mushy","music","musky","musty","nacho","nanny","nappy","nervy","never","niece","nifty","ninja","ninth","nutty","nylon","oasis","ocean","olive","omega","onion","onset","opium","other","otter","ought","ounce","outer","ovary","ozone","paced","pagan","pager","panda","panic","pants","paper","parka","party","pasta","pasty","patio","paver","payee","payer","pecan","penny","perch","perky","pesky","petal","petri","petty","phony","photo","plank","plant","plaza","pleat","pluck","poach","poise","poker","polar","polio","polka","poppy","poser","pouch","pound","power","press","pried","primp","print","prior","prism","prize","probe","prone","prong","props","proud","proxy","prude","prune","pulse","punch","pupil","puppy","purge","purse","pushy","quack","quail","quake","qualm","query","quiet","quill","quilt","quirk","quote","rabid","radar","radio","rally","ranch","rants","raven","reach","rebel","rehab","relax","relay","relic","remix","reply","rerun","reset","retry","reuse","rhyme","rigid","rigor","rinse","ritzy","rival","roast","robin","rocky","rogue","roman","rover","royal","rumor","runny","rural","sadly","saggy","saint","salad","salon","salsa","sandy","santa","sappy","sassy","satin","saucy","sauna","saved","savor","scale","scant","scarf","scary","scion","scoff","scone","scoop","scope","scorn","scrap","scuba","scuff","sedan","sepia","serve","setup","shack","shady","shaft","shaky","shale","shame","shank","shape","share","shawl","sheep","sheet","shelf","shell","shine","shiny","shirt","shock","shone","shore","shout","shove","shown","showy","shrug","shush","silly","siren","sixth","skied","skier","skies","skirt","skype","slain","slang","slate","sleek","sleep","sleet","slept","slick","slimy","slurp","slush","small","smell","smile","smirk","smite","smith","smock","smoky","snack","snare","snarl","sneak","sneer","snide","sniff","snore","snort","snout","snowy","snuff","speak","speed","spent","spied","spill","spilt","spiny","spoof","spool","spoon","spore","spout","spray","spree","sprig","squad","squid","stack","staff","stage","stamp","stand","stank","stark","stash","state","stays","steam","steed","steep","stick","stilt","stock","stoic","stoke","stole","stomp","stony","stood","stool","stoop","storm","stout","stove","straw","stray","strep","strum","strut","stuck","study","stump","stung","stunt","suave","sugar","suing","sushi","swarm","swear","sweat","sweep","swell","swept","swipe","swirl","swoop","swore","sworn","swung","syrup","tabby","tacky","talon","tamer","tarot","taste","tasty","taunt","thank","theft","theme","these","thigh","thing","think","thong","thorn","those","thumb","tiara","tibia","tidal","tiger","timid","trace","track","trade","train","traps","trash","treat","trend","trial","tried","trout","truce","truck","trump","truth","tubby","tulip","tummy","tutor","tweak","tweed","tweet","twerp","twice","twine","twins","twirl","tying","udder","ultra","uncle","uncut","unify","union","unlit","untie","until","unwed","unzip","upper","urban","usage","usher","usual","utter","valid","value","vegan","venue","venus","verse","vibes","video","viper","viral","virus","visor","vista","vixen","voice","voter","vowed","vowel","wafer","waged","wager","wages","wagon","waltz","watch","water","wharf","wheat","whiff","whiny","whole","widen","widow","width","wince","wired","wispy","woozy","worry","worst","wound","woven","wrath","wrist","xerox","yahoo","yeast","yield","yo-yo","yodel","yummy","zebra","zesty","zippy","able","acid","acre","acts","afar","aged","ahoy","aide","aids","ajar","aloe","alto","amid","anew","aqua","area","army","ashy","atom","atop","avid","awry","axis","barn","bash","bath","bats","blah","blip","blob","blog","blot","boat","body","boil","bolt","bony","book","boss","both","boxy","brim","bulb","bulk","bunt","bush","bust","buzz","cage","cake","calm","cane","cape","case","cash","chef","chip","chop","chug","city","clad","claw","clay","clip","coat","coil","coke","cola","cold","colt","coma","come","cone","cope","copy","cork","cost","cozy","crib","crop","crux","cube","cure","cusp","darn","dart","dash","data","dawn","dean","deck","deed","deem","defy","deny","dial","dice","dill","dime","dish","disk","dock","dole","dork","dose","dove","down","doze","drab","draw","drew","drum","duct","dude","duke","duly","dupe","dusk","dust","duty","each","eats","ebay","echo","edge","edgy","emit","envy","epic","even","evil","exes","exit","fade","fall","fame","fang","feed","feel","film","five","flap","fled","flip","flop","foam","foil","folk","font","food","fool","from","gala","game","gave","gawk","gear","geek","gift","glue","gnat","goal","goes","golf","gone","gong","good","goon","gore","gory","gout","gown","grab","gray","grew","grid","grip","grit","grub","gulf","gulp","guru","gush","guts","half","halt","hash","hate","hazy","heap","heat","huff","hula","hulk","hull","hunk","hurt","hush","icky","icon","idly","ipad","ipod","iron","item","java","jaws","jazz","jeep","jinx","john","jolt","judo","july","jump","june","jury","keep","kelp","kept","kick","kiln","kilt","king","kite","kiwi","knee","kung","lair","lake","lard","lark","lash","last","late","lazy","left","lego","lend","lens","lent","life","lily","limb","line","lint","lion","lisp","list","lung","lure","lurk","mace","malt","mama","many","math","mold","most","move","much","muck","mule","mute","mutt","myth","nail","name","nape","navy","neon","nerd","nest","next","oboe","ogle","oink","okay","omen","omit","only","onto","onyx","oops","ooze","oozy","opal","open","ouch","oval","oven","palm","pang","path","pelt","perm","peso","plod","plop","plot","plow","ploy","plug","plus","poem","poet","pogo","polo","pond","pony","pope","pork","posh","pout","pull","pulp","puma","punk","purr","putt","quit","race","rack","raft","rage","rake","ramp","rare","rash","ream","rely","reps","rice","ride","rift","rind","rink","riot","rise","risk","robe","romp","rope","rosy","ruby","rule","runt","ruse","rush","rust","saga","sage","said","sake","salt","same","sank","sash","scam","self","send","shed","ship","shun","shut","sift","silk","silo","silt","size","skid","slab","slam","slaw","sled","slip","slit","slot","slug","slum","smog","snap","snub","spew","spry","spud","spur","stem","step","stew","stir","such","suds","sulk","swab","swan","sway","taco","take","tall","tank","taps","task","that","thaw","thee","thud","thus","tidy","tile","till","tilt","tint","tiny","tray","tree","trio","turf","tusk","tutu","twig","tyke","unit","upon","used","user","veal","very","vest","veto","vice","visa","void","wake","walk","wand","wasp","wavy","wham","wick","wife","wifi","wilt","wimp","wind","wing","wipe","wiry","wise","wish","wolf","womb","woof","wool","word","work","xbox","yard","yarn","yeah","yelp","yoga","yoyo","zero","zips","zone","zoom","aim","art","bok","cod","cut","dab","dad","dig","dry","duh","duo","eel","elf","elk","elm","emu","fax","fit","foe","fog","fox","gab","gag","gap","gas","gem","guy","had","hug","hut","ice","icy","ion","irk","ivy","jab","jam","jet","job","jot","keg","lid","lip","map","mom","mop","mud","mug","nag","net","oaf","oak","oat","oil","old","opt","owl","pep","pod","pox","pry","pug","rug","rut","say","shy","sip","sly","tag","try","tug","tux","wad","why","wok","wow","yam","yen","yin","zap","zen","zit"]};var tn=s(30323),sn=s.n(tn);const an=[{id:"not_available",label:"n/a",strength:0},{id:"very-weak",label:"Very weak",strength:1},{id:"weak",label:"Weak",strength:60},{id:"fair",label:"Fair",strength:80},{id:"strong",label:"Strong",strength:112},{id:"very-strong",label:"Very strong",strength:128}],nn=[{name:"upper",label:"A-Z",characters:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],active:!0},{name:"lower",label:"a-z",characters:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],active:!0},{name:"digit",label:"0-9",characters:["0","1","2","3","4","5","6","7","8","9"],active:!0},{name:"special_char1",label:"# $ % & @ ^ ~",characters:["#","$","%","&","@","^","~"],active:!0},{name:"parenthesis",label:"{ [ ( | ) ] ] }",characters:["{","(","[","|","]",")","}"],active:!0},{name:"special_char2",label:". , : ;",characters:[".",",",":",";"],active:!0},{name:"special_char3",label:"' \" `",characters:["'",'"',"`"],active:!0},{name:"special_char4",label:"/ \\ _ -",characters:["/","\\","_","-"],active:!0},{name:"special_char5",label:"< * + ! ? =",characters:["<","*","+","!","?","="],active:!0},{name:"emoji",label:"",characters:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}],rn={entropyPassword:(e="")=>{const t=(new(sn())).splitGraphemes(e);let s=0;for(const e of nn)t.some((t=>e.characters.includes(t)))&&(s+=e.characters.length);return on(t.length,s)},entropyPassphrase:(e=0,t="")=>{const s=en["en-UK"];return on(e,128*t.length+s.length+3)},strength:(e=0)=>an.reduce(((t,s)=>t?s.strength>t.strength&&e>=s.strength?s:t:s)),calculEntropy:on};function on(e,t){return e&&t?e*(Math.log(t)/Math.log(2)):0}const ln=["O","l","|","I","0","1"];function cn(e,t){const s=new Uint32Array(1);window.crypto.getRandomValues(s);const a=s[0]/4294967296;return Math.floor(a*(t-e+1))+e}const mn=function(e){const t=e.default_options.look_alike;let s="",a=[];const n=e.masks.filter((e=>e.active)),r=e.default_options.length;if(n.length>0&&r>=e.default_options.min_length&&r<=e.default_options.max_length){a=n.reduce(((e,t)=>[...e,...t.characters]),[]),t&&(a=(i=a)?i.reduce(((e,t)=>(ln.includes(t)||e.push(t),e)),[]):i);let e=0;const o=Math.floor(rn.calculEntropy(r,a.length));let l=0;do{let e="";for(let t=0;t<r;t++)e+=a[cn(0,a.length-1)];const t=rn.entropyPassword(e);t>l&&(s=e,l=t)}while(l<o&&e++<10)}var i;return s};const dn=e=>{const t=e.default_options.word_count;if(t>=e.default_options.min_word&&t<=e.default_options.max_word){const s=e.default_options.word_case,a=en["en-UK"],n=()=>function(e,t){const s=()=>e[function(e,t){const s=new Uint32Array(1);window.crypto.getRandomValues(s);const a=s[0]/4294967296;return Math.floor(a*(t-0+1))+0}(0,e.length-1)];switch(t){case"lowercase":return s().toLowerCase();case"uppercase":return s().toUpperCase();case"camelcase":return(a=s()).charAt(0).toUpperCase()+a.slice(1);default:return s()}var a}(a,s);return Array.from({length:t},n).join(e.default_options.separator)}return""},hn=function(e){if(!e)return{isPassphrase:!1};const t=en["en-UK"].reduce(((e,t)=>{const s=e.remainingSecret.replace(new RegExp(t,"g"),""),a=(e.remainingSecret.length-s.length)/t.length;return{numberReplacement:e.numberReplacement+a,remainingSecret:s}}),{numberReplacement:0,remainingSecret:e.toLowerCase()}),s=t.numberReplacement-1,a=t.remainingSecret.length/s,n=t.remainingSecret.length%s!=0,r=0==t.remainingSecret.length;if(n)return{isPassphrase:!1};if(r)return{numberWords:t.numberReplacement,separator:"",isPassphrase:!0};const i=t.remainingSecret.substring(0,a),o=String(i).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1"),l=0===t.remainingSecret.replace(new RegExp(o,"g"),"").length;return{numberWords:t.numberReplacement,separator:i,isPassphrase:l&&!e.startsWith(i)&&!e.endsWith(i)}},pn=e=>{const{type:t}=e;return"password"===t?mn(e):"passphrase"===t?dn(e):void 0},un=e=>{const{numberWords:t,separator:s,isPassphrase:a}=hn(e);return a?rn.entropyPassphrase(t,s):rn.entropyPassword(e)};class gn extends a.Component{colorGradient(e,t,s,a){let n,r,i=e/100*2;return i>=1?(i-=1,n=this.hexToRgb(s),r=this.hexToRgb(a)):(n=this.hexToRgb(t),r=this.hexToRgb(s)),`rgb(${Math.floor(n.red+(r.red-n.red)*i)},${Math.floor(n.green+(r.green-n.green)*i)},${Math.floor(n.blue+(r.blue-n.blue)*i)})`}hexToRgb(e){const t=new RegExp("^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$","i").exec(e.trim());return t?{red:parseInt(t[1],16),green:parseInt(t[2],16),blue:parseInt(t[3],16)}:null}get complexityBarStyle(){const e=100-99/(1+Math.pow(this.props.entropy/90,10));return{background:`linear-gradient(to right, ${this.colorGradient(e,"#A40000","#FFA724","#0EAA00")} ${e}%, var(--complexity-bar-background-default) ${e}%`}}get entropy(){return(this.props.entropy||0).toFixed(1)}hasEntropy(){return null!==this.props.entropy&&void 0!==this.props.entropy}hasError(){return this.props.error}render(){const e=rn.strength(this.props.entropy);return a.createElement("div",{className:"password-complexity"},a.createElement("span",{className:"complexity-text"},(this.hasEntropy()||this.hasError())&&a.createElement(a.Fragment,null,e.label," (",a.createElement(C.c,null,"entropy:")," ",this.entropy," bits)"),!this.hasEntropy()&&!this.hasError()&&a.createElement(C.c,null,"Quality")),a.createElement("span",{className:"progress"},a.createElement("span",{className:"progress-bar "+(this.hasError()?"error":""),style:this.hasEntropy()?this.complexityBarStyle:void 0})))}}gn.defaultProps={entropy:null},gn.propTypes={entropy:d().number,error:d().bool};const fn=(0,k.Z)("common")(gn),bn=class{constructor(e){this.port=e}async evaluateSecret(e){let t=!0,s=!0;if(e.length>=8)try{t=await this.checkIfPasswordPowned(e)}catch(e){t=!1,s=!1}return{inDictionary:t,isPwnedServiceAvailable:s}}async checkIfPasswordPowned(e){return await this.port.request("passbolt.secrets.powned-password",e)>0}};class yn extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.isPwndProcessingPromise=null,this.evaluatePassphraseIsInDictionaryDebounce=Z()(this.evaluatePassphraseIsInDictionary,300),this.bindEventHandlers(),this.createReferences()}get defaultState(){return{passphrase:"",passphraseEntropy:null,actions:{processing:!1},hintClassNames:{enoughLength:"",uppercase:"",alphanumeric:"",specialCharacters:"",notInDictionary:""},isPwnedServiceAvailable:!0}}get areActionsAllowed(){return!this.isProcessing}get isValid(){const e={enoughLength:this.state.passphrase.length>=8,enoughEntropy:this.state.passphraseEntropy&&0!==this.state.passphraseEntropy,notInDictionary:"error"!==this.state.hintClassNames.notInDictionary};return Object.values(e).every((e=>e))}get mustBeDisabled(){return!this.isValid||this.isProcessing}get isProcessing(){return this.state.actions.processing}bindEventHandlers(){this.handlePassphraseChange=this.handlePassphraseChange.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}createReferences(){this.passphraseInput=a.createRef()}componentDidMount(){this.pownedService=new bn(this.props.context.port),this.focusOnPassphrase()}focusOnPassphrase(){this.passphraseInput.current.focus()}async handlePassphraseChange(e){const t=e.target.value;let s={},a=null;t.length&&(a=un(t),s=this.evaluatePassphraseHintClassNames(t),this.isPwndProcessingPromise=this.evaluatePassphraseIsInDictionaryDebounce()),this.setState({passphrase:t,passphraseEntropy:a,hintClassNames:s})}handleSubmit(e){e.preventDefault(),this.generateGpgKey()}evaluatePassphraseHintClassNames(e){const t=Qa.matchMasks(e),s=e=>e?"success":"warning";return{enoughLength:e.length>=8?"success":"error",uppercase:s(t.uppercase),alphanumeric:s(t.alpha&&t.digit),specialCharacters:s(t.special),notInDictionary:this.state.hintClassNames.notInDictionary}}async evaluatePassphraseIsInDictionary(){let e=this.state.isPwnedServiceAvailable;if(!e)return;let t="success";if(this.state.passphrase.length<8)t="error";else try{const s=await this.pownedService.evaluateSecret(this.state.passphrase),a=s.inDictionary;e=s.isPwnedServiceAvailable,t=e?a?"error":"success":"unavailable"}catch(s){if(!(s instanceof Ba||s instanceof Za))throw s;e=!1,t="unavailable"}this.setState({isPwnedServiceAvailable:e,hintClassNames:{...this.state.hintClassNames,notInDictionary:t}})}async isCurrentPassphrasePwned(){return await this.isPwndProcessingPromise,"error"===this.state.hintClassNames.notInDictionary}async generateGpgKey(){await this.toggleProcessing(),await this.isCurrentPassphrasePwned()?await this.toggleProcessing():this.props.userSettingsContext.onUpdatePassphraseRequested(this.state.passphrase).catch(this.onGpgKeyGeneratedFailure.bind(this))}async onGpgKeyGeneratedFailure(e){await this.toggleProcessing();const t={error:e};this.props.dialogContext.open(we,t)}handleCancel(){this.props.userSettingsContext.onGoToIntroductionPassphraseRequested()}async toggleProcessing(){const e={...this.state.actions,processing:!this.state.actions.processing};await this.setState({actions:e})}toggleObfuscate(){this.setState({isObfuscated:!this.state.isObfuscated})}render(){const e="error"===this.state.hintClassNames.notInDictionary?0:this.state.passphraseEntropy;return a.createElement("div",{className:"grid grid-responsive-12 profile-passphrase"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col7 main-column"},a.createElement("form",{className:"enter-passphrase",onSubmit:this.handleSubmit},a.createElement("h3",null,a.createElement(C.c,null,"Please enter a new passphrase")),a.createElement("div",{className:"form-content"},a.createElement("div",{className:"input-password-wrapper input required"},a.createElement(At,{id:"passphrase-input",autoComplete:"off",inputRef:this.passphraseInput,value:this.state.passphrase,preview:!0,securityToken:this.props.context.userSettings.getSecurityToken(),onChange:this.handlePassphraseChange,disabled:!this.areActionsAllowed}),a.createElement(fn,{entropy:e})),a.createElement("div",{className:"password-hints"},a.createElement("ul",null,a.createElement("li",{className:this.state.hintClassNames.enoughLength},a.createElement(C.c,null,"It is at least 8 characters in length")),a.createElement("li",{className:this.state.hintClassNames.uppercase},a.createElement(C.c,null,"It contains lower and uppercase characters")),a.createElement("li",{className:this.state.hintClassNames.alphanumeric},a.createElement(C.c,null,"It contains letters and numbers")),a.createElement("li",{className:this.state.hintClassNames.specialCharacters},a.createElement(C.c,null,"It contains special characters (like / or * or %)")),a.createElement("li",{className:this.state.hintClassNames.notInDictionary},this.state.isPwnedServiceAvailable&&a.createElement(C.c,null,"It is not part of an exposed data breach"),!this.state.isPwnedServiceAvailable&&a.createElement(ge,{message:a.createElement(C.c,null,"The pwnedpasswords service is unavailable, your passphrase might be part of an exposed data breach"),direction:"bottom"},a.createElement(C.c,null,"It is not part of an exposed data breach")))))),a.createElement("div",{className:"submit-wrapper"},a.createElement("button",{className:"button cancel",type:"button",disabled:!this.areActionsAllowed,onClick:this.handleCancel},a.createElement(C.c,null,"Cancel")),a.createElement(Ee,{primary:!0,disabled:this.mustBeDisabled,processing:this.isProcessing,value:this.props.t("Update")})))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Tips for choosing a good passphrase")),a.createElement("p",null,a.createElement(C.c,null,"Make sure your passphrase is hard to guess but also that is long enough. For example you can use your favorite lyric from a song, grab the first couple of characters from the words in your favorite line."))))))}}yn.propTypes={context:d().any,userSettingsContext:d().object,dialogContext:d().any,t:d().func};const En=u(M(Ca((0,k.Z)("common")(yn))));class vn extends a.Component{componentDidMount(){this.initializePassphrase()}initializePassphrase(){this.userSettingsContext.onIntroductionPassphraseRequested()}get userSettingsContext(){return this.props.userSettingsContext}render(){switch(this.userSettingsContext.state){case ka.PASSPHRASE_INTRODUCTION:return a.createElement(Fa,null);case ka.PASSPHRASE_TO_PROVIDE_REQUESTED:return a.createElement(qa,null);case ka.PASSPHRASE_TO_PROVIDE_CHECKED:return a.createElement(En,null);case ka.PASSPHRASE_UPDATED:return a.createElement(Ha,null);default:return a.createElement(Oa,null)}}}vn.propTypes={userSettingsContext:d().object};const Cn=Ca(vn);var kn=s(4089);class wn extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindEventHandlers(),this.createReferences()}componentDidMount(){this.getSecurityTokenFromLoggedInUser()}get defaultState(){return{background:"",code:"",actions:{processing:!1},hasBeenValidated:!1,errors:{emptyCode:!1,lengthCode:!1}}}getSecurityTokenFromLoggedInUser(){const e=this.props.context.userSettings.getSecurityToken().backgroundColor,t=this.props.context.userSettings.getSecurityToken().code;this.setState({background:e,code:t})}get defaultColors(){return["#f44336","#9c27b0","#3f51b5","#03a9f4","#009688","#8bc34a","#ffeb3b","#ff9800","#795548","#607d8b","#000000","#f6f6f6"]}get textColor(){const e=this.state.background.substr(1).match(/(\S{2})/g);return(299*parseInt(e[0],16)+587*parseInt(e[1],16)+114*parseInt(e[2],16))/1e3>125?"#000000":"#ffffff"}get securityTokenStyle(){return this.state.background?{backgroundColor:this.state.background,color:this.textColor}:void 0}get areActionsAllowed(){return!this.state.actions.processing}get isValid(){return Object.values(this.state.errors).every((e=>!e))}get isProcessing(){return this.state.actions.processing}bindEventHandlers(){this.handleSubmit=this.handleSubmit.bind(this),this.handleSelectColor=this.handleSelectColor.bind(this),this.handleRandomize=this.handleRandomize.bind(this),this.handleChangeCode=this.handleChangeCode.bind(this)}createReferences(){this.tokenCodeInputRef=a.createRef()}async handleSubmit(e){e.preventDefault(),await this.validate(),this.isValid&&(await this.toggleProcessing(),await this.save())}async handleSelectColor(e){this.areActionsAllowed&&(await this.selectColor(e),this.state.hasBeenValidated&&await this.validate())}handleRandomize(){this.randomizeCode(),this.randomizeColor()}async handleChangeCode(e){const t=e.target.value;await this.selectCode(t),this.state.hasBeenValidated&&await this.validate()}async save(){const e={color:this.state.background,textcolor:this.textColor,code:this.state.code};try{await this.props.userSettingsContext.onUpdateSecurityTokenRequested(e),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The security token has been updated successfully")),await this.toggleProcessing()}catch(e){await this.onSaveFailure(e)}}async onSaveFailure(e){await this.toggleProcessing();const t={error:e};this.props.dialogContext.open(we,t)}async selectColor(e){e.hex!==this.state.background&&await this.setState({background:e.hex})}async selectCode(e){await this.setState({code:e})}async randomizeCode(){const e=Qa.generate(3,["uppercase"]);await this.selectCode(e),this.state.hasBeenValidated&&await this.validate()}async randomizeColor(){let e;do{const t=parseInt(Qa.generate(3,["digit"]))%this.defaultColors.length;e={hex:this.defaultColors[t]}}while(e.hex===this.state.background);await this.selectColor(e)}async validate(){const{code:e}=this.state,t=""===e.trim();if(t)return void await this.setState({hasBeenValidated:!0,errors:{emptyCode:t}});const s=3!==e.trim().length;s?await this.setState({hasBeenValidated:!0,errors:{lengthCode:s}}):await this.setState({hasBeenValidated:!0,errors:{}})}async toggleProcessing(){await this.setState({actions:{processing:!this.state.actions.processing}})}get hasErrors(){return this.state.errors&&(this.state.errors.emptyCode||this.state.errors.lengthCode)}render(){const e=this.isProcessing?"processing":"";return a.createElement("div",{className:"grid grid-responsive-12 profile-choose-security-token"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col7 main-column"},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("h3",null,a.createElement(C.c,null,"Update the Security Token")),a.createElement("div",{className:`input-security-token input required ${this.hasErrors?"error":""} ${this.areActionsAllowed?"":"disabled"}`},a.createElement("label",{htmlFor:"security-token-text"},a.createElement(C.c,null,"Security token")),a.createElement("input",{id:"security-token-text",ref:this.tokenCodeInputRef,type:"text",className:"input text required",name:"text",maxLength:"3",style:this.securityTokenStyle,value:this.state.code,onChange:this.handleChangeCode,disabled:!this.areActionsAllowed}),a.createElement("input",{type:"hidden",id:"security-token-background-color",name:"security-token-background-color"}),a.createElement("input",{type:"hidden",id:"security-token-text-color",name:"security-token-text-color"}),a.createElement(kn.iY,{color:this.state.background,onChange:this.handleSelectColor,width:240,circleSize:24,circleSpacing:16,colors:this.defaultColors}),a.createElement("div",{className:"randomize-button-wrapper"},a.createElement("a",{className:"randomize-button "+(this.isProcessing?"disabled":""),role:"button",onClick:this.handleRandomize},a.createElement(C.c,null,"Randomize")))),this.state.hasBeenValidated&&a.createElement("div",{className:"input text"},this.state.errors.emptyCode&&a.createElement("div",{className:"empty-code error-message"},a.createElement(C.c,null,"The security token code should not be empty.")),this.state.errors.lengthCode&&a.createElement("div",{className:"not-good-length-code error-message"},a.createElement(C.c,null,"The security token code should be 3 characters long."))),a.createElement("div",{className:"submit-wrapper"},a.createElement("button",{className:`button primary medium ${e}`,type:"submit",disabled:this.isProcessing},a.createElement(C.c,null,"Save"))))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Why is this token needed?")),a.createElement("p",null,a.createElement(C.c,null,"This security token will be displayed when your passphrase is requested, so you can verify quickly the form is coming from passbolt."),"",a.createElement(C.c,null,"This will help protect you from ",a.createElement("a",{href:"https://en.wikipedia.org/wiki/Phishing",target:"_blank",rel:"noopener noreferrer"},"phishing attacks"),"."))))))}}wn.propTypes={context:d().object,userSettingsContext:d().object,dialogContext:d().any,actionFeedbackContext:d().object,t:d().func};const Sn=u(M(D(Ca((0,k.Z)("common")(wn)))));var xn=s(92592);class Nn extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers()}get defaultState(){return{showErrorDetails:!1}}bindHandlers(){this.handleErrorDetailsToggle=this.handleErrorDetailsToggle.bind(this)}get errorData(){let e="No data available.";return this.props.error?(e+="Message \n----------------------\n",e+=this.props.error.message,e+="\n\n",this.props.error.data&&(e+="Data \n----------------------\n",e+=JSON.stringify(this.props.error.data),e+="\n\n"),e+="Stack \n----------------------\n",e+=this.props.error.stack,e):e}handleErrorDetailsToggle(){this.toggleErrorDetails()}toggleErrorDetails(){this.setState({showErrorDetails:!this.state.showErrorDetails})}get message(){return this.props.error.message||"No message."}render(){return a.createElement("div",{className:"accordion error-details"},a.createElement("div",{className:"accordion-header"},a.createElement("a",{onClick:this.handleErrorDetailsToggle},a.createElement(de,{baseline:!0,name:this.state.showErrorDetails?"caret-down":"caret-right"}),a.createElement(C.c,null,"Error details"))),this.state.showErrorDetails&&a.createElement("div",{className:"accordion-content"},a.createElement("div",{className:"input text"},a.createElement("label",{htmlFor:"show-error-details",className:"visuallyhidden"},this.props.error.message),a.createElement("textarea",{id:"show-error-details",defaultValue:`${this.errorData}`,readOnly:!0}))))}}Nn.propTypes={error:d().object};const Rn=(0,k.Z)("common")(Nn);class In extends a.Component{render(){return a.createElement("span",{className:"svg-icon mobile-transfer"},a.createElement("svg",{width:"304",height:"250",viewBox:"0 0 304 250",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1573_970258)"},a.createElement("path",{d:"M176.131 148.383L178.446 143.014H0.681641V148.192C0.681641 153.31 4.8455 157.474 9.96332 157.474H179.708L176.131 148.384V148.383Z",fill:"black"}),a.createElement("path",{d:"M209.986 0.416504H34.0147C26.9447 0.416504 21.1929 6.16835 21.1929 13.2384V140.171H180.453L183.097 138.736L175.671 126.717L176.212 118.699C176.381 116.211 177.444 113.87 179.207 112.108C180.934 110.381 183.185 109.361 185.531 109.14L178.642 101.617C175.676 98.186 175.62 93.1567 178.508 89.6607C180.786 86.902 184.438 85.7254 187.856 86.5644V37.704C187.856 32.5743 192.03 28.4002 197.16 28.4002H222.808V13.2398C222.808 6.16982 217.056 0.417978 209.986 0.417978V0.416504Z",fill:"black"}),a.createElement("path",{d:"M129.893 39.2993H124.632V57.7152H129.893V39.2993Z",fill:"white"}),a.createElement("path",{d:"M114.107 39.2993H119.37V44.5616V68.2399H100.952V62.979H114.107V39.2993Z",fill:"white"}),a.createElement("path",{d:"M108.846 39.2993H90.4302V57.7152H108.846V39.2993Z",fill:"white"}),a.createElement("path",{d:"M108.846 84.0269H90.4302V102.443H108.846V84.0269Z",fill:"white"}),a.createElement("path",{d:"M108.846 78.7645H90.4302V62.979H95.691V73.5022H108.846V78.7645Z",fill:"white"}),a.createElement("path",{d:"M135.155 102.441H114.107L114.108 97.179H129.894V84.0254H135.155V102.441Z",fill:"white"}),a.createElement("path",{d:"M153.572 89.2877H145.679V97.1804H153.572V102.443H140.417V84.0269H153.572V89.2877Z",fill:"white"}),a.createElement("path",{d:"M153.572 78.763H135.155V68.2399H129.894V78.763H119.371V84.0254H124.633V89.2862H114.108V73.5007H124.633V62.9775H140.419V73.5007H153.572V78.763Z",fill:"white"}),a.createElement("path",{d:"M153.572 62.979H145.679V68.2413H153.572V62.979Z",fill:"white"}),a.createElement("path",{d:"M153.572 39.2993H135.155V57.7152H153.572V39.2993Z",fill:"white"}),a.createElement("path",{d:"M148.311 44.5615H140.418V52.4543H148.311V44.5615Z",fill:"black"}),a.createElement("path",{d:"M103.584 89.2876H95.6909V97.1803H103.584V89.2876Z",fill:"black"}),a.createElement("path",{d:"M103.584 44.5615H95.6909V52.4543H103.584V44.5615Z",fill:"black"}),a.createElement("path",{d:"M302.537 248.442L284.761 197.945V148.697L274.417 115.186L268.298 108.338L265.682 99.4283C264.942 96.9055 262.361 95.3956 259.8 95.9869C257.956 96.413 256.514 97.8491 256.082 99.6922L255.455 102.364V115.186L259.41 123.345L262.531 140.981L255.455 135.234",stroke:"var(--icon-color)",strokeWidth:"2.92532",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M243.965 248.442L241.343 230.29L204.042 176.79",stroke:"var(--icon-color)",strokeWidth:"2.92532",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M187.33 131.04L191.075 126.322V113.478L189.696 112.812C186.949 111.485 183.664 112.04 181.507 114.196C180.28 115.423 179.54 117.052 179.423 118.782L178.95 125.797L187.33 139.362",stroke:"var(--icon-color)",strokeWidth:"2.92532",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M191.075 91.1982L187.847 89.681C185.405 88.7845 182.664 89.5247 181.009 91.5299C179.105 93.836 179.142 97.1786 181.097 99.4404L191.075 110.334",stroke:"var(--icon-color)",strokeWidth:"2.92532",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M186.421 155.68L192.974 150.699L194.633 146.777C195.388 144.992 195.116 142.936 193.92 141.409C192.315 139.356 189.462 138.765 187.172 140.008L181.964 142.834L179.605 148.308L183.537 158.3L191.075 163.804",stroke:"var(--icon-color)",strokeWidth:"2.92532",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M249.286 31.4058H197.244C193.836 31.4058 191.075 34.1674 191.075 37.5749V139.538C192.17 139.825 193.179 140.461 193.92 141.409C195.116 142.936 195.389 144.992 194.633 146.777L192.974 150.699L191.075 152.143V170.621C191.075 174.028 193.836 176.79 197.244 176.79H249.286C252.694 176.79 255.455 174.028 255.455 170.621V37.5749C255.455 34.1674 252.694 31.4058 249.286 31.4058V31.4058Z",fill:"black"}),a.createElement("path",{d:"M249.286 31.4058H197.244C193.836 31.4058 191.075 34.1674 191.075 37.5749V139.538C192.17 139.825 193.179 140.461 193.92 141.409C195.116 142.936 195.389 144.992 194.633 146.777L192.974 150.699L191.075 152.143V170.621C191.075 174.028 193.836 176.79 197.244 176.79H249.286C252.694 176.79 255.455 174.028 255.455 170.621V37.5749C255.455 34.1674 252.694 31.4058 249.286 31.4058V31.4058Z",stroke:"white",strokeWidth:"0.836015",strokeMiterlimit:"10"}),a.createElement("path",{d:"M186.421 155.68L192.974 150.699L194.633 146.777C195.388 144.992 195.116 142.936 193.92 141.409C192.315 139.356 189.462 138.765 187.172 140.008L181.964 142.834L179.605 148.308L183.537 158.3",stroke:"var(--icon-color)",strokeWidth:"2.92532",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M204.351 61.8384H214.787V72.2746H204.351V61.8384ZM211.806 69.2932V64.8212H207.334V69.2932H211.806Z",fill:"white"}),a.createElement("path",{d:"M229.695 61.8384H240.131V72.2746H229.695V61.8384ZM237.15 69.2932V64.8212H232.678V69.2932H237.15Z",fill:"white"}),a.createElement("path",{d:"M204.351 87.1831H214.787V97.6193H204.351V87.1831ZM211.806 94.6365V90.1645H207.334V94.6365H211.806Z",fill:"white"}),a.createElement("path",{d:"M217.769 94.6365H226.714V87.1831H229.695V97.6193H217.769V94.6379V94.6365Z",fill:"white"}),a.createElement("path",{d:"M232.678 87.1826H240.132V90.164H235.66V94.636H240.132V97.6173H232.678V87.1812V87.1826Z",fill:"white"}),a.createElement("path",{d:"M204.351 75.2559H207.332V81.2186H214.786V84.1999H204.35V75.2544L204.351 75.2559Z",fill:"white"}),a.createElement("path",{d:"M217.769 81.2186H223.733V75.2559H232.678V81.2186H240.132V84.1999H229.695V78.2372H226.714V84.1999H220.751V87.1812H223.733V90.1626H217.769V81.2171V81.2186Z",fill:"white"}),a.createElement("path",{d:"M235.66 75.2559V78.2372H240.132V75.2559H235.66Z",fill:"white"}),a.createElement("path",{d:"M223.733 61.8384V72.2746H226.714V61.8384H223.733Z",fill:"white"}),a.createElement("path",{d:"M210.314 75.2559H217.769V61.8384H220.75V64.8197V78.2372H210.314V75.2559Z",fill:"white"}),a.createElement("path",{d:"M197.931 70.5114V58.3427C197.931 56.4009 199.505 54.8262 201.447 54.8262H213.616",stroke:"white",strokeWidth:"0.836015",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M230.866 54.8262H243.034C244.976 54.8262 246.551 56.4009 246.551 58.3427V70.5114",stroke:"white",strokeWidth:"0.836015",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M246.552 88.9448V101.113C246.552 103.055 244.977 104.63 243.035 104.63H230.867",stroke:"white",strokeWidth:"0.836015",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M213.616 104.632H201.447C199.505 104.632 197.931 103.057 197.931 101.115V88.9468",stroke:"white",strokeWidth:"0.836015",strokeMiterlimit:"10",strokeLinecap:"round"}),a.createElement("path",{d:"M178.446 143.013H0.681641V148.191C0.681641 153.309 4.8455 157.473 9.96332 157.473H179.708",stroke:"white",strokeWidth:"0.836015",strokeMiterlimit:"10"}),a.createElement("path",{d:"M222.808 28.3992V13.2403C222.808 6.1703 217.056 0.418457 209.986 0.418457H34.0147C26.9447 0.418457 21.1929 6.1703 21.1929 13.2403V140.172H180.453",stroke:"white",strokeWidth:"0.836015",strokeMiterlimit:"10"})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1573_970258"},a.createElement("rect",{width:"303.736",height:"249.905",fill:"white",transform:"translate(0.26416)"})))))}}const Dn=In;class Tn extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.timeout=void 0,this.request=0,this.bindHandlers()}get defaultState(){return{step:"start",page:0,processing:!1,qrCodes:void 0,debug:!0,error:void 0,showErrorDetails:!1,transferDto:void 0}}get user(){return this.context.loggedInUser}get translate(){return this.props.t}get domain(){return this.context.userSettings.getTrustedDomain()}bindHandlers(){this.handleClickStart=this.handleClickStart.bind(this),this.handleClickCancel=this.handleClickCancel.bind(this),this.handleClickDone=this.handleClickDone.bind(this)}async handleClickStart(){try{await this.toggleProcessing(),await this.createTransfer(),await this.toggleProcessing()}catch(e){return"UserAbortsOperationError"===e.name?this.handleTransferCancel():this.handleTransferError(e)}}async buildFirstQrCode(e,t,s){if(!e)throw new Error(this.translate("Server response is empty."));if(e.total_pages!==t||e.hash!==s){const a=new Error(this.translate("Server response does not match initial request."));throw a.data={transferDto:e,totalPages:t,hash:s},a}if(!e.authentication_token||!e.authentication_token.token)throw new Error(this.translate("Authentication token is missing from server response."));const a=this.getTransferMetadataDataAsString(e),n=this.stringToSlices(a,0);if(!n||0===n.length)throw new Error(this.translate("Sorry, it is not possible to proceed. The first QR code is empty."));if(n.length>1)throw new Error(this.translate("Sorry, it is not possible to proceed. The first QR code is too big."));return await this.getQrCode(n[0])}getTransferMetadataDataAsString(e){return JSON.stringify({transfer_id:e.id,user_id:this.user.id,domain:this.domain,total_pages:e.total_pages,hash:e.hash,authentication_token:e.authentication_token.token})}async getTransferDataAsString(){const e=await this.getFingerprint(),t=await this.getPrivateKey();return JSON.stringify({user_id:this.user.id,fingerprint:e,armored_key:t})}async getTransferHash(e){return await async function(e){if(!e||"string"!=typeof e)throw new Error("SHA-512 require a non empty string.");const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-512",t);return Array.from(new Uint8Array(s)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(e)}async buildQrCodes(e){const t=this.stringToSlices(e,1),s=[];for(let e=0;e<t.length;e++){const a=await this.getQrCode(t[e]);s.push(a)}return s}stringToSlices(e,t){const s=[],a=1462,n=Math.ceil(e.length/a);if(n>255)throw new Error("Cannot transfer the data, the private key is too big.");void 0===t&&(t=0);for(let r=0;r<n;r++){const n=t+r,i=1..toString(16),o=n.toString(16).padStart(2,"0"),l=new Uint8ClampedArray([i.charCodeAt(0),o.charCodeAt(0),o.charCodeAt(1)]),c=0===r?0:r*a;let m=0===r?a:a*(r+1);m=m>e.length?e.length:m;const d=e.slice(c,m),h=this.str2bytes(d);s[r]=Uint8ClampedArray.from([...l,...h])}return s}str2bytes(e){const t=new Uint8ClampedArray(e.length);for(let s=0,a=e.length;s<a;s++)t[s]=e.charCodeAt(s);return t}async getQrCode(e){try{const t=(new TextDecoder).decode(e);return await xn.toDataURL([{data:t,mode:"byte"}],{version:27,errorCorrectionLevel:"L",type:"image/jpeg",quality:1,margin:4})}catch(e){this.handleError(e)}}async getPrivateKey(){return await this.context.port.request("passbolt.keyring.get-private-key")}async getFingerprint(){const e=await this.context.port.request("passbolt.keyring.get-public-key-info-by-user",this.user.id);if(!e||!e.fingerprint)throw new Error("The user fingerprint is not set.");return e.fingerprint}async createTransfer(){const e=await this.getTransferDataAsString(),t=await this.getTransferHash(e),s=await this.buildQrCodes(e),a=s.length+1;try{const e={total_pages:a,hash:t},n=await this.context.port.request("passbolt.mobile.transfer.create",e),r=await this.buildFirstQrCode(n,a,t);s.unshift(r),this.setState({qrCodes:s,step:"in progress",page:0,transferDto:n},(()=>{this.setInterval()}))}catch(e){this.handleError(e)}}async getUpdatedTransfer(){let e;try{this.request=1,e=await this.context.port.request("passbolt.mobile.transfer.get",this.state.transferDto.id),this.request=0}catch(e){return void await this.handleTransferError(e)}if(e)switch(e.status){case"start":break;case"in progress":e.current_page!==this.state.page&&await this.handleTransferUpdated(e);break;case"complete":await this.handleTransferComplete();break;case"error":await this.handleTransferError();break;case"cancel":await this.handleTransferCancelled();break;default:await this.handleTransferError(new Error("Unsupported status"))}}async handleTransferUpdated(e){this.setState({transferDto:e,step:"in progress",page:e.current_page})}async handleTransferCancel(){await this.toggleProcessing(),this.clearInterval();try{if(this.state.transferDto&&"cancel"!==this.state.transferDto){const e={id:this.state.transferDto.id,status:"cancel"};await this.context.port.request("passbolt.mobile.transfer.update",e)}}catch(e){console.error(e)}this.setState(this.defaultState)}async handleTransferCancelled(){this.clearInterval();const e=this.defaultState;e.step="cancel",this.setState(e)}async handleTransferComplete(){this.clearInterval();const e=this.defaultState;e.step="complete",this.setState(e)}async handleTransferError(e){if(this.clearInterval(),!e){const t=this.translate("The transfer was cancelled because the other client returned an error.");e=new Error(t)}this.handleError(e)}componentWillUnmount(){this.clearInterval()}setInterval(){this.timeout=window.setInterval((()=>{0===this.request&&this.getUpdatedTransfer()}),333)}clearInterval(){this.timeout&&(window.clearInterval(this.timeout),this.timeout=null),this.request=0}async handleClickCancel(){this.handleTransferCancel()}async handleClickDone(){this.clearInterval(),this.setState(this.defaultState)}async toggleProcessing(){const e=this.state.processing;return new Promise((t=>{this.setState({processing:!e},t())}))}handleError(e){console.error(e),this.setState({step:"error",error:e})}getCurrentQrCodeSrc(){return void 0===this.state.qrCodes[this.state.page]?"":this.state.qrCodes[this.state.page]}render(){const e=this.state.processing?"processing":"";return a.createElement("div",{className:"grid grid-responsive-12 profile-mobile-transfer"},a.createElement("div",{className:"row"},"start"===this.state.step&&a.createElement(a.Fragment,null,a.createElement("div",{className:"profile col6 main-column mobile-transfer-step-start"},a.createElement("h3",null,a.createElement(C.c,null,"Welcome to the mobile app setup")),a.createElement("h4",{className:"no-border"},a.createElement(C.c,null,"Download the mobile app")),a.createElement("p",null,a.createElement(C.c,null,"Passbolt is available on AppStore & PlayStore")),a.createElement("a",{className:"app-store",href:"https://apps.apple.com/lv/app/passbolt-password-manager/id1569629432",target:"_blank",rel:"noopener noreferrer"}),a.createElement("a",{className:"play-store",href:"https://play.google.com/store/apps/details?id=com.passbolt.mobile.android",target:"_blank",rel:"noopener noreferrer"}),a.createElement("h4",null,a.createElement(C.c,null,"Transfer your account key")),a.createElement("div",{className:"transfer-account"},a.createElement(Dn,null),a.createElement("div",{className:"submit-wrapper"},a.createElement("p",null,a.createElement(C.c,null,"Click here to start once the mobile application is installed and opened on your phone and you are ready to scan QR codes.")),a.createElement("button",{type:"button",className:`button primary ${e}`,role:"button",onClick:this.handleClickStart},a.createElement(C.c,null,"Start"))))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Get started in 5 easy steps")),a.createElement("p",null,a.createElement(C.c,null,"1. Install the application from the store.")),a.createElement("p",null,a.createElement(C.c,null,"2. Open the application on your phone.")),a.createElement("p",null,a.createElement("strong",null,a.createElement(C.c,null,"3. Click start, here, in your browser."))),a.createElement("p",null,a.createElement(C.c,null,"4. Scan the QR codes with your phone.")),a.createElement("p",null,a.createElement(C.c,null,"5. And you are done!")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"document"}),a.createElement("span",null,a.createElement(C.c,null,"Read the documentation")))))),"in progress"===this.state.step&&a.createElement(a.Fragment,null,a.createElement("div",{className:"profile col6 main-column mobile-transfer-step-in-progress"},a.createElement("h3",null,a.createElement(C.c,null,"Transfer in progress...")),a.createElement("img",{id:"qr-canvas",style:{width:"325px",height:"325px"},src:this.getCurrentQrCodeSrc()}),a.createElement("div",{className:"submit-wrapper"},a.createElement("button",{className:`button cancel ${e}`,type:"button",onClick:this.handleClickCancel},a.createElement(C.c,null,"Cancel")))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Get started in 5 easy steps")),a.createElement("p",null,a.createElement(C.c,null,"1. Install the application from the store.")),a.createElement("p",null,a.createElement(C.c,null,"2. Open the application on your phone.")),a.createElement("p",null,a.createElement(C.c,null,"3. Click start, here, in your browser.")),a.createElement("p",null,a.createElement(C.c,null,a.createElement("strong",null,"4. Scan the QR codes with your phone."))),a.createElement("p",null,a.createElement(C.c,null,"5. And you are done!")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"document"}),a.createElement("span",null,a.createElement(C.c,null,"Read the documentation")))))),"complete"===this.state.step&&a.createElement(a.Fragment,null,a.createElement("div",{className:"profile main-column col6 mobile-transfer-step-complete"},a.createElement("h3",null,a.createElement(C.c,null,"Transfer complete!")),a.createElement("div",{className:"feedback-card"},a.createElement(za,{name:"success"}),a.createElement("div",{className:"additional-information"},a.createElement("p",null,a.createElement(C.c,null,"You are now ready to continue the setup on your phone."),"",a.createElement(C.c,null,"You can restart this process if you want to configure another phone.")),a.createElement("div",{className:"submit-wrapper"},a.createElement("button",{className:`button primary ${e}`,type:"button",onClick:this.handleClickDone},a.createElement(C.c,null,"Configure another phone")))))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Get started in 5 easy steps")),a.createElement("p",null,a.createElement(C.c,null,"1. Install the application from the store.")),a.createElement("p",null,a.createElement(C.c,null,"2. Open the application on your phone.")),a.createElement("p",null,a.createElement(C.c,null,"3. Click start, here, in your browser.")),a.createElement("p",null,a.createElement(C.c,null,"4. Scan the QR codes with your phone.")),a.createElement("p",null,a.createElement(C.c,null,a.createElement("strong",null,"5. And you are done!"))),a.createElement("a",{className:"button",href:"https://help.passbolt.com/",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"document"}),a.createElement("span",null,a.createElement(C.c,null,"Read the documentation")))))),"cancel"===this.state.step&&a.createElement(a.Fragment,null,a.createElement("div",{className:"profile main-column col6 mobile-transfer-step-error"},a.createElement("h3",null,a.createElement(C.c,null,"The operation was cancelled.")),a.createElement("div",{className:"feedback-card"},a.createElement(za,{name:"error"}),a.createElement("div",{className:"additional-information"},a.createElement("p",null,a.createElement(C.c,null,"If there was an issue during the transfer, either the operation was cancelled on the mobile side, or the authentication token expired."),"",a.createElement(C.c,null,"Please try again later or contact your administrator.")),a.createElement("div",{className:"submit-wrapper"},a.createElement("button",{className:`button primary ${e}`,type:"button",onClick:this.handleClickStart},a.createElement(C.c,null,"Restart")))))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Need some help?")),a.createElement("p",null,a.createElement(C.c,null,"Contact your administrator with details about what went wrong.")),a.createElement("p",null,a.createElement(C.c,null,"Alternatively you can also get in touch with support on community forum or via the paid support channels.")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"document"}),a.createElement("span",null,a.createElement(C.c,null,"Help site")))))),"error"===this.state.step&&a.createElement(a.Fragment,null,a.createElement("div",{className:"profile col6 main-column mobile-transfer-step-error"},a.createElement("h3",null,a.createElement(C.c,null,"Oops, something went wrong")),a.createElement("div",{className:"feedback-card"},a.createElement(za,{name:"error"}),a.createElement("div",{className:"additional-information"},a.createElement("p",null,a.createElement(C.c,null,"There was an issue during the transfer. Please try again later or contact your administrator.")),a.createElement("div",{className:"submit-wrapper"},a.createElement("button",{className:`button primary ${e}`,type:"button",onClick:this.handleClickStart},a.createElement(C.c,null,"Restart"))))),a.createElement(Rn,{error:this.state.error})),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Need some help?")),a.createElement("p",null,a.createElement(C.c,null,"Contact your administrator with the error details.")),a.createElement("p",null,a.createElement(C.c,null,"Alternatively you can also get in touch with support on community forum or via the paid support channels.")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"document"}),a.createElement("span",null,a.createElement(C.c,null,"Help site"))))))))}}Tn.contextType=g,Tn.propTypes={dialogContext:d().object,userSettingsContext:d().object,t:d().func,i18n:d().any};const An=M(Ca((0,k.Z)("common")(Tn)));class Pn extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{status:null,processing:!1}}bindCallbacks(){this.handleSubmit=this.handleSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.close=this.close.bind(this)}componentDidMount(){"opt-in"===this.props.organizationPolicy.policy?this.setState({status:"rejected"}):this.setState({status:"approved"})}toggleProcessing(){this.setState({processing:!this.state.processing})}get isProcessing(){return this.state.processing}async handleSubmit(e){e.preventDefault(),this.toggleProcessing();const t={status:this.state.status};try{await this.props.context.port.request("passbolt.account-recovery.save-user-settings",t),this.props.accountRecoveryContext.setUserAccountRecoveryStatus(this.state.status),this.props.actionFeedbackContext.displaySuccess(this.translate("The account recovery subscription setting has been updated.")),this.close()}catch(e){if(this.toggleProcessing(),"UserAbortsOperationError"===e.name)return;console.error(e),this.handleError(e)}}close(){this.props.onClose(),"/app/settings/account-recovery"!==this.props.location.pathname&&this.props.history.push("/app/settings/account-recovery")}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}canReject(){return"mandatory"!==this.props.organizationPolicy.policy}formatFingerprint(e){const t=(e=e||"").toUpperCase().replace(/.{4}/g,"$& ");return a.createElement(a.Fragment,null,t.substr(0,24),a.createElement("br",null),t.substr(25))}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}get requestor(){return this.props.organizationPolicy.creator}get requestorName(){return`${this.requestor.profile.first_name} ${this.requestor.profile.last_name}`}get date(){return this.props.organizationPolicy.modified}get type(){return"mandatory"===this.props.organizationPolicy.policy?"Mandatory":"opt-out"===this.props.organizationPolicy.policy?"Recommended":"Optional"}get translate(){return this.props.t}render(){return a.createElement(be,{title:`${this.translate("Recovery")} (${this.type})`,onClose:this.close,disabled:this.state.processing,className:"recovery-account-policy-dialog"},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"form-content"},a.createElement("p",null,a.createElement(C.c,null,"It is possible and recommended to share securely your recovery kit with your organization recovery contacts."),"",a.createElement(C.c,null,"They will be able to help you in case you lose it.")),a.createElement("ul",null,a.createElement("li",{className:"usercard-detailed-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement(ge,{message:this.formatFingerprint(this.requestor.gpgkey.fingerprint),direction:"bottom"},a.createElement("span",{className:"name-with-tooltip"},`${this.requestorName} (${this.translate("admin")})`)),"",a.createElement("span",{className:"name"},a.createElement(C.c,null,"requested this operation")),a.createElement("div",{className:"subinfo light"},this.formatDateTimeAgo(this.date)))),a.createElement(xe,{user:this.requestor,baseUrl:this.props.context.userSettings.getTrustedDomain()}))),a.createElement("div",{className:"radiolist-alt"},this.canReject()&&a.createElement("div",{className:"input radio "+("rejected"===this.state.status?"checked":"")},a.createElement("input",{type:"radio",value:"rejected",onChange:this.handleInputChange,name:"status",checked:"rejected"===this.state.status,id:"statusRecoverAccountReject",disabled:this.isProcessing}),a.createElement("label",{htmlFor:"statusRecoverAccountReject"},a.createElement("span",{className:"name"},a.createElement(C.c,null,"Reject")),a.createElement("span",{className:"info"},a.createElement(C.c,null,"I do not want to share a copy of my private key & passphrase with my organization recovery contacts.")))),a.createElement("div",{className:"input radio "+("approved"===this.state.status?"checked":"")},a.createElement("input",{type:"radio",value:"approved",onChange:this.handleInputChange,name:"status",checked:"approved"===this.state.status,id:"statusRecoverAccountAccept",disabled:this.isProcessing}),a.createElement("label",{htmlFor:"statusRecoverAccountAccept"},a.createElement("span",{className:"name"},a.createElement(C.c,null,"Accept")),a.createElement("span",{className:"info"},a.createElement(C.c,null,"I agree to share securely a copy of my private key & passphrase with my organization recovery contacts.")))))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.passbolt.com/faq/start/account-recovery/subscribe",className:"button button-left "+(this.isProcessing?"disabled":""),disabled:this.isProcessing},a.createElement(C.c,null,"Learn more")),a.createElement(Ce,{disabled:this.isProcessing,onClick:this.close}),a.createElement(Ee,{value:this.translate("Save"),disabled:this.isProcessing,processing:this.isProcessing}))))}}Pn.propTypes={context:d().any,accountRecoveryContext:d().any,dialogContext:d().object,organizationPolicy:d().object,actionFeedbackContext:d().object,onClose:d().func,history:d().object,location:d().object,t:d().func};const Un=(0,c.EN)(u(D(Dt(M((0,k.Z)("common")(Pn))))));class _n extends a.Component{async componentDidMount(){await this.handleRoute()}async handleRoute(){if(this.props.accountRecoveryContext.getPolicy()!==Rt.POLICY_DISABLED)return this.props.accountRecoveryContext.getUserAccountRecoverySubscriptionStatus()===Rt.STATUS_APPROVED?(this.showAlreadyEnrolledFeedback(),void this.redirectToSettingsPage()):void this.props.dialogContext.open(Un,{organizationPolicy:this.props.accountRecoveryContext.getOrganizationPolicy()});this.redirectToSettingsPage()}async showAlreadyEnrolledFeedback(){await this.props.actionFeedbackContext.displaySuccess(this.props.t("You already enrolled to the account recovery program"))}redirectToSettingsPage(){this.props.history.push("/app/settings/account-recovery")}render(){return null}}_n.propTypes={dialogContext:d().any,accountRecoveryContext:d().object,history:d().object,actionFeedbackContext:d().any,t:d().func};const Ln=(0,c.EN)(M(Dt(D((0,k.Z)("common")(_n)))));class Fn extends a.Component{constructor(e){super(e),this.bindCallbacks()}async componentDidMount(){await this.props.accountRecoveryContext.loadAccountRecoveryPolicy()}bindCallbacks(){this.handleReviewClick=this.handleReviewClick.bind(this)}hasNotApprovedStatus(){return"approved"!==this.props.accountRecoveryContext.status}formatFingerprint(e){return e?e.toUpperCase().replace(/.{4}(?=.)/g,"$& "):""}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}isStatusApproved(){return"approved"===this.props.accountRecoveryContext.status}handleReviewClick(){this.props.dialogContext.open(Un,{organizationPolicy:this.props.accountRecoveryContext.getOrganizationPolicy()})}get requestor(){return this.props.accountRecoveryContext.getRequestor()}get requestorFingerprint(){const e=this.requestor;return e&&e.gpgkey.fingerprint}get requestorName(){const e=this.requestor;return e&&`${e.profile.first_name} ${e.profile.last_name}`}get requestedDate(){return this.props.accountRecoveryContext.getRequestedDate()}get isAccountRecoveryFeatureEnabled(){return"disabled"!==this.policy}get policy(){return this.props.accountRecoveryContext.getPolicy()}get translate(){return this.props.t}render(){return a.createElement(a.Fragment,null,this.props.context.loggedInUser&&this.props.accountRecoveryContext.getOrganizationPolicy()&&a.createElement(c.AW,{exact:!0,path:"/app/settings/account-recovery/edit",component:Ln}),a.createElement("div",{className:"grid grid-responsive-12"},a.createElement("div",{className:"row"},this.isAccountRecoveryFeatureEnabled&&a.createElement("div",{className:"col8 account-recovery-profile main-column"},a.createElement("h3",null,a.createElement(C.c,null,"Account Recovery")),a.createElement("p",null,a.createElement(C.c,null,"It is possible to share securely your recovery kit with the administrator."),"",a.createElement(C.c,null,"They will be able to help you in case you lose it."),"",a.createElement(C.c,null,"Otherwise, you may lose access to your data.")),a.createElement("div",{className:"account-recovery-status"},a.createElement("div",{className:"account-recovery-review"},a.createElement("p",{className:"status-wrapper"},a.createElement(C.c,null,"Status"),":",a.createElement("span",{className:`account-recovery-hints ${this.props.accountRecoveryContext.status}`}),a.createElement("span",{className:"status"},this.props.accountRecoveryContext.status)),this.hasNotApprovedStatus()&&!this.isStatusApproved()&&a.createElement("button",{type:"button",className:"button primary",onClick:this.handleReviewClick},a.createElement(C.c,null,"Review"))),this.hasNotApprovedStatus()&&a.createElement("ul",null,a.createElement("li",{className:"usercard-detailed-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",null,a.createElement(ge,{message:this.formatFingerprint(this.requestorFingerprint),direction:"bottom"},a.createElement("span",{className:"name-with-tooltip"},`${this.requestorName} (${this.translate("admin")})`)),"",a.createElement("span",{className:"name"},a.createElement(C.c,null,"requested this operation"))),a.createElement("div",{className:"subinfo light"},this.formatDateTimeAgo(this.requestedDate)))),a.createElement(xe,{user:this.requestor,baseUrl:this.props.context.userSettings.getTrustedDomain()}))))),!this.isAccountRecoveryFeatureEnabled&&a.createElement("div",{className:"col8 account-recovery-profile main-column"},a.createElement("h3",null,a.createElement(C.c,null,"Account Recovery")),a.createElement("h4",{className:"no-border"},a.createElement(C.c,null,"Sorry the account recovery feature is not enabled for this organization.")),a.createElement("p",null,a.createElement(C.c,null,"Please contact your administrator to enable the account recovery feature."))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Need some help?")),a.createElement("p",null,a.createElement(C.c,null,"For more information about account recovery, checkout the dedicated page on the help website.")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/faq/start/account-recovery/subscribe",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"life-ring"}),a.createElement("span",null,a.createElement(C.c,null,"Read the documentation"))))))))}}Fn.propTypes={context:d().any,accountRecoveryContext:d().any,date:d().string,t:d().func,dialogContext:d().object};const Mn=u(Dt(M((0,k.Z)("common")(Fn))));class On extends a.Component{get canIUseThemeCapability(){return this.props.context.siteSettings&&this.props.context.siteSettings.canIUse("accountSettings")}get canIUseMobileTransferCapability(){return this.props.context.siteSettings&&this.props.context.siteSettings.canIUse("mobile")}get canIUseAccountRecoveryCapability(){return this.props.context.siteSettings&&this.props.context.siteSettings.canIUse("accountRecovery")}get isMfaChoiceRequired(){return this.props.mfaContext.isMfaChoiceRequired()}render(){const{path:e}=this.props.match;return a.createElement("div",null,a.createElement("div",{className:"header second"},a.createElement(ns,null),a.createElement(Fs,{disabled:!0}),a.createElement(Cs,{baseUrl:this.props.context.userSettings.getTrustedDomain(),user:this.props.context.loggedInUser})),a.createElement("div",{className:"header third"},a.createElement(Pa,null)),a.createElement("div",{className:"panel main"},a.createElement("div",{className:"panel left"},a.createElement(ua,{hasPendingMfaChoice:this.isMfaChoiceRequired,hasPendingAccountRecoveryChoice:this.props.accountRecoveryContext.isAccountRecoveryChoiceRequired()})),a.createElement("div",{className:"panel middle"},a.createElement(Ia,null),a.createElement(c.AW,{path:`${e}/profile`,component:Sa}),a.createElement(c.AW,{path:`${e}/passphrase`,component:Cn}),a.createElement(c.AW,{path:`${e}/security-token`,component:Sn}),this.canIUseThemeCapability&&a.createElement(c.AW,{path:`${e}/theme`,component:Na}),this.canIUseMobileTransferCapability&&a.createElement(c.AW,{path:`${e}/mobile`,component:An}),this.canIUseAccountRecoveryCapability&&a.createElement(c.AW,{path:`${e}/account-recovery`,component:Mn}),a.createElement(c.AW,{path:`${e}/keys`,component:_a}))))}}On.propTypes={context:d().any,match:d().any,accountRecoveryContext:d().object,mfaContext:d().object};const jn=u(Dt(Es((0,c.EN)(On))));class qn extends a.Component{constructor(e){super(e),this.initEventHandlers(),this.createReferences()}initEventHandlers(){this.handleCloseClick=this.handleCloseClick.bind(this)}createReferences(){this.loginLinkRef=a.createRef()}handleCloseClick(){this.goToLogin()}goToLogin(){this.loginLinkRef.current.click()}get loginUrl(){let e=this.props.context.userSettings&&this.props.context.userSettings.getTrustedDomain();return e=e||this.props.context.trustedDomain,`${e}/auth/login`}render(){return a.createElement(be,{title:this.props.t("Session Expired"),onClose:this.handleCloseClick,className:"session-expired-dialog"},a.createElement("div",{className:"form-content"},a.createElement("p",null,a.createElement(C.c,null,"Your session has expired, you need to sign in."))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement("a",{ref:this.loginLinkRef,href:this.loginUrl,className:"primary button",target:"_parent",role:"button",rel:"noopener noreferrer"},a.createElement(C.c,null,"Sign in"))))}}qn.propTypes={context:d().any,t:d().func};const Wn=u((0,c.EN)((0,k.Z)("common")(qn)));class zn extends a.Component{constructor(e){super(e),this.bindCallbacks(),this.scheduledCheckIsAuthenticatedTimeout=null}bindCallbacks(){this.handleSessionExpiredEvent=this.handleSessionExpiredEvent.bind(this)}componentDidMount(){this.scheduleCheckIsAuthenticated()}componentWillUnmount(){clearTimeout(this.scheduledCheckIsAuthenticatedTimeout)}scheduleCheckIsAuthenticated(){this.scheduledCheckIsAuthenticatedTimeout=setTimeout((async()=>{await this.checkIsAuthenticated()?this.scheduleCheckIsAuthenticated():this.handleSessionExpiredEvent()}),6e4)}async checkIsAuthenticated(){return await this.props.context.onCheckIsAuthenticatedRequested()}handleSessionExpiredEvent(){this.props.dialogContext.open(Wn)}render(){return a.createElement(a.Fragment,null)}}zn.propTypes={context:d().any,dialogContext:d().any};const Gn=u(M(zn));class Hn extends a.Component{get privacyUrl(){return this.props.context.siteSettings.privacyLink}get creditsUrl(){return"https://www.passbolt.com/credits"}get unsafeUrl(){return"https://help.passbolt.com/faq/hosting/why-unsafe"}get termsUrl(){return this.props.context.siteSettings.termsLink}get versions(){const e=[],t=this.props.context.siteSettings.version;return t&&e.push(t),this.props.context.extensionVersion&&e.push(this.props.context.extensionVersion),e.join(" / ")}get isUnsafeMode(){const e=this.props.context.siteSettings.debug,t=this.props.context.siteSettings.url.startsWith("http://");return e||t}render(){return a.createElement("footer",null,a.createElement("div",{className:"footer"},a.createElement("ul",{className:"footer-links"},this.isUnsafeMode&&a.createElement("li",{className:"error-message"},a.createElement("a",{href:this.unsafeUrl,target:"_blank",rel:"noopener noreferrer"},a.createElement(C.c,null,"Unsafe mode"))),this.termsUrl&&a.createElement("li",null,a.createElement("a",{href:this.termsUrl,target:"_blank",rel:"noopener noreferrer"},a.createElement(C.c,null,"Terms"))),this.privacyUrl&&a.createElement("li",null,a.createElement("a",{href:this.privacyUrl,target:"_blank",rel:"noopener noreferrer"},a.createElement(C.c,null,"Privacy"))),a.createElement("li",null,a.createElement("a",{href:this.creditsUrl,target:"_blank",rel:"noopener noreferrer"},a.createElement(C.c,null,"Credits"))),a.createElement("li",null,this.versions&&a.createElement(ge,{message:this.versions,direction:"left"},a.createElement("a",{href:this.creditsUrl,target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"heart-o"}))),!this.versions&&a.createElement("a",{href:this.creditsUrl,target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"heart-o"}))))))}}Hn.propTypes={context:d().any};const Vn=u((0,k.Z)("common")(Hn));class Kn extends a.Component{componentDidMount(){this.handleRouteChanged()}handleRouteChanged(){this.props.history.listen((e=>{this.props.context.port.emit("passbolt.app.route-changed",e.pathname)}))}render(){return a.createElement(a.Fragment,null)}}Kn.propTypes={context:d().any,history:d().object};const Bn=u((0,c.EN)(Kn));function $n(){return $n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},$n.apply(this,arguments)}const Zn=a.createContext({selectedAdministration:null,can:{save:!1},must:{save:!1,editSubscriptionKey:!1,refreshSubscriptionKey:!1},administrationWorkspaceAction:null,setDisplayAdministrationWorkspaceAction:()=>{},resetDisplayAdministrationWorkspaceAction:()=>{},onUpdateSubscriptionKeyRequested:()=>{},onSaveEnabled:()=>{},onMustSaveSettings:()=>{},onMustEditSubscriptionKey:()=>{},onMustRefreshSubscriptionKey:()=>{},onResetActionsSettings:()=>{}});class Yn extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{selectedAdministration:Qn.NONE,can:{save:!1},must:{save:!1,editSubscriptionKey:!1,refreshSubscriptionKey:!1},administrationWorkspaceAction:()=>a.createElement(a.Fragment,null),setDisplayAdministrationWorkspaceAction:this.setDisplayAdministrationWorkspaceAction.bind(this),resetDisplayAdministrationWorkspaceAction:this.resetDisplayAdministrationWorkspaceAction.bind(this),onUpdateSubscriptionKeyRequested:this.onUpdateSubscriptionKeyRequested.bind(this),onSaveEnabled:this.handleSaveEnabled.bind(this),onMustSaveSettings:this.handleMustSaveSettings.bind(this),onMustEditSubscriptionKey:this.handleMustEditSubscriptionKey.bind(this),onMustRefreshSubscriptionKey:this.handleMustRefreshSubscriptionKey.bind(this),onResetActionsSettings:this.handleResetActionsSettings.bind(this)}}componentDidMount(){this.handleAdministrationMenuRouteChange()}async componentDidUpdate(e){await this.handleRouteChange(e.location)}async handleSaveEnabled(){await this.setState({can:{...this.state.can,save:!0}})}async handleMustSaveSettings(){await this.setState({must:{...this.state.must,save:!0}})}async handleMustEditSubscriptionKey(){await this.setState({must:{...this.state.must,editSubscriptionKey:!0}})}async handleMustRefreshSubscriptionKey(){await this.setState({must:{...this.state.must,refreshSubscriptionKey:!0}})}async handleResetActionsSettings(){await this.setState({must:{save:!1,test:!1,synchronize:!1,editSubscriptionKey:!1,refreshSubscriptionKey:!1}})}async handleRouteChange(e){this.props.location.key!==e.key&&await this.handleAdministrationMenuRouteChange()}async handleAdministrationMenuRouteChange(){const e=this.props.location.pathname.includes("mfa"),t=this.props.location.pathname.includes("mfa-policy"),s=this.props.location.pathname.includes("users-directory"),a=this.props.location.pathname.includes("email-notification"),n=this.props.location.pathname.includes("subscription"),r=this.props.location.pathname.includes("internationalization"),i=this.props.location.pathname.includes("account-recovery"),o=this.props.location.pathname.includes("smtp-settings"),l=this.props.location.pathname.includes("self-registration"),c=this.props.location.pathname.includes("sso");let m;t?m=Qn.MFA_POLICY:e?m=Qn.MFA:s?m=Qn.USER_DIRECTORY:a?m=Qn.EMAIL_NOTIFICATION:n?m=Qn.SUBSCRIPTION:r?m=Qn.INTERNATIONALIZATION:i?m=Qn.ACCOUNT_RECOVERY:o?m=Qn.SMTP_SETTINGS:l?m=Qn.SELF_REGISTRATION:c&&(m=Qn.SSO),await this.setState({selectedAdministration:m,can:{save:!1,test:!1,synchronize:!1},must:{save:!1,test:!1,synchronize:!1,editSubscriptionKey:!1,refreshSubscriptionKey:!1}})}setDisplayAdministrationWorkspaceAction(e){this.setState({administrationWorkspaceAction:e})}resetDisplayAdministrationWorkspaceAction(){this.setState({administrationWorkspaceAction:()=>a.createElement(a.Fragment,null)})}async onUpdateSubscriptionKeyRequested(e){return this.props.context.port.request("passbolt.subscription.update",e)}render(){return a.createElement(Zn.Provider,{value:this.state},this.props.children)}}Yn.displayName="AdministrationWorkspaceContextProvider",Yn.propTypes={context:d().object,children:d().any,location:d().object,match:d().object,history:d().object,loadingContext:d().object};const Jn=(0,c.EN)(u(H(Yn)));function Xn(e){return class extends a.Component{render(){return a.createElement(Zn.Consumer,null,(t=>a.createElement(e,$n({administrationWorkspaceContext:t},this.props))))}}}const Qn={NONE:"NONE",MFA:"MFA",MFA_POLICY:"MFA-POLICY",USER_DIRECTORY:"USER-DIRECTORY",EMAIL_NOTIFICATION:"EMAIL-NOTIFICATION",SUBSCRIPTION:"SUBSCRIPTION",INTERNATIONALIZATION:"INTERNATIONALIZATION",ACCOUNT_RECOVERY:"ACCOUNT-RECOVERY",SMTP_SETTINGS:"SMTP-SETTINGS",SELF_REGISTRATION:"SELF-REGISTRATION",SSO:"SSO"};function er(){return er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},er.apply(this,arguments)}const tr=a.createContext({announcements:[],show:()=>{},close:()=>{}});class sr extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{announcements:[],show:(e,t)=>{const s=(0,x.Z)();return this.setState({announcements:[...this.state.announcements,{key:s,Announcement:e,AnnouncementProps:t}]}),s},close:async e=>await this.setState({announcements:this.state.announcements.filter((t=>e!==t.key))})}}render(){return a.createElement(tr.Provider,{value:this.state},this.props.children)}}function ar(e){return class extends a.Component{render(){return a.createElement(tr.Consumer,null,(t=>a.createElement(e,er({announcementContext:t},this.props))))}}}function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},nr.apply(this,arguments)}sr.displayName="AnnouncementContextProvider",sr.propTypes={children:d().any};class rr extends a.Component{constructor(e){super(e),this.bindCallback()}bindCallback(){this.close=this.close.bind(this)}async close(e){this.props.announcementContext.close(e)}render(){return a.createElement(a.Fragment,null,this.props.announcementContext.announcements.map((({key:e,Announcement:t,AnnouncementProps:s})=>a.createElement(t,nr({key:e,onClose:()=>this.close(e)},s)))),this.props.children)}}rr.propTypes={announcementContext:d().any,children:d().any};const ir=ar(rr);class or extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleClose=this.handleClose.bind(this)}handleClose(){this.props.onClose()}render(){return a.createElement("div",{className:`${this.props.className} announcement`},a.createElement("div",{className:"announcement-content"},this.props.canClose&&a.createElement("a",{className:"announcement-close dialog-close button button-transparent",onClick:this.handleClose,role:"button"},a.createElement(de,{name:"close"}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"Close"))),this.props.children))}}or.propTypes={children:d().node,className:d().string,canClose:d().bool,onClose:d().func};const lr=(0,k.Z)("common")(or);class cr extends a.Component{formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.props.t("Just now"):t.toRelative({locale:this.props.context.locale})}render(){return a.createElement(lr,{className:"subscription",onClose:this.props.onClose,canClose:!0},a.createElement("p",null,a.createElement(C.c,null,"Warning:"),"",a.createElement(C.c,null,"your subscription key will expire")," ",this.formatDateTimeAgo(this.props.expiry),".",a.createElement("a",{onClick:this.props.navigationContext.onGoToAdministrationSubscriptionRequested},a.createElement(C.c,null,"Manage Subscription"))))}}cr.propTypes={context:d().any,expiry:d().string,navigationContext:d().any,onClose:d().func,t:d().func};const mr=u(v(ar((0,k.Z)("common")(cr))));class dr extends a.Component{render(){return a.createElement(lr,{className:"subscription",onClose:this.props.onClose,canClose:!1},a.createElement("p",null,a.createElement(C.c,null,"Warning:"),"",a.createElement(C.c,null,"your subscription key has expired. The stability of the application is at risk."),a.createElement("a",{onClick:this.props.navigationContext.onGoToAdministrationSubscriptionRequested},a.createElement(C.c,null,"Manage Subscription"))))}}dr.propTypes={navigationContext:d().any,onClose:d().func,i18n:d().any};const hr=v(ar((0,k.Z)("common")(dr)));class pr extends a.Component{render(){return a.createElement(lr,{className:"subscription",onClose:this.props.onClose,canClose:!1},a.createElement("p",null,a.createElement(C.c,null,"Warning:"),"",a.createElement(C.c,null,"your subscription key is not valid. The stability of the application is at risk."),a.createElement("a",{onClick:this.props.navigationContext.onGoToAdministrationSubscriptionRequested},a.createElement(C.c,null,"Manage Subscription"))))}}pr.propTypes={navigationContext:d().any,onClose:d().func,i18n:d().any};const ur=v(ar((0,k.Z)("common")(pr)));class gr extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleAnnouncementSubscriptionEvent=this.handleAnnouncementSubscriptionEvent.bind(this)}componentDidMount(){this.handleAnnouncementSubscriptionEvent()}componentDidUpdate(e){this.handleRefreshSubscriptionAnnouncement(e.context.refreshSubscriptionAnnouncement)}async handleRefreshSubscriptionAnnouncement(e){this.props.context.refreshSubscriptionAnnouncement!==e&&this.props.context.refreshSubscriptionAnnouncement&&(await this.handleAnnouncementSubscriptionEvent(),this.props.context.setContext({refreshSubscriptionAnnouncement:null}))}async handleAnnouncementSubscriptionEvent(){this.hideSubscriptionAnnouncement();try{const e=await this.props.context.onGetSubscriptionKeyRequested();this.isSubscriptionGoingToExpire(e.expiry)&&this.props.announcementContext.show(mr,{expiry:e.expiry})}catch(e){"PassboltSubscriptionError"===e.name?this.props.announcementContext.show(hr):this.props.announcementContext.show(ur)}}hideSubscriptionAnnouncement(){const e=[mr,hr,ur];this.props.announcementContext.announcements.forEach((t=>{e.some((e=>e===t.Announcement))&&this.props.announcementContext.close(t.key)}))}isSubscriptionGoingToExpire(e){return B.ou.fromISO(e)<B.ou.now().plus({days:30})}render(){return a.createElement(a.Fragment,null)}}gr.propTypes={context:d().any,announcementContext:d().any};const fr=u(ar(gr)),br=(e,t)=>t.split(".").reduce(((e,t)=>void 0===e?e:e[t]),e);class yr{constructor(e){this.settings=e}canIUse(e){let t=!1;const s=`passbolt.plugins.${e}`,a=br(this.settings,s)||null;if(a&&"object"==typeof a){const e=br(a,"enabled");void 0!==e&&!0!==e||(t=!0)}return t}getPluginSettings(e){const t=`passbolt.plugins.${e}`;return br(this.settings,t)}getRememberMeOptions(){return(this.getPluginSettings("rememberMe")||{}).options||{}}get hasRememberMeUntilILogoutOption(){return void 0!==(this.getRememberMeOptions()||{})[-1]}getServerTimezone(){return br(this.settings,"passbolt.app.server_timezone")}get termsLink(){const e=br(this.settings,"passbolt.legal.terms.url");return!!e&&V(e)}get privacyLink(){const e=br(this.settings,"passbolt.legal.privacy_policy.url");return!!e&&V(e)}get registrationPublic(){return!0===br(this.settings,"passbolt.registration.public")}get debug(){return!0===br(this.settings,"app.debug")}get url(){return br(this.settings,"app.url")||""}get version(){return br(this.settings,"app.version.number")}get locale(){return br(this.settings,"app.locale")||yr.DEFAULT_LOCALE.locale}async setLocale(e){this.settings.app.locale=e}get supportedLocales(){return br(this.settings,"passbolt.plugins.locale.options")||yr.DEFAULT_SUPPORTED_LOCALES}get generatorConfiguration(){return br(this.settings,"passbolt.plugins.generator.configuration")}static get DEFAULT_SUPPORTED_LOCALES(){return[yr.DEFAULT_LOCALE]}static get DEFAULT_LOCALE(){return{locale:"en-UK",label:"English"}}}const Er={PASSWORD_STRING:"password-string",PASSWORD_AND_DESCRIPTION:"password-and-description"};class vr{constructor(e,t){this.settings=e||!1,Array.isArray(t)?this.resourceTypes=t:this.resourceTypes=[]}get DEFAULT_RESOURCE_TYPES_SLUGS(){return Er}isLegacyResourceTypeEnabled(){return this.isResourceTypeEnabled(this.DEFAULT_RESOURCE_TYPES_SLUGS.PASSWORD_STRING)}isEncryptedDescriptionEnabled(){return this.isResourceTypeEnabled(this.DEFAULT_RESOURCE_TYPES_SLUGS.PASSWORD_AND_DESCRIPTION)}isResourceTypeEnabled(e){return!!this.areResourceTypesEnabled()&&this.resourceTypes.some((t=>t.slug===e))}areResourceTypesEnabled(){return!(!this.settings||!this.settings.canIUse("resourceTypes"))&&!(!Array.isArray(this.resourceTypes)||!this.resourceTypes)&&this.resourceTypes.length>0}mustEncryptDescription(e){return!(!this.areResourceTypesEnabled()||void 0===e)&&(!(this.isLegacyResourceTypeEnabled()||!this.isEncryptedDescriptionEnabled())||!(this.isLegacyResourceTypeEnabled()&&!this.isEncryptedDescriptionEnabled())&&this.assertResourceTypeIdHasEncryptedDescription(e))}findResourceTypeIdBySlug(e){if(!this.areResourceTypesEnabled())return;const t=this.resourceTypes.find((t=>t.slug===e));return t&&t.id?t.id:void 0}findResourceTypeSlugById(e){if(!this.areResourceTypesEnabled())return;const t=this.resourceTypes.find((t=>t.id===e));return t&&t.slug?t.slug:void 0}assertResourceTypeSlugById(e,t){return!(!e||!t)&&this.findResourceTypeSlugById(e)===t}assertResourceTypeIdHasEncryptedDescription(e){return this.assertResourceTypeSlugById(e,this.DEFAULT_RESOURCE_TYPES_SLUGS.PASSWORD_AND_DESCRIPTION)}assertResourceTypeIdIsLegacy(e){return this.assertResourceTypeSlugById(e,this.DEFAULT_RESOURCE_TYPES_SLUGS.PASSWORD_STRING)}}class Cr{constructor(e){this.settings=e}get id(){return this.settings["user.id"]}get fullName(){return`${this.settings["user.firstname"]} ${this.settings["user.lastname"]}`}get username(){return this.settings["user.username"]}getTheme(){return this.settings["user.settings.theme"]}getTrustedDomain(){return this.settings["user.settings.trustedDomain"]}getSecurityToken(){return{code:this.settings["user.settings.securityToken.code"],backgroundColor:this.settings["user.settings.securityToken.color"],textColor:this.settings["user.settings.securityToken.textColor"]}}get locale(){return this.settings["user.settings.locale"]}}class kr extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(e),this.bindCallbacks(),this.initEventHandlers()}async componentDidMount(){await this.getSiteSettings(),await this.getExtensionVersion(),this.getUserSettings(),this.getLoggedInUser(),this.initLocale(),this.getResources(),this.getResourceTypes(),this.getFolders(),this.getGroups(),this.getUsers(),this.getRoles();const e=document.getElementById("temporary-skeleton");e&&e.remove()}bindCallbacks(){this.handleStorageChange=this.handleStorageChange.bind(this),this.handleIsReadyEvent=this.handleIsReadyEvent.bind(this)}initEventHandlers(){this.props.storage.onChanged.addListener(this.handleStorageChange),this.props.port.on("passbolt.react-app.is-ready",this.handleIsReadyEvent)}getDefaultState(e){return{name:"browser-extension",port:e.port,storage:e.storage,user:null,resources:null,folders:null,users:null,groups:null,siteSettings:null,userSettings:null,extensionVersion:null,locale:null,setContext:e=>{this.setState(e)},passphraseRequestId:"",resourceCreateDialogProps:{folderParentId:null},passwordEditDialogProps:{id:null},passwordDeleteDialogProps:{resources:null},folder:{},folderCreateDialogProps:{folderParentId:null},folderMoveStrategyProps:{requestId:null,folderId:null,foldersIds:[],resourcesIds:[]},shareDialogProps:{foldersIds:null,resourcesIds:null},editUserDialogProps:{id:null},deleteUserDialogProps:{user:null},deleteUserWithConflictsDialogProps:{user:null,errors:{}},tagToEdit:null,tagToDelete:null,deleteGroupDialogProps:{group:null,numberResourcesOwned:null},deleteGroupWithConflictsDialogProps:{group:null,errors:{}},progressDialogProps:{},resourceCommentId:null,mustRefreshComments:!1,onLogoutRequested:()=>this.onLogoutRequested(),onCheckIsAuthenticatedRequested:()=>this.onCheckIsAuthenticatedRequested(),onGetSubscriptionKeyRequested:()=>this.onGetSubscriptionKeyRequested(),onUpdateLocaleRequested:this.onUpdateLocaleRequested.bind(this)}}handleIsReadyEvent(e){this.isReady()?this.props.port.emit(e,"SUCCESS"):this.props.port.emit(e,"ERROR")}isReady(){return null!==this.state.userSettings&&null!==this.state.siteSettings&&null!==this.state.locale}async getLoggedInUser(){const e=await this.props.port.request("passbolt.users.find-logged-in-user");this.setState({loggedInUser:e})}async getSiteSettings(){const e=await this.props.port.request("passbolt.organization-settings.get"),t=new yr(e);this.setState({siteSettings:t})}async getExtensionVersion(){const e=await this.props.port.request("passbolt.addon.get-version");this.setState({extensionVersion:e})}async getResources(){const e=await this.props.storage.local.get(["resources"]);if(e.resources){const t=e.resources;this.setState({resources:t})}}async getFolders(){const e=await this.props.storage.local.get(["folders"]);if(e.folders){const t=e.folders;this.setState({folders:t})}}async getGroups(){const e=await this.props.storage.local.get(["groups"]);if(e.groups){const t=e.groups;this.setState({groups:t})}}async getUsers(){const e=await this.props.storage.local.get(["users"]);if(e.users&&e.users.length){const t=e.users;this.setState({users:t})}}async getRoles(){const e=await this.props.port.request("passbolt.role.get-all");this.setState({roles:e})}async getResourceTypes(){let e=[];try{e=await this.props.port.request("passbolt.resource-type.get-all")}catch(e){console.error(e)}const t=new vr(this.state.siteSettings,e);this.setState({resourceTypesSettings:t})}async getUserSettings(){const e=await this.props.storage.local.get(["_passbolt_data"]),t=new Cr(e._passbolt_data.config);this.setState({userSettings:t})}async initLocale(){const{locale:e}=await this.props.port.request("passbolt.locale.get");this.setState({locale:e})}handleStorageChange(e){if(e.resources&&e.resources.newValue){const t=e.resources.newValue;this.setState({resources:t})}if(e._passbolt_data&&e._passbolt_data.newValue){const t=e._passbolt_data.newValue,s=new Cr(t.config);this.setState({userSettings:s})}if(e.resourceTypes&&e.resourceTypes.newValue){const t=e.resourceTypes.newValue,s=new vr(this.state.siteSettings,t);this.setState({resourceTypesSettings:s})}if(e.folders&&e.folders.newValue){const t=e.folders.newValue;this.setState({folders:t})}if(e.users&&e.users.newValue){const t=e.users.newValue;this.setState({users:t})}if(e.groups&&e.groups.newValue){const t=e.groups.newValue;this.setState({groups:t})}if(e.roles&&e.roles.newValue){const t=e.roles.newValue;this.setState({roles:t})}}onLogoutRequested(){this.props.port.request("passbolt.auth.navigate-to-logout")}async onCheckIsAuthenticatedRequested(){return await this.props.port.request("passbolt.auth.is-authenticated",{requestApi:!1})}async onGetSubscriptionKeyRequested(){return await this.props.port.request("passbolt.subscription.get")}async onUpdateLocaleRequested(){const{locale:e}=await this.props.port.request("passbolt.locale.get");this.setState({locale:e})}render(){const e=this.isReady();return a.createElement(g.Provider,{value:this.state},e&&this.props.children)}}kr.propTypes={port:d().object,storage:d().object,children:d().any};const wr=kr;var Sr=s(32443),xr=s(97031),Nr=s(65538);class Rr extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{ready:!1}}async componentDidMount(){await Sr.ZP.use(xr.Db).use(Nr.Z).init({lng:this.locale,load:"currentOnly",interpolation:{escapeValue:!1},react:{useSuspense:!1},backend:{loadPath:this.props.loadingPath||"/locales/{{lng}}/{{ns}}.json"},supportedLngs:this.supportedLocales,fallbackLng:!1,ns:["common"],defaultNS:"common",keySeparator:!1,nsSeparator:!1,debug:!1}),this.setState({ready:!0})}get supportedLocales(){return this.props.context.siteSettings.supportedLocales?this.props.context.siteSettings.supportedLocales.map((e=>e.locale)):[this.locale]}get locale(){return this.props.context.locale}async componentDidUpdate(e){await this.handleLocaleChange(e.context.locale)}async handleLocaleChange(e){this.locale!==e&&await Sr.ZP.changeLanguage(this.locale)}get isReady(){return this.state.ready}render(){return a.createElement(a.Fragment,null,this.isReady&&this.props.children)}}Rr.propTypes={context:d().any,loadingPath:d().any,children:d().any};const Ir=u(Rr);class Dr extends a.Component{constructor(e){super(e),this.bindCallbacks()}get isMfaEnabled(){const e=this.props.context.siteSettings;return e&&e.canIUse("multiFactorAuthentication")}get isUserDirectoryEnabled(){const e=this.props.context.siteSettings;return e&&e.canIUse("directorySync")}get canIUseEE(){const e=this.props.context.siteSettings;return e&&e.canIUse("ee")}get canIUseLocale(){return this.props.context.siteSettings&&this.props.context.siteSettings.canIUse("locale")}get canIUseAccountRecovery(){const e=this.props.context.siteSettings;return e&&e.canIUse("accountRecovery")}get canIUseSmtpSettings(){const e=this.props.context.siteSettings;return e&&e.canIUse("smtpSettings")}get canIUseSelfRegistrationSettings(){const e=this.props.context.siteSettings;return e&&e.canIUse("selfRegistration")}get canIUseSso(){const e=this.props.context.siteSettings;return e&&e.canIUse("sso")}get canIUseMfaPolicy(){const e=this.props.context.siteSettings;return e&&e.canIUse("mfaPolicies")}bindCallbacks(){this.handleMfaClick=this.handleMfaClick.bind(this),this.handleUserDirectoryClick=this.handleUserDirectoryClick.bind(this),this.handleEmailNotificationsClick=this.handleEmailNotificationsClick.bind(this),this.handleSubscriptionClick=this.handleSubscriptionClick.bind(this),this.handleInternationalizationClick=this.handleInternationalizationClick.bind(this),this.handleAccountRecoveryClick=this.handleAccountRecoveryClick.bind(this),this.handleSmtpSettingsClick=this.handleSmtpSettingsClick.bind(this),this.handleSelfRegistrationClick=this.handleSelfRegistrationClick.bind(this),this.handleSsoClick=this.handleSsoClick.bind(this),this.handleMfaPolicyClick=this.handleMfaPolicyClick.bind(this)}handleMfaClick(){this.props.navigationContext.onGoToAdministrationMfaRequested()}handleUserDirectoryClick(){this.props.navigationContext.onGoToAdministrationUsersDirectoryRequested()}handleEmailNotificationsClick(){this.props.navigationContext.onGoToAdministrationEmailNotificationsRequested()}handleSubscriptionClick(){this.props.navigationContext.onGoToAdministrationSubscriptionRequested()}handleInternationalizationClick(){this.props.navigationContext.onGoToAdministrationInternationalizationRequested()}handleAccountRecoveryClick(){this.props.navigationContext.onGoToAdministrationAccountRecoveryRequested()}handleSmtpSettingsClick(){this.props.navigationContext.onGoToAdministrationSmtpSettingsRequested()}handleSelfRegistrationClick(){this.props.navigationContext.onGoToAdministrationSelfRegistrationRequested()}handleSsoClick(){this.props.navigationContext.onGoToAdministrationSsoRequested()}handleMfaPolicyClick(){this.props.navigationContext.onGoToAdministrationMfaPolicyRequested()}isMfaSelected(){return Qn.MFA===this.props.administrationWorkspaceContext.selectedAdministration}isMfaPolicySelected(){return Qn.MFA_POLICY===this.props.administrationWorkspaceContext.selectedAdministration}isUserDirectorySelected(){return Qn.USER_DIRECTORY===this.props.administrationWorkspaceContext.selectedAdministration}isEmailNotificationsSelected(){return Qn.EMAIL_NOTIFICATION===this.props.administrationWorkspaceContext.selectedAdministration}isSubscriptionSelected(){return Qn.SUBSCRIPTION===this.props.administrationWorkspaceContext.selectedAdministration}isInternationalizationSelected(){return Qn.INTERNATIONALIZATION===this.props.administrationWorkspaceContext.selectedAdministration}isAccountRecoverySelected(){return Qn.ACCOUNT_RECOVERY===this.props.administrationWorkspaceContext.selectedAdministration}isSsoSelected(){return Qn.SSO===this.props.administrationWorkspaceContext.selectedAdministration}isSmtpSettingsSelected(){return Qn.SMTP_SETTINGS===this.props.administrationWorkspaceContext.selectedAdministration}isSelfRegistrationSettingsSelected(){return Qn.SELF_REGISTRATION===this.props.administrationWorkspaceContext.selectedAdministration}render(){return a.createElement("div",{className:"navigation-secondary navigation-administration"},a.createElement("ul",{id:"administration_menu",className:"clearfix menu ready"},this.isMfaEnabled&&a.createElement("li",{id:"mfa_menu"},a.createElement("div",{className:"row  "+(this.isMfaSelected()?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleMfaClick},a.createElement("span",null,a.createElement(C.c,null,"Multi Factor Authentication"))))))),this.canIUseMfaPolicy&&a.createElement("li",{id:"mfa_policy_menu"},a.createElement("div",{className:"row  "+(this.isMfaPolicySelected()?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleMfaPolicyClick},a.createElement("span",null,a.createElement(C.c,null,"MFA Policy"))))))),this.isUserDirectoryEnabled&&a.createElement("li",{id:"user_directory_menu"},a.createElement("div",{className:"row  "+(this.isUserDirectorySelected()?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleUserDirectoryClick},a.createElement("span",null,a.createElement(C.c,null,"Users Directory"))))))),a.createElement("li",{id:"email_notification_menu"},a.createElement("div",{className:"row  "+(this.isEmailNotificationsSelected()?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleEmailNotificationsClick},a.createElement("span",null,a.createElement(C.c,null,"Email Notifications"))))))),this.canIUseLocale&&a.createElement("li",{id:"internationalization_menu"},a.createElement("div",{className:"row  "+(this.isInternationalizationSelected()?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleInternationalizationClick},a.createElement("span",null,a.createElement(C.c,null,"Internationalisation"))))))),this.canIUseEE&&a.createElement("li",{id:"subscription_menu"},a.createElement("div",{className:"row  "+(this.isSubscriptionSelected()?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleSubscriptionClick},a.createElement("span",null,a.createElement(C.c,null,"Subscription"))))))),this.canIUseAccountRecovery&&a.createElement("li",{id:"account_recovery_menu"},a.createElement("div",{className:"row  "+(this.isAccountRecoverySelected()?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleAccountRecoveryClick},a.createElement("span",null,a.createElement(C.c,null,"Account Recovery"))))))),this.canIUseSmtpSettings&&a.createElement("li",{id:"smtp_settings_menu"},a.createElement("div",{className:"row  "+(this.isSmtpSettingsSelected()?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleSmtpSettingsClick},a.createElement("span",null,a.createElement(C.c,null,"Email server"))))))),this.canIUseSelfRegistrationSettings&&a.createElement("li",{id:"self_registration_menu"},a.createElement("div",{className:"row  "+(this.isSelfRegistrationSettingsSelected()?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleSelfRegistrationClick},a.createElement("span",null,a.createElement(C.c,null,"Self Registration"))))))),this.canIUseSso&&a.createElement("li",{id:"sso_menu"},a.createElement("div",{className:"row  "+(this.isSsoSelected()?"selected":"")},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleSsoClick},a.createElement("span",null,a.createElement(C.c,null,"Single Sign-On")),"",a.createElement("span",{className:"beta chips"},a.createElement(C.c,null,"Beta")))))))))}}Dr.propTypes={context:d().object,administrationWorkspaceContext:d().object,history:d().object,navigationContext:d().any};const Tr=(0,c.EN)(u(v(Xn((0,k.Z)("common")(Dr))))),Ar="totp",Pr="yubikey",Ur="duo",_r=class{constructor(e={}){this.totpProviderToggle="providers"in e&&e.providers.includes(Ar),this.yubikeyToggle="providers"in e&&e.providers.includes(Pr),this.yubikeyClientIdentifier="yubikey"in e?e.yubikey.clientId:"",this.yubikeySecretKey="yubikey"in e?e.yubikey.secretKey:"",this.duoToggle="providers"in e&&e.providers.includes(Ur),this.duoHostname="duo"in e?e.duo.hostName:"",this.duoIntegrationKey="duo"in e?e.duo.integrationKey:"",this.duoSalt="duo"in e?e.duo.salt:"",this.duoSecretKey="duo"in e?e.duo.secretKey:""}};function Lr(){return Lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Lr.apply(this,arguments)}const Fr=a.createContext({getCurrentSettings:()=>{},getSettings:()=>{},setSettings:()=>{},hasSettingsChanges:()=>{},findMfaSettings:()=>{},save:()=>{},setProcessing:()=>{},isProcessing:()=>{},getErrors:()=>{},setError:()=>{},isSubmitted:()=>{},setSubmitted:()=>{},setErrors:()=>{},clearContext:()=>{}});class Mr extends a.Component{constructor(e){super(e),this.state=this.defaultState;const t=e.context.getApiClientOptions();this.mfaService=new ps(t)}get defaultState(){return{errors:this.initErrors(),currentSettings:null,settings:new _r,submitted:!1,processing:!0,getCurrentSettings:this.getCurrentSettings.bind(this),getSettings:this.getSettings.bind(this),setSettings:this.setSettings.bind(this),findMfaSettings:this.findMfaSettings.bind(this),hasSettingsChanges:this.hasSettingsChanges.bind(this),isProcessing:this.isProcessing.bind(this),isSubmitted:this.isSubmitted.bind(this),setSubmitted:this.setSubmitted.bind(this),setProcessing:this.setProcessing.bind(this),save:this.save.bind(this),getErrors:this.getErrors.bind(this),setError:this.setError.bind(this),setErrors:this.setErrors.bind(this),clearContext:this.clearContext.bind(this)}}initErrors(){return{yubikeyClientIdentifierError:null,yubikeySecretKeyError:null,duoHostnameError:null,duoIntegrationKeyError:null,duoSaltError:null,duoSecretKeyError:null}}async findMfaSettings(){this.setProcessing(!0);const e=await this.mfaService.findAllSettings(),t=new _r(e);this.setState({currentSettings:t}),this.setState({settings:Object.assign({},t)}),this.setProcessing(!1)}getCurrentSettings(){return this.state.currentSettings}getSettings(){return this.state.settings}async setSettings(e,t){const s=Object.assign({},this.state.settings,{[e]:t});await this.setState({settings:s})}isProcessing(){return this.state.processing}setProcessing(e){this.setState({processing:e})}hasSettingsChanges(){return JSON.stringify(this.state.currentSettings)!==JSON.stringify(this.state.settings)}isSubmitted(){return this.state.submitted}setSubmitted(e){this.setState({submitted:e})}clearContext(){const{currentSettings:e,settings:t,processing:s}=this.defaultState;this.setState({currentSettings:e,settings:t,processing:s})}async save(){this.setProcessing(!0);const e=new class{constructor(e={}){this.providers=[],this.setProviders(e),this.yubikey=this.providers.includes(Pr)?new class{constructor(e={}){this.clientId="yubikeyClientIdentifier"in e?e.yubikeyClientIdentifier:e.clientId,this.secretKey="yubikeySecretKey"in e?e.yubikeySecretKey:e.secretKey}}(e):{},this.duo=this.providers.includes(Ur)?new class{constructor(e={}){this.hostName="duoHostname"in e?e.duoHostname:e.hostName,this.integrationKey="duoIntegrationKey"in e?e.duoIntegrationKey:e.integrationKey,this.salt="duoSalt"in e?e.duoSalt:e.salt,this.secretKey="duoSecretKey"in e?e.duoSecretKey:e.secretKey}}(e):{}}setProviders(e){e.totpProviderToggle&&this.providers.push(Ar),e.yubikeyToggle&&this.providers.push(Pr),e.duoToggle&&this.providers.push(Ur)}}(this.state.settings);await this.mfaService.save(e),await this.findMfaSettings()}getErrors(){return this.state.errors}setError(e,t){const s=Object.assign({},this.state.errors,{[e]:t});this.setState({errors:s})}setErrors(e,t=(()=>{})){const s=Object.assign({},this.state.errors,e);return this.setState({errors:s},t)}render(){return a.createElement(Fr.Provider,{value:this.state},this.props.children)}}function Or(e){return class extends a.Component{render(){return a.createElement(Fr.Consumer,null,(t=>a.createElement(e,Lr({adminMfaContext:t},this.props))))}}}Mr.propTypes={context:d().any,children:d().any},u(Mr);class jr{constructor(e,t){this.context=e,this.translation=t}static getInstance(e,t){return this.instance||(this.instance=new jr(e,t)),this.instance}static killInstance(){this.instance=null}validateInput(e,t,s){const a=e.trim();return a.length?$s()(t).test(a)?null:this.translation(s.regex):this.translation(s.required)}validateYubikeyClientIdentifier(e){const t=this.validateInput(e,"^[0-9]{1,64}$",{required:"A client identifier is required.",regex:"The client identifier should be an integer."});return this.context.setError("yubikeyClientIdentifierError",t),t}validateYubikeySecretKey(e){const t=this.validateInput(e,"^[a-zA-Z0-9\\/=+]{10,128}$",{required:"A secret key is required.",regex:"This secret key is not valid."});return this.context.setError("yubikeySecretKeyError",t),t}validateDuoHostname(e){const t=this.validateInput(e,"^api-[a-fA-F0-9]{8,16}\\.duosecurity\\.com$",{required:"A hostname is required.",regex:"This is not a valid hostname."});return this.context.setError("duoHostnameError",t),t}validateDuoIntegrationKey(e){const t=this.validateInput(e,"^[a-zA-Z0-9]{16,32}$",{required:"An integration key is required.",regex:"This is not a valid integration key."});return this.context.setError("duoIntegrationKeyError",t),t}validateDuoSecretKey(e){const t=this.validateInput(e,"^[a-zA-Z0-9]{32,128}$",{required:"A secret key is required.",regex:"This is not a valid secret key."});return this.context.setError("duoSecretKeyError",t),t}validateDuoSalt(e){const t=this.validateInput(e,"^.{40,128}$",{required:"A salt is required.",regex:"The salt should be between 40 and 128 characters in length."});return this.context.setError("duoSaltError",t),t}validateYubikeyInputs(){let e=null,t=null;const s=this.context.getSettings();let a={};return s.yubikeyToggle&&(e=this.validateYubikeyClientIdentifier(s.yubikeyClientIdentifier),t=this.validateYubikeySecretKey(s.yubikeySecretKey),a={yubikeyClientIdentifierError:e,yubikeySecretKeyError:t}),a}validateDuoInputs(){let e=null,t=null,s=null,a=null,n={};const r=this.context.getSettings();return r.duoToggle&&(e=this.validateDuoHostname(r.duoHostname),t=this.validateDuoIntegrationKey(r.duoIntegrationKey),a=this.validateDuoSecretKey(r.duoSecretKey),s=this.validateDuoSalt(r.duoSalt),n={duoHostnameError:e,duoIntegrationKeyError:t,duoSaltError:s,duoSecretKeyError:a}),n}async validate(){const e=Object.assign(this.validateYubikeyInputs(),this.validateDuoInputs());return await this.context.setErrors(e),0===Object.values(e).filter((e=>e)).length}}const qr=jr;class Wr extends a.Component{constructor(e){super(e),this.bindCallbacks(),this.mfaFormService=qr.getInstance(this.props.adminMfaContext,this.props.t)}async handleSaveClick(){try{await this.mfaFormService.validate()&&(await this.props.adminMfaContext.save(),this.handleSaveSuccess())}catch(e){this.handleSaveError(e)}finally{this.props.adminMfaContext.setSubmitted(!0),this.props.adminMfaContext.setProcessing(!1)}}isSaveEnabled(){return!this.props.adminMfaContext.isProcessing()&&this.props.adminMfaContext.hasSettingsChanges()}bindCallbacks(){this.handleSaveClick=this.handleSaveClick.bind(this)}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.props.t("The multi factor authentication settings for the organization were updated."))}async handleSaveError(e){"UserAbortsOperationError"!==e.name&&(console.error(e),await this.handleError(e))}async handleError(e){await this.props.actionFeedbackContext.displayError(e.message)}render(){return a.createElement("div",{className:"col2_3 actions-wrapper"},a.createElement("div",{className:"actions"},a.createElement("div",null,a.createElement("li",null,a.createElement("a",{className:"button "+(this.isSaveEnabled()?"":"disabled"),onClick:this.handleSaveClick},a.createElement(de,{name:"save"}),a.createElement("span",null,a.createElement(C.c,null,"Save settings")))))))}}Wr.propTypes={adminMfaContext:d().object,actionFeedbackContext:d().object,t:d().func};const zr=Or(D((0,k.Z)("common")(Wr)));class Gr extends a.Component{constructor(e){super(e),this.mfaFormService=qr.getInstance(this.props.adminMfaContext,this.props.t),this.bindCallbacks()}async componentDidMount(){this.props.administrationWorkspaceContext.setDisplayAdministrationWorkspaceAction(zr),this.props.adminMfaContext.findMfaSettings()}componentWillUnmount(){this.props.administrationWorkspaceContext.resetDisplayAdministrationWorkspaceAction(),this.props.adminMfaContext.clearContext(),qr.killInstance(),this.mfaFormService=null}bindCallbacks(){this.handleInputChange=this.handleInputChange.bind(this)}handleInputChange(e){const t=e.target,s="checkbox"===t.type?t.checked:t.value,a=t.name;this.props.adminMfaContext.setSettings(a,s),this.validateInput(a,s)}validateInput(e,t){switch(e){case"yubikeyClientIdentifier":this.mfaFormService.validateYubikeyClientIdentifier(t);break;case"yubikeySecretKey":this.mfaFormService.validateYubikeySecretKey(t);break;case"duoHostname":this.mfaFormService.validateDuoHostname(t);break;case"duoIntegrationKey":this.mfaFormService.validateDuoIntegrationKey(t);break;case"duoSalt":this.mfaFormService.validateDuoSalt(t);break;case"duoSecretKey":this.mfaFormService.validateDuoSecretKey(t)}}hasAllInputDisabled(){return this.props.adminMfaContext.isProcessing()}render(){const e=this.props.adminMfaContext.isSubmitted(),t=this.props.adminMfaContext.getSettings(),s=this.props.adminMfaContext.getErrors();return a.createElement("div",{className:"row"},a.createElement("div",{className:"mfa-settings col7 main-column"},a.createElement("h3",null,"Multi Factor Authentication"),a.createElement("p",null,a.createElement(C.c,null,"In this section you can choose which multi factor authentication will be available.")),a.createElement("h4",{className:"no-border"},a.createElement("span",{className:"input toggle-switch form-element ready"},a.createElement("input",{id:"totp-provider-toggle-button",type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"totpProviderToggle",onChange:this.handleInputChange,checked:t.totpProviderToggle,disabled:this.hasAllInputDisabled()}),a.createElement("label",{htmlFor:"totp-provider-toggle-button"},a.createElement(C.c,null,"Time-based One Time Password")))),!t.totpProviderToggle&&a.createElement("p",{className:"description"},a.createElement(C.c,null,"The Time-based One Time Password provider is disabled for all users.")),t.totpProviderToggle&&a.createElement("p",{className:"description"},a.createElement(C.c,null,"The Time-based One Time Password provider is enabled for all users. They can setup this provider in their profile and use it as second factor authentication.")),a.createElement("h4",null,a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{id:"yubikey-provider-toggle-button",type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"yubikeyToggle",onChange:this.handleInputChange,checked:t.yubikeyToggle,disabled:this.hasAllInputDisabled()}),a.createElement("label",{htmlFor:"yubikey-provider-toggle-button"},"Yubikey"))),!t.yubikeyToggle&&a.createElement("p",{className:"description"},a.createElement(C.c,null,"The Yubikey provider is disabled for all users.")),t.yubikeyToggle&&a.createElement(a.Fragment,null,a.createElement("p",{className:"description"},a.createElement(C.c,null,"The Yubikey provider is enabled for all users. They can setup this provider in their profile and use it as second factor authentication.")),a.createElement("div",{className:`input text required ${s.yubikeyClientIdentifierError&&e?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",null,a.createElement(C.c,null,"Client identifier")),a.createElement("input",{id:"yubikeyClientIdentifier",type:"text",name:"yubikeyClientIdentifier",required:"required",className:"required fluid form-element ready",placeholder:"123456789",onChange:this.handleInputChange,value:t.yubikeyClientIdentifier,disabled:this.hasAllInputDisabled()}),s.yubikeyClientIdentifierError&&e&&a.createElement("div",{className:"yubikey_client_identifier error-message"},s.yubikeyClientIdentifierError)),a.createElement("div",{className:`input required input-secret ${s.yubikeySecretKeyError&&e?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",null,a.createElement(C.c,null,"Secret key")),a.createElement(At,{id:"yubikeySecretKey",onChange:this.handleInputChange,autoComplete:"off",name:"yubikeySecretKey",placeholder:"**********",disabled:this.hasAllInputDisabled(),value:t.yubikeySecretKey,preview:!0}),s.yubikeySecretKeyError&&e&&a.createElement("div",{className:"yubikey_secret_key error-message"},s.yubikeySecretKeyError))),a.createElement("h4",null,a.createElement("span",{className:"input toggle-switch form-element ready"},a.createElement("input",{id:"duo-provider-toggle-button",type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"duoToggle",onChange:this.handleInputChange,checked:t.duoToggle,disabled:this.hasAllInputDisabled()}),a.createElement("label",{htmlFor:"duo-provider-toggle-button"},"Duo"))),!t.duoToggle&&a.createElement("p",{className:"description"},a.createElement(C.c,null,"The Duo provider is disabled for all users.")),t.duoToggle&&a.createElement(a.Fragment,null,a.createElement("p",{className:"description enabled"},a.createElement(C.c,null,"The Duo provider is enabled for all users. They can setup this provider in their profile and use it as second factor authentication.")),a.createElement("div",{className:`input text required ${s.duoHostnameError&&e?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",null,a.createElement(C.c,null,"Hostname")),a.createElement("input",{id:"duoHostname",type:"text",name:"duoHostname",required:"required",className:"required fluid form-element ready",placeholder:"api-24zlkn4.duosecurity.com",value:t.duoHostname,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled()}),s.duoHostnameError&&e&&a.createElement("div",{className:"duo_hostname error-message"},s.duoHostnameError)),a.createElement("div",{className:`input text required ${s.duoIntegrationKeyError&&e?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",null,a.createElement(C.c,null,"Integration key")),a.createElement("input",{id:"duoIntegrationKey",type:"text",name:"duoIntegrationKey",required:"required",className:"required fluid form-element ready",placeholder:"HASJKDSQJO213123KQSLDF",value:t.duoIntegrationKey,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled()}),s.duoIntegrationKeyError&&e&&a.createElement("div",{className:"duo_integration_key error-message"},s.duoIntegrationKeyError)),a.createElement("div",{className:`input text required ${s.duoSaltError&&e?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",null,a.createElement(C.c,null,"Salt")),a.createElement(At,{id:"duoSalt",onChange:this.handleInputChange,autoComplete:"off",name:"duoSalt",placeholder:"**********",disabled:this.hasAllInputDisabled(),value:t.duoSalt,preview:!0}),s.duoSaltError&&e&&a.createElement("div",{className:"duo_salt error-message"},s.duoSaltError)),a.createElement("div",{className:`input text required ${s.duoSecretKeyError&&e?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",null,a.createElement(C.c,null,"Secret key")),a.createElement(At,{id:"duoSecretKey",onChange:this.handleInputChange,autoComplete:"off",name:"duoSecretKey",placeholder:"**********",disabled:this.hasAllInputDisabled(),value:t.duoSecretKey,preview:!0}),s.duoSecretKeyError&&e&&a.createElement("div",{className:"duo_secret_key error-message"},s.duoSecretKeyError)))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Need help?")),a.createElement("p",null,a.createElement(C.c,null,"Check out our Multi Factor Authentication configuration guide.")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/configure",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"document"}),a.createElement("span",null,a.createElement(C.c,null,"Read the documentation"))))))}}Gr.propTypes={adminMfaContext:d().object,administrationWorkspaceContext:d().object,t:d().func};const Hr=Or(Xn((0,k.Z)("common")(Gr)));class Vr extends a.Component{get items(){return this.props.administrationWorkspaceContext.selectedAdministration===Qn.NONE?[]:[a.createElement(na,{key:"bread-1",name:this.translate("Administration"),onClick:this.props.navigationContext.onGoToAdministrationRequested}),a.createElement(na,{key:"bread-2",name:this.getLastBreadcrumbItemName(),onClick:this.onLastBreadcrumbClick.bind(this)}),a.createElement(na,{key:"bread-3",name:this.translate("Settings"),onClick:this.onLastBreadcrumbClick.bind(this)})]}getLastBreadcrumbItemName(){switch(this.props.administrationWorkspaceContext.selectedAdministration){case Qn.MFA:return this.translate("Multi Factor Authentication");case Qn.USER_DIRECTORY:return this.translate("Users Directory");case Qn.EMAIL_NOTIFICATION:return this.translate("Email Notification");case Qn.SUBSCRIPTION:return this.translate("Subscription");case Qn.INTERNATIONALIZATION:return this.translate("Internationalisation");case Qn.ACCOUNT_RECOVERY:return this.translate("Account Recovery");case Qn.SMTP_SETTINGS:return this.translate("Email server");case Qn.SELF_REGISTRATION:return this.translate("Self Registration");case Qn.SSO:return this.translate("Single Sign-On");case Qn.MFA_POLICY:return this.translate("MFA Policy");default:return""}}async onLastBreadcrumbClick(){const e=this.props.location.pathname;this.props.history.push({pathname:e})}get translate(){return this.props.t}render(){return a.createElement(sa,{items:this.items})}}Vr.propTypes={administrationWorkspaceContext:d().object,location:d().object,history:d().object,navigationContext:d().any,t:d().func};const Kr=(0,c.EN)(v(Xn((0,k.Z)("common")(Vr))));class Br extends a.Component{constructor(e){super(e),this.infiniteTimerUpdateIntervalId=null,this.state=this.defaultState}get defaultState(){return{infiniteTimer:0}}componentDidMount(){this.startInfiniteTimerUpdateProgress()}componentWillUnmount(){this.resetInterval()}resetInterval(){this.infiniteTimerUpdateIntervalId&&(clearInterval(this.infiniteTimerUpdateIntervalId),this.infiniteTimerUpdateIntervalId=null)}startInfiniteTimerUpdateProgress(){this.infiniteTimerUpdateIntervalId=setInterval((()=>{const e=this.state.infiniteTimer+2;this.setState({infiniteTimer:e})}),500)}calculateInfiniteProgress(){return 100-100/Math.pow(1.1,this.state.infiniteTimer)}handleClose(){this.props.onClose()}render(){const e=this.calculateInfiniteProgress(),t={width:`${e}%`};return a.createElement(be,{className:"loading-dialog",title:this.props.title,onClose:this.handleClose,disabled:!0},a.createElement("div",{className:"form-content"},a.createElement("label",null,a.createElement(C.c,null,"Take a deep breath and enjoy being in the present moment...")),a.createElement("div",{className:"progress-bar-wrapper"},a.createElement("span",{className:"progress-bar"},a.createElement("span",{className:"progress "+(100===e?"completed":""),style:t})))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement("a",{className:"button disabled processing"},"Submit",a.createElement(de,{name:"spinner"}))))}}Br.propTypes={onClose:d().func,title:d().string};const $r=(0,k.Z)("common")(Br),Zr="directorysync",Yr=class{constructor(e=[],t=""){this.openCredentials=!0,this.openDirectoryConfiguration=!1,this.openSynchronizationOptions=!1,this.userDirectoryToggle=0!==e.length,this.directoryType=0!==e.length?e.directory_type:"ad",this.connectionType=0!==e.length?e.connection_type:"plain",this.host=0!==e.length?e.server:"",this.hostError=null,this.port=0!==e.length?e.port.toString():"389",this.portError=null,this.username=0!==e.length?e.username:"",this.password=0!==e.length?e.password:"",this.domain=0!==e.length?e.domain_name:"",this.domainError=null,this.baseDn=0!==e.length?e.base_dn:"",this.groupPath=0!==e.length?e.group_path:"",this.userPath=0!==e.length?e.user_path:"",this.groupObjectClass=0!==e.length?e.group_object_class:"",this.userObjectClass=0!==e.length?e.user_object_class:"",this.useEmailPrefix=0!==e.length&&e.use_email_prefix_suffix,this.emailPrefix=0!==e.length?e.email_prefix:"",this.emailSuffix=0!==e.length?e.email_suffix:"",this.defaultAdmin=0!==e.length?e.default_user:t,this.defaultGroupAdmin=0!==e.length?e.default_group_admin_user:t,this.groupsParentGroup=0!==e.length?e.groups_parent_group:"",this.usersParentGroup=0!==e.length?e.users_parent_group:"",this.enabledUsersOnly=0!==e.length&&e.enabled_users_only,this.createUsers=0===e.length||e.sync_users_create,this.deleteUsers=0===e.length||e.sync_users_delete,this.createGroups=0===e.length||e.sync_groups_create,this.deleteGroups=0===e.length||e.sync_groups_delete,this.updateGroups=0===e.length||e.sync_groups_update}},Jr=class{constructor(e){this.enabled=e.userDirectoryToggle,this.directory_type=e.directoryType,this.connection_type=e.connectionType,this.server=e.host,this.port=parseInt(e.port),this.username=e.username,this.password=e.password,this.domain_name=e.domain,this.base_dn=e.baseDn,this.group_path=e.groupPath,this.user_path=e.userPath,this.group_object_class="openldap"===this.directory_type?e.groupObjectClass:"",this.user_object_class="openldap"===this.directory_type?e.userObjectClass:"",this.use_email_prefix_suffix="openldap"===this.directory_type&&e.useEmailPrefix,this.email_prefix="openldap"===this.directory_type&&this.useEmailPrefix?e.emailPrefix:"",this.email_suffix="openldap"===this.directory_type&&this.useEmailPrefix?e.emailSuffix:"",this.default_user=e.defaultAdmin,this.default_group_admin_user=e.defaultGroupAdmin,this.groups_parent_group=e.groupsParentGroup,this.users_parent_group=e.usersParentGroup,this.enabled_users_only=e.enabledUsersOnly,this.sync_users_create=e.createUsers,this.sync_users_delete=e.deleteUsers,this.sync_groups_create=e.createGroups,this.sync_groups_delete=e.deleteGroups,this.sync_groups_update=e.updateGroups}};function Xr(){return Xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Xr.apply(this,arguments)}const Qr=a.createContext({getCurrentSettings:()=>{},getSettings:()=>{},setSettings:()=>{},getUsers:()=>{},hasSettingsChanges:()=>{},findUserDirectorySettings:()=>{},save:()=>{},delete:()=>{},test:()=>{},setProcessing:()=>{},isProcessing:()=>{},getErrors:()=>{},setError:()=>{},simulateUsers:()=>{},requestSynchronization:()=>{},mustOpenSynchronizePopUp:()=>{},synchronizeUsers:()=>{},isSubmitted:()=>{},setSubmitted:()=>{},setErrors:()=>{},clearContext:()=>{}});class ei extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.userDirectoryService=new class{constructor(e){this.apiClientOptions=e,e.setResourceName(`${Zr}`)}async findAll(){this.apiClientOptions.setResourceName(`${Zr}/settings`);const e=new hs(this.apiClientOptions);return(await e.findAll()).body}async update(e){this.apiClientOptions.setResourceName(`${Zr}`);const t=new hs(this.apiClientOptions);return(await t.update("settings",e)).body}async delete(){return this.apiClientOptions.setResourceName(`${Zr}`),new hs(this.apiClientOptions).delete("settings")}async test(e){return this.apiClientOptions.setResourceName(`${Zr}/settings/test`),new hs(this.apiClientOptions).create(e)}async simulate(){this.apiClientOptions.setResourceName(`${Zr}`);const e=new hs(this.apiClientOptions);return(await e.get("synchronize/dry-run")).body}async synchronize(){this.apiClientOptions.setResourceName(`${Zr}/synchronize`);const e=new hs(this.apiClientOptions);return(await e.create({})).body}async findUsers(){return this.apiClientOptions.setResourceName(`${Zr}/users`),new hs(this.apiClientOptions).findAll()}}(e.context.getApiClientOptions()),this.userService=new class{constructor(e){this.apiClientOptions=e,e.setResourceName("users")}async findAll(){return new hs(this.apiClientOptions).findAll()}}(e.context.getApiClientOptions())}get defaultState(){return{users:[],errors:this.initErrors(),mustSynchronize:!1,currentSettings:null,settings:new Yr,submitted:!1,processing:!0,getCurrentSettings:this.getCurrentSettings.bind(this),getSettings:this.getSettings.bind(this),setSettings:this.setSettings.bind(this),findUserDirectorySettings:this.findUserDirectorySettings.bind(this),hasSettingsChanges:this.hasSettingsChanges.bind(this),isProcessing:this.isProcessing.bind(this),isSubmitted:this.isSubmitted.bind(this),setSubmitted:this.setSubmitted.bind(this),setProcessing:this.setProcessing.bind(this),simulateUsers:this.simulateUsers.bind(this),synchronizeUsers:this.synchronizeUsers.bind(this),save:this.save.bind(this),delete:this.delete.bind(this),test:this.test.bind(this),getErrors:this.getErrors.bind(this),setError:this.setError.bind(this),setErrors:this.setErrors.bind(this),getUsers:this.getUsers.bind(this),requestSynchronization:this.requestSynchronization.bind(this),mustOpenSynchronizePopUp:this.mustOpenSynchronizePopUp.bind(this),clearContext:this.clearContext.bind(this)}}initErrors(){return{hostError:null,portError:null,domainError:null}}async findUserDirectorySettings(){this.setProcessing(!0);const e=await this.userDirectoryService.findAll(),t=await this.userService.findAll(),s=t.body.find((e=>this.props.context.loggedInUser.id===e.id)),a=new Yr(e,s.id);this.setState({users:this.sortUsers(t.body)}),this.setState({currentSettings:a}),this.setState({settings:Object.assign({},a)}),this.setProcessing(!1)}sortUsers(e){const t=e=>`${e.profile.first_name} ${e.profile.last_name}`;return e.sort(((e,s)=>t(e).localeCompare(t(s))))}getCurrentSettings(){return this.state.currentSettings}getSettings(){return this.state.settings}requestSynchronization(e){this.setState({mustSynchronize:e})}mustOpenSynchronizePopUp(){return this.state.mustSynchronize}async setSettings(e,t){const s=Object.assign({},this.state.settings,{[e]:t});await this.setState({settings:s})}isProcessing(){return this.state.processing}setProcessing(e){this.setState({processing:e})}hasSettingsChanges(){return JSON.stringify(this.state.currentSettings)!==JSON.stringify(this.state.settings)}isSubmitted(){return this.state.submitted}setSubmitted(e){this.setState({submitted:e})}clearContext(){const{currentSettings:e,settings:t,processing:s}=this.defaultState;this.setState({currentSettings:e,settings:t,processing:s})}async save(){this.setProcessing(!0);const e=new Jr(this.state.settings);await this.userDirectoryService.update(e),await this.findUserDirectorySettings()}async delete(){this.setProcessing(!0),await this.userDirectoryService.delete(),await this.findUserDirectorySettings()}async test(){this.setProcessing(!0);const e=new Jr(this.state.settings),t=await this.userDirectoryService.test(e);return this.setProcessing(!1),t}async simulateUsers(){return this.userDirectoryService.simulate()}async synchronizeUsers(){return this.userDirectoryService.synchronize()}getErrors(){return this.state.errors}setError(e,t){const s=Object.assign({},this.state.errors,{[e]:t});this.setState({errors:s})}getUsers(){return this.state.users}setErrors(e,t=(()=>{})){const s=Object.assign({},this.state.errors,e);return this.setState({errors:s},t)}render(){return a.createElement(Qr.Provider,{value:this.state},this.props.children)}}function ti(e){return class extends a.Component{render(){return a.createElement(Qr.Consumer,null,(t=>a.createElement(e,Xr({adminUserDirectoryContext:t},this.props))))}}}ei.propTypes={context:d().any,children:d().any},u(ei);class si extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindEventHandlers()}get defaultState(){return{loading:!0,openFullReport:!1,userDirectorySimulateSynchronizeResult:null}}bindEventHandlers(){this.handleFullReportClicked=this.handleFullReportClicked.bind(this),this.handleClose=this.handleClose.bind(this),this.handleSynchronize=this.handleSynchronize.bind(this)}async componentDidMount(){try{const e=await this.props.adminUserDirectoryContext.simulateUsers();this.setState({loading:!1,userDirectorySimulateSynchronizeResult:e})}catch(e){await this.handleError(e)}}async handleError(e){console.error(e),await this.props.actionFeedbackContext.displayError(e.message),this.handleClose()}handleFullReportClicked(){this.setState({openFullReport:!this.state.openFullReport})}handleClose(){this.props.onClose()}handleSynchronize(){this.props.adminUserDirectoryContext.requestSynchronization(!0),this.handleClose()}isLoading(){return this.state.loading}get users(){return this.state.userDirectorySimulateSynchronizeResult.users}get groups(){return this.state.userDirectorySimulateSynchronizeResult.groups}get usersSuccess(){return this.users.filter((e=>"success"===e.status))}get groupsSuccess(){return this.groups.filter((e=>"success"===e.status))}get usersError(){return this.users.filter((e=>"error"===e.status))}get groupsError(){return this.groups.filter((e=>"error"===e.status))}get usersIgnored(){return this.users.filter((e=>"ignore"===e.status))}get groupsIgnored(){return this.groups.filter((e=>"ignore"===e.status))}hasSuccessResource(){return this.usersSuccess.length>0||this.groupsSuccess.length>0}hasSuccessUserResource(){return this.usersSuccess.length>0}hasSuccessGroupResource(){return this.groupsSuccess.length>0}hasErrorOrIgnoreResource(){return this.usersError.length>0||this.groupsError.length>0||this.usersIgnored.length>0||this.groupsIgnored.length>0}getFullReport(){let e="";return e=e.concat(this.getUsersFullReport()),e=e.concat(this.getGroupsFullReport()),e}getUsersFullReport(){let e="";if(this.usersSuccess.length>0||this.usersError.length>0||this.usersIgnored.length>0){const t=`-----------------------------------------------\n${this.props.t("Users")}\n-----------------------------------------------\n`;e=e.concat(t);const s=t=>e=e.concat(`- ${t.message}\n`);this.usersSuccess.length>0&&(e=e.concat(`\n${this.props.t("Success:")}\n`),this.usersSuccess.map(s)),this.usersError.length>0&&(e=e.concat(`\n${this.props.t("Errors:")}\n`),this.usersError.map(s)),this.usersIgnored.length>0&&(e=e.concat(`\n${this.props.t("Ignored:")}\n`),this.usersIgnored.map(s))}return e.concat("\n")}getGroupsFullReport(){let e="";if(this.groupsSuccess.length>0||this.groupsError.length>0||this.groupsIgnored.length>0){const t=`-----------------------------------------------\n${this.props.t("Groups")}\n-----------------------------------------------\n`;e=e.concat(t);const s=t=>e=e.concat(`- ${t.message}\n`);this.groupsSuccess.length>0&&(e=e.concat(`\n${this.props.t("Success:")}\n`),this.groupsSuccess.map(s)),this.groupsError.length>0&&(e=e.concat(`\n${this.props.t("Errors:")}\n`),this.groupsError.map(s)),this.groupsIgnored.length>0&&(e=e.concat(`\n${this.props.t("Ignored:")}\n`),this.groupsIgnored.map(s))}return e}get translate(){return this.props.t}render(){return a.createElement("div",null,this.isLoading()&&a.createElement($r,{onClose:this.handleClose,title:this.props.t("Synchronize simulation")}),!this.isLoading()&&a.createElement(be,{className:"ldap-simulate-synchronize-dialog",title:this.props.t("Synchronize simulation report"),onClose:this.handleClose,disabled:this.isLoading()},a.createElement("div",{className:"form-content",onSubmit:this.handleFormSubmit},a.createElement("p",null,a.createElement("strong",null,a.createElement(C.c,null,"The operation was successful."))),a.createElement("p",null),this.hasSuccessResource()&&a.createElement("p",{id:"resources-synchronize"},this.hasSuccessUserResource()&&a.createElement(a.Fragment,null,this.props.t("{{count}} user will be synchronized.",{count:this.usersSuccess.length})),this.hasSuccessUserResource()&&this.hasSuccessGroupResource()&&a.createElement("br",null),this.hasSuccessGroupResource()&&a.createElement(a.Fragment,null,this.props.t("{{count}} group will be synchronized.",{count:this.groupsSuccess.length}))),!this.hasSuccessResource()&&a.createElement("p",{id:"no-resources"}," ",a.createElement(C.c,null,"No resources will be synchronized.")," "),this.hasErrorOrIgnoreResource()&&a.createElement("p",{className:"error inline-error"},a.createElement(C.c,null,"Some resources will not be synchronized and will require your attention, see the full report.")),a.createElement("div",{className:"accordion operation-details "+(this.state.openFullReport?"":"closed")},a.createElement("div",{className:"accordion-header",onClick:this.handleFullReportClicked},a.createElement("a",{role:"link"},a.createElement(C.c,null,"Full report"),this.state.openFullReport&&a.createElement(de,{name:"caret-down"}),!this.state.openFullReport&&a.createElement(de,{name:"caret-right"}))),a.createElement("div",{className:"accordion-content"},a.createElement("div",{className:"input text"},a.createElement("textarea",{className:"full_report",readOnly:!0,value:this.getFullReport()})))),a.createElement("p",null)),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.isLoading(),onClick:this.handleClose}),a.createElement("a",{className:"button primary "+(this.isLoading()?"disabled":""),role:"button",onClick:this.handleSynchronize},a.createElement(C.c,null,"Synchronize")))))}}si.propTypes={onClose:d().func,dialogContext:d().object,actionFeedbackContext:d().any,adminUserDirectoryContext:d().object,t:d().func};const ai=D(ti((0,k.Z)("common")(si)));class ni extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindEventHandlers()}get defaultState(){return{loading:!0,openFullReport:!1,userDirectorySynchronizeResult:null}}bindEventHandlers(){this.handleFullReportClicked=this.handleFullReportClicked.bind(this),this.handleClose=this.handleClose.bind(this),this.handleSynchronize=this.handleSynchronize.bind(this)}async componentDidMount(){try{const e=await this.props.adminUserDirectoryContext.synchronizeUsers();this.setState({loading:!1,userDirectorySynchronizeResult:e})}catch(e){await this.handleError(e)}}async handleError(e){console.error(e),await this.props.actionFeedbackContext.displayError(e.message),this.handleClose()}handleFullReportClicked(){this.setState({openFullReport:!this.state.openFullReport})}handleClose(){this.props.onClose()}handleSynchronize(){this.handleClose()}isLoading(){return this.state.loading}get users(){return this.state.userDirectorySynchronizeResult.users}get groups(){return this.state.userDirectorySynchronizeResult.groups}get usersSuccess(){return this.users.filter((e=>"success"===e.status))}get groupsSuccess(){return this.groups.filter((e=>"success"===e.status))}get usersError(){return this.users.filter((e=>"error"===e.status))}get groupsError(){return this.groups.filter((e=>"error"===e.status))}get usersIgnored(){return this.users.filter((e=>"ignore"===e.status))}get groupsIgnored(){return this.groups.filter((e=>"ignore"===e.status))}hasSuccessResource(){return this.usersSuccess.length>0||this.groupsSuccess.length>0}hasSuccessUserResource(){return this.usersSuccess.length>0}hasSuccessGroupResource(){return this.groupsSuccess.length>0}hasErrorOrIgnoreResource(){return this.usersError.length>0||this.groupsError.length>0||this.usersIgnored.length>0||this.groupsIgnored.length>0}getFullReport(){let e="";return e=e.concat(this.getUsersFullReport()),e=e.concat(this.getGroupsFullReport()),e}getUsersFullReport(){let e="";if(this.usersSuccess.length>0||this.usersError.length>0||this.usersIgnored.length>0){const t=`-----------------------------------------------\n${this.translate("Users")}\n-----------------------------------------------\n`;e=e.concat(t);const s=t=>e=e.concat(`- ${t.message}\n`);this.usersSuccess.length>0&&(e=e.concat(`\n${this.translate("Success:")}\n`),this.usersSuccess.map(s)),this.usersError.length>0&&(e=e.concat(`\n${this.translate("Errors:")}\n`),this.usersError.map(s)),this.usersIgnored.length>0&&(e=e.concat(`\n${this.translate("Ignored:")}\n`),this.usersIgnored.map(s))}return e.concat("\n")}getGroupsFullReport(){let e="";if(this.groupsSuccess.length>0||this.groupsError.length>0||this.groupsIgnored.length>0){const t=`-----------------------------------------------\n${this.translate("Groups")}\n-----------------------------------------------\n`;e=e.concat(t);const s=t=>e=e.concat(`- ${t.message}\n`);this.groupsSuccess.length>0&&(e=e.concat(`\n${this.translate("Success:")}\n`),this.groupsSuccess.map(s)),this.groupsError.length>0&&(e=e.concat(`\n${this.translate("Errors:")}\n`),this.groupsError.map(s)),this.groupsIgnored.length>0&&(e=e.concat(`\n${this.translate("Ignored:")}\n`),this.groupsIgnored.map(s))}return e}get translate(){return this.props.t}render(){return a.createElement("div",null,this.isLoading()&&a.createElement($r,{onClose:this.handleClose,title:this.translate("Synchronize")}),!this.isLoading()&&a.createElement(be,{className:"ldap-simulate-synchronize-dialog",title:this.translate("Synchronize report"),onClose:this.handleClose,disabled:this.isLoading()},a.createElement("div",{className:"form-content",onSubmit:this.handleFormSubmit},a.createElement("p",null,a.createElement("strong",null,a.createElement(C.c,null,"The operation was successful."))),a.createElement("p",null),this.hasSuccessResource()&&a.createElement("p",{id:"resources-synchronize"},this.hasSuccessUserResource()&&a.createElement(a.Fragment,null,this.translate("{{count}} user has been synchronized.",{count:this.usersSuccess.length})),this.hasSuccessUserResource()&&this.hasSuccessGroupResource()&&a.createElement("br",null),this.hasSuccessGroupResource()&&a.createElement(a.Fragment,null,this.translate("{{count}} group has been synchronized.",{count:this.groupsSuccess.length}))),!this.hasSuccessResource()&&a.createElement("p",{id:"no-resources"}," ",a.createElement(C.c,null,"No resources have been synchronized.")," "),this.hasErrorOrIgnoreResource()&&a.createElement("p",{className:"error inline-error"},a.createElement(C.c,null,"Some resources will not be synchronized and will require your attention, see the full report.")),a.createElement("div",{className:"accordion operation-details "+(this.state.openFullReport?"":"closed")},a.createElement("div",{className:"accordion-header",onClick:this.handleFullReportClicked},a.createElement("a",{role:"link"},a.createElement(C.c,null,"Full report"),this.state.openFullReport&&a.createElement(de,{name:"caret-down"}),!this.state.openFullReport&&a.createElement(de,{name:"caret-right"}))),a.createElement("div",{className:"accordion-content"},a.createElement("div",{className:"input text"},a.createElement("textarea",{className:"full_report",readOnly:!0,value:this.getFullReport()})))),a.createElement("p",null)),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement("a",{className:"button primary "+(this.isLoading()?"disabled":""),role:"button",onClick:this.handleClose},a.createElement(C.c,null,"Ok")))))}}ni.propTypes={onClose:d().func,actionFeedbackContext:d().any,adminUserDirectoryContext:d().object,t:d().func};const ri=D(ti((0,k.Z)("common")(ni)));class ii{constructor(e,t){this.context=e,this.translate=t}static getInstance(e,t){return this.instance||(this.instance=new ii(e,t)),this.instance}static killInstance(){this.instance=null}async validate(){const e={...this.validateHostInput(),...this.validatePortInput(),...this.validateDomainInput()};return await this.context.setErrors(e),0===Object.values(e).filter((e=>e)).length}validateHostInput(){let e=null;return this.context.getSettings().host.trim().length||(e=this.translate("A host is required.")),this.context.setError("hostError",e),{hostError:e}}validatePortInput(){let e=null;const t=this.context.getSettings().port.trim();return t.length?$s()("^[0-9]+").test(t)||(e=this.translate("Only numeric characters allowed.")):e=this.translate("A port is required."),this.context.setError("portError",e),{portError:e}}validateDomainInput(){let e=null;return this.context.getSettings().domain.trim().length||(e=this.translate("A domain name is required.")),this.context.setError("domainError",e),{domainError:e}}}const oi=ii;class li extends a.Component{hasChildren(){return this.props.node.group.groups.length>0}displayUserName(e){return`${e.profile.first_name} ${e.profile.last_name}`}get node(){return this.props.node}render(){return a.createElement("ul",{key:this.node.id},"group"===this.node.type&&a.createElement("li",{className:"group"},this.node.group.name,a.createElement("ul",null,Object.values(this.node.group.users).map((e=>a.createElement("li",{className:"user",key:e.id},e.errors&&a.createElement("span",{className:"error"},e.directory_name),!e.errors&&a.createElement("span",null,this.displayUserName(e.user)," ",a.createElement("em",null,"(",e.user.username,")"))))),Object.values(this.node.group.groups).map((e=>a.createElement(li,{key:`tree-${e.id}`,node:e}))))),"user"===this.node.type&&a.createElement("li",{className:"user"},this.node.errors&&a.createElement("span",{className:"error"},this.node.directory_name),!this.node.errors&&a.createElement("span",null,this.displayUserName(this.node.user)," ",a.createElement("em",null,"(",this.node.user.username,")"))))}}li.propTypes={node:d().object};const ci=li;class mi extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindEventHandlers()}get defaultState(){return{loading:!0,openListGroupsUsers:!1,openStructureGroupsUsers:!1,openErrors:!1}}bindEventHandlers(){this.handleListGroupsUsersClicked=this.handleListGroupsUsersClicked.bind(this),this.handleStructureGroupsUsersClicked=this.handleStructureGroupsUsersClicked.bind(this),this.handleErrorsClicked=this.handleErrorsClicked.bind(this),this.handleClose=this.handleClose.bind(this)}componentDidMount(){this.setState({loading:!1})}handleListGroupsUsersClicked(){this.setState({openListGroupsUsers:!this.state.openListGroupsUsers})}handleStructureGroupsUsersClicked(){this.setState({openStructureGroupsUsers:!this.state.openStructureGroupsUsers})}handleErrorsClicked(){this.setState({openErrors:!this.state.openErrors})}handleClose(){this.props.onClose(),this.props.context.setContext({displayTestUserDirectoryDialogProps:null})}hasAllInputDisabled(){return this.state.loading}displayUserName(e){return`${e.profile.first_name} ${e.profile.last_name}`}get users(){return this.props.context.displayTestUserDirectoryDialogProps.userDirectoryTestResult.users}get groups(){return this.props.context.displayTestUserDirectoryDialogProps.userDirectoryTestResult.groups}get tree(){return this.props.context.displayTestUserDirectoryDialogProps.userDirectoryTestResult.tree}get errors(){return this.props.context.displayTestUserDirectoryDialogProps.userDirectoryTestResult.errors}get translate(){return this.props.t}render(){return a.createElement(be,{className:"ldap-test-settings-dialog",title:this.translate("Test settings report"),onClose:this.handleClose,disabled:this.hasAllInputDisabled()},a.createElement("div",{className:"form-content"},a.createElement("p",null,a.createElement("strong",null,a.createElement(C.c,null,"A connection could be established. Well done!"))),a.createElement("p",null),a.createElement("div",{className:"ldap-test-settings-report"},a.createElement("p",null,this.users.length>0&&a.createElement(a.Fragment,null,this.translate("{{count}} user has been found.",{count:this.users.length})),this.users.length>0&&this.groups.length>0&&a.createElement("br",null),this.groups.length>0&&a.createElement(a.Fragment,null,this.translate("{{count}} group has been found.",{count:this.groups.length}))),a.createElement("div",{className:"accordion directory-list "+(this.state.openListGroupsUsers?"":"closed")},a.createElement("div",{className:"accordion-header",onClick:this.handleListGroupsUsersClicked},a.createElement("a",{role:"link"},a.createElement(C.c,null,"See list"),this.state.openListGroupsUsers&&a.createElement(de,{name:"caret-down",baseline:!0}),!this.state.openListGroupsUsers&&a.createElement(de,{name:"caret-right",baseline:!0}))),a.createElement("div",{className:"accordion-content"},a.createElement("table",null,a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,a.createElement(C.c,null,"Groups")),a.createElement("td",null,a.createElement(C.c,null,"Users"))),a.createElement("tr",null,a.createElement("td",null,this.groups.map((e=>e.errors&&a.createElement("div",{key:e.id},a.createElement("span",{className:"error"},e.directory_name))||a.createElement("div",{key:e.id},e.group.name)))),a.createElement("td",null,this.users.map((e=>e.errors&&a.createElement("div",{key:e.id},a.createElement("span",{className:"error"},e.directory_name))||a.createElement("div",{key:e.id},this.displayUserName(e.user)," ",a.createElement("em",null,"(",e.user.username,")")))))))))),a.createElement("div",{className:"accordion accordion-directory-structure "+(this.state.openStructureGroupsUsers?"":"closed")},a.createElement("div",{className:"accordion-header",onClick:this.handleStructureGroupsUsersClicked},a.createElement("a",{role:"link"},a.createElement(C.c,null,"See structure"),this.state.openStructureGroupsUsers&&a.createElement(de,{name:"caret-down",baseline:!0}),!this.state.openStructureGroupsUsers&&a.createElement(de,{name:"caret-right",baseline:!0}))),a.createElement("div",{className:"accordion-content"},a.createElement("div",{className:"directory-structure"},a.createElement("ul",null,a.createElement("li",{className:"group"},"Root",Object.values(this.tree).map((e=>a.createElement(ci,{key:`tree-${e.id}`,node:e})))))))),this.errors.length>0&&a.createElement("div",null,a.createElement("p",{className:"directory-errors error"},this.translate("{{count}} entry had errors and will be ignored during synchronization.",{count:this.errors.length})),a.createElement("div",{className:"accordion accordion-directory-errors "+(this.state.openErrors?"":"closed")},a.createElement("div",{className:"accordion-header",onClick:this.handleErrorsClicked},a.createElement("a",{role:"link"},a.createElement(C.c,null,"See error details"),this.state.openErrors&&a.createElement(de,{name:"caret-down",baseline:!0}),!this.state.openErrors&&a.createElement(de,{name:"caret-right",baseline:!0}))),a.createElement("div",{className:"accordion-content"},a.createElement("div",{className:"directory-errors"},a.createElement("textarea",{value:JSON.stringify(this.errors,null," "),readOnly:!0}))))))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement("a",{className:"button primary "+(this.hasAllInputDisabled()?"disabled":""),role:"button",onClick:this.handleClose},a.createElement(C.c,null,"OK"))))}}mi.propTypes={context:d().any,onClose:d().func,t:d().func};const di=u((0,k.Z)("common")(mi));class hi extends a.Component{constructor(e){super(e),this.bindCallbacks(),this.state=this.defaultState,this.userDirectoryFormService=oi.getInstance(this.props.adminUserDirectoryContext,this.props.t)}componentDidUpdate(){this.props.adminUserDirectoryContext.mustOpenSynchronizePopUp()&&(this.props.adminUserDirectoryContext.requestSynchronization(!1),this.handleSynchronizeClick())}async handleSaveClick(){this.props.adminUserDirectoryContext.getSettings().userDirectoryToggle?await this.props.adminUserDirectoryContext.save():await this.props.adminUserDirectoryContext.delete(),this.handleSaveSuccess()}async handleFormSubmit(e){try{if(await this.userDirectoryFormService.validate())switch(e){case"save":await this.handleSaveClick();break;case"test":await this.handleTestClick()}}catch(e){this.handleSubmitError(e)}finally{this.props.adminUserDirectoryContext.setSubmitted(!0),this.props.adminUserDirectoryContext.setProcessing(!1)}}async handleTestClick(){const e={userDirectoryTestResult:(await this.props.adminUserDirectoryContext.test()).body};this.props.context.setContext({displayTestUserDirectoryDialogProps:e}),this.props.dialogContext.open(di)}isSaveEnabled(){return!this.props.adminUserDirectoryContext.isProcessing()&&this.props.adminUserDirectoryContext.hasSettingsChanges()}isTestEnabled(){return!this.props.adminUserDirectoryContext.isProcessing()&&this.props.adminUserDirectoryContext.getSettings().userDirectoryToggle}isSynchronizeEnabled(){return!this.props.adminUserDirectoryContext.isProcessing()&&this.props.adminUserDirectoryContext.getSettings().userDirectoryToggle&&this.props.adminUserDirectoryContext.getCurrentSettings().userDirectoryToggle}bindCallbacks(){this.handleSaveClick=this.handleSaveClick.bind(this),this.handleTestClick=this.handleTestClick.bind(this),this.handleSimulateSynchronizeClick=this.handleSimulateSynchronizeClick.bind(this),this.handleSynchronizeClick=this.handleSynchronizeClick.bind(this)}handleSimulateSynchronizeClick(){this.props.dialogContext.open(ai)}handleSynchronizeClick(){this.props.dialogContext.open(ri)}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.props.t("The user directory settings for the organization were updated."))}async handleSubmitError(e){"UserAbortsOperationError"!==e.name&&(console.error(e),await this.handleError(e))}async handleError(e){await this.props.actionFeedbackContext.displayError(e.message)}render(){return a.createElement("div",{className:"col2_3 actions-wrapper"},a.createElement("div",{className:"actions"},a.createElement("div",null,a.createElement("li",null,a.createElement("a",{className:"button "+(this.isSaveEnabled()?"":"disabled"),onClick:()=>this.handleFormSubmit("save")},a.createElement(de,{name:"save"}),a.createElement("span",null,a.createElement(C.c,null,"Save settings")))),a.createElement("li",null,a.createElement("a",{className:"button "+(this.isTestEnabled()?"":"disabled"),onClick:()=>this.handleFormSubmit("test")},a.createElement(de,{name:"plug"}),a.createElement("span",null,a.createElement(C.c,null,"Test settings")))),a.createElement("li",null,a.createElement("a",{className:"button "+(this.isSynchronizeEnabled()?"":"disabled"),onClick:this.handleSimulateSynchronizeClick},a.createElement(de,{name:"magic-wand"}),a.createElement("span",null,a.createElement(C.c,null,"Simulate synchronize")))),a.createElement("li",null,a.createElement("a",{className:"button "+(this.isSynchronizeEnabled()?"":"disabled"),onClick:this.handleSynchronizeClick},a.createElement(de,{name:"refresh"}),a.createElement("span",null,a.createElement(C.c,null,"Synchronize")))))))}}hi.propTypes={context:d().object,dialogContext:d().object,adminUserDirectoryContext:d().object,actionFeedbackContext:d().object,t:d().func};const pi=u(D(M(ti((0,k.Z)("common")(hi)))));class ui extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.userDirectoryFormService=oi.getInstance(this.props.adminUserDirectoryContext,this.props.t),this.bindCallbacks()}get defaultState(){return{hasFieldFocus:!1}}async componentDidMount(){this.props.administrationWorkspaceContext.setDisplayAdministrationWorkspaceAction(pi),this.props.adminUserDirectoryContext.findUserDirectorySettings()}componentWillUnmount(){this.props.administrationWorkspaceContext.resetDisplayAdministrationWorkspaceAction(),this.props.adminUserDirectoryContext.clearContext(),oi.killInstance(),this.userDirectoryFormService=null}bindCallbacks(){this.handleCredentialTitleClicked=this.handleCredentialTitleClicked.bind(this),this.handleDirectoryConfigurationTitleClicked=this.handleDirectoryConfigurationTitleClicked.bind(this),this.handleSynchronizationOptionsTitleClicked=this.handleSynchronizationOptionsTitleClicked.bind(this),this.handleFieldFocus=this.handleFieldFocus.bind(this),this.handleFieldBlur=this.handleFieldBlur.bind(this),this.handleInputChange=this.handleInputChange.bind(this)}handleCredentialTitleClicked(){const e=this.props.adminUserDirectoryContext.getSettings();this.props.adminUserDirectoryContext.setSettings("openCredentials",!e.openCredentials)}handleDirectoryConfigurationTitleClicked(){const e=this.props.adminUserDirectoryContext.getSettings();this.props.adminUserDirectoryContext.setSettings("openDirectoryConfiguration",!e.openDirectoryConfiguration)}handleSynchronizationOptionsTitleClicked(){const e=this.props.adminUserDirectoryContext.getSettings();this.props.adminUserDirectoryContext.setSettings("openSynchronizationOptions",!e.openSynchronizationOptions)}handleInputChange(e){const t=e.target,s="checkbox"===t.type?t.checked:t.value,a=t.name;this.props.adminUserDirectoryContext.setSettings(a,s),this.validateInput(a,s)}validateInput(e,t){switch(e){case"host":this.userDirectoryFormService.validateHostInput(t);break;case"domain":this.userDirectoryFormService.validateDomainInput(t);break;case"port":this.userDirectoryFormService.validatePortInput(t)}}handleFieldFocus(){this.setState({hasFieldFocus:!0})}handleFieldBlur(){this.setState({hasFieldFocus:!1})}hasAllInputDisabled(){const e=this.props.adminUserDirectoryContext.getSettings();return e.processing||e.loading}isUserDirectoryChecked(){return this.props.adminUserDirectoryContext.getSettings().userDirectoryToggle}isActiveDirectoryChecked(){return"ad"===this.props.adminUserDirectoryContext.getSettings().directoryType}isOpenLdapChecked(){return"openldap"===this.props.adminUserDirectoryContext.getSettings().directoryType}isUseEmailPrefixChecked(){return this.props.adminUserDirectoryContext.getSettings().useEmailPrefix}getUsersAllowedToBeDefaultAdmin(){const e=this.props.adminUserDirectoryContext.getUsers();if(null!==e){const t=e.filter((e=>!0===e.active&&"admin"===e.role.name));return t&&t.map((e=>({value:e.id,label:this.displayUser(e)})))}return[]}getUsersAllowedToBeDefaultGroupAdmin(){const e=this.props.adminUserDirectoryContext.getUsers();if(null!==e){const t=e.filter((e=>!0===e.active));return t&&t.map((e=>({value:e.id,label:this.displayUser(e)})))}return[]}displayUser(e){return`${e.profile.first_name} ${e.profile.last_name} (${e.username})`}get connectionType(){return[{value:"plain",label:"ldap://"},{value:"ssl",label:"ldaps:// (ssl)"},{value:"tls",label:"ldaps:// (tls)"}]}render(){const e=this.props.adminUserDirectoryContext.getSettings(),t=this.props.adminUserDirectoryContext.getErrors(),s=this.props.adminUserDirectoryContext.isSubmitted();return a.createElement("div",{className:"row"},a.createElement("div",{className:"ldap-settings col7 main-column"},a.createElement("h3",null,a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"userDirectoryToggle",onChange:this.handleInputChange,checked:e.userDirectoryToggle,disabled:this.hasAllInputDisabled(),id:"userDirectoryToggle"}),a.createElement("label",{htmlFor:"userDirectoryToggle"},a.createElement(C.c,null,"Users Directory")))),!this.isUserDirectoryChecked()&&a.createElement("p",{className:"description"},a.createElement(C.c,null,"No Users Directory is configured. Enable it to synchronise your users and groups with passbolt.")),this.isUserDirectoryChecked()&&a.createElement(a.Fragment,null,a.createElement("p",{className:"description"},a.createElement(C.c,null,"A Users Directory is configured. The users and groups of passbolt will synchronize with it.")),a.createElement("div",{className:"accordion section-general "+(e.openCredentials?"":"closed")},a.createElement("h4",{className:"accordion-header"},a.createElement("a",{onClick:this.handleCredentialTitleClicked},e.openCredentials&&a.createElement(de,{name:"caret-down"}),!e.openCredentials&&a.createElement(de,{name:"caret-right"}),a.createElement(C.c,null,"Credentials"))),a.createElement("div",{className:"accordion-content"},a.createElement("div",{className:"radiolist required"},a.createElement("label",null,a.createElement(C.c,null,"Directory type")),a.createElement("div",{className:"input radio ad openldap form-element "},a.createElement("div",{className:"input radio"},a.createElement("input",{type:"radio",value:"ad",onChange:this.handleInputChange,name:"directoryType",checked:this.isActiveDirectoryChecked(),id:"directoryTypeAd",disabled:this.hasAllInputDisabled()}),a.createElement("label",{htmlFor:"directoryTypeAd"},a.createElement(C.c,null,"Active Directory"))),a.createElement("div",{className:"input radio"},a.createElement("input",{type:"radio",value:"openldap",onChange:this.handleInputChange,name:"directoryType",checked:this.isOpenLdapChecked(),id:"directoryTypeOpenLdap",disabled:this.hasAllInputDisabled()}),a.createElement("label",{htmlFor:"directoryTypeOpenLdap"},a.createElement(C.c,null,"Open Ldap"))))),a.createElement("div",{className:"input text required ad openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Server url")),a.createElement("div",{className:"input text singleline connection_info ad openldap "+(this.state.hasFieldFocus?"no-focus":"")},a.createElement("input",{id:"server-input",type:"text",className:"required host ad openldap form-element",name:"host",value:e.host,onChange:this.handleInputChange,placeholder:this.props.t("host"),disabled:this.hasAllInputDisabled()}),a.createElement("div",{className:"protocol",onBlur:this.handleFieldBlur,onFocus:this.handleFieldFocus},a.createElement(qe,{className:"inline",name:"connectionType",items:this.connectionType,value:e.connectionType,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled()})),a.createElement("div",{className:"port ad openldap"},a.createElement("input",{id:"port-input",type:"number",className:"required in-field form-element",name:"port",value:e.port,onChange:this.handleInputChange,onBlur:this.handleFieldBlur,onFocus:this.handleFieldFocus,disabled:this.hasAllInputDisabled()}))),t.hostError&&s&&a.createElement("div",{id:"server-input-feedback",className:"error-message"},t.hostError),t.portError&&s&&a.createElement("div",{id:"port-input-feedback",className:"error-message"},t.portError)),a.createElement("div",{className:"singleline clearfix"},a.createElement("div",{className:"input text first-field ad openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Username")),a.createElement("input",{id:"username-input",type:"text",className:"fluid form-element",name:"username",value:e.username,onChange:this.handleInputChange,placeholder:this.props.t("Username"),disabled:this.hasAllInputDisabled()})),a.createElement("div",{className:"input text last-field ad openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Password")),a.createElement("input",{id:"password-input",className:"fluid form-element",name:"password",value:e.password,onChange:this.handleInputChange,placeholder:this.props.t("Password"),type:"password",disabled:this.hasAllInputDisabled()}))),a.createElement("div",{className:"input text required ad openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Domain")),a.createElement("input",{id:"domain-name-input",type:"text",name:"domain",value:e.domain,onChange:this.handleInputChange,className:"required fluid form-element",placeholder:"domain.ext",disabled:this.hasAllInputDisabled()}),t.domainError&&s&&a.createElement("div",{id:"domain-name-input-feedback",className:"error-message"},t.domainError)),a.createElement("div",{className:"input text ad openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Base DN")),a.createElement("input",{id:"base-dn-input",type:"text",name:"baseDn",value:e.baseDn,onChange:this.handleInputChange,className:"fluid form-element",placeholder:"OU=OrgUsers,DC=mydomain,DC=local",disabled:this.hasAllInputDisabled()}),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"The base DN (default naming context) for the domain.")," ",a.createElement(C.c,null,"If this is empty then it will be queried from the RootDSE."))))),a.createElement("div",{className:"accordion section-directory-configuration "+(e.openDirectoryConfiguration?"":"closed")},a.createElement("h4",{className:"accordion-header"},a.createElement("a",{onClick:this.handleDirectoryConfigurationTitleClicked},e.openDirectoryConfiguration&&a.createElement(de,{name:"caret-down"}),!e.openDirectoryConfiguration&&a.createElement(de,{name:"caret-right"}),a.createElement(C.c,null,"Directory configuration"))),a.createElement("div",{className:"accordion-content"},a.createElement("div",{className:"input text ad openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Group path")),a.createElement("input",{id:"group-path-input",type:"text",name:"groupPath",value:e.groupPath,onChange:this.handleInputChange,className:"required fluid form-element",placeholder:this.props.t("Group path"),disabled:this.hasAllInputDisabled()}),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"Group path is used in addition to the base DN while searching groups.")," ",a.createElement(C.c,null,"Leave empty if users and groups are in the same DN."))),a.createElement("div",{className:"input text ad openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"User path")),a.createElement("input",{id:"user-path-input",type:"text",name:"userPath",value:e.userPath,onChange:this.handleInputChange,className:"required fluid form-element",placeholder:this.props.t("User path"),disabled:this.hasAllInputDisabled()}),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"User path is used in addition to base DN while searching users."))),this.isOpenLdapChecked()&&a.createElement("div",null,a.createElement("div",{className:"input text ad openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Group object class")),a.createElement("input",{id:"group-object-class-input",type:"text",name:"groupObjectClass",value:e.groupObjectClass,onChange:this.handleInputChange,className:"required fluid",placeholder:"GroupObjectClass",disabled:this.hasAllInputDisabled()}),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"For Openldap only. Defines which group object to use.")," (",a.createElement(C.c,null,"Default"),": posixGroup)")),a.createElement("div",{className:"input text ad openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"User object class")),a.createElement("input",{id:"user-object-class-input",type:"text",name:"userObjectClass",value:e.userObjectClass,onChange:this.handleInputChange,className:"required fluid form-element",placeholder:"UserObjectClass",disabled:this.hasAllInputDisabled()}),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"For Openldap only. Defines which user object to use.")," (",a.createElement(C.c,null,"Default"),": inetOrgPerson)")),a.createElement("div",{className:"input text openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Use email prefix / suffix?")),a.createElement("div",{className:"input toggle-switch openldap form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"useEmailPrefix",value:e.useEmailPrefix,onChange:this.handleInputChange,id:"use-email-prefix-suffix-toggle-button",disabled:this.hasAllInputDisabled()}),a.createElement("label",{className:"text",htmlFor:"use-email-prefix-suffix-toggle-button"},a.createElement(C.c,null,"Build email based on a prefix and suffix?"))),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"Use this option when user entries do not include an email address by default"))),this.isUseEmailPrefixChecked()&&a.createElement("div",{className:"singleline clearfix",id:"use-email-prefix-suffix-options"},a.createElement("div",{className:"input text first-field openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Email prefix")),a.createElement("input",{id:"email-prefix-input",type:"text",name:"emailPrefix",checked:e.emailPrefix,onChange:this.handleInputChange,className:"required fluid form-element",placeholder:this.props.t("Username"),disabled:this.hasAllInputDisabled()}),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"The attribute you would like to use for the first part of the email (usually username)."))),a.createElement("div",{className:"input text last-field openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Email suffix")),a.createElement("input",{id:"email-suffix-input",type:"text",name:"emailSuffix",value:e.emailSuffix,onChange:this.handleInputChange,className:"required form-element",placeholder:this.props.t("@your-domain.com"),disabled:this.hasAllInputDisabled()}),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"The domain name part of the email (@your-domain-name)."))))))),a.createElement("div",{className:"accordion section-sync-options "+(e.openSynchronizationOptions?"":"closed")},a.createElement("h4",{className:"accordion-header"},a.createElement("a",{onClick:this.handleSynchronizationOptionsTitleClicked},e.openSynchronizationOptions&&a.createElement(de,{name:"caret-down"}),!e.openSynchronizationOptions&&a.createElement(de,{name:"caret-right"}),a.createElement(C.c,null,"Synchronization options"))),a.createElement("div",{className:"accordion-content"},a.createElement("div",{className:"select-wrapper input required ad openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Default admin")),a.createElement(qe,{items:this.getUsersAllowedToBeDefaultAdmin(),id:"default-user-select",name:"defaultAdmin",value:e.defaultAdmin,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),search:!0}),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"The default admin user is the user that will perform the operations for the the directory."))),a.createElement("div",{className:"select-wrapper input required ad openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Default group admin")),a.createElement(qe,{items:this.getUsersAllowedToBeDefaultGroupAdmin(),id:"default-group-admin-user-select",name:"defaultGroupAdmin",value:e.defaultGroupAdmin,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),search:!0}),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"The default group manager is the user that will be the group manager of newly created groups."))),a.createElement("div",{className:"input text ad openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Groups parent group")),a.createElement("input",{id:"groups-parent-group-input",type:"text",name:"groupsParentGroup",value:e.groupsParentGroup,onChange:this.handleInputChange,className:"fluid form-element",placeholder:this.props.t("Group name"),disabled:this.hasAllInputDisabled()}),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"Synchronize only the groups which are members of this group."))),a.createElement("div",{className:"input text ad openldap "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Users parent group")),a.createElement("input",{id:"users-parent-group-input",type:"text",name:"usersParentGroup",value:e.usersParentGroup,onChange:this.handleInputChange,className:"fluid form-element",placeholder:this.props.t("Group name"),disabled:this.hasAllInputDisabled()}),a.createElement("div",{className:"help-message"},a.createElement(C.c,null,"Synchronize only the users which are members of this group."))),this.isActiveDirectoryChecked()&&a.createElement("div",{className:"input text clearfix ad "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Enabled users only")),a.createElement("div",{className:"input toggle-switch ad form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"enabledUsersOnly",checked:e.enabledUsersOnly,onChange:this.handleInputChange,id:"enabled-users-only-toggle-button",disabled:this.hasAllInputDisabled()}),a.createElement("label",{className:"text",htmlFor:"enabled-users-only-toggle-button"},a.createElement(C.c,null,"Only synchronize enabled users (AD)")))),a.createElement("div",{className:"input text clearfix ad openldap"},a.createElement("label",null,a.createElement(C.c,null,"Sync operations")),a.createElement("div",{className:"col6"},a.createElement("div",{className:"input toggle-switch ad openldap form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"createUsers",checked:e.createUsers,onChange:this.handleInputChange,id:"sync-users-create-toggle-button",disabled:this.hasAllInputDisabled()}),a.createElement("label",{className:"text",htmlFor:"sync-users-create-toggle-button"},a.createElement(C.c,null,"Create users"))),a.createElement("div",{className:"input toggle-switch ad openldap form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"deleteUsers",checked:e.deleteUsers,onChange:this.handleInputChange,id:"sync-users-delete-toggle-button",disabled:this.hasAllInputDisabled()}),a.createElement("label",{className:"text",htmlFor:"sync-users-delete-toggle-button"},a.createElement(C.c,null,"Delete users")))),a.createElement("div",{className:"col6 last"},a.createElement("div",{className:"input toggle-switch ad openldap form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"createGroups",checked:e.createGroups,onChange:this.handleInputChange,id:"sync-groups-create-toggle-button",disabled:this.hasAllInputDisabled()}),a.createElement("label",{className:"text",htmlFor:"sync-groups-create-toggle-button"},a.createElement(C.c,null,"Create groups"))),a.createElement("div",{className:"input toggle-switch ad openldap form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"deleteGroups",checked:e.deleteGroups,onChange:this.handleInputChange,id:"sync-groups-delete-toggle-button",disabled:this.hasAllInputDisabled()}),a.createElement("label",{className:"text",htmlFor:"sync-groups-delete-toggle-button"},a.createElement(C.c,null,"Delete groups"))),a.createElement("div",{className:"input toggle-switch ad openldap form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"updateGroups",checked:e.updateGroups,onChange:this.handleInputChange,id:"sync-groups-update-toggle-button",disabled:this.hasAllInputDisabled()}),a.createElement("label",{className:"text",htmlFor:"sync-groups-update-toggle-button"},a.createElement(C.c,null,"Update groups"))))))))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Need help?")),a.createElement("p",null,a.createElement(C.c,null,"Check out our ldap configuration guide.")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/configure/ldap",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"document"}),a.createElement("span",null,a.createElement(C.c,null,"Read the documentation"))))))}}ui.propTypes={adminUserDirectoryContext:d().object,administrationWorkspaceContext:d().object,t:d().func};const gi=ti(Xn((0,k.Z)("common")(ui))),fi=class{constructor(e={}){this.hasDatabaseSetting="sources_database"in e&&e.sources_database,this.hasFileConfigSetting="sources_file"in e&&e.sources_file,this.passwordCreate=!("send_password_create"in e)||e.send_password_create,this.passwordShare=!("send_password_share"in e)||e.send_password_share,this.passwordUpdate=!("send_password_update"in e)||e.send_password_update,this.passwordDelete=!("send_password_delete"in e)||e.send_password_delete,this.folderCreate=!("send_folder_create"in e)||e.send_folder_create,this.folderUpdate=!("send_folder_update"in e)||e.send_folder_update,this.folderDelete=!("send_folder_delete"in e)||e.send_folder_delete,this.folderShare=!("send_folder_share"in e)||e.send_folder_share,this.commentAdd=!("send_comment_add"in e)||e.send_comment_add,this.groupDelete=!("send_group_delete"in e)||e.send_group_delete,this.groupUserAdd=!("send_group_user_add"in e)||e.send_group_user_add,this.groupUserDelete=!("send_group_user_delete"in e)||e.send_group_user_delete,this.groupUserUpdate=!("send_group_user_update"in e)||e.send_group_user_update,this.groupManagerUpdate=!("send_group_manager_update"in e)||e.send_group_manager_update,this.userCreate=!("send_user_create"in e)||e.send_user_create,this.userRecover=!("send_user_recover"in e)||e.send_user_recover,this.userRecoverComplete=!("send_user_recoverComplete"in e)||e.send_user_recoverComplete,this.userRecoverAbortAdmin=!("send_admin_user_recover_abort"in e)||e.send_admin_user_recover_abort,this.userRecoverCompleteAdmin=!("send_admin_user_recover_complete"in e)||e.send_admin_user_recover_complete,this.userSetupCompleteAdmin=!("send_admin_user_setup_completed"in e)||e.send_admin_user_setup_completed,this.showDescription=!("show_description"in e)||e.show_description,this.showSecret=!("show_secret"in e)||e.show_secret,this.showUri=!("show_uri"in e)||e.show_uri,this.showUsername=!("show_username"in e)||e.show_username,this.showComment=!("show_comment"in e)||e.show_comment,this.accountRecoveryRequestUser=!("send_accountRecovery_request_user"in e)||e.send_accountRecovery_request_user,this.accountRecoveryRequestAdmin=!("send_accountRecovery_request_admin"in e)||e.send_accountRecovery_request_admin,this.accountRecoveryRequestGuessing=!("send_accountRecovery_request_guessing"in e)||e.send_accountRecovery_request_guessing,this.accountRecoveryRequestUserApproved=!("send_accountRecovery_response_user_approved"in e)||e.send_accountRecovery_response_user_approved,this.accountRecoveryRequestUserRejected=!("send_accountRecovery_response_user_rejected"in e)||e.send_accountRecovery_response_user_rejected,this.accountRecoveryRequestCreatedAmin=!("send_accountRecovery_response_created_admin"in e)||e.send_accountRecovery_response_created_admin,this.accountRecoveryRequestCreatedAllAdmins=!("send_accountRecovery_response_created_allAdmins"in e)||e.send_accountRecovery_response_created_allAdmins,this.accountRecoveryRequestPolicyUpdate=!("send_accountRecovery_policy_update"in e)||e.send_accountRecovery_policy_update}};function bi(){return bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},bi.apply(this,arguments)}const yi=a.createContext({getCurrentSettings:()=>{},getSettings:()=>{},setSettings:()=>{},hasSettingsChanges:()=>{},findEmailNotificationSettings:()=>{},save:()=>{},setProcessing:()=>{},isProcessing:()=>{},clearContext:()=>{}});class Ei extends a.Component{constructor(e){super(e),this.state=this.defaultState;const t=e.context.getApiClientOptions();this.emailNotificationService=new class{constructor(e){e.setResourceName("settings/emails/notifications"),this.apiClient=new hs(e)}async find(){return(await this.apiClient.findAll()).body}async save(e){return(await this.apiClient.create(e)).body}}(t)}get defaultState(){return{currentSettings:null,settings:new fi,processing:!0,getCurrentSettings:this.getCurrentSettings.bind(this),getSettings:this.getSettings.bind(this),setSettings:this.setSettings.bind(this),findEmailNotificationSettings:this.findEmailNotificationSettings.bind(this),hasSettingsChanges:this.hasSettingsChanges.bind(this),isProcessing:this.isProcessing.bind(this),setProcessing:this.setProcessing.bind(this),save:this.save.bind(this),clearContext:this.clearContext.bind(this)}}async findEmailNotificationSettings(){this.setProcessing(!0);const e=await this.emailNotificationService.find(),t=new fi(e);this.setState({currentSettings:t}),this.setState({settings:Object.assign({},t)}),this.setProcessing(!1)}getCurrentSettings(){return this.state.currentSettings}getSettings(){return this.state.settings}async setSettings(e,t){const s=Object.assign({},this.state.settings,{[e]:t});await this.setState({settings:s})}isProcessing(){return this.state.processing}setProcessing(e){this.setState({processing:e})}hasSettingsChanges(){return JSON.stringify(this.state.currentSettings)!==JSON.stringify(this.state.settings)}clearContext(){const{currentSettings:e,settings:t,processing:s}=this.defaultState;this.setState({currentSettings:e,settings:t,processing:s})}async save(){this.setProcessing(!0);const e=new class{constructor(e={}){this.sources_database="hasDatabaseSetting"in e&&e.hasDatabaseSetting,this.sources_file="hasFileConfigSetting"in e&&e.hasFileConfigSetting,this.send_password_create=!("passwordCreate"in e)||e.passwordCreate,this.send_password_share=!("passwordShare"in e)||e.passwordShare,this.send_password_update=!("passwordUpdate"in e)||e.passwordUpdate,this.send_password_delete=!("passwordDelete"in e)||e.passwordDelete,this.send_folder_create=!("folderCreate"in e)||e.folderCreate,this.send_folder_update=!("folderUpdate"in e)||e.folderUpdate,this.send_folder_delete=!("folderDelete"in e)||e.folderDelete,this.send_folder_share=!("folderShare"in e)||e.folderShare,this.send_comment_add=!("commentAdd"in e)||e.commentAdd,this.send_group_delete=!("groupDelete"in e)||e.groupDelete,this.send_group_user_add=!("groupUserAdd"in e)||e.groupUserAdd,this.send_group_user_delete=!("groupUserDelete"in e)||e.groupUserDelete,this.send_group_user_update=!("groupUserUpdate"in e)||e.groupUserUpdate,this.send_group_manager_update=!("groupManagerUpdate"in e)||e.groupManagerUpdate,this.send_user_create=!("userCreate"in e)||e.userCreate,this.send_user_recover=!("userRecover"in e)||e.userRecover,this.send_user_recoverComplete=!("userRecoverComplete"in e)||e.userRecoverComplete,this.send_admin_user_setup_completed=!("userSetupCompleteAdmin"in e)||e.userSetupCompleteAdmin,this.send_admin_user_recover_abort=!("userRecoverAbortAdmin"in e)||e.userRecoverAbortAdmin,this.send_admin_user_recover_complete=!("userRecoverCompleteAdmin"in e)||e.userRecoverCompleteAdmin,this.send_accountRecovery_request_user=!("accountRecoveryRequestUser"in e)||e.accountRecoveryRequestUser,this.send_accountRecovery_request_admin=!("accountRecoveryRequestAdmin"in e)||e.accountRecoveryRequestAdmin,this.send_accountRecovery_request_guessing=!("accountRecoveryRequestGuessing"in e)||e.accountRecoveryRequestGuessing,this.send_accountRecovery_response_user_approved=!("accountRecoveryRequestUserApproved"in e)||e.accountRecoveryRequestUserApproved,this.send_accountRecovery_response_user_rejected=!("accountRecoveryRequestUserRejected"in e)||e.accountRecoveryRequestUserRejected,this.send_accountRecovery_response_created_admin=!("accountRecoveryRequestCreatedAmin"in e)||e.accountRecoveryRequestCreatedAmin,this.send_accountRecovery_response_created_allAdmins=!("accountRecoveryRequestCreatedAllAdmins"in e)||e.accountRecoveryRequestCreatedAllAdmins,this.send_accountRecovery_policy_update=!("accountRecoveryRequestPolicyUpdate"in e)||e.accountRecoveryRequestPolicyUpdate,this.show_description=!("showDescription"in e)||e.showDescription,this.show_secret=!("showSecret"in e)||e.showSecret,this.show_uri=!("showUri"in e)||e.showUri,this.show_username=!("showUsername"in e)||e.showUsername,this.show_comment=!("showComment"in e)||e.showComment}}(this.state.settings);await this.emailNotificationService.save(e),await this.findEmailNotificationSettings()}render(){return a.createElement(yi.Provider,{value:this.state},this.props.children)}}function vi(e){return class extends a.Component{render(){return a.createElement(yi.Consumer,null,(t=>a.createElement(e,bi({adminEmailNotificationContext:t},this.props))))}}}Ei.propTypes={context:d().any,children:d().any},u(Ei);class Ci extends a.Component{constructor(e){super(e),this.bindCallbacks()}async handleSaveClick(){try{await this.props.adminEmailNotificationContext.save(),this.handleSaveSuccess()}catch(e){this.handleSaveError(e)}finally{this.props.adminEmailNotificationContext.setProcessing(!1)}}isSaveEnabled(){return!this.props.adminEmailNotificationContext.isProcessing()&&this.props.adminEmailNotificationContext.hasSettingsChanges()}bindCallbacks(){this.handleSaveClick=this.handleSaveClick.bind(this)}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.props.t("The email notification settings were updated."))}async handleSaveError(e){"UserAbortsOperationError"!==e.name&&(console.error(e),await this.handleError(e))}async handleError(e){await this.props.actionFeedbackContext.displayError(e.message)}render(){return a.createElement("div",{className:"col2_3 actions-wrapper"},a.createElement("div",{className:"actions"},a.createElement("div",null,a.createElement("li",null,a.createElement("a",{className:"button "+(this.isSaveEnabled()?"":"disabled"),onClick:this.handleSaveClick},a.createElement(de,{name:"save"}),a.createElement("span",null,a.createElement(C.c,null,"Save settings")))))))}}Ci.propTypes={adminEmailNotificationContext:d().object,actionFeedbackContext:d().object,t:d().func};const ki=vi(D((0,k.Z)("common")(Ci)));class wi extends a.Component{constructor(e){super(e),this.bindCallbacks()}async componentDidMount(){this.props.administrationWorkspaceContext.setDisplayAdministrationWorkspaceAction(ki),this.props.adminEmailNotificationContext.findEmailNotificationSettings()}componentWillUnmount(){this.props.administrationWorkspaceContext.resetDisplayAdministrationWorkspaceAction(),this.props.adminEmailNotificationContext.clearContext()}bindCallbacks(){this.handleInputChange=this.handleInputChange.bind(this)}handleInputChange(e){const t=e.target.checked,s=e.target.name;this.props.adminEmailNotificationContext.setSettings(s,t)}hasAllInputDisabled(){return this.props.adminEmailNotificationContext.isProcessing()}hasDatabaseSetting(){return this.props.adminEmailNotificationContext.getSettings().hasDatabaseSetting}hasFileConfigSetting(){return this.props.adminEmailNotificationContext.getSettings().hasFileConfigSetting}canUseFolders(){return this.props.context.siteSettings.canIUse("folders")}canUseAccountRecovery(){return this.props.context.siteSettings.canIUse("accountRecovery")}render(){const e=this.props.adminEmailNotificationContext.getSettings();return a.createElement("div",{className:"row"},a.createElement("div",{className:"email-notification-settings col8 main-column"},e&&this.hasDatabaseSetting()&&this.hasFileConfigSetting()&&a.createElement("div",{className:"warning message",id:"email-notification-setting-overridden-banner"},a.createElement("p",null,a.createElement(C.c,null,"Settings have been found in your database as well as in your passbolt.php (or environment variables).")," ",a.createElement(C.c,null,"The settings displayed in the form below are the one stored in your database and have precedence over others."))),e&&!this.hasDatabaseSetting()&&this.hasFileConfigSetting()&&a.createElement("div",{className:"warning message",id:"email-notification-fileconfig-exists-banner"},a.createElement("p",null,a.createElement(C.c,null,"You seem to have Email Notification Settings defined in your passbolt.php (or via environment variables).")," ",a.createElement(C.c,null,"Submitting the form will overwrite those settings with the ones you choose in the form below."))),a.createElement("h3",null,a.createElement(C.c,null,"Email delivery")),a.createElement("p",null,a.createElement(C.c,null,"In this section you can choose which email notifications will be sent.")),a.createElement("div",{className:"section"},a.createElement("div",{className:"password-section"},a.createElement("label",null,a.createElement(C.c,null,"Passwords")),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"passwordCreate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.passwordCreate,id:"send-password-create-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-password-create-toggle-button"},a.createElement(C.c,null,"When a password is created, notify its creator."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"passwordUpdate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.passwordUpdate,id:"send-password-update-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-password-update-toggle-button"},a.createElement(C.c,null,"When a password is updated, notify the users who have access to it."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"passwordDelete",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.passwordDelete,id:"send-password-delete-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-password-delete-toggle-button"},a.createElement(C.c,null,"When a password is deleted, notify the users who had access to it."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"passwordShare",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.passwordShare,id:"send-password-share-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-password-share-toggle-button"},a.createElement(C.c,null,"When a password is shared, notify the users who gain access to it.")))),this.canUseFolders()&&a.createElement("div",{className:"folder-section"},a.createElement("label",null,a.createElement(C.c,null,"Folders")),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"folderCreate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.folderCreate,id:"send-folder-create-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-folder-create-toggle-button"},a.createElement(C.c,null,"When a folder is created, notify its creator."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"folderUpdate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.folderUpdate,id:"send-folder-update-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-folder-update-toggle-button"},a.createElement(C.c,null,"When a folder is updated, notify the users who have access to it."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"folderDelete",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.folderDelete,id:"send-folder-delete-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-folder-delete-toggle-button"},a.createElement(C.c,null,"When a folder is deleted, notify the users who had access to it."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"folderShare",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.folderShare,id:"send-folder-share-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-folder-share-toggle-button"},a.createElement(C.c,null,"When a folder is shared, notify the users who gain access to it."))))),a.createElement("div",{className:"section"},a.createElement("div",{className:"comment-section"},a.createElement("label",null,a.createElement(C.c,null,"Comments")),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"commentAdd",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.commentAdd,id:"send-comment-add-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-comment-add-toggle-button"},a.createElement(C.c,null,"When a comment is posted on a password, notify the users who have access to this password."))))),a.createElement("div",{className:"section"},a.createElement("div",{className:"group-section"},a.createElement("label",null,a.createElement(C.c,null,"Group membership")),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"groupDelete",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.groupDelete,id:"send-group-delete-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-group-delete-toggle-button"},a.createElement(C.c,null,"When a group is deleted, notify the users who were members of it."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"groupUserAdd",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.groupUserAdd,id:"send-group-user-add-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-group-user-add-toggle-button"},a.createElement(C.c,null,"When users are added to a group, notify them."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"groupUserDelete",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.groupUserDelete,id:"send-group-user-delete-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-group-user-delete-toggle-button"},a.createElement(C.c,null,"When users are removed from a group, notify them."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"groupUserUpdate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.groupUserUpdate,id:"send-group-user-update-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-group-user-update-toggle-button"},a.createElement(C.c,null,"When user roles change in a group, notify the corresponding users.")))),a.createElement("div",{className:"group-admin-section"},a.createElement("label",null,a.createElement(C.c,null,"Group manager")),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"groupManagerUpdate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.groupManagerUpdate,id:"send-group-manager-update-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-group-manager-update-toggle-button"},a.createElement(C.c,null,"When members of a group change, notify the group manager(s)."))))),a.createElement("h3",null,a.createElement(C.c,null,"Registration & Recovery")),a.createElement("div",{className:"section"},a.createElement("div",{className:"admin-section"},a.createElement("label",null,a.createElement(C.c,null,"Admin")),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"userSetupCompleteAdmin",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.userSetupCompleteAdmin,id:"user-setup-complete-admin-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"user-setup-complete-admin-toggle-button"},a.createElement(C.c,null,"When a user completed a setup, notify all the administrators."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"userRecoverCompleteAdmin",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.userRecoverCompleteAdmin,id:"user-recover-complete-admin-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"user-recover-complete-admin-toggle-button"},a.createElement(C.c,null,"When a user completed a recover, notify all the administrators."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"userRecoverAbortAdmin",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.userRecoverAbortAdmin,id:"user-recover-abort-admin-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"user-recover-abort-admin-toggle-button"},a.createElement(C.c,null,"When a user aborted a recover, notify all the administrators.")))),a.createElement("div",{className:"user-section"},a.createElement("label",null,a.createElement(C.c,null,"User")),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"userCreate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.userCreate,id:"send-user-create-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-user-create-toggle-button"},a.createElement(C.c,null,"When new users are invited to passbolt, notify them."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"userRecover",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.userRecover,id:"send-user-recover-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"send-user-recover-toggle-button"},a.createElement(C.c,null,"When users try to recover their account, notify them."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"userRecoverComplete",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.userRecoverComplete,id:"user-recover-complete-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"user-recover-complete-toggle-button"},a.createElement(C.c,null,"When users completed the recover of their account, notify them."))))),this.canUseAccountRecovery()&&a.createElement(a.Fragment,null,a.createElement("h3",null,a.createElement(C.c,null,"Account recovery")),a.createElement("div",{className:"section"},a.createElement("div",{className:"admin-section"},a.createElement("label",null,a.createElement(C.c,null,"Admin")),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"accountRecoveryRequestAdmin",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.accountRecoveryRequestAdmin,id:"account-recovery-request-admin-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"account-recovery-request-admin-toggle-button"},a.createElement(C.c,null,"When an account recovery is requested, notify all the administrators."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"accountRecoveryRequestPolicyUpdate",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.accountRecoveryRequestPolicyUpdate,id:"account-recovery-policy-update-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"account-recovery-policy-update-toggle-button"},a.createElement(C.c,null,"When an account recovery policy is updated, notify all the administrators."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"accountRecoveryRequestCreatedAmin",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.accountRecoveryRequestCreatedAmin,id:"account-recovery-response-created-admin-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"account-recovery-response-created-admin-toggle-button"},a.createElement(C.c,null,"When an administrator answered to an account recovery request, notify the administrator at the origin of the action."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"accountRecoveryRequestCreatedAllAdmins",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.accountRecoveryRequestCreatedAllAdmins,id:"account-recovery-response-created-all-admin-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"account-recovery-response-created-all-admin-toggle-button"},a.createElement(C.c,null,"When an administrator answered to an account recovery request, notify all the administrators.")))),a.createElement("div",{className:"user-section"},a.createElement("label",null,a.createElement(C.c,null,"User")),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"accountRecoveryRequestUser",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.accountRecoveryRequestUser,id:"account-recovery-request-user-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"account-recovery-request-user-toggle-button"},a.createElement(C.c,null,"When an account recovery is requested, notify the user."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"accountRecoveryRequestUserApproved",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.accountRecoveryRequestUserApproved,id:"account-recovery-response-user-approved-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"account-recovery-response-user-approved-toggle-button"},a.createElement(C.c,null,"When an account recovery is approved, notify the user."))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"accountRecoveryRequestUserRejected",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.accountRecoveryRequestUserRejected,id:"account-recovery-response-user-rejected-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"account-recovery-response-user-rejected-toggle-button"},a.createElement(C.c,null,"When an account recovery is rejected, notify the user.")))))),a.createElement("h3",null,a.createElement(C.c,null,"Email content visibility")),a.createElement("p",null,a.createElement(C.c,null,"In this section you can adjust the composition of the emails, e.g. which information will be included in the notification.")),a.createElement("div",{className:"section"},a.createElement("div",{className:"password-section"},a.createElement("label",null,a.createElement(C.c,null,"Passwords")),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"showUsername",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.showUsername,id:"show-username-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"show-username-toggle-button"},a.createElement(C.c,null,"Username"))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"showUri",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.showUri,id:"show-uri-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"show-uri-toggle-button"},a.createElement(C.c,null,"URI"))),a.createElement("span",{className:"input toggle-switch form-element ready"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"showSecret",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.showSecret,id:"show-secret-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"show-secret-toggle-button"},a.createElement(C.c,null,"Encrypted secret"))),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"showDescription",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.showDescription,id:"show-description-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"show-description-toggle-button"},a.createElement(C.c,null,"Description")))),a.createElement("div",{className:"comment-section"},a.createElement("label",null,a.createElement(C.c,null,"Comments")),a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"showComment",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,checked:e.showComment,id:"show-comment-toggle-button"}),a.createElement("label",{className:"text",htmlFor:"show-comment-toggle-button"},a.createElement(C.c,null,"Comment content")))))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Need some help?")),a.createElement("p",null,a.createElement(C.c,null,"For more information about email notification, checkout the dedicated page on the help website.")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/configure/notification/email",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"document"}),a.createElement("span",null,a.createElement(C.c,null,"Read the documentation"))))))}}wi.propTypes={context:d().any,administrationWorkspaceContext:d().object,adminEmailNotificationContext:d().object};const Si=u(vi(Xn((0,k.Z)("common")(wi)))),xi=class{constructor(e){this.customerId=e?.customer_id||"",this.subscriptionId=e?"subscription_id"in e?e.subscription_id:"N/A":"",this.users=e?.users||null,this.email=e?"email"in e?e.email:"N/A":"",this.expiry=e?.expiry||null,this.created=e?.created||null,this.data=e?.data||null}};function Ni(){return Ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Ni.apply(this,arguments)}const Ri=a.createContext({getSubscription:()=>{},findSubscriptionKey:()=>{},isProcessing:()=>{},setProcessing:()=>{},getActiveUsers:()=>{},clearContext:()=>{}});class Ii extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{subscription:new xi,processing:!0,getSubscription:this.getSubscription.bind(this),findSubscriptionKey:this.findSubscriptionKey.bind(this),isProcessing:this.isProcessing.bind(this),setProcessing:this.setProcessing.bind(this),getActiveUsers:this.getActiveUsers.bind(this),clearContext:this.clearContext.bind(this)}}async findSubscriptionKey(){this.setProcessing(!0);let e=new xi;try{const t=await this.props.context.onGetSubscriptionKeyRequested();e=new xi(t)}catch(t){"PassboltSubscriptionError"===t.name&&(e=new xi(t.subscription))}finally{this.setState({subscription:e}),this.setProcessing(!1)}}async getActiveUsers(){return(await this.props.context.port.request("passbolt.users.get-all")).filter((e=>e.active)).length}getSubscription(){return this.state.subscription}isProcessing(){return this.state.processing}setProcessing(e){this.setState({processing:e})}clearContext(){const{subscription:e,processing:t}=this.defaultState;this.setState({subscription:e,processing:t})}render(){return a.createElement(Ri.Provider,{value:this.state},this.props.children)}}Ii.propTypes={context:d().any,children:d().any};const Di=u(Ii);function Ti(e){return class extends a.Component{render(){return a.createElement(Ri.Consumer,null,(t=>a.createElement(e,Ni({adminSubcriptionContext:t},this.props))))}}}class Ai extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.initEventHandlers(),this.createInputRef()}getDefaultState(){return{selectedFile:null,key:"",keyError:"",processing:!1,hasBeenValidated:!1}}initEventHandlers(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleKeyInputKeyUp=this.handleKeyInputKeyUp.bind(this),this.handleSelectSubscriptionKeyFile=this.handleSelectSubscriptionKeyFile.bind(this),this.handleSelectFile=this.handleSelectFile.bind(this)}createInputRef(){this.keyInputRef=a.createRef(),this.fileUploaderRef=a.createRef()}componentDidMount(){this.setState({key:this.props.context.editSubscriptionKey.key||""})}async handleFormSubmit(e){e.preventDefault(),this.state.processing||await this.save()}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}handleKeyInputKeyUp(){if(this.state.hasAlreadyBeenValidated){const e=this.validateNameInput();this.setState(e)}}handleCloseClick(){this.props.context.setContext({editSubscriptionKey:null}),this.props.onClose()}handleSelectFile(){this.fileUploaderRef.current.click()}get selectedFilename(){return this.state.selectedFile?this.state.selectedFile.name:""}async handleSelectSubscriptionKeyFile(e){const[t]=e.target.files,s=await this.readSubscriptionKeyFile(t);this.setState({key:s,selectedFile:t}),this.state.hasBeenValidated&&await this.validate()}readSubscriptionKeyFile(e){const t=new FileReader;return new Promise(((s,a)=>{t.onloadend=()=>{try{s(t.result)}catch(e){a(e)}},t.readAsText(e)}))}async save(){if(this.state.processing)return;if(await this.setState({hasBeenValidated:!0}),await this.toggleProcessing(),!await this.validate())return this.handleValidateError(),void await this.toggleProcessing();const e={data:this.state.key};try{await this.props.administrationWorkspaceContext.onUpdateSubscriptionKeyRequested(e),await this.handleSaveSuccess(),await this.props.adminSubcriptionContext.findSubscriptionKey()}catch(e){await this.toggleProcessing(),this.handleSaveError(e),this.focusFieldError()}}handleValidateError(){this.focusFieldError()}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.translate("The subscription key has been updated successfully.")),this.props.administrationWorkspaceContext.onMustRefreshSubscriptionKey(),this.props.context.setContext({editSubscriptionKey:null,refreshSubscriptionAnnouncement:!0}),this.props.onClose()}async handleSaveError(e){if("PassboltSubscriptionError"===e.name)this.setState({keyError:e.message});else if("EntityValidationError"===e.name)this.setState({keyError:this.translate("The subscription key is invalid.")});else if("PassboltApiFetchError"===e.name&&e.data&&400===e.data.code)this.setState({keyError:e.message});else{console.error(e);const t={error:e};this.props.dialogContext.open(we,t)}}focusFieldError(){this.state.keyError&&this.keyInputRef.current.focus()}validateKeyInput(){const e=this.state.key.trim();let t="";return e.length||(t=this.translate("A subscription key is required.")),new Promise((e=>{this.setState({keyError:t},e)}))}async validate(){return this.setState({keyError:""}),await this.validateKeyInput(),""===this.state.keyError}async toggleProcessing(){await this.setState({processing:!this.state.processing})}hasAllInputDisabled(){return this.state.processing}get translate(){return this.props.t}render(){return a.createElement(be,{title:this.translate("Edit subscription key"),onClose:this.handleCloseClick,disabled:this.state.processing,className:"edit-subscription-dialog"},a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input textarea required ${this.state.keyError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"edit-tag-form-name"},a.createElement(C.c,null,"Subscription key")),a.createElement("textarea",{id:"edit-subscription-form-key",name:"key",value:this.state.key,onKeyUp:this.handleKeyInputKeyUp,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),ref:this.keyInputRef,className:"required full_report",required:"required",autoComplete:"off",autoFocus:!0})),a.createElement("div",{className:"input file "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("input",{type:"file",ref:this.fileUploaderRef,disabled:this.hasAllInputDisabled(),onChange:this.handleSelectSubscriptionKeyFile}),a.createElement("div",{className:"input-file-inline"},a.createElement("input",{type:"text",disabled:!0,placeholder:this.translate("No key file selected"),value:this.selectedFilename}),a.createElement("button",{type:"button",className:"button primary",onClick:this.handleSelectFile,disabled:this.hasAllInputDisabled()},a.createElement("span",null,a.createElement(C.c,null,"Choose a file")))),this.state.keyError&&a.createElement("div",{className:"key error-message"},this.state.keyError))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleCloseClick}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Save")}))))}}Ai.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,adminSubcriptionContext:d().object,dialogContext:d().any,administrationWorkspaceContext:d().any,t:d().func};const Pi=u(Ti(Xn(D(M((0,k.Z)("common")(Ai))))));class Ui{constructor(e){this.context=e.context,this.dialogContext=e.dialogContext,this.subscriptionContext=e.adminSubcriptionContext}static getInstance(e){return this.instance||(this.instance=new Ui(e)),this.instance}static killInstance(){this.instance=null}async editSubscription(){const e={key:this.subscriptionContext.getSubscription().data};this.context.setContext({editSubscriptionKey:e}),this.dialogContext.open(Pi)}}const _i=Ui;class Li extends a.Component{constructor(e){super(e),this.bindCallbacks(),this.subscriptionActionService=_i.getInstance(this.props)}bindCallbacks(){this.handleEditSubscriptionClick=this.handleEditSubscriptionClick.bind(this)}handleEditSubscriptionClick(){this.subscriptionActionService.editSubscription()}render(){return a.createElement("div",{className:"col2_3 actions-wrapper"},a.createElement("div",{className:"actions"},a.createElement("div",null,a.createElement("li",null,a.createElement("a",{className:"button",onClick:this.handleEditSubscriptionClick},a.createElement(de,{name:"edit"}),a.createElement("span",null,a.createElement(C.c,null,"Update key")))))))}}Li.propTypes={context:d().object,dialogContext:d().object,adminSubscriptionContext:d().object,actionFeedbackContext:d().object,t:d().func};const Fi=D(M(Ti((0,k.Z)("common")(Li))));class Mi extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks(),this.subscriptionActionService=_i.getInstance(this.props)}get defaultState(){return{activeUsers:null}}async componentDidMount(){this.props.administrationWorkspaceContext.setDisplayAdministrationWorkspaceAction(Fi),this.findActiveUsers(),await this.findSubscriptionKey()}componentWillUnmount(){this.props.administrationWorkspaceContext.resetDisplayAdministrationWorkspaceAction(),this.props.adminSubcriptionContext.clearContext(),_i.killInstance(),this.mfaFormService=null}bindCallbacks(){this.handleRenewKey=this.handleRenewKey.bind(this),this.handleUpdateKey=this.handleUpdateKey.bind(this)}async findActiveUsers(){const e=await this.props.adminSubcriptionContext.getActiveUsers();this.setState({activeUsers:e})}async findSubscriptionKey(){this.props.adminSubcriptionContext.findSubscriptionKey()}handleRenewKey(){const e=this.props.adminSubcriptionContext.getSubscription();this.hasLimitUsersExceeded()?this.props.navigationContext.onGoToNewTab(`https://www.passbolt.com/subscription/ee/update/qty?subscription_id=${e.subscriptionId}&customer_id=${e.customerId}`):(this.hasSubscriptionKeyExpired()||this.hasSubscriptionKeyGoingToExpire())&&this.props.navigationContext.onGoToNewTab(`https://www.passbolt.com/subscription/ee/update/renew?subscription_id=${e.subscriptionId}&customer_id=${e.customerId}`)}handleUpdateKey(){this.subscriptionActionService.editSubscription()}hasSubscriptionKeyExpired(){return B.ou.fromISO(this.props.adminSubcriptionContext.getSubscription().expiry)<B.ou.now()}hasSubscriptionKeyGoingToExpire(){return B.ou.fromISO(this.props.adminSubcriptionContext.getSubscription().expiry)<B.ou.now().plus({days:30})&&!this.hasSubscriptionKeyExpired()}hasSubscriptionKey(){return Boolean(this.props.adminSubcriptionContext.getSubscription().data)}hasLimitUsersExceeded(){return this.props.adminSubcriptionContext.getSubscription().users<this.state.activeUsers}hasSubscriptionToRenew(){return this.hasInvalidSubscription()||this.hasSubscriptionKeyGoingToExpire()}hasValidSubscription(){return this.hasSubscriptionKey()&&!this.hasLimitUsersExceeded()&&!this.hasSubscriptionKeyExpired()}hasInvalidSubscription(){return!this.hasSubscriptionKey()||this.hasLimitUsersExceeded()||this.hasSubscriptionKeyExpired()}formatDate(e){try{return B.ou.fromISO(e).setLocale(this.props.context.locale).toLocaleString(B.ou.DATE_SHORT)}catch(e){return""}}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}get translate(){return this.props.t}render(){const e=this.props.adminSubcriptionContext.getSubscription(),t=this.props.adminSubcriptionContext.isProcessing();return a.createElement("div",{className:"row"},!t&&a.createElement("div",{className:"subscription-key col8 main-column"},a.createElement("h3",null,a.createElement(C.c,null,"Subscription key details")),a.createElement("div",{className:"feedback-card"},this.hasValidSubscription()&&!this.hasSubscriptionKeyGoingToExpire()&&a.createElement(za,{name:"success"}),this.hasInvalidSubscription()&&a.createElement(za,{name:"error"}),this.hasValidSubscription()&&this.hasSubscriptionKeyGoingToExpire()&&a.createElement(za,{name:"warning"}),a.createElement("div",{className:"subscription-information"},!this.hasSubscriptionKey()&&a.createElement(a.Fragment,null,a.createElement("h4",{className:"no-border"},a.createElement(C.c,null,"Your subscription key is either missing or not valid.")),a.createElement("p",null,a.createElement(C.c,null,"Sorry your subscription is either missing or not readable."),a.createElement("br",null),a.createElement(C.c,null,"Update the subscription key and try again.")," ",a.createElement(C.c,null,"If this does not work get in touch with support."))),this.hasValidSubscription()&&this.hasSubscriptionKeyGoingToExpire()&&a.createElement("h4",{className:"no-border"},a.createElement(C.c,null,"Your subscription key is going to expire.")),this.hasSubscriptionKey()&&this.hasInvalidSubscription()&&a.createElement("h4",{className:"no-border"},a.createElement(C.c,null,"Your subscription key is not valid.")),this.hasValidSubscription()&&!this.hasSubscriptionKeyGoingToExpire()&&a.createElement("h4",{className:"no-border"},a.createElement(C.c,null,"Your subscription key is valid and up to date!")),this.hasSubscriptionKey()&&a.createElement("ul",null,a.createElement("li",{className:"customer-id"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Customer id:")),a.createElement("span",{className:"value"},e.customerId)),a.createElement("li",{className:"subscription-id"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Subscription id:")),a.createElement("span",{className:"value"},e.subscriptionId)),a.createElement("li",{className:"email"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Email:")),a.createElement("span",{className:"value"},e.email)),a.createElement("li",{className:"users"},a.createElement("span",{className:"label "+(this.hasLimitUsersExceeded()?"error":"")},a.createElement(C.c,null,"Users limit:")),a.createElement("span",{className:"value "+(this.hasLimitUsersExceeded()?"error":"")},e.users," (",a.createElement(C.c,null,"currently:")," ",this.state.activeUsers,")")),a.createElement("li",{className:"created"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Valid from:")),a.createElement("span",{className:"value"},this.formatDate(e.created))),a.createElement("li",{className:"expiry"},a.createElement("span",{className:`label ${this.hasSubscriptionKeyExpired()?"error":""} ${this.hasSubscriptionKeyGoingToExpire()?"warning":""}`},a.createElement(C.c,null,"Expires on:")),a.createElement("span",{className:`value ${this.hasSubscriptionKeyExpired()?"error":""} ${this.hasSubscriptionKeyGoingToExpire()?"warning":""}`},this.formatDate(e.expiry)," (",`${this.hasSubscriptionKeyExpired()?this.translate("expired "):""}${this.formatDateTimeAgo(e.expiry)}`,")"))),this.hasSubscriptionToRenew()&&a.createElement("div",{className:"actions-wrapper"},this.hasSubscriptionKey()&&a.createElement("button",{className:"button primary",type:"button",onClick:this.handleRenewKey},a.createElement(C.c,null,"Renew key")),!this.hasSubscriptionKey()&&a.createElement("button",{className:"button primary",type:"button",onClick:this.handleUpdateKey},a.createElement(C.c,null,"Update key")),a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.passbolt.com/contact"},a.createElement(C.c,null,"or, contact us")))))),!t&&a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Need help?")),a.createElement("p",null,a.createElement(C.c,null,"For any change or question related to your passbolt subscription, kindly contact our sales team.")),a.createElement("a",{className:"button",target:"_blank",rel:"noopener noreferrer",href:"https://www.passbolt.com/contact"},a.createElement(de,{name:"envelope"}),a.createElement("span",null,a.createElement(C.c,null,"Contact Sales"))))))}}Mi.propTypes={context:d().any,navigationContext:d().any,administrationWorkspaceContext:d().object,adminSubcriptionContext:d().object,dialogContext:d().any,t:d().func};const Oi=u(v(Ti(Xn(M((0,k.Z)("common")(Mi))))));function ji(){return ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ji.apply(this,arguments)}const qi=a.createContext({getCurrentLocale:()=>{},getLocale:()=>{},supportedLocales:()=>{},setLocale:()=>{},hasLocaleChanges:()=>{},findLocale:()=>{},save:()=>{},setProcessing:()=>{},isProcessing:()=>{},clearContext:()=>{}});class Wi extends a.Component{constructor(e){super(e),this.state=this.defaultState;const t=e.context.getApiClientOptions();this.internalisationService=new class{constructor(e){e.setResourceName("locale/settings"),this.apiClient=new hs(e)}async save(e){return(await this.apiClient.create(e)).body}}(t)}get defaultState(){return{currentLocale:null,locale:"en-UK",processing:!0,getCurrentLocale:this.getCurrentLocale.bind(this),getLocale:this.getLocale.bind(this),setLocale:this.setLocale.bind(this),findLocale:this.findLocale.bind(this),hasLocaleChanges:this.hasLocaleChanges.bind(this),isProcessing:this.isProcessing.bind(this),setProcessing:this.setProcessing.bind(this),save:this.save.bind(this),clearContext:this.clearContext.bind(this)}}findLocale(){this.setProcessing(!0);const e=this.props.context.siteSettings.locale;this.setState({currentLocale:e}),this.setState({locale:e}),this.setProcessing(!1)}getCurrentLocale(){return this.state.currentLocale}getLocale(){return this.state.locale}async setLocale(e){await this.setState({locale:e})}isProcessing(){return this.state.processing}setProcessing(e){this.setState({processing:e})}hasLocaleChanges(){return this.state.locale!==this.state.currentLocale}clearContext(){const{currentLocale:e,locale:t,processing:s}=this.defaultState;this.setState({currentLocale:e,locale:t,processing:s})}async save(){this.setProcessing(!0),await this.internalisationService.save({value:this.state.locale}),this.props.context.onRefreshLocaleRequested(this.state.locale),this.findLocale()}render(){return a.createElement(qi.Provider,{value:this.state},this.props.children)}}function zi(e){return class extends a.Component{render(){return a.createElement(qi.Consumer,null,(t=>a.createElement(e,ji({adminInternationalizationContext:t},this.props))))}}}Wi.propTypes={context:d().any,children:d().any},u(Wi);class Gi extends a.Component{constructor(e){super(e),this.bindCallbacks()}async handleSaveClick(){try{await this.props.adminInternationalizationContext.save(),this.handleSaveSuccess()}catch(e){this.handleSaveError(e)}finally{this.props.adminInternationalizationContext.setProcessing(!1)}}isSaveEnabled(){return!this.props.adminInternationalizationContext.isProcessing()&&this.props.adminInternationalizationContext.hasLocaleChanges()}bindCallbacks(){this.handleSaveClick=this.handleSaveClick.bind(this)}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.props.t("The internationalization settings were updated."))}async handleSaveError(e){"UserAbortsOperationError"!==e.name&&(console.error(e),await this.handleError(e))}async handleError(e){await this.props.actionFeedbackContext.displayError(e.message)}render(){return a.createElement("div",{className:"col2_3 actions-wrapper"},a.createElement("div",{className:"actions"},a.createElement("div",null,a.createElement("li",null,a.createElement("a",{className:"button "+(this.isSaveEnabled()?"":"disabled"),onClick:this.handleSaveClick},a.createElement(de,{name:"save"}),a.createElement("span",null,a.createElement(C.c,null,"Save settings")))))))}}Gi.propTypes={context:d().object,adminInternationalizationContext:d().object,actionFeedbackContext:d().object,t:d().func};const Hi=zi(D((0,k.Z)("common")(Gi)));class Vi extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}async componentDidMount(){this.props.administrationWorkspaceContext.setDisplayAdministrationWorkspaceAction(Hi),this.props.adminInternationalizationContext.findLocale()}componentWillUnmount(){this.props.administrationWorkspaceContext.resetDisplayAdministrationWorkspaceAction(),this.props.adminInternationalizationContext.clearContext()}bindCallbacks(){this.handleInputChange=this.handleInputChange.bind(this)}handleInputChange(e){this.props.adminInternationalizationContext.setLocale(e.target.value)}get supportedLocales(){return this.props.context.siteSettings.supportedLocales?this.props.context.siteSettings.supportedLocales.map((e=>({value:e.locale,label:e.label}))):[]}render(){const e=this.props.adminInternationalizationContext.getLocale();return a.createElement("div",{className:"row"},a.createElement("div",{className:"internationalisation-settings col7 main-column"},a.createElement("h3",null,a.createElement(C.c,null,"Internationalisation")),a.createElement("form",{className:"form"},a.createElement("div",{className:"select-wrapper input"},a.createElement("label",{htmlFor:"app-locale-input"},a.createElement(C.c,null,"Language")),a.createElement(qe,{className:"medium",id:"locale-input",name:"locale",items:this.supportedLocales,value:e,onChange:this.handleInputChange}),a.createElement("p",null,a.createElement(C.c,null,"The default language of the organisation."))))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Want to contribute?")),a.createElement("p",null,a.createElement(C.c,null,"Your language is missing or you discovered an error in the translation, help us to improve passbolt.")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/contribute/translation",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"heart-o"}),a.createElement("span",null,a.createElement(C.c,null,"Contribute"))))))}}Vi.propTypes={context:d().object,administrationWorkspaceContext:d().object,adminInternationalizationContext:d().object,t:d().func};const Ki=u(zi(Xn((0,k.Z)("common")(Vi))));function Bi(){return Bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Bi.apply(this,arguments)}const $i=a.createContext({currentPolicy:null,policyChanges:{},findAccountRecoveryPolicy:()=>{},getKeyInfo:()=>{},changePolicy:()=>{},changePublicKey:()=>{},hasPolicyChanges:()=>{},resetChanges:()=>{},downloadPrivateKey:()=>{},save:()=>{}});class Zi extends a.Component{constructor(e){super(e),this.state=this.defaultState}get defaultState(){return{currentPolicy:null,policyChanges:{},findAccountRecoveryPolicy:this.findAccountRecoveryPolicy.bind(this),getKeyInfo:this.getKeyInfo.bind(this),changePolicy:this.changePolicy.bind(this),changePublicKey:this.changePublicKey.bind(this),hasPolicyChanges:this.hasPolicyChanges.bind(this),resetChanges:this.resetChanges.bind(this),downloadPrivateKey:this.downloadPrivateKey.bind(this),save:this.save.bind(this)}}async findAccountRecoveryPolicy(){if(!this.props.context.siteSettings.canIUse("accountRecovery"))return;const e=await this.props.context.port.request("passbolt.account-recovery.get-organization-policy");this.setState({currentPolicy:e})}async changePolicy(e){const t=this.state.policyChanges;e===this.state.currentPolicy?.policy?delete t.policy:t.policy=e,"disabled"===e&&delete t.publicKey,await this.setState({policyChanges:t})}async changePublicKey(e){const t={...this.state.policyChanges,publicKey:e};await this.setState({policyChanges:t})}hasPolicyChanges(){return Boolean(this.state.policyChanges?.publicKey)||Boolean(this.state.policyChanges?.policy)}async getKeyInfo(e){return e?this.props.context.port.request("passbolt.keyring.get-key-info",e):null}async resetChanges(){await this.setState({policyChanges:{}})}async downloadPrivateKey(e){await this.props.context.port.request("passbolt.account-recovery.download-organization-generated-key",e)}async save(e){const t=this.buildPolicySaveDto(),s=await this.props.context.port.request("passbolt.account-recovery.save-organization-policy",t,e);this.setState({currentPolicy:s,policyChanges:{}}),this.props.accountRecoveryContext.reloadAccountRecoveryPolicy()}buildPolicySaveDto(){const e={};return this.state.policyChanges.policy&&(e.policy=this.state.policyChanges.policy),this.state.policyChanges.publicKey&&(e.account_recovery_organization_public_key={armored_key:this.state.policyChanges.publicKey}),e}render(){return a.createElement($i.Provider,{value:this.state},this.props.children)}}Zi.propTypes={context:d().any,children:d().any,accountRecoveryContext:d().object};const Yi=u(Dt(Zi));function Ji(e){return class extends a.Component{render(){return a.createElement($i.Consumer,null,(t=>a.createElement(e,Bi({adminAccountRecoveryContext:t},this.props))))}}}class Xi extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{processing:!1}}bindCallbacks(){this.handleSubmit=this.handleSubmit.bind(this),this.handleClose=this.handleClose.bind(this)}handleClose(){this.props.onClose()}async toggleProcessing(){await this.setState({processing:!this.state.processing})}get isProcessing(){return this.state.processing}async handleSubmit(e){e.preventDefault(),await this.toggleProcessing();try{await this.props.onSubmit(),this.props.onClose()}catch(e){if(await this.toggleProcessing(),"UserAbortsOperationError"!==e.name)throw console.error("Uncaught uncontrolled error"),e}}formatFingerprint(e){const t=(e=e||"").toUpperCase().replace(/.{4}/g,"$& ");return a.createElement(a.Fragment,null,t.substr(0,24),a.createElement("br",null),t.substr(25))}formatUserIds(e){return(e=e||[]).map(((e,t)=>a.createElement(a.Fragment,{key:t},e.name,"<",e.email,">",a.createElement("br",null))))}formatDateTimeAgo(e){if(null===e)return"n/a";if("Infinity"===e)return this.translate("Never");const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}formatDate(e){return B.ou.fromJSDate(new Date(e)).setLocale(this.props.context.locale).toLocaleString(B.ou.DATETIME_FULL)}get translate(){return this.props.t}render(){return a.createElement(be,{title:this.translate("Save Settings Summary"),onClose:this.handleClose,disabled:this.state.processing,className:"save-recovery-account-settings-dialog"},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"form-content"},this.props.policy&&a.createElement(a.Fragment,null,a.createElement("label",null,a.createElement(C.c,null,"New Account Recovery Policy")),a.createElement("div",{className:"radiolist-alt"},a.createElement("div",{className:"input radio"},a.createElement("label",{htmlFor:"accountPolicy"},a.createElement("span",{className:"name"},{mandatory:a.createElement(C.c,null,"Mandatory"),"opt-out":a.createElement(C.c,null,"Optional, Opt-out"),"opt-in":a.createElement(C.c,null,"Optional, Opt-in"),disabled:a.createElement(C.c,null,"Disable")}[this.props.policy]),a.createElement("span",{className:"info"},{mandatory:a.createElement(a.Fragment,null,a.createElement(C.c,null,"Every user is required to provide a copy of their private key and passphrase during setup."),a.createElement("br",null),a.createElement(C.c,null,"Warning: You should inform your users not to store personal passwords.")),"opt-out":a.createElement(C.c,null,"Every user will be prompted to provide a copy of their private key and passphrase by default during the setup, but they can opt out."),"opt-in":a.createElement(C.c,null,"Every user can decide to provide a copy of their private key and passphrase by default during the setup, but they can opt in."),disabled:a.createElement(a.Fragment,null,a.createElement(C.c,null,"Backup of the private key and passphrase will not be stored. This is the safest option."),a.createElement("br",null),a.createElement(C.c,null,"Warning: If users lose their private key and passphrase they will not be able to recover their account."))}[this.props.policy]))))),this.props.keyInfo&&a.createElement(a.Fragment,null,a.createElement("label",null,a.createElement(C.c,null,"New Organization Recovery Key")),a.createElement("div",{className:"recovery-key-details"},a.createElement("table",{className:"table-info recovery-key"},a.createElement("tbody",null,a.createElement("tr",{className:"user-ids"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Uid")),a.createElement("td",{className:"value"},this.formatUserIds(this.props.keyInfo.user_ids))),a.createElement("tr",{className:"fingerprint"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Fingerprint")),a.createElement("td",{className:"value"},this.formatFingerprint(this.props.keyInfo.fingerprint))),a.createElement("tr",{className:"algorithm"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Algorithm")),a.createElement("td",{className:"value"},this.props.keyInfo.algorithm)),a.createElement("tr",{className:"key-length"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Key length")),a.createElement("td",{className:"value"},this.props.keyInfo.length)),a.createElement("tr",{className:"created"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Created")),a.createElement("td",{className:"value"},this.formatDate(this.props.keyInfo.created))),a.createElement("tr",{className:"expires"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Expires")),a.createElement("td",{className:"value"},this.formatDateTimeAgo(this.props.keyInfo.expires)))))))),a.createElement("div",{className:"warning message"},a.createElement(C.c,null,"Please review carefully this configuration as it will not be trivial to change this later.")),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.passbolt.com/configure/account-recovery",className:"button button-left "+(this.isProcessing?"disabled":"")},a.createElement(C.c,null,"Learn more")),a.createElement(Ce,{onClick:this.handleClose,disabled:this.isProcessing}),a.createElement(Ee,{value:this.translate("Save"),disabled:this.isProcessing,processing:this.isProcessing,warning:!0}))))}}Xi.propTypes={context:d().any,onClose:d().func,onSubmit:d().func,policy:d().string,keyInfo:d().object,t:d().func};const Qi=u((0,k.Z)("common")(Xi));class eo extends a.Component{constructor(e){super(e),this.bindCallbacks()}componentDidMount(){this.displayConfirmSummaryDialog()}bindCallbacks(){this.handleCloseDialog=this.handleCloseDialog.bind(this),this.handleConfirmSave=this.handleConfirmSave.bind(this),this.handleSave=this.handleSave.bind(this),this.handleError=this.handleError.bind(this)}async displayConfirmSummaryDialog(){this.props.dialogContext.open(Qi,{policy:this.props.adminAccountRecoveryContext.policyChanges?.policy,keyInfo:await this.getNewOrganizationKeyInfo(),onClose:this.handleCloseDialog,onSubmit:this.handleConfirmSave})}getNewOrganizationKeyInfo(){const e=this.props.adminAccountRecoveryContext.policyChanges?.publicKey;return e?this.props.adminAccountRecoveryContext.getKeyInfo(e):null}displayProvideAccountRecoveryOrganizationKeyDialog(){this.props.dialogContext.open(Ut,{onClose:this.handleCloseDialog,onSubmit:this.handleSave})}handleCloseDialog(){this.props.onStop()}async handleConfirmSave(){Boolean(this.props.adminAccountRecoveryContext.currentPolicy?.account_recovery_organization_public_key)?this.displayProvideAccountRecoveryOrganizationKeyDialog():await this.handleSave()}async handleSave(e=null){try{await this.props.adminAccountRecoveryContext.save(e),await this.props.actionFeedbackContext.displaySuccess(this.translate("The organization recovery policy has been updated successfully")),this.props.onStop()}catch(e){this.handleError(e)}}handleError(e){if(["UserAbortsOperationError","WrongOrganizationRecoveryKeyError","InvalidMasterPasswordError","BadSignatureMessageGpgKeyError","GpgKeyError"].includes(e.name))throw e;"PassboltApiFetchError"===e.name&&e?.data?.body?.account_recovery_organization_public_key?.fingerprint?.isNotAccountRecoveryOrganizationPublicKeyFingerprintRule?this.props.dialogContext.open(we,{error:new Error(this.translate("The new organization recovery key should not be a formerly used organization recovery key."))}):this.props.dialogContext.open(we,{error:e}),this.props.onStop()}get translate(){return this.props.t}render(){return a.createElement(a.Fragment,null)}}eo.propTypes={dialogContext:d().any,adminAccountRecoveryContext:d().any,actionFeedbackContext:d().object,context:d().object,onStop:d().func.isRequired,t:d().func};const to=u(M(D(Ji((0,k.Z)("common")(eo)))));class so extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleSaveClick=this.handleSaveClick.bind(this),this.handleEditSubscriptionClick=this.handleEditSubscriptionClick.bind(this)}handleSaveClick(){this.props.workflowContext.start(to,{})}handleEditSubscriptionClick(){this.props.adminAccountRecoveryContext.resetChanges()}isSaveEnabled(){if(!this.props.adminAccountRecoveryContext.hasPolicyChanges())return!1;const e=this.props.adminAccountRecoveryContext.policyChanges,t=this.props.adminAccountRecoveryContext.currentPolicy;if(e?.policy===Rt.POLICY_DISABLED)return!0;const s=e.publicKey||t.account_recovery_organization_public_key?.armored_key;return!(!Boolean(e.policy)||!Boolean(s))||t.policy!==Rt.POLICY_DISABLED&&Boolean(e.publicKey)}isResetEnabled(){return this.props.adminAccountRecoveryContext.hasPolicyChanges()}render(){return a.createElement("div",{className:"col2_3 actions-wrapper"},a.createElement("div",{className:"actions"},a.createElement("div",null,a.createElement("li",null,a.createElement("a",{className:"button "+(this.isSaveEnabled()?"":"disabled"),onClick:this.handleSaveClick},a.createElement(de,{name:"save"}),a.createElement("span",null,a.createElement(C.c,null,"Save settings"))))),a.createElement("div",null,a.createElement("li",null,a.createElement("a",{className:"button "+(this.isResetEnabled()?"":"disabled"),onClick:this.handleEditSubscriptionClick},a.createElement(de,{name:"edit"}),a.createElement("span",null,a.createElement(C.c,null,"Reset settings")))))))}}so.propTypes={adminAccountRecoveryContext:d().object,workflowContext:d().any};const ao=St(Ji((0,k.Z)("common")(so)));class no extends a.Component{constructor(e){super(e),this.bindCallback()}bindCallback(){this.handleClick=this.handleClick.bind(this)}handleClick(){this.props.onClick(this.props.name)}render(){return a.createElement("li",{className:"tab "+(this.props.isActive?"active":"")},a.createElement("a",{className:"tab-link",onClick:this.handleClick},this.props.name))}}no.propTypes={name:d().string,type:d().string,isActive:d().bool,onClick:d().func,children:d().any};const ro=no;class io extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(e),this.bindCallback()}getDefaultState(e){return{activeTabName:e.activeTabName}}bindCallback(){this.handleTabClick=this.handleTabClick.bind(this)}handleTabClick(e){this.setState({activeTabName:e.name}),"function"==typeof e.onClick&&e.onClick()}render(){return a.createElement("div",{className:"tabs"},a.createElement("ul",{className:"tabs-nav tabs-nav--bordered"},this.props.children.map((({key:e,props:t})=>a.createElement(ro,{key:e,name:t.name,onClick:()=>this.handleTabClick(t),isActive:t.name===this.state.activeTabName})))),a.createElement("div",{className:"tabs-active-content"},this.props.children.find((e=>e.props.name===this.state.activeTabName)).props.children))}}io.propTypes={activeTabName:d().string,children:d().any};const oo=io;class lo extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks(),this.createInputRef()}get defaultState(){return{processing:!1,key:"",keyError:"",hasAlreadyBeenValidated:!1,selectedFile:null}}bindCallbacks(){this.handleSelectFile=this.handleSelectFile.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleSelectOrganizationKeyFile=this.handleSelectOrganizationKeyFile.bind(this)}createInputRef(){this.keyInputRef=a.createRef(),this.fileUploaderRef=a.createRef()}async handleSelectOrganizationKeyFile(e){const[t]=e.target.files,s=await this.readOrganizationKeyFile(t);this.setState({key:s,selectedFile:t})}readOrganizationKeyFile(e){const t=new FileReader;return new Promise(((s,a)=>{t.onloadend=()=>{try{s(t.result)}catch(e){a(e)}},t.readAsText(e)}))}async validateKeyInput(){const e=this.state.key.trim();return""===e?Promise.reject(new Error(this.translate("The key can't be empty."))):await this.props.context.port.request("passbolt.account-recovery.validate-organization-key",e)}async validate(){return this.setState({keyError:""}),await this.validateKeyInput().then((()=>!0)).catch((e=>(this.setState({keyError:e.message}),!1)))}handleInputChange(e){const t=e.target;this.setState({[t.name]:t.value})}handleSelectFile(){this.fileUploaderRef.current.click()}async handleFormSubmit(e){e.preventDefault(),this.state.processing||await this.save()}async save(){if(await this.setState({hasAlreadyBeenValidated:!0}),await this.toggleProcessing(),!await this.validate())return this.handleValidateError(),void await this.toggleProcessing();await this.props.onUpdateOrganizationKey(this.state.key.trim())}handleValidateError(){this.focusFieldError()}focusFieldError(){this.state.keyError&&this.keyInputRef.current.focus()}async toggleProcessing(){await this.setState({processing:!this.state.processing})}hasAllInputDisabled(){return this.state.processing}get translate(){return this.props.t}get selectedFilename(){return this.state.selectedFile?this.state.selectedFile.name:""}render(){return a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content import-organization-key"},a.createElement("div",{className:"input textarea required "+(this.state.keyError?"error":"")},a.createElement("label",{htmlFor:"organization-recover-form-key"},a.createElement(C.c,null,"Import an OpenPGP Public key")),a.createElement("textarea",{id:"organization-recover-form-key",name:"key",value:this.state.key,onKeyUp:this.handleKeyInputKeyUp,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),ref:this.keyInputRef,className:"required",placeholder:this.translate("Add Open PGP Public key"),required:"required",autoComplete:"off",autoFocus:!0})),a.createElement("div",{className:"input file"},a.createElement("input",{type:"file",id:"dialog-import-private-key",ref:this.fileUploaderRef,disabled:this.hasAllInputDisabled(),onChange:this.handleSelectOrganizationKeyFile}),a.createElement("label",{htmlFor:"dialog-import-private-key"},a.createElement(C.c,null,"Select a file to import")),a.createElement("div",{className:"input-file-inline"},a.createElement("input",{type:"text",disabled:!0,placeholder:this.translate("No file selected"),defaultValue:this.selectedFilename}),a.createElement("button",{className:"button primary",type:"button",disabled:this.hasAllInputDisabled(),onClick:this.handleSelectFile},a.createElement("span",null,a.createElement(C.c,null,"Choose a file")))),this.state.keyError&&a.createElement("div",{className:"key error-message"},this.state.keyError))),!this.state.hasAlreadyBeenValidated&&a.createElement("div",{className:"message notice"},a.createElement(de,{baseline:!0,name:"info-circle"}),a.createElement("strong",null,a.createElement(C.c,null,"Pro tip"),":")," ",a.createElement(C.c,null,"Learn how to ",a.createElement("a",{href:"https://help.passbolt.com/configure/account-recovery",target:"_blank",rel:"noopener noreferrer"},"generate a key separately."))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.props.onClose}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Apply")})))}}lo.propTypes={context:d().object,onUpdateOrganizationKey:d().func,onClose:d().func,t:d().func};const co=u((0,k.Z)("common")(lo));class mo extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.isPwndProcessingPromise=null,this.evaluatePassphraseIsInDictionaryDebounce=Z()(this.evaluatePassphraseIsInDictionary,300),this.bindCallbacks(),this.createInputRef()}get defaultState(){return{name:"",nameError:"",email:"",emailError:"",algorithm:"RSA",keySize:4096,passphrase:"",passphraseErrorState:0,passphraseWarning:"",passphraseEntropy:null,hasAlreadyBeenValidated:!1,isPwnedServiceAvailable:!0}}componentDidMount(){this.pownedService=new bn(this.props.context.port)}bindCallbacks(){this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleNameInputKeyUp=this.handleNameInputKeyUp.bind(this),this.handleEmailInputKeyUp=this.handleEmailInputKeyUp.bind(this),this.handlePassphraseChange=this.handlePassphraseChange.bind(this)}createInputRef(){this.nameInputRef=a.createRef(),this.emailInputRef=a.createRef(),this.passphraseInputRef=a.createRef()}handleNameInputKeyUp(){this.state.hasAlreadyBeenValidated&&this.validateNameInput()}validateNameInput(){let e=null;return this.state.name.trim().length||(e=this.translate("A name is required.")),this.setState({nameError:e}),null===e}handleEmailInputKeyUp(){this.state.hasAlreadyBeenValidated&&this.validateEmailInput()}validateEmailInput(){let e=null;const t=this.state.email.trim();return t.length?this.isEmail(t)||(e=this.translate("Please enter a valid email address.")):e=this.translate("An email is required."),this.setState({email:t,emailError:e}),null===e}isEmail(e){return $s()("^[\\p{L}0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[\\p{L}0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[_\\p{L}0-9][-_\\p{L}0-9]*\\.)*(?:[\\p{L}0-9][-\\p{L}0-9]{0,62})\\.(?:(?:[a-z]{2}\\.)?[a-z]{2,})$").test(e)}async handlePassphraseChange(e){const t=e.target.value,s=t?.length?un(t):null,a=4===this.state.passphraseErrorState?0:this.state.passphraseErrorState;this.setState({passphrase:t,passphraseEntropy:s,passphraseErrorState:a},(()=>this.checkPassphraseValidity()))}async checkPassphraseValidity(){if(this.state.passphrase.length>0&&(this.isPwndProcessingPromise=this.evaluatePassphraseIsInDictionaryDebounce()),this.state.hasAlreadyBeenValidated)await this.validatePassphraseInput(this.state.passphrase,this.state.passphraseEntropy);else{const e=this.state.passphrase.length>=4096,t=this.translate("this is the maximum size for this field, make sure your data was not truncated"),s=e?t:"";this.setState({passphraseWarning:s})}}async validatePassphraseInput(e,t){let s=0;return e?.length?t<80&&(s=2):s=1,this.setState({passphraseErrorState:s}),0===s}async evaluatePassphraseIsInDictionary(){if(!this.state.isPwnedServiceAvailable)return!1;let e;try{const t=await this.pownedService.evaluateSecret(this.state.passphrase);e=t.inDictionary,this.setState({isPwnedServiceAvailable:t.isPwnedServiceAvailable})}catch(e){if(e instanceof Ba||e instanceof Za)return this.setState({isPwnedServiceAvailable:!1}),!1;throw e}let t=this.state.passphraseErrorState,s=this.state.passphraseEntropy;return e&&(s=0,t=4),this.setState({passphraseEntropy:s,passphraseErrorState:t}),e}handleInputChange(e){const t=e.target;this.setState({[t.name]:t.value})}handleValidateError(){this.focusFirstFieldError()}focusFirstFieldError(){this.state.nameError?this.nameInputRef.current.focus():this.state.emailError?this.emailInputRef.current.focus():0!==this.state.passphraseErrorState&&this.passphraseInputRef.current.focus()}async handleFormSubmit(e){e.preventDefault(),this.state.processing||(this.setState({hasAlreadyBeenValidated:!0}),await this.isPwndProcessingPromise,4!==this.state.passphraseErrorState&&await this.save())}async save(){if(this.toggleProcessing(),!await this.validate())return this.handleValidateError(),void this.toggleProcessing();const e=await this.generateKey();this.props.onUpdateOrganizationKey(e.public_key.armored_key,e.private_key.armored_key)}async validate(){const e=this.validateNameInput(),t=this.validateEmailInput(),s=await this.validatePassphraseInput(this.state.passphrase,this.state.passphraseEntropy);return e&&t&&s}async generateKey(){const e={name:this.state.name,email:this.state.email,algorithm:this.state.algorithm,keySize:this.state.keySize,passphrase:this.state.passphrase};return await this.props.context.port.request("passbolt.account-recovery.generate-organization-key",e)}toggleProcessing(){this.setState({processing:!this.state.processing})}hasAllInputDisabled(){return this.state.processing}get translate(){return this.props.t}get isPassphraseWarning(){return this.state.passphrase?.length>0&&!this.state.hasAlreadyBeenValidated&&(!this.state.isPwnedServiceAvailable||4===this.state.passphraseErrorState)}render(){return a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content generate-organization-key"},a.createElement("div",{className:"input text required "+(this.state.nameError?"error":"")},a.createElement("label",{htmlFor:"generate-organization-key-form-name"},a.createElement(C.c,null,"Name")),a.createElement("input",{id:"generate-organization-key-form-name",name:"name",type:"text",value:this.state.name,onKeyUp:this.handleNameInputKeyUp,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),ref:this.nameInputRef,className:"required fluid",maxLength:"64",required:"required",autoComplete:"off",autoFocus:!0,placeholder:this.translate("Name")}),this.state.nameError&&a.createElement("div",{className:"name error-message"},this.state.nameError)),a.createElement("div",{className:"input text required "+(this.state.emailError?"error":"")},a.createElement("label",{htmlFor:"generate-organization-key-form-email"},a.createElement(C.c,null,"Email")),a.createElement("input",{id:"generate-organization-key-form-email",name:"email",ref:this.emailInputRef,className:"required fluid",maxLength:"64",type:"email",autoComplete:"off",value:this.state.email,onChange:this.handleInputChange,placeholder:this.translate("Email Address"),onKeyUp:this.handleEmailInputKeyUp,disabled:this.hasAllInputDisabled(),required:"required"}),this.state.emailError&&a.createElement("div",{className:"email error-message"},this.state.emailError)),a.createElement("div",{className:"input select-wrapper"},a.createElement("label",{htmlFor:"generate-organization-key-form-algorithm"},a.createElement(C.c,null,"Algorithm"),a.createElement(ge,{message:this.translate("Algorithm and key size cannot be changed at the moment. These are secure default")},a.createElement(de,{name:"info-circle"}))),a.createElement("input",{id:"generate-organization-key-form-algorithm",name:"algorithm",value:this.state.algorithm,className:"fluid",type:"text",autoComplete:"off",disabled:!0})),a.createElement("div",{className:"input select-wrapper"},a.createElement("label",{htmlFor:"generate-organization-key-form-keySize"},a.createElement(C.c,null,"Key Size"),a.createElement(ge,{message:this.translate("Algorithm and key size cannot be changed at the moment. These are secure default")},a.createElement(de,{name:"info-circle"}))),a.createElement("input",{id:"generate-organization-key-form-key-size",name:"keySize",value:this.state.keySize,className:"fluid",type:"text",autoComplete:"off",disabled:!0})),a.createElement("div",{className:"input-password-wrapper input required "+(0!==this.state.passphraseErrorState&&this.state.hasAlreadyBeenValidated?"error":"")},a.createElement("label",{htmlFor:"generate-organization-key-form-password"},a.createElement(C.c,null,"Organization key passphrase"),this.isPassphraseWarning&&a.createElement(de,{name:"exclamation"})),a.createElement(At,{id:"generate-organization-key-form-password",name:"password",placeholder:this.translate("Passphrase"),autoComplete:"new-password",preview:!0,securityToken:this.props.context.userSettings.getSecurityToken(),value:this.state.passphrase,onChange:this.handlePassphraseChange,disabled:this.hasAllInputDisabled(),inputRef:this.passphraseInputRef}),a.createElement(fn,{entropy:this.state.passphraseEntropy}),0!==this.state.passphraseErrorState&&this.state.hasAlreadyBeenValidated&&a.createElement("div",{className:"password error-message"},{1:a.createElement(C.c,null,"A passphrase is required."),2:a.createElement(C.c,null,"A strong passphrase is required. The minimum complexity must be 'fair'"),4:a.createElement(C.c,null,"The passphrase should not be part of an exposed data breach.")}[this.state.passphraseErrorState]),this.state.passphrase?.length>0&&!this.state.hasAlreadyBeenValidated&&a.createElement(a.Fragment,null,!this.state.isPwnedServiceAvailable&&a.createElement("div",{className:"password warning-message"},a.createElement(C.c,null,"The pwnedpasswords service is unavailable, your passphrase might be part of an exposed data breach")),4===this.state.passphraseErrorState&&a.createElement("div",{className:"password warning-message"},a.createElement(C.c,null,"The passphrase is part of an exposed data breach."))))),!this.state.hasAlreadyBeenValidated&&a.createElement("div",{className:"warning message",id:"generate-organization-key-setting-overridden-banner"},a.createElement("p",null,a.createElement(C.c,null,"Warning, we encourage you to generate your OpenPGP Organization Recovery Key separately. Make sure you keep a backup in a safe place."))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.props.onClose}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Generate & Apply")})))}}mo.propTypes={context:d().any,onUpdateOrganizationKey:d().func,onClose:d().func,t:d().func};const ho=u(M((0,k.Z)("common")(mo)));function po(){return po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},po.apply(this,arguments)}class uo extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{processing:!1}}bindCallbacks(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handleApplyChanges=this.handleApplyChanges.bind(this)}handleCloseClick(){this.props.onClose()}handleApplyChanges(e,t){this.handleCloseClick(),this.props.handleUpdateOrganizationKey(e,t)}render(){return a.createElement(be,{title:this.props.t("Organization Recovery Key"),onClose:this.handleCloseClick,disabled:this.state.processing,className:"organization-recover-key-dialog"},a.createElement(oo,{activeTabName:"Import"},a.createElement(ro,{key:"Import",name:"Import",type:"Import"},a.createElement(co,po({},this.props,{onClose:this.handleCloseClick,onUpdateOrganizationKey:this.handleApplyChanges}))),a.createElement(ro,{key:"Generate",name:"Generate",type:"Generate"},a.createElement(ho,po({},this.props,{onClose:this.handleCloseClick,onUpdateOrganizationKey:this.handleApplyChanges})))))}}uo.propTypes={handleUpdateOrganizationKey:d().func,onClose:d().func,t:d().func};const go=(0,k.Z)("common")(uo);class fo extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{processing:!1}}bindCallbacks(){this.handleCloseClick=this.handleCloseClick.bind(this)}handleCloseClick(){this.props.onClose()}render(){return a.createElement(be,{title:this.props.t("Confirm Organization Recovery Key download"),onClose:this.handleCloseClick,disabled:!1,className:"organization-recover-key-download-dialog"},a.createElement("div",{className:"dialog-body"},a.createElement("p",null,a.createElement(C.c,null,"A download of the organization private key has automatically started."),a.createElement("br",null),a.createElement(C.c,null,"Make sure your print it or store it in a safe place. You may need it later!"))),a.createElement("div",{className:"dialog-footer clearfix"},a.createElement("button",{className:"button button-left cancel medium",type:"button",onClick:this.props.handleDownloadAgain},a.createElement(C.c,null,"Download again")),a.createElement("button",{className:"button primary",role:"button",type:"button",onClick:this.handleCloseClick,disabled:this.isProcessing},a.createElement("span",null,a.createElement(C.c,null,"Ok")))))}}fo.propTypes={onClose:d().func,handleDownloadAgain:d().func,privateKey:d().string,t:d().func};const bo=(0,k.Z)("common")(fo);class yo extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{keyInfoDto:null,loading:!0,processing:!1}}async componentDidMount(){this.props.administrationWorkspaceContext.setDisplayAdministrationWorkspaceAction(ao),this.findAccountRecoveryPolicy()}componentWillUnmount(){this.props.administrationWorkspaceContext.resetDisplayAdministrationWorkspaceAction(),this.props.adminAccountRecoveryContext.resetChanges()}async componentDidUpdate(){const e=this.props?.adminAccountRecoveryContext?.policyChanges?.publicKey||this.props?.adminAccountRecoveryContext?.currentPolicy?.account_recovery_organization_public_key?.armored_key,t=await(this.props?.adminAccountRecoveryContext?.getKeyInfo(e));Boolean(e)&&this.state.keyInfoDto?.fingerprint!==t?.fingerprint?this.setState({keyInfoDto:t}):!e&&this.state.keyInfoDto&&this.setState({keyInfoDto:null})}bindCallbacks(){this.handlePolicyInputChange=this.handlePolicyInputChange.bind(this),this.HandleUpdatePublicKeyClick=this.HandleUpdatePublicKeyClick.bind(this),this.handleUpdateOrganizationKey=this.handleUpdateOrganizationKey.bind(this),this.downloadPrivateKey=this.downloadPrivateKey.bind(this)}get policy(){return this.props.adminAccountRecoveryContext.policyChanges.policy||this.props.adminAccountRecoveryContext.currentPolicy?.policy}get organizationKey(){return this.props.adminAccountRecoveryContext.policyChanges.publicKey||this.props.adminAccountRecoveryContext.currentPolicy?.account_recovery_organization_public_key.armored_key}get organizationKeyInfo(){return this.state.keyInfoDto}async findAccountRecoveryPolicy(){await this.props.adminAccountRecoveryContext.findAccountRecoveryPolicy(),this.setState({loading:!1})}async handlePolicyInputChange(e){const t=e.target.value;"disabled"===t&&this.resetKeyInfo(),await this.props.adminAccountRecoveryContext.changePolicy(t)}HandleUpdatePublicKeyClick(){this.props.dialogContext.open(go,{handleUpdateOrganizationKey:this.handleUpdateOrganizationKey})}async handleUpdateOrganizationKey(e,t){this.resetKeyInfo(),await this.props.adminAccountRecoveryContext.changePublicKey(e),t&&await this.downloadPrivateKey(t)}async downloadPrivateKey(e){await this.props.adminAccountRecoveryContext.downloadPrivateKey(e),this.props.dialogContext.open(bo,{privateKey:e,handleDownloadAgain:async()=>{await this.props.adminAccountRecoveryContext.downloadPrivateKey(e)}})}hasAllInputDisabled(){return this.state.processing||this.state.loading}hasOrganisationRecoveryKey(){const e=this.state.keyInfoDto;return Boolean(e)}isPolicyEnabled(){return Boolean("disabled"!==this.policy)}resetKeyInfo(){this.setState({keyInfoDto:null})}async toggleProcessing(){this.setState({processing:!this.state.processing})}formatDateTimeAgo(e){if(null===e)return"n/a";if("Infinity"===e)return this.translate("Never");const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}formatFingerprint(e){if(!e)return null;const t=e.toUpperCase().replace(/.{4}/g,"$& ");return a.createElement(a.Fragment,null,t.substr(0,24),a.createElement("br",null),t.substr(25))}formatUserIds(e){return e?e.map(((e,t)=>a.createElement(a.Fragment,{key:t},e.name," <",e.email,">",a.createElement("br",null)))):null}get translate(){return this.props.t}render(){return a.createElement("div",{className:"row"},a.createElement("div",{className:"recover-account-settings col8 main-column"},a.createElement("h3",null,a.createElement(C.c,null,"Account Recovery")),this.props.adminAccountRecoveryContext.hasPolicyChanges()&&a.createElement("div",{className:"warning message",id:"email-notification-setting-overridden-banner"},a.createElement("p",null,a.createElement(C.c,null,"Don't forget to save your settings to apply your modification."))),!this.hasOrganisationRecoveryKey()&&this.isPolicyEnabled()&&a.createElement("div",{className:"warning message",id:"email-notification-setting-overridden-banner"},a.createElement("p",null,a.createElement(C.c,null,"Warning, Don't forget to add an organization recovery key."))),a.createElement("form",{className:"form"},a.createElement("h4",{className:"no-border"},a.createElement(C.c,null,"Account Recovery Policy")),a.createElement("p",null,a.createElement(C.c,null,"In this section you can choose the default behavior of account recovery for all users.")),a.createElement("div",{className:"radiolist-alt"},a.createElement("div",{className:"input radio "+("mandatory"===this.policy?"checked":"")},a.createElement("input",{type:"radio",value:"mandatory",onChange:this.handlePolicyInputChange,name:"accountRecoveryPolicy",checked:"mandatory"===this.policy,id:"accountRecoveryPolicyMandatory",disabled:this.hasAllInputDisabled()}),a.createElement("label",{htmlFor:"accountRecoveryPolicyMandatory"},a.createElement("span",{className:"name"},a.createElement(C.c,null,"Mandatory")),a.createElement("span",{className:"info"},a.createElement(C.c,null,"Every user is required to provide a copy of their private key and passphrase during setup."),a.createElement("br",null),a.createElement(C.c,null,"You should inform your users not to store personal passwords.")))),a.createElement("div",{className:"input radio "+("opt-out"===this.policy?"checked":"")},a.createElement("input",{type:"radio",value:"opt-out",onChange:this.handlePolicyInputChange,name:"accountRecoveryPolicy",checked:"opt-out"===this.policy,id:"accountRecoveryPolicyOptOut",disabled:this.hasAllInputDisabled()}),a.createElement("label",{htmlFor:"accountRecoveryPolicyOptOut"},a.createElement("span",{className:"name"},a.createElement(C.c,null,"Optional, Opt-out")),a.createElement("span",{className:"info"},a.createElement(C.c,null,"Every user will be prompted to provide a copy of their private key and passphrase by default during the setup, but they can opt out.")))),a.createElement("div",{className:"input radio "+("opt-in"===this.policy?"checked":"")},a.createElement("input",{type:"radio",value:"opt-in",onChange:this.handlePolicyInputChange,name:"accountRecoveryPolicy",checked:"opt-in"===this.policy,id:"accountRecoveryPolicyOptIn",disabled:this.hasAllInputDisabled()}),a.createElement("label",{htmlFor:"accountRecoveryPolicyOptIn"},a.createElement("span",{className:"name"},a.createElement(C.c,null,"Optional, Opt-in")),a.createElement("span",{className:"info"},a.createElement(C.c,null,"Every user can decide to provide a copy of their private key and passphrase by default during the setup, but they can opt in.")))),a.createElement("div",{className:"input radio "+("disabled"===this.policy?"checked":"")},a.createElement("input",{type:"radio",value:"disabled",onChange:this.handlePolicyInputChange,name:"accountRecoveryPolicy",checked:"disabled"===this.policy,id:"accountRecoveryPolicyDisable",disabled:this.hasAllInputDisabled()}),a.createElement("label",{htmlFor:"accountRecoveryPolicyDisable"},a.createElement("span",{className:"name"},a.createElement(C.c,null,"Disable (Default)")),a.createElement("span",{className:"info"},a.createElement(C.c,null,"Backup of the private key and passphrase will not be stored. This is the safest option."),a.createElement(C.c,null,"If users lose their private key and passphrase they will not be able to recover their account."))))),a.createElement("h4",null,a.createElement("span",{className:"input toggle-switch form-element "},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"organisationRecoveryKeyToggle",disabled:this.hasAllInputDisabled(),checked:this.isPolicyEnabled(),id:"recovery-key-toggle-button"}),a.createElement("label",{htmlFor:"recovery-key-toggle-button"},a.createElement(C.c,null,"Organization Recovery Key")))),this.isPolicyEnabled()&&a.createElement(a.Fragment,null,a.createElement("p",null,a.createElement(C.c,null,"Your organization recovery key will be used to decrypt and recover the private key and passphrase of the users that are participating in the account recovery program.")," ",a.createElement(C.c,null,"The organization private recovery key should not be stored in passbolt.")," ",a.createElement(C.c,null,"You should keep it offline in a safe place.")),a.createElement("div",{className:"recovery-key-details"},a.createElement("table",{className:"table-info recovery-key"},a.createElement("tbody",null,a.createElement("tr",{className:"user-ids"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"User ids")),this.organizationKeyInfo?.user_ids&&a.createElement("td",{className:"value"},this.formatUserIds(this.organizationKeyInfo.user_ids)),!this.organizationKeyInfo?.user_ids&&a.createElement("td",{className:"empty-value"},a.createElement(C.c,null,"not available")),a.createElement("td",{className:"table-button"},a.createElement("button",{className:"button primary medium",type:"button",disabled:this.hasAllInputDisabled(),onClick:this.HandleUpdatePublicKeyClick},this.hasOrganisationRecoveryKey()&&a.createElement(C.c,null,"Rotate Key"),!this.hasOrganisationRecoveryKey()&&a.createElement(C.c,null,"Add an Organization Recovery Key")))),a.createElement("tr",{className:"fingerprint"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Fingerprint")),this.organizationKeyInfo?.fingerprint&&a.createElement("td",{className:"value"},this.formatFingerprint(this.organizationKeyInfo.fingerprint)),!this.organizationKeyInfo?.fingerprint&&a.createElement("td",{className:"empty-value"},a.createElement(C.c,null,"not available"))),a.createElement("tr",{className:"algorithm"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Algorithm")),this.organizationKeyInfo?.algorithm&&a.createElement("td",{className:"value"},this.organizationKeyInfo.algorithm),!this.organizationKeyInfo?.algorithm&&a.createElement("td",{className:"empty-value"},a.createElement(C.c,null,"not available"))),a.createElement("tr",{className:"key-length"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Key length")),this.organizationKeyInfo?.length&&a.createElement("td",{className:"value"},this.organizationKeyInfo.length),!this.organizationKeyInfo?.length&&a.createElement("td",{className:"empty-value"},a.createElement(C.c,null,"not available"))),a.createElement("tr",{className:"created"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Created")),this.organizationKeyInfo?.created&&a.createElement("td",{className:"value"},this.formatDateTimeAgo(this.organizationKeyInfo.created)),!this.organizationKeyInfo?.created&&a.createElement("td",{className:"empty-value"},a.createElement(C.c,null,"not available"))),a.createElement("tr",{className:"expires"},a.createElement("td",{className:"label"},a.createElement(C.c,null,"Expires")),this.organizationKeyInfo?.expires&&a.createElement("td",{className:"value"},this.formatDateTimeAgo(this.organizationKeyInfo.expires)),!this.organizationKeyInfo?.expires&&a.createElement("td",{className:"empty-value"},a.createElement(C.c,null,"not available"))))))))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Need some help?")),a.createElement("p",null,a.createElement(C.c,null,"For more information about account recovery, checkout the dedicated page on the help website.")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/configure/account-recovery",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"life-ring"}),a.createElement("span",null,a.createElement(C.c,null,"Read the documentation"))))))}}yo.propTypes={context:d().object,dialogContext:d().any,administrationWorkspaceContext:d().object,adminAccountRecoveryContext:d().object,t:d().func};const Eo=u(M(Xn(Ji((0,k.Z)("common")(yo))))),vo={25:{port:25,tls:!1},2525:{port:2525,tls:!1},587:{port:587,tls:!0},588:{port:588,tls:!0}};function Co(e,t){const s=[];for(let a=0;a<e.length;a++){const n=e[a];for(let e=0;e<t.length;e++){const a=vo[t[e].toString()];s.push({host:n,...a})}}return s}function ko(e,t,s){return e.availableConfigurations.find((e=>(!s||e.host===s)&&e.port===t))}const wo={id:"aws-ses",name:"AWS SES",icon:"aws-ses.svg",help_page:"https://docs.aws.amazon.com/ses/latest/dg/send-email-smtp.html",availableConfigurations:Co(function(){const e=[];return["us-east-2","us-east-1","us-west-1","us-west-2","ap-south-1","ap-northeast-3","ap-northeast-2","ap-northeast-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-gov-west-1"].forEach((t=>{e.push(`email-smtp.${t}.amazonaws.com`)})),e}(),[25,2525,587])};wo.defaultConfiguration=ko(wo,587,"email-smtp.eu-central-1.amazonaws.com");const So={id:"elastic-email",name:"ElasticEmail",icon:"elastic-email.svg",help_page:"https://help.elasticemail.com/en/articles/4803409-smtp-settings",availableConfigurations:Co(["smtp.elasticemail.com","smtp25.elasticemail.com"],[25,2525,587])};So.defaultConfiguration=ko(So,587,"smtp.elasticemail.com");const xo={id:"gmail",name:"Gmail",icon:"gmail.svg",help_page:"https://support.google.com/a/answer/2956491",availableConfigurations:Co(["smtp-relay.gmail.com"],[25,587])};xo.defaultConfiguration=ko(xo,587);const No={id:"mailgun",name:"MailGun",icon:"mailgun.svg",help_page:"https://documentation.mailgun.com/en/latest/quickstart-sending.html",availableConfigurations:Co(["smtp.mailgun.com"],[587])};No.defaultConfiguration=No.availableConfigurations[0];const Ro={id:"mailjet",name:"Mailjet",icon:"mailjet.svg",help_page:"https://dev.mailjet.com/smtp-relay/configuration/",availableConfigurations:Co(["in-v3.mailjet.com"],[25,2525,587,588])};Ro.defaultConfiguration=ko(Ro,587);const Io={id:"mandrill",name:"Mandrill",icon:"mandrill.svg",help_page:"https://mailchimp.com/developer/transactional/docs/smtp-integration/",availableConfigurations:Co(["smtp.mandrillapp.com"],[25,2525,587])};Io.defaultConfiguration=ko(Io,587);const Do={id:"sendgrid",name:"Sendgrid",icon:"sendgrid.svg",help_page:"https://docs.sendgrid.com/for-developers/sending-email/integrating-with-the-smtp-api",availableConfigurations:Co(["smtp.sendgrid.com"],[25,2525,587])};Do.defaultConfiguration=ko(Do,587);const To={id:"sendinblue",name:"Sendinblue",icon:"sendinblue.svg",help_page:"https://help.sendinblue.com/hc/en-us/articles/209462765",availableConfigurations:Co(["smtp-relay.sendinblue.com"],[25,587])};To.defaultConfiguration=ko(To,587);const Ao={id:"zoho",name:"Zoho",icon:"zoho.svg",help_page:"https://www.zoho.com/mail/help/zoho-smtp.html",availableConfigurations:Co(["smtp.zoho.eu","smtppro.zoho.eu"],[587])};Ao.defaultConfiguration=ko(Ao,587,"smtp.zoho.eu");const Po=[wo,So,xo,No,Ro,Io,Do,To,Ao,{id:"other",name:"Other",icon:null,availableConfigurations:[],defaultConfiguration:{host:"",port:"",tls:!0}}];function Uo(){return Uo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Uo.apply(this,arguments)}const _o=a.createContext({getCurrentSmtpSettings:()=>{},findSmtpSettings:()=>{},changeProvider:()=>{},setData:()=>{},isSettingsModified:()=>{},isSettingsValid:()=>{},getErrors:()=>{},validateData:()=>{},getFieldToFocus:()=>{},saveSmtpSettings:()=>{},isProcessing:()=>{},hasProviderChanged:()=>{},sendTestMailTo:()=>{},isDataReady:()=>{},clearContext:()=>{}});class Lo extends a.Component{constructor(e){super(e),this.state=this.defaultState;const t=e.context.getApiClientOptions();this.smtpSettingsModel=new class{constructor(e){this.smtpSettingsService=new class{constructor(e){e.setResourceName("smtp/settings"),this.apiClient=new hs(e)}async find(){const e=(await this.apiClient.findAll())?.body;return e.tls=Boolean(e?.tls),e}async save(e){const t=(await this.apiClient.create(e)).body;return t.tls=Boolean(t.tls),t}}(e)}findSmtpSettings(){return this.smtpSettingsService.find()}saveSmtpSettings(e){return this.smtpSettingsService.save(e)}}(t),this.smtpTestSettingsModel=new class{constructor(e){this.smtpTestSettingsService=new class{constructor(e){e.setResourceName("smtp/email"),this.apiClient=new hs(e)}async sendTestEmail(e){return(await this.apiClient.create(e)).body}}(e)}sendTestEmail(e,t){const{sender_name:s,sender_email:a,host:n,port:r,username:i,password:o,tls:l}=e,c={sender_name:s,sender_email:a,host:n,port:r,username:i,password:o,tls:l,email_test_to:t};return this.smtpTestSettingsService.sendTestEmail(c)}}(t),this.fieldToFocus=null,this.providerHasChanged=!1}get defaultState(){return{settingsModified:!1,currentSmtpSettings:{provider:null,username:"",password:"",host:"",tls:!0,port:"",sender_email:"",sender_name:"Passbolt"},errors:{},isLoaded:!1,processing:!1,hasSumittedForm:!1,getCurrentSmtpSettings:this.getCurrentSmtpSettings.bind(this),findSmtpSettings:this.findSmtpSettings.bind(this),changeProvider:this.changeProvider.bind(this),setData:this.setData.bind(this),isSettingsModified:this.isSettingsModified.bind(this),getErrors:this.getErrors.bind(this),validateData:this.validateData.bind(this),getFieldToFocus:this.getFieldToFocus.bind(this),saveSmtpSettings:this.saveSmtpSettings.bind(this),isProcessing:this.isProcessing.bind(this),hasProviderChanged:this.hasProviderChanged.bind(this),sendTestMailTo:this.sendTestMailTo.bind(this),isDataReady:this.isDataReady.bind(this),clearContext:this.clearContext.bind(this)}}async findSmtpSettings(){if(this.props.context.siteSettings.canIUse("smtpSettings"))try{const e=await this.smtpSettingsModel.findSmtpSettings();e.sender_email||(e.sender_email=this.props.context.loggedInUser.username),e.host&&e.port&&(e.provider=this.detectProvider(e)),this.setState({currentSmtpSettings:e,isLoaded:!0})}catch(e){this.setState({isLoaded:!0,currentSmtpSettings:{...this.state.currentSmtpSettings,sender_email:this.props.context.loggedInUser.username}}),this.handleError(e)}}clearContext(){const{settingsModified:e,currentSmtpSettings:t,errors:s,isLoaded:a,processing:n,hasSumittedForm:r}=this.defaultState;this.setState({settingsModified:e,currentSmtpSettings:t,errors:s,isLoaded:a,processing:n,hasSumittedForm:r})}async saveSmtpSettings(){this._doProcess((async()=>{try{const e={...this.state.currentSmtpSettings};delete e.provider,await this.smtpSettingsModel.saveSmtpSettings(e),this.props.actionFeedbackContext.displaySuccess(this.props.t("The SMTP settings have been saved successfully"));const t=Object.assign({},this.state.currentSmtpSettings,{source:"db"});this.setState({currentSmtpSettings:t})}catch(e){this.handleError(e)}}))}async sendTestMailTo(e){return await this.smtpTestSettingsModel.sendTestEmail(this.getCurrentSmtpSettings(),e)}_doProcess(e){this.setState({processing:!0},(async()=>{await e(),this.setState({processing:!1})}))}hasProviderChanged(){const e=this.providerHasChanged;return this.providerHasChanged=!1,e}changeProvider(e){e.id!==this.state.currentSmtpSettings.provider?.id&&(this.providerHasChanged=!0,this.setState({settingsModified:!0,currentSmtpSettings:{...this.state.currentSmtpSettings,...e.defaultConfiguration,provider:e}}))}setData(e){const t=Object.assign({},this.state.currentSmtpSettings,e),s={currentSmtpSettings:{...t,provider:this.detectProvider(t)},settingsModified:!0};this.setState(s),this.state.hasSumittedForm&&this.validateData(t)}detectProvider(e){for(let t=0;t<Po.length;t++){const s=Po[t];if(s.availableConfigurations.find((t=>t.host===e.host&&t.port===parseInt(e.port,10)&&t.tls===e.tls)))return s}return Po.find((e=>"other"===e.id))}isDataReady(){return this.state.isLoaded}isProcessing(){return this.state.processing}isSettingsModified(){return this.state.settingsModified}getErrors(){return this.state.errors}validateData(e){e=e||this.state.currentSmtpSettings;const t={};let s=!0;return s=this.validate_host(e.host,t)&&s,s=this.validate_sender_email(e.sender_email,t)&&s,s=this.validate_sender_name(e.sender_name,t)&&s,s=this.validate_username(e.username,t)&&s,s=this.validate_password(e.password,t)&&s,s=this.validate_port(e.port,t)&&s,s=this.validate_tls(e.tls,t)&&s,s||(this.fieldToFocus=this.getFirstFieldInError(t,["username","password","host","tls","port","sender_name","sender_email"])),this.setState({errors:t,hasSumittedForm:!0}),s}validate_host(e,t){return"string"!=typeof e?(t.host=this.props.t("SMTP Host must be a valid string"),!1):0!==e.length||(t.host=this.props.t("SMTP Host is required"),!1)}validate_sender_email(e,t){return"string"!=typeof e?(t.sender_email=this.props.t("Sender email must be a valid email"),!1):0===e.length?(t.sender_email=this.props.t("Sender email is required"),!1):!!this.isEmail(e)||(t.sender_email=this.props.t("Sender email must be a valid email"),!1)}validate_sender_name(e,t){return"string"!=typeof e?(t.sender_name=this.props.t("Sender name must be a valid string"),!1):0!==e.length||(t.sender_name=this.props.t("Sender name is required"),!1)}validate_username(e,t){return null===e||"string"==typeof e||(t.username=this.props.t("Username must be a valid string"),!1)}validate_password(e,t){return null===e||"string"==typeof e||(t.password=this.props.t("Password must be a valid string"),!1)}validate_tls(e,t){return"boolean"==typeof e||(t.tls=this.props.t("TLS must be set to 'Yes' or 'No'"),!1)}validate_port(e,t){const s=parseInt(e,10);return isNaN(s)?(t.port=this.props.t("Port must be a valid number"),!1):!(s<1||s>65535)||(t.port=this.props.t("Port must be a number between 1 and 65535"),!1)}getFirstFieldInError(e,t){for(let s=0;s<t.length;s++){const a=t[s];if(void 0!==e[a])return a}return null}isEmail(e){return $s()("^[\\p{L}0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[\\p{L}0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[_\\p{L}0-9][-_\\p{L}0-9]*\\.)*(?:[\\p{L}0-9][-\\p{L}0-9]{0,62})\\.(?:(?:[a-z]{2}\\.)?[a-z]{2,})$").test(e)}getCurrentSmtpSettings(){return this.state.currentSmtpSettings}getFieldToFocus(){const e=this.fieldToFocus;return this.fieldToFocus=null,e}handleError(e){console.error(e),this.props.dialogContext.open(we,{error:e})}render(){return a.createElement(_o.Provider,{value:this.state},this.props.children)}}function Fo(e){return class extends a.Component{render(){return a.createElement(_o.Consumer,null,(t=>a.createElement(e,Uo({adminSmtpSettingsContext:t},this.props))))}}}Lo.propTypes={context:d().any,dialogContext:d().object,actionFeedbackContext:d().object,children:d().any,t:d().func},u(M(D((0,k.Z)("common")(Lo))));const Mo="form",Oo="error",jo="success";class qo extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{uiState:Mo,recipient:this.props.context.loggedInUser.username,processing:!1,displayLogs:!0}}bindCallbacks(){this.handleRetryClick=this.handleRetryClick.bind(this),this.handleError=this.handleError.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleDisplayLogsClick=this.handleDisplayLogsClick.bind(this)}async handleFormSubmit(e){if(e.preventDefault(),this.validateForm()){try{this.setState({processing:!0});const e=await this.props.adminSmtpSettingsContext.sendTestMailTo(this.state.recipient);this.setState({uiState:jo,debugDetails:this.formatDebug(e.debug),displayLogs:!1})}catch(e){this.handleError(e)}this.setState({processing:!1})}}async handleInputChange(e){this.setState({recipient:e.target.value})}validateForm(){const e=$s()("^[\\p{L}0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[\\p{L}0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[_\\p{L}0-9][-_\\p{L}0-9]*\\.)*(?:[\\p{L}0-9][-\\p{L}0-9]{0,62})\\.(?:(?:[a-z]{2}\\.)?[a-z]{2,})$").test(this.state.recipient);return this.setState({recipientError:e?"":this.translate("Recipient must be a valid email")}),e}formatDebug(e){return JSON.stringify(e,null,4)}handleError(e){const t=e.data?.body?.debug,s=t?.length>0?t:e?.message;this.setState({uiState:Oo,debugDetails:this.formatDebug(s),displayLogs:!0})}handleDisplayLogsClick(){this.setState({displayLogs:!this.state.displayLogs})}handleRetryClick(){this.setState({uiState:Mo})}hasAllInputDisabled(){return this.state.processing}get title(){return{form:this.translate("Send test email"),error:this.translate("Something went wrong!"),success:this.translate("Email sent")}[this.state.uiState]||""}get translate(){return this.props.t}render(){return a.createElement(be,{className:"send-test-email-dialog",title:this.title,onClose:this.props.handleClose,disabled:this.hasAllInputDisabled()},this.state.uiState===Mo&&a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input text required ${this.state.recipientError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",null,a.createElement(C.c,null,"Recipient")),a.createElement("input",{id:"recipient",type:"text",name:"recipient",required:"required",className:"required fluid form-element ready",placeholder:"name@email.com",onChange:this.handleInputChange,value:this.state.recipient,disabled:this.hasAllInputDisabled()}),this.state.recipientError&&a.createElement("div",{className:"recipient error-message"},this.state.recipientError))),a.createElement("div",{className:"message notice"},a.createElement("strong",null,a.createElement(C.c,null,"Pro tip"),":")," ",a.createElement(C.c,null,"after clicking on send, a test email will be sent to the recipient email in order to check that your configuration is correct.")),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.props.handleClose}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Send")}))),this.state.uiState===Oo&&a.createElement(a.Fragment,null,a.createElement("div",{className:"dialog-body"},a.createElement("p",null,a.createElement(C.c,null,"The test email could not be sent. Kindly check the logs below for more information."),a.createElement("br",null),a.createElement("a",{className:"faq-link",href:"https://help.passbolt.com/faq/hosting/why-email-not-sent",rel:"noopener noreferrer",target:"_blank"},a.createElement(C.c,null,"FAQ: Why are my emails not sent?"))),a.createElement("div",{className:"accordion-header"},a.createElement("a",{onClick:this.handleDisplayLogsClick},a.createElement(de,{name:this.state.displayLogs?"caret-down":"caret-right"})," ",a.createElement(C.c,null,"Logs"))),this.state.displayLogs&&a.createElement("div",{className:"accordion-content"},a.createElement("textarea",{className:"full_report",readOnly:!0,value:this.state.debugDetails}))),a.createElement("div",{className:"dialog-footer clearfix"},a.createElement("a",{className:"cancel",role:"button",disabled:this.hasAllInputDisabled(),onClick:this.handleRetryClick},a.createElement(C.c,null,"Retry")),a.createElement("button",{className:"button primary",role:"button",type:"button",onClick:this.props.handleClose,disabled:this.isProcessing},a.createElement("span",null,a.createElement(C.c,null,"Close"))))),this.state.uiState===jo&&a.createElement(a.Fragment,null,a.createElement("div",{className:"dialog-body"},a.createElement("p",null,a.createElement(C.c,null,"The test email has been sent. Check your email box, you should receive it in a minute.")),a.createElement("div",{className:"accordion-header"},a.createElement("a",{onClick:this.handleDisplayLogsClick},a.createElement(de,{name:this.state.displayLogs?"caret-down":"caret-right"})," ",a.createElement(C.c,null,"Logs"))),this.state.displayLogs&&a.createElement("div",{className:"accordion-content"},a.createElement("textarea",{className:"full_report",readOnly:!0,value:this.state.debugDetails}))),a.createElement("div",{className:"message notice"},a.createElement("strong",null,a.createElement(C.c,null,"Pro tip"),":")," ",a.createElement(C.c,null,"Check your spam folder if you do not hear from us after a while.")),a.createElement("div",{className:"dialog-footer clearfix"},a.createElement("a",{className:"cancel",role:"button",disabled:this.hasAllInputDisabled(),onClick:this.handleRetryClick},a.createElement(C.c,null,"Retry")),a.createElement("button",{className:"button primary",role:"button",type:"button",onClick:this.props.handleClose,disabled:this.isProcessing},a.createElement("span",null,a.createElement(C.c,null,"Close"))))))}}qo.propTypes={context:d().object,adminSmtpSettingsContext:d().object,handleClose:d().func,t:d().func};const Wo=u(Fo((0,k.Z)("common")(qo)));class zo extends a.Component{constructor(e){super(e),this.bindCallbacks(),this.dialogId=null}bindCallbacks(){this.handleSaveClick=this.handleSaveClick.bind(this),this.handleTestClick=this.handleTestClick.bind(this),this.handleCloseDialog=this.handleCloseDialog.bind(this)}async handleSaveClick(){this.smtpSettings.isProcessing()||this.smtpSettings.validateData()&&await this.smtpSettings.saveSmtpSettings()}async handleTestClick(){this.smtpSettings.isProcessing()||this.smtpSettings.validateData()&&(null!==this.dialogId&&this.handleCloseDialog(),this.dialogId=await this.props.dialogContext.open(Wo,{handleClose:this.handleCloseDialog}))}handleCloseDialog(){this.props.dialogContext.close(this.dialogId),this.dialogId=null}isSaveEnabled(){return this.smtpSettings.isSettingsModified()&&!this.smtpSettings.isProcessing()}isTestEnabled(){return this.smtpSettings.isSettingsModified()&&!this.smtpSettings.isProcessing()}get smtpSettings(){return this.props.adminSmtpSettingsContext}render(){return a.createElement("div",{className:"col2_3 actions-wrapper"},a.createElement("div",{className:"actions"},a.createElement("div",null,a.createElement("li",null,a.createElement("a",{className:"button "+(this.isSaveEnabled()?"":"disabled"),onClick:this.handleSaveClick},a.createElement(de,{name:"save"}),a.createElement("span",null,a.createElement(C.c,null,"Save settings"))))),a.createElement("div",null,a.createElement("li",null,a.createElement("a",{className:"button "+(this.isTestEnabled()?"":"disabled"),onClick:this.handleTestClick},a.createElement(de,{name:"plug"}),a.createElement("span",null,a.createElement(C.c,null,"Send test email")))))))}}zo.propTypes={adminSmtpSettingsContext:d().object,workflowContext:d().any,dialogContext:d().object};const Go=Fo(M((0,k.Z)("common")(zo))),Ho="None",Vo="Username only",Ko="Username & password";class Bo extends a.Component{static get AUTHENTICATION_METHOD_NONE(){return Ho}static get AUTHENTICATION_METHOD_USERNAME(){return Vo}static get AUTHENTICATION_METHOD_USERNAME_PASSWORD(){return Ko}constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks(),this.createRefs()}get defaultState(){return{showAdvancedSettings:!1,source:"db"}}createRefs(){this.usernameFieldRef=a.createRef(),this.passwordFieldRef=a.createRef(),this.hostFieldRef=a.createRef(),this.portFieldRef=a.createRef(),this.senderEmailFieldRef=a.createRef(),this.senderNameFieldRef=a.createRef()}async componentDidMount(){this.props.administrationWorkspaceContext.setDisplayAdministrationWorkspaceAction(Go),await this.props.adminSmtpSettingsContext.findSmtpSettings();const e=this.props.adminSmtpSettingsContext.getCurrentSmtpSettings();this.setState({showAdvancedSettings:"other"===e.provider?.id})}componentWillUnmount(){this.props.administrationWorkspaceContext.resetDisplayAdministrationWorkspaceAction(),this.props.adminSmtpSettingsContext.clearContext()}componentDidUpdate(){const e=this.props.adminSmtpSettingsContext,t=e.getFieldToFocus();t&&this[`${t}FieldRef`]?.current?.focus(),e.hasProviderChanged()&&this.setState({showAdvancedSettings:"other"===e.getCurrentSmtpSettings().provider?.id})}bindCallbacks(){this.handleAdvancedSettingsToggle=this.handleAdvancedSettingsToggle.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleProviderChange=this.handleProviderChange.bind(this),this.handleAuthenticationMethodChange=this.handleAuthenticationMethodChange.bind(this)}handleProviderChange(e){const t=e.target.value,s=Po.find((e=>e.id===t));this.props.adminSmtpSettingsContext.changeProvider(s)}handleAuthenticationMethodChange(e){let t=null,s=null;e.target.value===Vo?t="":e.target.value===Ko&&(t="",s=""),this.props.adminSmtpSettingsContext.setData({username:t,password:s})}handleInputChange(e){const t=e.target;this.props.adminSmtpSettingsContext.setData({[t.name]:t.value})}handleAdvancedSettingsToggle(){this.setState({showAdvancedSettings:!this.state.showAdvancedSettings})}isProcessing(){return this.props.adminSmtpSettingsContext.isProcessing()}get providerList(){return Po.map((e=>({value:e.id,label:e.name})))}get authenticationMethodList(){return[{value:Ho,label:this.translate("None")},{value:Vo,label:this.translate("Username only")},{value:Ko,label:this.translate("Username & password")}]}get tlsSelectList(){return[{value:!0,label:this.translate("Yes")},{value:!1,label:this.translate("No")}]}get authenticationMethod(){const e=this.props.adminSmtpSettingsContext.getCurrentSmtpSettings();return null===e?.username?Ho:null===e?.password?Vo:Ko}shouldDisplayUsername(){return this.authenticationMethod===Vo||this.authenticationMethod===Ko}shouldDisplayPassword(){return this.authenticationMethod===Ko}shouldShowSourceWarningMessage(){const e=this.props.adminSmtpSettingsContext;return"db"!==e.getCurrentSmtpSettings().source&&e.isSettingsModified()}isReady(){return this.props.adminSmtpSettingsContext.isDataReady()}get translate(){return this.props.t}render(){const e=this.props.adminSmtpSettingsContext.getCurrentSmtpSettings(),t=this.props.adminSmtpSettingsContext.getErrors();return a.createElement("div",{className:"grid grid-responsive-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"third-party-provider-settings smtp-settings col8 main-column"},a.createElement("h3",null,a.createElement(C.c,null,"Email server")),this.isReady()&&!e?.provider&&a.createElement(a.Fragment,null,a.createElement("h4",{className:"no-border"},a.createElement(C.c,null,"Select a provider")),a.createElement("div",{className:"provider-list"},Po.map((e=>a.createElement("div",{key:e.id,className:"provider button",id:e.id,onClick:()=>this.props.adminSmtpSettingsContext.changeProvider(e)},a.createElement("div",{className:"provider-logo"},"other"===e.id&&a.createElement(de,{name:"envelope"}),"other"!==e.id&&a.createElement("img",{src:`${this.props.context.trustedDomain}/img/third_party/${e.icon}`})),a.createElement("p",{className:"provider-name"},e.name)))))),this.isReady()&&e?.provider&&a.createElement(a.Fragment,null,this.shouldShowSourceWarningMessage()&&a.createElement("div",{className:"warning message"},a.createElement(C.c,null,a.createElement("b",null,"Warning:")," These are the settings provided by a configuration file. If you save it, will ignore the settings on file and use the ones from the database.")),a.createElement("form",{className:"form"},a.createElement("h4",{className:"no-border"},a.createElement(C.c,null,"SMTP server configuration")),a.createElement("div",{className:"select-wrapper input required "+(this.isProcessing()?"disabled":"")},a.createElement("label",{htmlFor:"smtp-settings-form-provider"},a.createElement(C.c,null,"Email provider")),a.createElement(qe,{id:"smtp-settings-form-provider",name:"provider",items:this.providerList,value:e.provider.id,onChange:this.handleProviderChange,disabled:this.isProcessing()})),a.createElement("div",{className:"select-wrapper input required "+(this.isProcessing()?"disabled":"")},a.createElement("label",{htmlFor:"smtp-settings-form-authentication-method"},a.createElement(C.c,null,"Authentication method")),a.createElement(qe,{id:"smtp-settings-form-authentication-method",name:"authentication-method",items:this.authenticationMethodList,value:this.authenticationMethod,onChange:this.handleAuthenticationMethodChange,disabled:this.isProcessing()})),this.shouldDisplayUsername()&&a.createElement("div",{className:`input text ${t.username?"error":""} ${this.isProcessing()?"disabled":""}`},a.createElement("label",{htmlFor:"smtp-settings-form-username"},a.createElement(C.c,null,"Username")),a.createElement("input",{id:"smtp-settings-form-username",ref:this.usernameFieldRef,name:"username",className:"fluid",maxLength:"256",type:"text",autoComplete:"off",value:e.username,onChange:this.handleInputChange,placeholder:this.translate("Username"),disabled:this.isProcessing()}),t.username&&a.createElement("div",{className:"error-message"},t.username)),this.shouldDisplayPassword()&&a.createElement("div",{className:`input-password-wrapper input ${t.password?"error":""} ${this.isProcessing()?"disabled":""}`},a.createElement("label",{htmlFor:"smtp-settings-form-password"},a.createElement(C.c,null,"Password")),a.createElement(At,{id:"smtp-settings-form-password",name:"password",autoComplete:"new-password",placeholder:this.translate("Password"),preview:!0,value:e.password,onChange:this.handleInputChange,disabled:this.isProcessing(),inputRef:this.passwordFieldRef}),t.password&&a.createElement("div",{className:"password error-message"},t.password)),a.createElement("div",{className:"accordion-header"},a.createElement("a",{onClick:this.handleAdvancedSettingsToggle},a.createElement(de,{name:this.state.showAdvancedSettings?"caret-down":"caret-right"}),a.createElement(C.c,null,"Advanced settings"))),this.state.showAdvancedSettings&&a.createElement("div",{className:"advanced-settings"},a.createElement("div",{className:`input text required ${t.host?"error":""} ${this.isProcessing()?"disabled":""}`},a.createElement("label",{htmlFor:"smtp-settings-form-host"},a.createElement(C.c,null,"SMTP host")),a.createElement("input",{id:"smtp-settings-form-host",ref:this.hostFieldRef,name:"host",className:"fluid",maxLength:"256",type:"text",autoComplete:"off",value:e.host,onChange:this.handleInputChange,placeholder:this.translate("SMTP server address"),disabled:this.isProcessing()}),t.host&&a.createElement("div",{className:"error-message"},t.host)),a.createElement("div",{className:`input text required ${t.tls?"error":""} ${this.isProcessing()?"disabled":""}`},a.createElement("label",{htmlFor:"smtp-settings-form-tls"},a.createElement(C.c,null,"Use TLS")),a.createElement(qe,{id:"smtp-settings-form-tls",name:"tls",items:this.tlsSelectList,value:e.tls,onChange:this.handleInputChange,disabled:this.isProcessing()})),a.createElement("div",{className:`input text required ${t.port?"error":""} ${this.isProcessing()?"disabled":""}`},a.createElement("label",{htmlFor:"smtp-settings-form-port"},a.createElement(C.c,null,"Port")),a.createElement("input",{id:"smtp-settings-form-port",ref:this.portFieldRef,name:"port",className:"fluid",maxLength:"256",type:"text",autoComplete:"off",value:e.port,onChange:this.handleInputChange,placeholder:this.translate("Port number"),disabled:this.isProcessing()}),t.port&&a.createElement("div",{className:"error-message"},t.port))),a.createElement("h4",null,a.createElement(C.c,null,"Sender configuration")),a.createElement("div",{className:`input text required ${t.sender_name?"error":""} ${this.isProcessing()?"disabled":""}`},a.createElement("label",{htmlFor:"smtp-settings-form-sender-name"},a.createElement(C.c,null,"Sender name")),a.createElement("input",{id:"smtp-settings-form-sender-name",ref:this.senderNameFieldRef,name:"sender_name",className:"fluid",maxLength:"256",type:"text",autoComplete:"off",value:e.sender_name,onChange:this.handleInputChange,placeholder:this.translate("Sender name"),disabled:this.isProcessing()}),t.sender_name&&a.createElement("div",{className:"error-message"},t.sender_name),a.createElement("p",null,a.createElement(C.c,null,"This is the name users will see in their mailbox when passbolt sends a notification."))),a.createElement("div",{className:`input text required ${t.sender_email?"error":""} ${this.isProcessing()?"disabled":""}`},a.createElement("label",{htmlFor:"smtp-settings-form-sender-name"},a.createElement(C.c,null,"Sender email")),a.createElement("input",{id:"smtp-settings-form-sender-email",ref:this.senderEmailFieldRef,name:"sender_email",className:"fluid",maxLength:"256",type:"text",autoComplete:"off",value:e.sender_email,onChange:this.handleInputChange,placeholder:this.translate("Sender email"),disabled:this.isProcessing()}),t.sender_email&&a.createElement("div",{className:"error-message"},t.sender_email),a.createElement("p",null,a.createElement(C.c,null,"This is the email address users will see in their mail box when passbolt sends a notification.",a.createElement("br",null),"It's a good practice to provide a working email address that users can reply to.")))))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Why do I need an SMTP server?")),a.createElement("p",null,a.createElement(C.c,null,"Passbolt needs an smtp server in order to send invitation emails after an account creation and to send email notifications.")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/configure/email/setup",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"document"}),a.createElement("span",null,a.createElement(C.c,null,"Read the documentation")))),e?.provider&&"other"!==e?.provider.id&&a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"How do I configure a ",e.provider.name," SMTP server?")),a.createElement("a",{className:"button",href:e.provider.help_page,target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"link"}),a.createElement("span",null,a.createElement(C.c,null,"See the ",e.provider.name," documentation")))))))}}Bo.propTypes={context:d().object,dialogContext:d().any,administrationWorkspaceContext:d().object,adminSmtpSettingsContext:d().object,t:d().func};const $o=u(Fo(M(Xn((0,k.Z)("common")(Bo))))),Zo=["0-mail.com","007addict.com","020.co.uk","027168.com","0815.ru","0815.su","0clickemail.com","0sg.net","0wnd.net","0wnd.org","1033edge.com","10mail.org","10minutemail.co.za","10minutemail.com","11mail.com","123-m.com","123.com","123box.net","123india.com","123mail.cl","123mail.org","123qwe.co.uk","126.com","126.net","138mail.com","139.com","150mail.com","150ml.com","15meg4free.com","163.com","16mail.com","188.com","189.cn","1auto.com","1ce.us","1chuan.com","1colony.com","1coolplace.com","1email.eu","1freeemail.com","1fsdfdsfsdf.tk","1funplace.com","1internetdrive.com","1mail.ml","1mail.net","1me.net","1mum.com","1musicrow.com","1netdrive.com","1nsyncfan.com","1pad.de","1under.com","1webave.com","1webhighway.com","1zhuan.com","2-mail.com","20email.eu","20mail.in","20mail.it","20minutemail.com","212.com","21cn.com","247emails.com","24horas.com","2911.net","2980.com","2bmail.co.uk","2coolforyou.net","2d2i.com","2die4.com","2fdgdfgdfgdf.tk","2hotforyou.net","2mydns.com","2net.us","2prong.com","2trom.com","3000.it","30minutemail.com","30minutesmail.com","3126.com","321media.com","33mail.com","360.ru","37.com","3ammagazine.com","3dmail.com","3email.com","3g.ua","3mail.ga","3trtretgfrfe.tk","3xl.net","444.net","4email.com","4email.net","4gfdsgfdgfd.tk","4mg.com","4newyork.com","4warding.com","4warding.net","4warding.org","4x4fan.com","4x4man.com","50mail.com","5fm.za.com","5ghgfhfghfgh.tk","5iron.com","5star.com","60minutemail.com","6hjgjhgkilkj.tk","6ip.us","6mail.cf","6paq.com","702mail.co.za","74.ru","7mail.ga","7mail.ml","7tags.com","88.am","8848.net","888.nu","8mail.ga","8mail.ml","97rock.com","99experts.com","9ox.net","a-bc.net","a-player.org","a2z4u.net","a45.in","aaamail.zzn.com","aahlife.com","aamail.net","aapt.net.au","aaronkwok.net","abbeyroadlondon.co.uk","abcflash.net","abdulnour.com","aberystwyth.com","abolition-now.com","about.com","absolutevitality.com","abusemail.de","abv.bg","abwesend.de","abyssmail.com","ac20mail.in","academycougars.com","acceso.or.cr","access4less.net","accessgcc.com","accountant.com","acdcfan.com","acdczone.com","ace-of-base.com","acmecity.com","acmemail.net","acninc.net","acrobatmail.com","activatormail.com","activist.com","adam.com.au","add3000.pp.ua","addcom.de","address.com","adelphia.net","adexec.com","adfarrow.com","adinet.com.uy","adios.net","admin.in.th","administrativos.com","adoption.com","ados.fr","adrenalinefreak.com","adres.nl","advalvas.be","advantimo.com","aeiou.pt","aemail4u.com","aeneasmail.com","afreeinternet.com","africa-11.com","africamail.com","africamel.net","africanpartnersonline.com","afrobacon.com","ag.us.to","agedmail.com","agelessemail.com","agoodmail.com","ahaa.dk","ahk.jp","aichi.com","aim.com","aircraftmail.com","airforce.net","airforceemail.com","airpost.net","aiutamici.com","ajacied.com","ajaxapp.net","ak47.hu","aknet.kg","akphantom.com","albawaba.com","alecsmail.com","alex4all.com","alexandria.cc","algeria.com","algeriamail.com","alhilal.net","alibaba.com","alice.it","aliceadsl.fr","aliceinchainsmail.com","alivance.com","alive.cz","aliyun.com","allergist.com","allmail.net","alloymail.com","allracing.com","allsaintsfan.com","alltel.net","alpenjodel.de","alphafrau.de","alskens.dk","altavista.com","altavista.net","altavista.se","alternativagratis.com","alumni.com","alumnidirector.com","alvilag.hu","ama-trade.de","amail.com","amazonses.com","amele.com","america.hm","ameritech.net","amilegit.com","amiri.net","amiriindustries.com","amnetsal.com","amorki.pl","amrer.net","amuro.net","amuromail.com","ananzi.co.za","ancestry.com","andreabocellimail.com","andylau.net","anfmail.com","angelfan.com","angelfire.com","angelic.com","animail.net","animal.net","animalhouse.com","animalwoman.net","anjungcafe.com","anniefans.com","annsmail.com","ano-mail.net","anonmails.de","anonymbox.com","anonymous.to","anote.com","another.com","anotherdomaincyka.tk","anotherwin95.com","anti-ignorance.net","anti-social.com","antichef.com","antichef.net","antiqueemail.com","antireg.ru","antisocial.com","antispam.de","antispam24.de","antispammail.de","antongijsen.com","antwerpen.com","anymoment.com","anytimenow.com","aol.co.uk","aol.com","aol.de","aol.fr","aol.it","aol.jp","aon.at","apexmail.com","apmail.com","apollo.lv","aport.ru","aport2000.ru","apple.sib.ru","appraiser.net","approvers.net","aquaticmail.net","arabia.com","arabtop.net","arcademaster.com","archaeologist.com","archerymail.com","arcor.de","arcotronics.bg","arcticmail.com","argentina.com","arhaelogist.com","aristotle.org","army.net","armyspy.com","arnet.com.ar","art-en-ligne.pro","artistemail.com","artlover.com","artlover.com.au","artman-conception.com","as-if.com","asdasd.nl","asean-mail","asean-mail.com","asheville.com","asia-links.com","asia-mail.com","asia.com","asiafind.com","asianavenue.com","asiancityweb.com","asiansonly.net","asianwired.net","asiapoint.net","askaclub.ru","ass.pp.ua","assala.com","assamesemail.com","astroboymail.com","astrolover.com","astrosfan.com","astrosfan.net","asurfer.com","atheist.com","athenachu.net","atina.cl","atl.lv","atlas.cz","atlaswebmail.com","atlink.com","atmc.net","ato.check.com","atozasia.com","atrus.ru","att.net","attglobal.net","attymail.com","au.ru","auctioneer.net","aufeminin.com","aus-city.com","ausi.com","aussiemail.com.au","austin.rr.com","australia.edu","australiamail.com","austrosearch.net","autoescuelanerja.com","autograf.pl","automail.ru","automotiveauthority.com","autorambler.ru","aver.com","avh.hu","avia-tonic.fr","avtoritet.ru","awayonvacation.com","awholelotofamechi.com","awsom.net","axoskate.com","ayna.com","azazazatashkent.tk","azimiweb.com","azmeil.tk","bachelorboy.com","bachelorgal.com","backfliper.com","backpackers.com","backstreet-boys.com","backstreetboysclub.com","backtothefuturefans.com","backwards.com","badtzmail.com","bagherpour.com","bahrainmail.com","bakpaka.com","bakpaka.net","baldmama.de","baldpapa.de","ballerstatus.net","ballyfinance.com","balochistan.org","baluch.com","bangkok.com","bangkok2000.com","bannertown.net","baptistmail.com","baptized.com","barcelona.com","bareed.ws","barid.com","barlick.net","bartender.net","baseball-email.com","baseballmail.com","basketballmail.com","batuta.net","baudoinconsulting.com","baxomale.ht.cx","bboy.com","bboy.zzn.com","bcvibes.com","beddly.com","beeebank.com","beefmilk.com","beenhad.com","beep.ru","beer.com","beerandremotes.com","beethoven.com","beirut.com","belice.com","belizehome.com","belizemail.net","belizeweb.com","bell.net","bellair.net","bellsouth.net","berkscounty.com","berlin.com","berlin.de","berlinexpo.de","bestmail.us","betriebsdirektor.de","bettergolf.net","bharatmail.com","big1.us","big5mail.com","bigassweb.com","bigblue.net.au","bigboab.com","bigfoot.com","bigfoot.de","bigger.com","biggerbadder.com","bigmailbox.com","bigmir.net","bigpond.au","bigpond.com","bigpond.com.au","bigpond.net","bigpond.net.au","bigramp.com","bigstring.com","bikemechanics.com","bikeracer.com","bikeracers.net","bikerider.com","billsfan.com","billsfan.net","bimamail.com","bimla.net","bin-wieder-da.de","binkmail.com","bio-muesli.info","bio-muesli.net","biologyfan.com","birdfanatic.com","birdlover.com","birdowner.net","bisons.com","bitmail.com","bitpage.net","bizhosting.com","bk.ru","bkkmail.com","bla-bla.com","blackburnfans.com","blackburnmail.com","blackplanet.com","blader.com","bladesmail.net","blazemail.com","bleib-bei-mir.de","blink182.net","blockfilter.com","blogmyway.org","blondandeasy.com","bluebottle.com","bluehyppo.com","bluemail.ch","bluemail.dk","bluesfan.com","bluewin.ch","blueyonder.co.uk","blumail.org","blushmail.com","blutig.me","bmlsports.net","boardermail.com","boarderzone.com","boatracers.com","bobmail.info","bodhi.lawlita.com","bofthew.com","bol.com.br","bolando.com","bollywoodz.com","bolt.com","boltonfans.com","bombdiggity.com","bonbon.net","boom.com","bootmail.com","bootybay.de","bornagain.com","bornnaked.com","bossofthemoss.com","bostonoffice.com","boun.cr","bounce.net","bounces.amazon.com","bouncr.com","box.az","box.ua","boxbg.com","boxemail.com","boxformail.in","boxfrog.com","boximail.com","boyzoneclub.com","bradfordfans.com","brasilia.net","bratan.ru","brazilmail.com","brazilmail.com.br","breadtimes.press","breakthru.com","breathe.com","brefmail.com","brennendesreich.de","bresnan.net","brestonline.com","brew-master.com","brew-meister.com","brfree.com.br","briefemail.com","bright.net","britneyclub.com","brittonsign.com","broadcast.net","broadwaybuff.com","broadwaylove.com","brokeandhappy.com","brokenvalve.com","brujula.net","brunetka.ru","brusseler.com","bsdmail.com","bsnow.net","bspamfree.org","bt.com","btcc.org","btcmail.pw","btconnect.co.uk","btconnect.com","btinternet.com","btopenworld.co.uk","buerotiger.de","buffymail.com","bugmenot.com","bulgaria.com","bullsfan.com","bullsgame.com","bumerang.ro","bumpymail.com","bumrap.com","bund.us","bunita.net","bunko.com","burnthespam.info","burntmail.com","burstmail.info","buryfans.com","bushemail.com","business-man.com","businessman.net","businessweekmail.com","bust.com","busta-rhymes.com","busymail.com","busymail.com.com","busymail.comhomeart.com","butch-femme.net","butovo.net","buyersusa.com","buymoreplays.com","buzy.com","bvimailbox.com","byke.com","byom.de","byteme.com","c2.hu","c2i.net","c3.hu","c4.com","c51vsgq.com","cabacabana.com","cable.comcast.com","cableone.net","caere.it","cairomail.com","calcuttaads.com","calendar-server.bounces.google.com","calidifontain.be","californiamail.com","callnetuk.com","callsign.net","caltanet.it","camidge.com","canada-11.com","canada.com","canadianmail.com","canoemail.com","cantv.net","canwetalk.com","caramail.com","card.zp.ua","care2.com","careceo.com","careerbuildermail.com","carioca.net","cartelera.org","cartestraina.ro","casablancaresort.com","casema.nl","cash4u.com","cashette.com","casino.com","casualdx.com","cataloniamail.com","cataz.com","catcha.com","catchamail.com","catemail.com","catholic.org","catlover.com","catsrule.garfield.com","ccnmail.com","cd2.com","cek.pm","celineclub.com","celtic.com","center-mail.de","centermail.at","centermail.com","centermail.de","centermail.info","centermail.net","centoper.it","centralpets.com","centrum.cz","centrum.sk","centurylink.net","centurytel.net","certifiedmail.com","cfl.rr.com","cgac.es","cghost.s-a-d.de","chacuo.net","chaiyo.com","chaiyomail.com","chalkmail.net","chammy.info","chance2mail.com","chandrasekar.net","channelonetv.com","charityemail.com","charmedmail.com","charter.com","charter.net","chat.ru","chatlane.ru","chattown.com","chauhanweb.com","cheatmail.de","chechnya.conf.work","check.com","check.com12","check1check.com","cheeb.com","cheerful.com","chef.net","chefmail.com","chek.com","chello.nl","chemist.com","chequemail.com","cheshiremail.com","cheyenneweb.com","chez.com","chickmail.com","chil-e.com","childrens.md","childsavetrust.org","china.com","china.net.vg","chinalook.com","chinamail.com","chinesecool.com","chirk.com","chocaholic.com.au","chocofan.com","chogmail.com","choicemail1.com","chong-mail.com","chong-mail.net","christianmail.net","chronicspender.com","churchusa.com","cia-agent.com","cia.hu","ciaoweb.it","cicciociccio.com","cincinow.net","cirquefans.com","citeweb.net","citiz.net","citlink.net","city-of-bath.org","city-of-birmingham.com","city-of-brighton.org","city-of-cambridge.com","city-of-coventry.com","city-of-edinburgh.com","city-of-lichfield.com","city-of-lincoln.com","city-of-liverpool.com","city-of-manchester.com","city-of-nottingham.com","city-of-oxford.com","city-of-swansea.com","city-of-westminster.com","city-of-westminster.net","city-of-york.net","city2city.com","citynetusa.com","cityofcardiff.net","cityoflondon.org","ciudad.com.ar","ckaazaza.tk","claramail.com","classicalfan.com","classicmail.co.za","clear.net.nz","clearwire.net","clerk.com","clickforadate.com","cliffhanger.com","clixser.com","close2you.ne","close2you.net","clrmail.com","club-internet.fr","club4x4.net","clubalfa.com","clubbers.net","clubducati.com","clubhonda.net","clubmember.org","clubnetnoir.com","clubvdo.net","cluemail.com","cmail.net","cmail.org","cmail.ru","cmpmail.com","cmpnetmail.com","cnegal.com","cnnsimail.com","cntv.cn","codec.ro","codec.ro.ro","codec.roemail.ro","coder.hu","coid.biz","coldemail.info","coldmail.com","collectiblesuperstore.com","collector.org","collegebeat.com","collegeclub.com","collegemail.com","colleges.com","columbus.rr.com","columbusrr.com","columnist.com","comast.com","comast.net","comcast.com","comcast.net","comic.com","communityconnect.com","complxmind.com","comporium.net","comprendemail.com","compuserve.com","computer-expert.net","computer-freak.com","computer4u.com","computerconfused.com","computermail.net","computernaked.com","conexcol.com","cong.ru","conk.com","connect4free.net","connectbox.com","conok.com","consultant.com","consumerriot.com","contractor.net","contrasto.cu.cc","cookiemonster.com","cool.br","cool.fr.nf","coole-files.de","coolgoose.ca","coolgoose.com","coolkiwi.com","coollist.com","coolmail.com","coolmail.net","coolrio.com","coolsend.com","coolsite.net","cooooool.com","cooperation.net","cooperationtogo.net","copacabana.com","copper.net","copticmail.com","cornells.com","cornerpub.com","corporatedirtbag.com","correo.terra.com.gt","corrsfan.com","cortinet.com","cosmo.com","cotas.net","counsellor.com","countrylover.com","courriel.fr.nf","courrieltemporaire.com","cox.com","cox.net","coxinet.net","cpaonline.net","cracker.hu","craftemail.com","crapmail.org","crazedanddazed.com","crazy.ru","crazymailing.com","crazysexycool.com","crewstart.com","cristianemail.com","critterpost.com","croeso.com","crosshairs.com","crosswinds.net","crunkmail.com","crwmail.com","cry4helponline.com","cryingmail.com","cs.com","csinibaba.hu","cubiclink.com","cuemail.com","cumbriamail.com","curio-city.com","curryworld.de","curtsmail.com","cust.in","cute-girl.com","cuteandcuddly.com","cutekittens.com","cutey.com","cuvox.de","cww.de","cyber-africa.net","cyber-innovation.club","cyber-matrix.com","cyber-phone.eu","cyber-wizard.com","cyber4all.com","cyberbabies.com","cybercafemaui.com","cybercity-online.net","cyberdude.com","cyberforeplay.net","cybergal.com","cybergrrl.com","cyberinbox.com","cyberleports.com","cybermail.net","cybernet.it","cyberservices.com","cyberspace-asia.com","cybertrains.org","cyclefanz.com","cymail.net","cynetcity.com","d3p.dk","dabsol.net","dacoolest.com","dadacasa.com","daha.com","dailypioneer.com","dallas.theboys.com","dallasmail.com","dandikmail.com","dangerous-minds.com","dansegulvet.com","dasdasdascyka.tk","data54.com","date.by","daum.net","davegracey.com","dawnsonmail.com","dawsonmail.com","dayrep.com","dazedandconfused.com","dbzmail.com","dcemail.com","dcsi.net","ddns.org","deadaddress.com","deadlymob.org","deadspam.com","deafemail.net","deagot.com","deal-maker.com","dearriba.com","death-star.com","deepseafisherman.net","deforestationsucks.com","degoo.com","dejanews.com","delikkt.de","deliveryman.com","deneg.net","depechemode.com","deseretmail.com","desertmail.com","desertonline.com","desertsaintsmail.com","desilota.com","deskmail.com","deskpilot.com","despam.it","despammed.com","destin.com","detik.com","deutschland-net.com","devnullmail.com","devotedcouples.com","dezigner.ru","dfgh.net","dfwatson.com","dglnet.com.br","dgoh.org","di-ve.com","diamondemail.com","didamail.com","die-besten-bilder.de","die-genossen.de","die-optimisten.de","die-optimisten.net","die.life","diehardmail.com","diemailbox.de","digibel.be","digital-filestore.de","digitalforeplay.net","digitalsanctuary.com","digosnet.com","dingbone.com","diplomats.com","directbox.com","director-general.com","diri.com","dirtracer.com","dirtracers.com","discard.email","discard.ga","discard.gq","discardmail.com","discardmail.de","disciples.com","discofan.com","discovery.com","discoverymail.com","discoverymail.net","disign-concept.eu","disign-revelation.com","disinfo.net","dispomail.eu","disposable.com","disposableaddress.com","disposableemailaddresses.com","disposableinbox.com","dispose.it","dispostable.com","divismail.ru","divorcedandhappy.com","dm.w3internet.co.uk","dmailman.com","dmitrovka.net","dmitry.ru","dnainternet.net","dnsmadeeasy.com","doar.net","doclist.bounces.google.com","docmail.cz","docs.google.com","doctor.com","dodgeit.com","dodgit.com","dodgit.org","dodo.com.au","dodsi.com","dog.com","dogit.com","doglover.com","dogmail.co.uk","dogsnob.net","doityourself.com","domforfb1.tk","domforfb2.tk","domforfb3.tk","domforfb4.tk","domforfb5.tk","domforfb6.tk","domforfb7.tk","domforfb8.tk","domozmail.com","doneasy.com","donegal.net","donemail.ru","donjuan.com","dontgotmail.com","dontmesswithtexas.com","dontreg.com","dontsendmespam.de","doramail.com","dostmail.com","dotcom.fr","dotmsg.com","dotnow.com","dott.it","download-privat.de","dplanet.ch","dr.com","dragoncon.net","dragracer.com","drdrb.net","drivehq.com","dropmail.me","dropzone.com","drotposta.hu","dubaimail.com","dublin.com","dublin.ie","dump-email.info","dumpandjunk.com","dumpmail.com","dumpmail.de","dumpyemail.com","dunlopdriver.com","dunloprider.com","duno.com","duskmail.com","dustdevil.com","dutchmail.com","dvd-fan.net","dwp.net","dygo.com","dynamitemail.com","dyndns.org","e-apollo.lv","e-hkma.com","e-mail.com","e-mail.com.tr","e-mail.dk","e-mail.org","e-mail.ru","e-mail.ua","e-mailanywhere.com","e-mails.ru","e-tapaal.com","e-webtec.com","e4ward.com","earthalliance.com","earthcam.net","earthdome.com","earthling.net","earthlink.net","earthonline.net","eastcoast.co.za","eastlink.ca","eastmail.com","eastrolog.com","easy.com","easy.to","easypeasy.com","easypost.com","easytrashmail.com","eatmydirt.com","ebprofits.net","ec.rr.com","ecardmail.com","ecbsolutions.net","echina.com","ecolo-online.fr","ecompare.com","edmail.com","ednatx.com","edtnmail.com","educacao.te.pt","educastmail.com","eelmail.com","ehmail.com","einmalmail.de","einrot.com","einrot.de","eintagsmail.de","eircom.net","ekidz.com.au","elisanet.fi","elitemail.org","elsitio.com","eltimon.com","elvis.com","elvisfan.com","email-fake.gq","email-london.co.uk","email-value.com","email.biz","email.cbes.net","email.com","email.cz","email.ee","email.it","email.nu","email.org","email.ro","email.ru","email.si","email.su","email.ua","email.women.com","email2me.com","email2me.net","email4u.info","email60.com","emailacc.com","emailaccount.com","emailaddresses.com","emailage.ga","emailage.gq","emailasso.net","emailchoice.com","emailcorner.net","emailem.com","emailengine.net","emailengine.org","emailer.hubspot.com","emailforyou.net","emailgaul.com","emailgo.de","emailgroups.net","emailias.com","emailinfive.com","emailit.com","emaillime.com","emailmiser.com","emailoregon.com","emailpinoy.com","emailplanet.com","emailplus.org","emailproxsy.com","emails.ga","emails.incisivemedia.com","emails.ru","emailsensei.com","emailservice.com","emailsydney.com","emailtemporanea.com","emailtemporanea.net","emailtemporar.ro","emailtemporario.com.br","emailthe.net","emailtmp.com","emailto.de","emailuser.net","emailwarden.com","emailx.at.hm","emailx.net","emailxfer.com","emailz.ga","emailz.gq","emale.ru","ematic.com","embarqmail.com","emeil.in","emeil.ir","emil.com","eml.cc","eml.pp.ua","empereur.com","emptymail.com","emumail.com","emz.net","end-war.com","enel.net","enelpunto.net","engineer.com","england.com","england.edu","englandmail.com","epage.ru","epatra.com","ephemail.net","epiqmail.com","epix.net","epomail.com","epost.de","eposta.hu","eprompter.com","eqqu.com","eramail.co.za","eresmas.com","eriga.lv","ero-tube.org","eshche.net","esmailweb.net","estranet.it","ethos.st","etoast.com","etrademail.com","etranquil.com","etranquil.net","eudoramail.com","europamel.net","europe.com","europemail.com","euroseek.com","eurosport.com","evafan.com","evertonfans.com","every1.net","everyday.com.kh","everymail.net","everyone.net","everytg.ml","evopo.com","examnotes.net","excite.co.jp","excite.co.uk","excite.com","excite.it","execs.com","execs2k.com","executivemail.co.za","exemail.com.au","exg6.exghost.com","explodemail.com","express.net.ua","expressasia.com","extenda.net","extended.com","extremail.ru","eyepaste.com","eyou.com","ezagenda.com","ezcybersearch.com","ezmail.egine.com","ezmail.ru","ezrs.com","f-m.fm","f1fans.net","facebook-email.ga","facebook.com","facebookmail.com","facebookmail.gq","fadrasha.net","fadrasha.org","fahr-zur-hoelle.org","fake-email.pp.ua","fake-mail.cf","fake-mail.ga","fake-mail.ml","fakeinbox.com","fakeinformation.com","fakemailz.com","falseaddress.com","fan.com","fan.theboys.com","fannclub.com","fansonlymail.com","fansworldwide.de","fantasticmail.com","fantasymail.de","farang.net","farifluset.mailexpire.com","faroweb.com","fast-email.com","fast-mail.fr","fast-mail.org","fastacura.com","fastchevy.com","fastchrysler.com","fastem.com","fastemail.us","fastemailer.com","fastemailextractor.net","fastermail.com","fastest.cc","fastimap.com","fastkawasaki.com","fastmail.ca","fastmail.cn","fastmail.co.uk","fastmail.com","fastmail.com.au","fastmail.es","fastmail.fm","fastmail.gr","fastmail.im","fastmail.in","fastmail.jp","fastmail.mx","fastmail.net","fastmail.nl","fastmail.se","fastmail.to","fastmail.tw","fastmail.us","fastmailbox.net","fastmazda.com","fastmessaging.com","fastmitsubishi.com","fastnissan.com","fastservice.com","fastsubaru.com","fastsuzuki.com","fasttoyota.com","fastyamaha.com","fatcock.net","fatflap.com","fathersrightsne.org","fatyachts.com","fax.ru","fbi-agent.com","fbi.hu","fdfdsfds.com","fea.st","federalcontractors.com","feinripptraeger.de","felicity.com","felicitymail.com","female.ru","femenino.com","fepg.net","fetchmail.co.uk","fetchmail.com","fettabernett.de","feyenoorder.com","ffanet.com","fiberia.com","fibertel.com.ar","ficken.de","fificorp.com","fificorp.net","fightallspam.com","filipinolinks.com","filzmail.com","financefan.net","financemail.net","financier.com","findfo.com","findhere.com","findmail.com","findmemail.com","finebody.com","fineemail.com","finfin.com","finklfan.com","fire-brigade.com","fireman.net","fishburne.org","fishfuse.com","fivemail.de","fixmail.tk","fizmail.com","flashbox.5july.org","flashemail.com","flashmail.com","flashmail.net","fleckens.hu","flipcode.com","floridaemail.net","flytecrew.com","fmail.co.uk","fmailbox.com","fmgirl.com","fmguy.com","fnbmail.co.za","fnmail.com","folkfan.com","foodmail.com","footard.com","football.theboys.com","footballmail.com","foothills.net","for-president.com","force9.co.uk","forfree.at","forgetmail.com","fornow.eu","forpresident.com","fortuncity.com","fortunecity.com","forum.dk","fossefans.com","foxmail.com","fr33mail.info","francefans.com","francemel.fr","frapmail.com","free-email.ga","free-online.net","free-org.com","free.com.pe","free.fr","freeaccess.nl","freeaccount.com","freeandsingle.com","freebox.com","freedom.usa.com","freedomlover.com","freefanmail.com","freegates.be","freeghana.com","freelance-france.eu","freeler.nl","freemail.bozz.com","freemail.c3.hu","freemail.com.au","freemail.com.pk","freemail.de","freemail.et","freemail.gr","freemail.hu","freemail.it","freemail.lt","freemail.ms","freemail.nl","freemail.org.mk","freemail.ru","freemails.ga","freemeil.gq","freenet.de","freenet.kg","freeola.com","freeola.net","freeproblem.com","freesbee.fr","freeserve.co.uk","freeservers.com","freestamp.com","freestart.hu","freesurf.fr","freesurf.nl","freeuk.com","freeuk.net","freeukisp.co.uk","freeweb.org","freewebemail.com","freeyellow.com","freezone.co.uk","fresnomail.com","freudenkinder.de","freundin.ru","friction.net","friendlydevices.com","friendlymail.co.uk","friends-cafe.com","friendsfan.com","from-africa.com","from-america.com","from-argentina.com","from-asia.com","from-australia.com","from-belgium.com","from-brazil.com","from-canada.com","from-china.net","from-england.com","from-europe.com","from-france.net","from-germany.net","from-holland.com","from-israel.com","from-italy.net","from-japan.net","from-korea.com","from-mexico.com","from-outerspace.com","from-russia.com","from-spain.net","fromalabama.com","fromalaska.com","fromarizona.com","fromarkansas.com","fromcalifornia.com","fromcolorado.com","fromconnecticut.com","fromdelaware.com","fromflorida.net","fromgeorgia.com","fromhawaii.net","fromidaho.com","fromillinois.com","fromindiana.com","frominter.net","fromiowa.com","fromjupiter.com","fromkansas.com","fromkentucky.com","fromlouisiana.com","frommaine.net","frommaryland.com","frommassachusetts.com","frommiami.com","frommichigan.com","fromminnesota.com","frommississippi.com","frommissouri.com","frommontana.com","fromnebraska.com","fromnevada.com","fromnewhampshire.com","fromnewjersey.com","fromnewmexico.com","fromnewyork.net","fromnorthcarolina.com","fromnorthdakota.com","fromohio.com","fromoklahoma.com","fromoregon.net","frompennsylvania.com","fromrhodeisland.com","fromru.com","fromru.ru","fromsouthcarolina.com","fromsouthdakota.com","fromtennessee.com","fromtexas.com","fromthestates.com","fromutah.com","fromvermont.com","fromvirginia.com","fromwashington.com","fromwashingtondc.com","fromwestvirginia.com","fromwisconsin.com","fromwyoming.com","front.ru","frontier.com","frontiernet.net","frostbyte.uk.net","fsmail.net","ftc-i.net","ftml.net","fuckingduh.com","fudgerub.com","fullmail.com","funiran.com","funkfan.com","funky4.com","fuorissimo.com","furnitureprovider.com","fuse.net","fusemail.com","fut.es","fux0ringduh.com","fwnb.com","fxsmails.com","fyii.de","galamb.net","galaxy5.com","galaxyhit.com","gamebox.com","gamebox.net","gamegeek.com","games.com","gamespotmail.com","gamil.com","gamil.com.au","gamno.config.work","garbage.com","gardener.com","garliclife.com","gatwickemail.com","gawab.com","gay.com","gaybrighton.co.uk","gaza.net","gazeta.pl","gazibooks.com","gci.net","gdi.net","gee-wiz.com","geecities.com","geek.com","geek.hu","geeklife.com","gehensiemirnichtaufdensack.de","gelitik.in","gencmail.com","general-hospital.com","gentlemansclub.de","genxemail.com","geocities.com","geography.net","geologist.com","geopia.com","germanymail.com","get.pp.ua","get1mail.com","get2mail.fr","getairmail.cf","getairmail.com","getairmail.ga","getairmail.gq","getmails.eu","getonemail.com","getonemail.net","gfxartist.ru","gh2000.com","ghanamail.com","ghostmail.com","ghosttexter.de","giantmail.de","giantsfan.com","giga4u.de","gigileung.org","girl4god.com","girlsundertheinfluence.com","gishpuppy.com","givepeaceachance.com","glay.org","glendale.net","globalfree.it","globalpagan.com","globalsite.com.br","globetrotter.net","globo.com","globomail.com","gmail.co.za","gmail.com","gmail.com.au","gmail.com.br","gmail.ru","gmial.com","gmx.at","gmx.ch","gmx.co.uk","gmx.com","gmx.de","gmx.fr","gmx.li","gmx.net","gmx.us","gnwmail.com","go.com","go.ro","go.ru","go2.com.py","go2net.com","go4.it","gobrainstorm.net","gocollege.com","gocubs.com","godmail.dk","goemailgo.com","gofree.co.uk","gol.com","goldenmail.ru","goldmail.ru","goldtoolbox.com","golfemail.com","golfilla.info","golfmail.be","gonavy.net","gonuts4free.com","goodnewsmail.com","goodstick.com","google.com","googlegroups.com","googlemail.com","goosemoose.com","goplay.com","gorillaswithdirtyarmpits.com","gorontalo.net","gospelfan.com","gothere.uk.com","gotmail.com","gotmail.net","gotmail.org","gotomy.com","gotti.otherinbox.com","govolsfan.com","gportal.hu","grabmail.com","graduate.org","graffiti.net","gramszu.net","grandmamail.com","grandmasmail.com","graphic-designer.com","grapplers.com","gratisweb.com","great-host.in","greenmail.net","greensloth.com","groupmail.com","grr.la","grungecafe.com","gsrv.co.uk","gtemail.net","gtmc.net","gua.net","guerillamail.biz","guerillamail.com","guerrillamail.biz","guerrillamail.com","guerrillamail.de","guerrillamail.info","guerrillamail.net","guerrillamail.org","guerrillamailblock.com","guessmail.com","guju.net","gurlmail.com","gustr.com","guy.com","guy2.com","guyanafriends.com","gwhsgeckos.com","gyorsposta.com","gyorsposta.hu","h-mail.us","hab-verschlafen.de","hablas.com","habmalnefrage.de","hacccc.com","hackermail.com","hackermail.net","hailmail.net","hairdresser.com","hairdresser.net","haltospam.com","hamptonroads.com","handbag.com","handleit.com","hang-ten.com","hangglidemail.com","hanmail.net","happemail.com","happycounsel.com","happypuppy.com","harakirimail.com","haramamba.ru","hardcorefreak.com","hardyoungbabes.com","hartbot.de","hat-geld.de","hatespam.org","hawaii.rr.com","hawaiiantel.net","headbone.com","healthemail.net","heartthrob.com","heavynoize.net","heerschap.com","heesun.net","hehe.com","hello.hu","hello.net.au","hello.to","hellokitty.com","helter-skelter.com","hempseed.com","herediano.com","heremail.com","herono1.com","herp.in","herr-der-mails.de","hetnet.nl","hewgen.ru","hey.to","hhdevel.com","hideakifan.com","hidemail.de","hidzz.com","highmilton.com","highquality.com","highveldmail.co.za","hilarious.com","hinduhome.com","hingis.org","hiphopfan.com","hispavista.com","hitmail.com","hitmanrecords.com","hitthe.net","hkg.net","hkstarphoto.com","hmamail.com","hochsitze.com","hockeymail.com","hollywoodkids.com","home-email.com","home.de","home.nl","home.no.net","home.ro","home.se","homeart.com","homelocator.com","homemail.com","homenetmail.com","homeonthethrone.com","homestead.com","homeworkcentral.com","honduras.com","hongkong.com","hookup.net","hoopsmail.com","hopemail.biz","horrormail.com","host-it.com.sg","hot-mail.gq","hot-shop.com","hot-shot.com","hot.ee","hotbot.com","hotbox.ru","hotbrev.com","hotcoolmail.com","hotepmail.com","hotfire.net","hotletter.com","hotlinemail.com","hotmail.be","hotmail.ca","hotmail.ch","hotmail.co","hotmail.co.il","hotmail.co.jp","hotmail.co.nz","hotmail.co.uk","hotmail.co.za","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.mx","hotmail.com.tr","hotmail.de","hotmail.es","hotmail.fi","hotmail.fr","hotmail.it","hotmail.kg","hotmail.kz","hotmail.my","hotmail.nl","hotmail.ro","hotmail.roor","hotmail.ru","hotpop.com","hotpop3.com","hotvoice.com","housefan.com","housefancom","housemail.com","hsuchi.net","html.tou.com","hu2.ru","hughes.net","hulapla.de","humanoid.net","humanux.com","humn.ws.gy","humour.com","hunsa.com","hurting.com","hush.com","hushmail.com","hypernautica.com","i-connect.com","i-france.com","i-love-cats.com","i-mail.com.au","i-mailbox.net","i-p.com","i.am","i.am.to","i.amhey.to","i.ua","i12.com","i2828.com","i2pmail.org","iam4msu.com","iamawoman.com","iamfinallyonline.com","iamwaiting.com","iamwasted.com","iamyours.com","icestorm.com","ich-bin-verrueckt-nach-dir.de","ich-will-net.de","icloud.com","icmsconsultants.com","icq.com","icqmail.com","icrazy.com","icu.md","id-base.com","id.ru","ididitmyway.com","idigjesus.com","idirect.com","ieatspam.eu","ieatspam.info","ieh-mail.de","iespana.es","ifoward.com","ig.com.br","ignazio.it","ignmail.com","ihateclowns.com","ihateyoualot.info","iheartspam.org","iinet.net.au","ijustdontcare.com","ikbenspamvrij.nl","ilkposta.com","ilovechocolate.com","ilovegiraffes.net","ilovejesus.com","ilovelionking.com","ilovepokemonmail.com","ilovethemovies.com","ilovetocollect.net","ilse.nl","imaginemail.com","imail.org","imail.ru","imailbox.com","imails.info","imap-mail.com","imap.cc","imapmail.org","imel.org","imgof.com","imgv.de","immo-gerance.info","imneverwrong.com","imposter.co.uk","imstations.com","imstressed.com","imtoosexy.com","in-box.net","in2jesus.com","iname.com","inbax.tk","inbound.plus","inbox.com","inbox.lv","inbox.net","inbox.ru","inbox.si","inboxalias.com","inboxclean.com","inboxclean.org","incamail.com","includingarabia.com","incredimail.com","indeedemail.com","index.ua","indexa.fr","india.com","indiatimes.com","indo-mail.com","indocities.com","indomail.com","indosat.net.id","indus.ru","indyracers.com","inerted.com","inet.com","inet.net.au","info-media.de","info-radio.ml","info.com","info66.com","infoapex.com","infocom.zp.ua","infohq.com","infomail.es","infomart.or.jp","informaticos.com","infospacemail.com","infovia.com.ar","inicia.es","inmail.sk","inmail24.com","inmano.com","inmynetwork.tk","innocent.com","inonesearch.com","inorbit.com","inoutbox.com","insidebaltimore.net","insight.rr.com","inspectorjavert.com","instant-mail.de","instantemailaddress.com","instantmail.fr","instruction.com","instructor.net","insurer.com","interburp.com","interfree.it","interia.pl","interlap.com.ar","intermail.co.il","internet-club.com","internet-e-mail.com","internet-mail.org","internet-police.com","internetbiz.com","internetdrive.com","internetegypt.com","internetemails.net","internetmailing.net","internode.on.net","invalid.com","investormail.com","inwind.it","iobox.com","iobox.fi","iol.it","iol.pt","iowaemail.com","ip3.com","ip4.pp.ua","ip6.li","ip6.pp.ua","ipdeer.com","ipex.ru","ipoo.org","iportalexpress.com","iprimus.com.au","iqemail.com","irangate.net","iraqmail.com","ireland.com","irelandmail.com","irish2me.com","irj.hu","iroid.com","iscooler.com","isellcars.com","iservejesus.com","islamonline.net","islandemail.net","isleuthmail.com","ismart.net","isonfire.com","isp9.net","israelmail.com","ist-allein.info","ist-einmalig.de","ist-ganz-allein.de","ist-willig.de","italymail.com","itelefonica.com.br","itloox.com","itmom.com","ivebeenframed.com","ivillage.com","iwan-fals.com","iwi.net","iwmail.com","iwon.com","izadpanah.com","jabble.com","jahoopa.com","jakuza.hu","japan.com","jaydemail.com","jazzandjava.com","jazzfan.com","jazzgame.com","je-recycle.info","jeanvaljean.com","jerusalemmail.com","jesusanswers.com","jet-renovation.fr","jetable.com","jetable.de","jetable.fr.nf","jetable.net","jetable.org","jetable.pp.ua","jetemail.net","jewishmail.com","jfkislanders.com","jingjo.net","jippii.fi","jmail.co.za","jnxjn.com","job4u.com","jobbikszimpatizans.hu","joelonsoftware.com","joinme.com","jojomail.com","jokes.com","jordanmail.com","journalist.com","jourrapide.com","jovem.te.pt","joymail.com","jpopmail.com","jsrsolutions.com","jubiimail.dk","jump.com","jumpy.it","juniormail.com","junk1e.com","junkmail.com","junkmail.gq","juno.com","justemail.net","justicemail.com","justmail.de","justmailz.com","justmarriedmail.com","jwspamspy","k.ro","kaazoo.com","kabissa.org","kaduku.net","kaffeeschluerfer.com","kaffeeschluerfer.de","kaixo.com","kalpoint.com","kansascity.com","kapoorweb.com","karachian.com","karachioye.com","karbasi.com","kasmail.com","kaspop.com","katamail.com","kayafmmail.co.za","kbjrmail.com","kcks.com","kebi.com","keftamail.com","keg-party.com","keinpardon.de","keko.com.ar","kellychen.com","keptprivate.com","keromail.com","kewpee.com","keyemail.com","kgb.hu","khosropour.com","kichimail.com","kickassmail.com","killamail.com","killergreenmail.com","killermail.com","killmail.com","killmail.net","kimo.com","kimsdisk.com","kinglibrary.net","kinki-kids.com","kismail.ru","kissfans.com","kitemail.com","kittymail.com","kitznet.at","kiwibox.com","kiwitown.com","klassmaster.com","klassmaster.net","klzlk.com","km.ru","kmail.com.au","knol-power.nl","koko.com","kolumbus.fi","kommespaeter.de","konkovo.net","konsul.ru","konx.com","korea.com","koreamail.com","kosino.net","koszmail.pl","kozmail.com","kpnmail.nl","kreditor.ru","krim.ws","krongthip.com","krovatka.net","krunis.com","ksanmail.com","ksee24mail.com","kube93mail.com","kukamail.com","kulturbetrieb.info","kumarweb.com","kurzepost.de","kuwait-mail.com","kuzminki.net","kyokodate.com","kyokofukada.net","l33r.eu","la.com","labetteraverouge.at","lackmail.ru","ladyfire.com","ladymail.cz","lagerlouts.com","lags.us","lahoreoye.com","lakmail.com","lamer.hu","land.ru","langoo.com","lankamail.com","laoeq.com","laposte.net","lass-es-geschehen.de","last-chance.pro","lastmail.co","latemodels.com","latinmail.com","latino.com","lavabit.com","lavache.com","law.com","lawlita.com","lawyer.com","lazyinbox.com","learn2compute.net","lebanonatlas.com","leeching.net","leehom.net","lefortovo.net","legalactions.com","legalrc.loan","legislator.com","legistrator.com","lenta.ru","leonlai.net","letsgomets.net","letterbox.com","letterboxes.org","letthemeatspam.com","levele.com","levele.hu","lex.bg","lexis-nexis-mail.com","lhsdv.com","lianozovo.net","libero.it","liberomail.com","lick101.com","liebt-dich.info","lifebyfood.com","link2mail.net","linkmaster.com","linktrader.com","linuxfreemail.com","linuxmail.org","lionsfan.com.au","liontrucks.com","liquidinformation.net","lissamail.com","list.ru","listomail.com","litedrop.com","literaturelover.com","littleapple.com","littleblueroom.com","live.at","live.be","live.ca","live.cl","live.cn","live.co.uk","live.co.za","live.com","live.com.ar","live.com.au","live.com.mx","live.com.my","live.com.pt","live.com.sg","live.de","live.dk","live.fr","live.hk","live.ie","live.in","live.it","live.jp","live.nl","live.no","live.ru","live.se","liveradio.tk","liverpoolfans.com","ljiljan.com","llandudno.com","llangollen.com","lmxmail.sk","lobbyist.com","localbar.com","localgenius.com","locos.com","login-email.ga","loh.pp.ua","lol.ovpn.to","lolfreak.net","lolito.tk","lolnetwork.net","london.com","loobie.com","looksmart.co.uk","looksmart.com","looksmart.com.au","lookugly.com","lopezclub.com","lortemail.dk","louiskoo.com","lov.ru","love.com","love.cz","loveable.com","lovecat.com","lovefall.ml","lovefootball.com","loveforlostcats.com","lovelygirl.net","lovemail.com","lover-boy.com","lovergirl.com","lovesea.gq","lovethebroncos.com","lovethecowboys.com","lovetocook.net","lovetohike.com","loveyouforever.de","lovingjesus.com","lowandslow.com","lr7.us","lr78.com","lroid.com","lubovnik.ru","lukop.dk","luso.pt","luukku.com","luv2.us","luvrhino.com","lvie.com.sg","lvwebmail.com","lycos.co.uk","lycos.com","lycos.es","lycos.it","lycos.ne.jp","lycos.ru","lycosemail.com","lycosmail.com","m-a-i-l.com","m-hmail.com","m21.cc","m4.org","m4ilweb.info","mac.com","macbox.com","macbox.ru","macfreak.com","machinecandy.com","macmail.com","mad.scientist.com","madcrazy.com","madcreations.com","madonnafan.com","madrid.com","maennerversteherin.com","maennerversteherin.de","maffia.hu","magicmail.co.za","mahmoodweb.com","mail-awu.de","mail-box.cz","mail-center.com","mail-central.com","mail-easy.fr","mail-filter.com","mail-me.com","mail-page.com","mail-temporaire.fr","mail-tester.com","mail.austria.com","mail.az","mail.be","mail.bg","mail.bulgaria.com","mail.by","mail.byte.it","mail.co.za","mail.com","mail.com.tr","mail.ee","mail.entrepeneurmag.com","mail.freetown.com","mail.gr","mail.hitthebeach.com","mail.htl22.at","mail.kmsp.com","mail.md","mail.mezimages.net","mail.misterpinball.de","mail.nu","mail.org.uk","mail.pf","mail.pharmacy.com","mail.pt","mail.r-o-o-t.com","mail.ru","mail.salu.net","mail.sisna.com","mail.spaceports.com","mail.svenz.eu","mail.theboys.com","mail.usa.com","mail.vasarhely.hu","mail.vu","mail.wtf","mail.zp.ua","mail114.net","mail15.com","mail1a.de","mail1st.com","mail2007.com","mail21.cc","mail2aaron.com","mail2abby.com","mail2abc.com","mail2actor.com","mail2admiral.com","mail2adorable.com","mail2adoration.com","mail2adore.com","mail2adventure.com","mail2aeolus.com","mail2aether.com","mail2affection.com","mail2afghanistan.com","mail2africa.com","mail2agent.com","mail2aha.com","mail2ahoy.com","mail2aim.com","mail2air.com","mail2airbag.com","mail2airforce.com","mail2airport.com","mail2alabama.com","mail2alan.com","mail2alaska.com","mail2albania.com","mail2alcoholic.com","mail2alec.com","mail2alexa.com","mail2algeria.com","mail2alicia.com","mail2alien.com","mail2allan.com","mail2allen.com","mail2allison.com","mail2alpha.com","mail2alyssa.com","mail2amanda.com","mail2amazing.com","mail2amber.com","mail2america.com","mail2american.com","mail2andorra.com","mail2andrea.com","mail2andy.com","mail2anesthesiologist.com","mail2angela.com","mail2angola.com","mail2ann.com","mail2anna.com","mail2anne.com","mail2anthony.com","mail2anything.com","mail2aphrodite.com","mail2apollo.com","mail2april.com","mail2aquarius.com","mail2arabia.com","mail2arabic.com","mail2architect.com","mail2ares.com","mail2argentina.com","mail2aries.com","mail2arizona.com","mail2arkansas.com","mail2armenia.com","mail2army.com","mail2arnold.com","mail2art.com","mail2artemus.com","mail2arthur.com","mail2artist.com","mail2ashley.com","mail2ask.com","mail2astronomer.com","mail2athena.com","mail2athlete.com","mail2atlas.com","mail2atom.com","mail2attitude.com","mail2auction.com","mail2aunt.com","mail2australia.com","mail2austria.com","mail2azerbaijan.com","mail2baby.com","mail2bahamas.com","mail2bahrain.com","mail2ballerina.com","mail2ballplayer.com","mail2band.com","mail2bangladesh.com","mail2bank.com","mail2banker.com","mail2bankrupt.com","mail2baptist.com","mail2bar.com","mail2barbados.com","mail2barbara.com","mail2barter.com","mail2basketball.com","mail2batter.com","mail2beach.com","mail2beast.com","mail2beatles.com","mail2beauty.com","mail2becky.com","mail2beijing.com","mail2belgium.com","mail2belize.com","mail2ben.com","mail2bernard.com","mail2beth.com","mail2betty.com","mail2beverly.com","mail2beyond.com","mail2biker.com","mail2bill.com","mail2billionaire.com","mail2billy.com","mail2bio.com","mail2biologist.com","mail2black.com","mail2blackbelt.com","mail2blake.com","mail2blind.com","mail2blonde.com","mail2blues.com","mail2bob.com","mail2bobby.com","mail2bolivia.com","mail2bombay.com","mail2bonn.com","mail2bookmark.com","mail2boreas.com","mail2bosnia.com","mail2boston.com","mail2botswana.com","mail2bradley.com","mail2brazil.com","mail2breakfast.com","mail2brian.com","mail2bride.com","mail2brittany.com","mail2broker.com","mail2brook.com","mail2bruce.com","mail2brunei.com","mail2brunette.com","mail2brussels.com","mail2bryan.com","mail2bug.com","mail2bulgaria.com","mail2business.com","mail2buy.com","mail2ca.com","mail2california.com","mail2calvin.com","mail2cambodia.com","mail2cameroon.com","mail2canada.com","mail2cancer.com","mail2capeverde.com","mail2capricorn.com","mail2cardinal.com","mail2cardiologist.com","mail2care.com","mail2caroline.com","mail2carolyn.com","mail2casey.com","mail2cat.com","mail2caterer.com","mail2cathy.com","mail2catlover.com","mail2catwalk.com","mail2cell.com","mail2chad.com","mail2champaign.com","mail2charles.com","mail2chef.com","mail2chemist.com","mail2cherry.com","mail2chicago.com","mail2chile.com","mail2china.com","mail2chinese.com","mail2chocolate.com","mail2christian.com","mail2christie.com","mail2christmas.com","mail2christy.com","mail2chuck.com","mail2cindy.com","mail2clark.com","mail2classifieds.com","mail2claude.com","mail2cliff.com","mail2clinic.com","mail2clint.com","mail2close.com","mail2club.com","mail2coach.com","mail2coastguard.com","mail2colin.com","mail2college.com","mail2colombia.com","mail2color.com","mail2colorado.com","mail2columbia.com","mail2comedian.com","mail2composer.com","mail2computer.com","mail2computers.com","mail2concert.com","mail2congo.com","mail2connect.com","mail2connecticut.com","mail2consultant.com","mail2convict.com","mail2cook.com","mail2cool.com","mail2cory.com","mail2costarica.com","mail2country.com","mail2courtney.com","mail2cowboy.com","mail2cowgirl.com","mail2craig.com","mail2crave.com","mail2crazy.com","mail2create.com","mail2croatia.com","mail2cry.com","mail2crystal.com","mail2cuba.com","mail2culture.com","mail2curt.com","mail2customs.com","mail2cute.com","mail2cutey.com","mail2cynthia.com","mail2cyprus.com","mail2czechrepublic.com","mail2dad.com","mail2dale.com","mail2dallas.com","mail2dan.com","mail2dana.com","mail2dance.com","mail2dancer.com","mail2danielle.com","mail2danny.com","mail2darlene.com","mail2darling.com","mail2darren.com","mail2daughter.com","mail2dave.com","mail2dawn.com","mail2dc.com","mail2dealer.com","mail2deanna.com","mail2dearest.com","mail2debbie.com","mail2debby.com","mail2deer.com","mail2delaware.com","mail2delicious.com","mail2demeter.com","mail2democrat.com","mail2denise.com","mail2denmark.com","mail2dennis.com","mail2dentist.com","mail2derek.com","mail2desert.com","mail2devoted.com","mail2devotion.com","mail2diamond.com","mail2diana.com","mail2diane.com","mail2diehard.com","mail2dilemma.com","mail2dillon.com","mail2dinner.com","mail2dinosaur.com","mail2dionysos.com","mail2diplomat.com","mail2director.com","mail2dirk.com","mail2disco.com","mail2dive.com","mail2diver.com","mail2divorced.com","mail2djibouti.com","mail2doctor.com","mail2doglover.com","mail2dominic.com","mail2dominica.com","mail2dominicanrepublic.com","mail2don.com","mail2donald.com","mail2donna.com","mail2doris.com","mail2dorothy.com","mail2doug.com","mail2dough.com","mail2douglas.com","mail2dow.com","mail2downtown.com","mail2dream.com","mail2dreamer.com","mail2dude.com","mail2dustin.com","mail2dyke.com","mail2dylan.com","mail2earl.com","mail2earth.com","mail2eastend.com","mail2eat.com","mail2economist.com","mail2ecuador.com","mail2eddie.com","mail2edgar.com","mail2edwin.com","mail2egypt.com","mail2electron.com","mail2eli.com","mail2elizabeth.com","mail2ellen.com","mail2elliot.com","mail2elsalvador.com","mail2elvis.com","mail2emergency.com","mail2emily.com","mail2engineer.com","mail2english.com","mail2environmentalist.com","mail2eos.com","mail2eric.com","mail2erica.com","mail2erin.com","mail2erinyes.com","mail2eris.com","mail2eritrea.com","mail2ernie.com","mail2eros.com","mail2estonia.com","mail2ethan.com","mail2ethiopia.com","mail2eu.com","mail2europe.com","mail2eurus.com","mail2eva.com","mail2evan.com","mail2evelyn.com","mail2everything.com","mail2exciting.com","mail2expert.com","mail2fairy.com","mail2faith.com","mail2fanatic.com","mail2fancy.com","mail2fantasy.com","mail2farm.com","mail2farmer.com","mail2fashion.com","mail2fat.com","mail2feeling.com","mail2female.com","mail2fever.com","mail2fighter.com","mail2fiji.com","mail2filmfestival.com","mail2films.com","mail2finance.com","mail2finland.com","mail2fireman.com","mail2firm.com","mail2fisherman.com","mail2flexible.com","mail2florence.com","mail2florida.com","mail2floyd.com","mail2fly.com","mail2fond.com","mail2fondness.com","mail2football.com","mail2footballfan.com","mail2found.com","mail2france.com","mail2frank.com","mail2frankfurt.com","mail2franklin.com","mail2fred.com","mail2freddie.com","mail2free.com","mail2freedom.com","mail2french.com","mail2freudian.com","mail2friendship.com","mail2from.com","mail2fun.com","mail2gabon.com","mail2gabriel.com","mail2gail.com","mail2galaxy.com","mail2gambia.com","mail2games.com","mail2gary.com","mail2gavin.com","mail2gemini.com","mail2gene.com","mail2genes.com","mail2geneva.com","mail2george.com","mail2georgia.com","mail2gerald.com","mail2german.com","mail2germany.com","mail2ghana.com","mail2gilbert.com","mail2gina.com","mail2girl.com","mail2glen.com","mail2gloria.com","mail2goddess.com","mail2gold.com","mail2golfclub.com","mail2golfer.com","mail2gordon.com","mail2government.com","mail2grab.com","mail2grace.com","mail2graham.com","mail2grandma.com","mail2grandpa.com","mail2grant.com","mail2greece.com","mail2green.com","mail2greg.com","mail2grenada.com","mail2gsm.com","mail2guard.com","mail2guatemala.com","mail2guy.com","mail2hades.com","mail2haiti.com","mail2hal.com","mail2handhelds.com","mail2hank.com","mail2hannah.com","mail2harold.com","mail2harry.com","mail2hawaii.com","mail2headhunter.com","mail2heal.com","mail2heather.com","mail2heaven.com","mail2hebe.com","mail2hecate.com","mail2heidi.com","mail2helen.com","mail2hell.com","mail2help.com","mail2helpdesk.com","mail2henry.com","mail2hephaestus.com","mail2hera.com","mail2hercules.com","mail2herman.com","mail2hermes.com","mail2hespera.com","mail2hestia.com","mail2highschool.com","mail2hindu.com","mail2hip.com","mail2hiphop.com","mail2holland.com","mail2holly.com","mail2hollywood.com","mail2homer.com","mail2honduras.com","mail2honey.com","mail2hongkong.com","mail2hope.com","mail2horse.com","mail2hot.com","mail2hotel.com","mail2houston.com","mail2howard.com","mail2hugh.com","mail2human.com","mail2hungary.com","mail2hungry.com","mail2hygeia.com","mail2hyperspace.com","mail2hypnos.com","mail2ian.com","mail2ice-cream.com","mail2iceland.com","mail2idaho.com","mail2idontknow.com","mail2illinois.com","mail2imam.com","mail2in.com","mail2india.com","mail2indian.com","mail2indiana.com","mail2indonesia.com","mail2infinity.com","mail2intense.com","mail2iowa.com","mail2iran.com","mail2iraq.com","mail2ireland.com","mail2irene.com","mail2iris.com","mail2irresistible.com","mail2irving.com","mail2irwin.com","mail2isaac.com","mail2israel.com","mail2italian.com","mail2italy.com","mail2jackie.com","mail2jacob.com","mail2jail.com","mail2jaime.com","mail2jake.com","mail2jamaica.com","mail2james.com","mail2jamie.com","mail2jan.com","mail2jane.com","mail2janet.com","mail2janice.com","mail2japan.com","mail2japanese.com","mail2jasmine.com","mail2jason.com","mail2java.com","mail2jay.com","mail2jazz.com","mail2jed.com","mail2jeffrey.com","mail2jennifer.com","mail2jenny.com","mail2jeremy.com","mail2jerry.com","mail2jessica.com","mail2jessie.com","mail2jesus.com","mail2jew.com","mail2jeweler.com","mail2jim.com","mail2jimmy.com","mail2joan.com","mail2joann.com","mail2joanna.com","mail2jody.com","mail2joe.com","mail2joel.com","mail2joey.com","mail2john.com","mail2join.com","mail2jon.com","mail2jonathan.com","mail2jones.com","mail2jordan.com","mail2joseph.com","mail2josh.com","mail2joy.com","mail2juan.com","mail2judge.com","mail2judy.com","mail2juggler.com","mail2julian.com","mail2julie.com","mail2jumbo.com","mail2junk.com","mail2justin.com","mail2justme.com","mail2k.ru","mail2kansas.com","mail2karate.com","mail2karen.com","mail2karl.com","mail2karma.com","mail2kathleen.com","mail2kathy.com","mail2katie.com","mail2kay.com","mail2kazakhstan.com","mail2keen.com","mail2keith.com","mail2kelly.com","mail2kelsey.com","mail2ken.com","mail2kendall.com","mail2kennedy.com","mail2kenneth.com","mail2kenny.com","mail2kentucky.com","mail2kenya.com","mail2kerry.com","mail2kevin.com","mail2kim.com","mail2kimberly.com","mail2king.com","mail2kirk.com","mail2kiss.com","mail2kosher.com","mail2kristin.com","mail2kurt.com","mail2kuwait.com","mail2kyle.com","mail2kyrgyzstan.com","mail2la.com","mail2lacrosse.com","mail2lance.com","mail2lao.com","mail2larry.com","mail2latvia.com","mail2laugh.com","mail2laura.com","mail2lauren.com","mail2laurie.com","mail2lawrence.com","mail2lawyer.com","mail2lebanon.com","mail2lee.com","mail2leo.com","mail2leon.com","mail2leonard.com","mail2leone.com","mail2leslie.com","mail2letter.com","mail2liberia.com","mail2libertarian.com","mail2libra.com","mail2libya.com","mail2liechtenstein.com","mail2life.com","mail2linda.com","mail2linux.com","mail2lionel.com","mail2lipstick.com","mail2liquid.com","mail2lisa.com","mail2lithuania.com","mail2litigator.com","mail2liz.com","mail2lloyd.com","mail2lois.com","mail2lola.com","mail2london.com","mail2looking.com","mail2lori.com","mail2lost.com","mail2lou.com","mail2louis.com","mail2louisiana.com","mail2lovable.com","mail2love.com","mail2lucky.com","mail2lucy.com","mail2lunch.com","mail2lust.com","mail2luxembourg.com","mail2luxury.com","mail2lyle.com","mail2lynn.com","mail2madagascar.com","mail2madison.com","mail2madrid.com","mail2maggie.com","mail2mail4.com","mail2maine.com","mail2malawi.com","mail2malaysia.com","mail2maldives.com","mail2mali.com","mail2malta.com","mail2mambo.com","mail2man.com","mail2mandy.com","mail2manhunter.com","mail2mankind.com","mail2many.com","mail2marc.com","mail2marcia.com","mail2margaret.com","mail2margie.com","mail2marhaba.com","mail2maria.com","mail2marilyn.com","mail2marines.com","mail2mark.com","mail2marriage.com","mail2married.com","mail2marries.com","mail2mars.com","mail2marsha.com","mail2marshallislands.com","mail2martha.com","mail2martin.com","mail2marty.com","mail2marvin.com","mail2mary.com","mail2maryland.com","mail2mason.com","mail2massachusetts.com","mail2matt.com","mail2matthew.com","mail2maurice.com","mail2mauritania.com","mail2mauritius.com","mail2max.com","mail2maxwell.com","mail2maybe.com","mail2mba.com","mail2me4u.com","mail2mechanic.com","mail2medieval.com","mail2megan.com","mail2mel.com","mail2melanie.com","mail2melissa.com","mail2melody.com","mail2member.com","mail2memphis.com","mail2methodist.com","mail2mexican.com","mail2mexico.com","mail2mgz.com","mail2miami.com","mail2michael.com","mail2michelle.com","mail2michigan.com","mail2mike.com","mail2milan.com","mail2milano.com","mail2mildred.com","mail2milkyway.com","mail2millennium.com","mail2millionaire.com","mail2milton.com","mail2mime.com","mail2mindreader.com","mail2mini.com","mail2minister.com","mail2minneapolis.com","mail2minnesota.com","mail2miracle.com","mail2missionary.com","mail2mississippi.com","mail2missouri.com","mail2mitch.com","mail2model.com","mail2moldova.commail2molly.com","mail2mom.com","mail2monaco.com","mail2money.com","mail2mongolia.com","mail2monica.com","mail2montana.com","mail2monty.com","mail2moon.com","mail2morocco.com","mail2morpheus.com","mail2mors.com","mail2moscow.com","mail2moslem.com","mail2mouseketeer.com","mail2movies.com","mail2mozambique.com","mail2mp3.com","mail2mrright.com","mail2msright.com","mail2museum.com","mail2music.com","mail2musician.com","mail2muslim.com","mail2my.com","mail2myboat.com","mail2mycar.com","mail2mycell.com","mail2mygsm.com","mail2mylaptop.com","mail2mymac.com","mail2mypager.com","mail2mypalm.com","mail2mypc.com","mail2myphone.com","mail2myplane.com","mail2namibia.com","mail2nancy.com","mail2nasdaq.com","mail2nathan.com","mail2nauru.com","mail2navy.com","mail2neal.com","mail2nebraska.com","mail2ned.com","mail2neil.com","mail2nelson.com","mail2nemesis.com","mail2nepal.com","mail2netherlands.com","mail2network.com","mail2nevada.com","mail2newhampshire.com","mail2newjersey.com","mail2newmexico.com","mail2newyork.com","mail2newzealand.com","mail2nicaragua.com","mail2nick.com","mail2nicole.com","mail2niger.com","mail2nigeria.com","mail2nike.com","mail2no.com","mail2noah.com","mail2noel.com","mail2noelle.com","mail2normal.com","mail2norman.com","mail2northamerica.com","mail2northcarolina.com","mail2northdakota.com","mail2northpole.com","mail2norway.com","mail2notus.com","mail2noway.com","mail2nowhere.com","mail2nuclear.com","mail2nun.com","mail2ny.com","mail2oasis.com","mail2oceanographer.com","mail2ohio.com","mail2ok.com","mail2oklahoma.com","mail2oliver.com","mail2oman.com","mail2one.com","mail2onfire.com","mail2online.com","mail2oops.com","mail2open.com","mail2ophthalmologist.com","mail2optometrist.com","mail2oregon.com","mail2oscars.com","mail2oslo.com","mail2painter.com","mail2pakistan.com","mail2palau.com","mail2pan.com","mail2panama.com","mail2paraguay.com","mail2paralegal.com","mail2paris.com","mail2park.com","mail2parker.com","mail2party.com","mail2passion.com","mail2pat.com","mail2patricia.com","mail2patrick.com","mail2patty.com","mail2paul.com","mail2paula.com","mail2pay.com","mail2peace.com","mail2pediatrician.com","mail2peggy.com","mail2pennsylvania.com","mail2perry.com","mail2persephone.com","mail2persian.com","mail2peru.com","mail2pete.com","mail2peter.com","mail2pharmacist.com","mail2phil.com","mail2philippines.com","mail2phoenix.com","mail2phonecall.com","mail2phyllis.com","mail2pickup.com","mail2pilot.com","mail2pisces.com","mail2planet.com","mail2platinum.com","mail2plato.com","mail2pluto.com","mail2pm.com","mail2podiatrist.com","mail2poet.com","mail2poland.com","mail2policeman.com","mail2policewoman.com","mail2politician.com","mail2pop.com","mail2pope.com","mail2popular.com","mail2portugal.com","mail2poseidon.com","mail2potatohead.com","mail2power.com","mail2presbyterian.com","mail2president.com","mail2priest.com","mail2prince.com","mail2princess.com","mail2producer.com","mail2professor.com","mail2protect.com","mail2psychiatrist.com","mail2psycho.com","mail2psychologist.com","mail2qatar.com","mail2queen.com","mail2rabbi.com","mail2race.com","mail2racer.com","mail2rachel.com","mail2rage.com","mail2rainmaker.com","mail2ralph.com","mail2randy.com","mail2rap.com","mail2rare.com","mail2rave.com","mail2ray.com","mail2raymond.com","mail2realtor.com","mail2rebecca.com","mail2recruiter.com","mail2recycle.com","mail2redhead.com","mail2reed.com","mail2reggie.com","mail2register.com","mail2rent.com","mail2republican.com","mail2resort.com","mail2rex.com","mail2rhodeisland.com","mail2rich.com","mail2richard.com","mail2ricky.com","mail2ride.com","mail2riley.com","mail2rita.com","mail2rob.com","mail2robert.com","mail2roberta.com","mail2robin.com","mail2rock.com","mail2rocker.com","mail2rod.com","mail2rodney.com","mail2romania.com","mail2rome.com","mail2ron.com","mail2ronald.com","mail2ronnie.com","mail2rose.com","mail2rosie.com","mail2roy.com","mail2rss.org","mail2rudy.com","mail2rugby.com","mail2runner.com","mail2russell.com","mail2russia.com","mail2russian.com","mail2rusty.com","mail2ruth.com","mail2rwanda.com","mail2ryan.com","mail2sa.com","mail2sabrina.com","mail2safe.com","mail2sagittarius.com","mail2sail.com","mail2sailor.com","mail2sal.com","mail2salaam.com","mail2sam.com","mail2samantha.com","mail2samoa.com","mail2samurai.com","mail2sandra.com","mail2sandy.com","mail2sanfrancisco.com","mail2sanmarino.com","mail2santa.com","mail2sara.com","mail2sarah.com","mail2sat.com","mail2saturn.com","mail2saudi.com","mail2saudiarabia.com","mail2save.com","mail2savings.com","mail2school.com","mail2scientist.com","mail2scorpio.com","mail2scott.com","mail2sean.com","mail2search.com","mail2seattle.com","mail2secretagent.com","mail2senate.com","mail2senegal.com","mail2sensual.com","mail2seth.com","mail2sevenseas.com","mail2sexy.com","mail2seychelles.com","mail2shane.com","mail2sharon.com","mail2shawn.com","mail2ship.com","mail2shirley.com","mail2shoot.com","mail2shuttle.com","mail2sierraleone.com","mail2simon.com","mail2singapore.com","mail2single.com","mail2site.com","mail2skater.com","mail2skier.com","mail2sky.com","mail2sleek.com","mail2slim.com","mail2slovakia.com","mail2slovenia.com","mail2smile.com","mail2smith.com","mail2smooth.com","mail2soccer.com","mail2soccerfan.com","mail2socialist.com","mail2soldier.com","mail2somalia.com","mail2son.com","mail2song.com","mail2sos.com","mail2sound.com","mail2southafrica.com","mail2southamerica.com","mail2southcarolina.com","mail2southdakota.com","mail2southkorea.com","mail2southpole.com","mail2spain.com","mail2spanish.com","mail2spare.com","mail2spectrum.com","mail2splash.com","mail2sponsor.com","mail2sports.com","mail2srilanka.com","mail2stacy.com","mail2stan.com","mail2stanley.com","mail2star.com","mail2state.com","mail2stephanie.com","mail2steve.com","mail2steven.com","mail2stewart.com","mail2stlouis.com","mail2stock.com","mail2stockholm.com","mail2stockmarket.com","mail2storage.com","mail2store.com","mail2strong.com","mail2student.com","mail2studio.com","mail2studio54.com","mail2stuntman.com","mail2subscribe.com","mail2sudan.com","mail2superstar.com","mail2surfer.com","mail2suriname.com","mail2susan.com","mail2suzie.com","mail2swaziland.com","mail2sweden.com","mail2sweetheart.com","mail2swim.com","mail2swimmer.com","mail2swiss.com","mail2switzerland.com","mail2sydney.com","mail2sylvia.com","mail2syria.com","mail2taboo.com","mail2taiwan.com","mail2tajikistan.com","mail2tammy.com","mail2tango.com","mail2tanya.com","mail2tanzania.com","mail2tara.com","mail2taurus.com","mail2taxi.com","mail2taxidermist.com","mail2taylor.com","mail2taz.com","mail2teacher.com","mail2technician.com","mail2ted.com","mail2telephone.com","mail2teletubbie.com","mail2tenderness.com","mail2tennessee.com","mail2tennis.com","mail2tennisfan.com","mail2terri.com","mail2terry.com","mail2test.com","mail2texas.com","mail2thailand.com","mail2therapy.com","mail2think.com","mail2tickets.com","mail2tiffany.com","mail2tim.com","mail2time.com","mail2timothy.com","mail2tina.com","mail2titanic.com","mail2toby.com","mail2todd.com","mail2togo.com","mail2tom.com","mail2tommy.com","mail2tonga.com","mail2tony.com","mail2touch.com","mail2tourist.com","mail2tracey.com","mail2tracy.com","mail2tramp.com","mail2travel.com","mail2traveler.com","mail2travis.com","mail2trekkie.com","mail2trex.com","mail2triallawyer.com","mail2trick.com","mail2trillionaire.com","mail2troy.com","mail2truck.com","mail2trump.com","mail2try.com","mail2tunisia.com","mail2turbo.com","mail2turkey.com","mail2turkmenistan.com","mail2tv.com","mail2tycoon.com","mail2tyler.com","mail2u4me.com","mail2uae.com","mail2uganda.com","mail2uk.com","mail2ukraine.com","mail2uncle.com","mail2unsubscribe.com","mail2uptown.com","mail2uruguay.com","mail2usa.com","mail2utah.com","mail2uzbekistan.com","mail2v.com","mail2vacation.com","mail2valentines.com","mail2valerie.com","mail2valley.com","mail2vamoose.com","mail2vanessa.com","mail2vanuatu.com","mail2venezuela.com","mail2venous.com","mail2venus.com","mail2vermont.com","mail2vickie.com","mail2victor.com","mail2victoria.com","mail2vienna.com","mail2vietnam.com","mail2vince.com","mail2virginia.com","mail2virgo.com","mail2visionary.com","mail2vodka.com","mail2volleyball.com","mail2waiter.com","mail2wallstreet.com","mail2wally.com","mail2walter.com","mail2warren.com","mail2washington.com","mail2wave.com","mail2way.com","mail2waycool.com","mail2wayne.com","mail2webmaster.com","mail2webtop.com","mail2webtv.com","mail2weird.com","mail2wendell.com","mail2wendy.com","mail2westend.com","mail2westvirginia.com","mail2whether.com","mail2whip.com","mail2white.com","mail2whitehouse.com","mail2whitney.com","mail2why.com","mail2wilbur.com","mail2wild.com","mail2willard.com","mail2willie.com","mail2wine.com","mail2winner.com","mail2wired.com","mail2wisconsin.com","mail2woman.com","mail2wonder.com","mail2world.com","mail2worship.com","mail2wow.com","mail2www.com","mail2wyoming.com","mail2xfiles.com","mail2xox.com","mail2yachtclub.com","mail2yahalla.com","mail2yemen.com","mail2yes.com","mail2yugoslavia.com","mail2zack.com","mail2zambia.com","mail2zenith.com","mail2zephir.com","mail2zeus.com","mail2zipper.com","mail2zoo.com","mail2zoologist.com","mail2zurich.com","mail3000.com","mail333.com","mail4trash.com","mail4u.info","mail8.com","mailandftp.com","mailandnews.com","mailas.com","mailasia.com","mailbidon.com","mailbiz.biz","mailblocks.com","mailbolt.com","mailbomb.net","mailboom.com","mailbox.as","mailbox.co.za","mailbox.gr","mailbox.hu","mailbox72.biz","mailbox80.biz","mailbr.com.br","mailbucket.org","mailc.net","mailcan.com","mailcat.biz","mailcatch.com","mailcc.com","mailchoose.co","mailcity.com","mailclub.fr","mailclub.net","mailde.de","mailde.info","maildrop.cc","maildrop.gq","maildx.com","mailed.ro","maileimer.de","mailexcite.com","mailexpire.com","mailfa.tk","mailfly.com","mailforce.net","mailforspam.com","mailfree.gq","mailfreeonline.com","mailfreeway.com","mailfs.com","mailftp.com","mailgate.gr","mailgate.ru","mailgenie.net","mailguard.me","mailhaven.com","mailhood.com","mailimate.com","mailin8r.com","mailinatar.com","mailinater.com","mailinator.com","mailinator.net","mailinator.org","mailinator.us","mailinator2.com","mailinblack.com","mailincubator.com","mailingaddress.org","mailingweb.com","mailisent.com","mailismagic.com","mailite.com","mailmate.com","mailme.dk","mailme.gq","mailme.ir","mailme.lv","mailme24.com","mailmetrash.com","mailmight.com","mailmij.nl","mailmoat.com","mailms.com","mailnator.com","mailnesia.com","mailnew.com","mailnull.com","mailops.com","mailorg.org","mailoye.com","mailpanda.com","mailpick.biz","mailpokemon.com","mailpost.zzn.com","mailpride.com","mailproxsy.com","mailpuppy.com","mailquack.com","mailrock.biz","mailroom.com","mailru.com","mailsac.com","mailscrap.com","mailseal.de","mailsent.net","mailserver.ru","mailservice.ms","mailshell.com","mailshuttle.com","mailsiphon.com","mailslapping.com","mailsnare.net","mailstart.com","mailstartplus.com","mailsurf.com","mailtag.com","mailtemp.info","mailto.de","mailtome.de","mailtothis.com","mailtrash.net","mailtv.net","mailtv.tv","mailueberfall.de","mailup.net","mailwire.com","mailworks.org","mailzi.ru","mailzilla.com","mailzilla.org","makemetheking.com","maktoob.com","malayalamtelevision.net","malayalapathram.com","male.ru","maltesemail.com","mamber.net","manager.de","manager.in.th","mancity.net","manlymail.net","mantrafreenet.com","mantramail.com","mantraonline.com","manutdfans.com","manybrain.com","marchmail.com","marfino.net","margarita.ru","mariah-carey.ml.org","mariahc.com","marijuana.com","marijuana.nl","marketing.lu","marketingfanatic.com","marketweighton.com","married-not.com","marriedandlovingit.com","marry.ru","marsattack.com","martindalemail.com","martinguerre.net","mash4077.com","masrawy.com","matmail.com","mauimail.com","mauritius.com","maximumedge.com","maxleft.com","maxmail.co.uk","mayaple.ru","mbox.com.au","mbx.cc","mchsi.com","mcrmail.com","me-mail.hu","me.com","meanpeoplesuck.com","meatismurder.net","medical.net.au","medmail.com","medscape.com","meetingmall.com","mega.zik.dj","megago.com","megamail.pt","megapoint.com","mehrani.com","mehtaweb.com","meine-dateien.info","meine-diashow.de","meine-fotos.info","meine-urlaubsfotos.de","meinspamschutz.de","mekhong.com","melodymail.com","meloo.com","meltmail.com","members.student.com","menja.net","merda.flu.cc","merda.igg.biz","merda.nut.cc","merda.usa.cc","merseymail.com","mesra.net","message.hu","message.myspace.com","messagebeamer.de","messages.to","messagez.com","metacrawler.com","metalfan.com","metaping.com","metta.lk","mexicomail.com","mezimages.net","mfsa.ru","miatadriver.com","mierdamail.com","miesto.sk","mighty.co.za","migmail.net","migmail.pl","migumail.com","miho-nakayama.com","mikrotamanet.com","millionaireintraining.com","millionairemail.com","milmail.com","milmail.com15","mindless.com","mindspring.com","minermail.com","mini-mail.com","minister.com","ministry-of-silly-walks.de","mintemail.com","misery.net","misterpinball.de","mit.tc","mittalweb.com","mixmail.com","mjfrogmail.com","ml1.net","mlanime.com","mlb.bounce.ed10.net","mm.st","mmail.com","mns.ru","mo3gov.net","moakt.com","mobico.ru","mobilbatam.com","mobileninja.co.uk","mochamail.com","modemnet.net","modernenglish.com","modomail.com","mohammed.com","mohmal.com","moldova.cc","moldova.com","moldovacc.com","mom-mail.com","momslife.com","moncourrier.fr.nf","monemail.com","monemail.fr.nf","money.net","mongol.net","monmail.fr.nf","monsieurcinema.com","montevideo.com.uy","monumentmail.com","moomia.com","moonman.com","moose-mail.com","mor19.uu.gl","mortaza.com","mosaicfx.com","moscowmail.com","mosk.ru","most-wanted.com","mostlysunny.com","motorcyclefan.net","motormania.com","movemail.com","movieemail.net","movieluver.com","mox.pp.ua","mozartmail.com","mozhno.net","mp3haze.com","mp4.it","mr-potatohead.com","mrpost.com","mrspender.com","mscold.com","msgbox.com","msn.cn","msn.com","msn.nl","msx.ru","mt2009.com","mt2014.com","mt2015.com","mt2016.com","mttestdriver.com","muehlacker.tk","multiplechoices","mundomail.net","munich.com","music.com","music.com19","music.maigate.ru","musician.com","musician.org","musicscene.org","muskelshirt.de","muslim.com","muslimemail.com","muslimsonline.com","mutantweb.com","mvrht.com","my.com","my10minutemail.com","mybox.it","mycabin.com","mycampus.com","mycard.net.ua","mycity.com","mycleaninbox.net","mycool.com","mydomain.com","mydotcomaddress.com","myfairpoint.net","myfamily.com","myfastmail.com","myfunnymail.com","mygo.com","myiris.com","myjazzmail.com","mymac.ru","mymacmail.com","mymail-in.net","mymail.ro","mynamedot.com","mynet.com","mynetaddress.com","mynetstore.de","myotw.net","myownemail.com","myownfriends.com","mypacks.net","mypad.com","mypartyclip.de","mypersonalemail.com","myphantomemail.com","myplace.com","myrambler.ru","myrealbox.com","myremarq.com","mysamp.de","myself.com","myspaceinc.net","myspamless.com","mystupidjob.com","mytemp.email","mytempemail.com","mytempmail.com","mythirdage.com","mytrashmail.com","myway.com","myworldmail.com","n2.com","n2baseball.com","n2business.com","n2mail.com","n2soccer.com","n2software.com","nabc.biz","nabuma.com","nafe.com","nagarealm.com","nagpal.net","nakedgreens.com","name.com","nameplanet.com","nanaseaikawa.com","nandomail.com","naplesnews.net","naseej.com","nate.com","nativestar.net","nativeweb.net","naui.net","naver.com","navigator.lv","navy.org","naz.com","nc.rr.com","nc.ru","nchoicemail.com","neeva.net","nekto.com","nekto.net","nekto.ru","nemra1.com","nenter.com","neo.rr.com","neomailbox.com","nepwk.com","nervhq.org","nervmich.net","nervtmich.net","net-c.be","net-c.ca","net-c.cat","net-c.com","net-c.es","net-c.fr","net-c.it","net-c.lu","net-c.nl","net-c.pl","net-pager.net","net-shopping.com","net.tf","net4b.pt","net4you.at","netaddres.ru","netaddress.ru","netbounce.com","netbroadcaster.com","netby.dk","netc.eu","netc.fr","netc.it","netc.lu","netc.pl","netcenter-vn.net","netcity.ru","netcmail.com","netcourrier.com","netexecutive.com","netexpressway.com","netfirms.com","netgenie.com","netian.com","netizen.com.ar","netkushi.com","netlane.com","netlimit.com","netmail.kg","netmails.com","netmails.net","netman.ru","netmanor.com","netmongol.com","netnet.com.sg","netnoir.net","netpiper.com","netposta.net","netradiomail.com","netralink.com","netscape.net","netscapeonline.co.uk","netspace.net.au","netspeedway.com","netsquare.com","netster.com","nettaxi.com","nettemail.com","netterchef.de","netti.fi","netvigator.com","netzero.com","netzero.net","netzidiot.de","netzoola.com","neue-dateien.de","neuf.fr","neuro.md","neustreet.com","neverbox.com","newap.ru","newarbat.net","newmail.com","newmail.net","newmail.ru","newsboysmail.com","newyork.com","newyorkcity.com","nextmail.ru","nexxmail.com","nfmail.com","ngs.ru","nhmail.com","nice-4u.com","nicebush.com","nicegal.com","nicholastse.net","nicolastse.com","niepodam.pl","nightimeuk.com","nightmail.com","nightmail.ru","nikopage.com","nikulino.net","nimail.com","nincsmail.hu","ninfan.com","nirvanafan.com","nm.ru","nmail.cf","nnh.com","nnov.ru","no-spam.ws","no4ma.ru","noavar.com","noblepioneer.com","nogmailspam.info","nomail.pw","nomail.xl.cx","nomail2me.com","nomorespamemails.com","nonpartisan.com","nonspam.eu","nonspammer.de","nonstopcinema.com","norika-fujiwara.com","norikomail.com","northgates.net","nospam.ze.tc","nospam4.us","nospamfor.us","nospammail.net","nospamthanks.info","notmailinator.com","notsharingmy.info","notyouagain.com","novogireevo.net","novokosino.net","nowhere.org","nowmymail.com","ntelos.net","ntlhelp.net","ntlworld.com","ntscan.com","null.net","nullbox.info","numep.ru","nur-fuer-spam.de","nurfuerspam.de","nus.edu.sg","nuvse.com","nwldx.com","nxt.ru","ny.com","nybce.com","nybella.com","nyc.com","nycmail.com","nz11.com","nzoomail.com","o-tay.com","o2.co.uk","o2.pl","oaklandas-fan.com","oath.com","objectmail.com","obobbo.com","oceanfree.net","ochakovo.net","odaymail.com","oddpost.com","odmail.com","odnorazovoe.ru","office-dateien.de","office-email.com","officedomain.com","offroadwarrior.com","oi.com.br","oicexchange.com","oikrach.com","ok.kz","ok.net","ok.ru","okbank.com","okhuman.com","okmad.com","okmagic.com","okname.net","okuk.com","oldbuthealthy.com","oldies1041.com","oldies104mail.com","ole.com","olemail.com","oligarh.ru","olympist.net","olypmall.ru","omaninfo.com","omen.ru","ondikoi.com","onebox.com","onenet.com.ar","oneoffemail.com","oneoffmail.com","onet.com.pl","onet.eu","onet.pl","onewaymail.com","oninet.pt","onlatedotcom.info","online.de","online.ie","online.ms","online.nl","online.ru","onlinecasinogamblings.com","onlinewiz.com","onmicrosoft.com","onmilwaukee.com","onobox.com","onvillage.com","oopi.org","op.pl","opayq.com","opendiary.com","openmailbox.org","operafan.com","operamail.com","opoczta.pl","optician.com","optonline.net","optusnet.com.au","orange.fr","orange.net","orbitel.bg","ordinaryamerican.net","orgmail.net","orthodontist.net","osite.com.br","oso.com","otakumail.com","otherinbox.com","our-computer.com","our-office.com","our.st","ourbrisbane.com","ourklips.com","ournet.md","outel.com","outgun.com","outlawspam.com","outlook.at","outlook.be","outlook.cl","outlook.co.id","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.nl","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","outloook.com","over-the-rainbow.com","ovi.com","ovpn.to","owlpic.com","ownmail.net","ozbytes.net.au","ozemail.com.au","ozz.ru","pacbell.net","pacific-ocean.com","pacific-re.com","pacificwest.com","packersfan.com","pagina.de","pagons.org","paidforsurf.com","pakistanmail.com","pakistanoye.com","palestinemail.com","pancakemail.com","pandawa.com","pandora.be","paradiseemail.com","paris.com","parkjiyoon.com","parrot.com","parsmail.com","partlycloudy.com","partybombe.de","partyheld.de","partynight.at","parvazi.com","passwordmail.com","pathfindermail.com","patmail.com","patra.net","pconnections.net","pcpostal.com","pcsrock.com","pcusers.otherinbox.com","peachworld.com","pechkin.ru","pediatrician.com","pekklemail.com","pemail.net","penpen.com","peoplepc.com","peopleweb.com","pepbot.com","perfectmail.com","perovo.net","perso.be","personal.ro","personales.com","petlover.com","petml.com","petr.ru","pettypool.com","pezeshkpour.com","pfui.ru","phayze.com","phone.net","photo-impact.eu","photographer.net","phpbb.uu.gl","phreaker.net","phus8kajuspa.cu.cc","physicist.net","pianomail.com","pickupman.com","picusnet.com","piercedallover.com","pigeonportal.com","pigmail.net","pigpig.net","pilotemail.com","pimagop.com","pinoymail.com","piracha.net","pisem.net","pjjkp.com","planet-mail.com","planet.nl","planetaccess.com","planetall.com","planetarymotion.net","planetdirect.com","planetearthinter.net","planetmail.com","planetmail.net","planetout.com","plasa.com","playersodds.com","playful.com","playstation.sony.com","plexolan.de","pluno.com","plus.com","plus.google.com","plusmail.com.br","pmail.net","pobox.com","pobox.hu","pobox.ru","pobox.sk","pochta.by","pochta.ru","pochta.ws","pochtamt.ru","poczta.fm","poczta.onet.pl","poetic.com","pokemail.net","pokemonpost.com","pokepost.com","polandmail.com","polbox.com","policeoffice.com","politician.com","politikerclub.de","polizisten-duzer.de","polyfaust.com","poofy.org","poohfan.com","pookmail.com","pool-sharks.com","poond.com","pop3.ru","popaccount.com","popmail.com","popsmail.com","popstar.com","populus.net","portableoffice.com","portugalmail.com","portugalmail.pt","portugalnet.com","positive-thinking.com","post.com","post.cz","post.sk","posta.net","posta.ro","posta.rosativa.ro.org","postaccesslite.com","postafiok.hu","postafree.com","postaweb.com","poste.it","postfach.cc","postinbox.com","postino.ch","postino.it","postmark.net","postmaster.co.uk","postmaster.twitter.com","postpro.net","pousa.com","powerdivas.com","powerfan.com","pp.inet.fi","praize.com","pray247.com","predprinimatel.ru","premium-mail.fr","premiumproducts.com","premiumservice.com","prepodavatel.ru","presidency.com","presnya.net","press.co.jp","prettierthanher.com","priest.com","primposta.com","primposta.hu","printesamargareta.ro","privacy.net","privatdemail.net","privy-mail.com","privymail.de","pro.hu","probemail.com","prodigy.net","prodigy.net.mx","professor.ru","progetplus.it","programist.ru","programmer.net","programozo.hu","proinbox.com","project2k.com","prokuratura.ru","prolaunch.com","promessage.com","prontomail.com","prontomail.compopulus.net","protestant.com","protonmail.com","proxymail.eu","prtnx.com","prydirect.info","psv-supporter.com","ptd.net","public-files.de","public.usa.com","publicist.com","pulp-fiction.com","punkass.com","puppy.com.my","purinmail.com","purpleturtle.com","put2.net","putthisinyourspamdatabase.com","pwrby.com","q.com","qatar.io","qatarmail.com","qdice.com","qip.ru","qmail.com","qprfans.com","qq.com","qrio.com","quackquack.com","quake.ru","quakemail.com","qualityservice.com","quantentunnel.de","qudsmail.com","quepasa.com","quickhosts.com","quickinbox.com","quickmail.nl","quickmail.ru","quicknet.nl","quickwebmail.com","quiklinks.com","quikmail.com","qv7.info","qwest.net","qwestoffice.net","r-o-o-t.com","r7.com","raakim.com","racedriver.com","racefanz.com","racingfan.com.au","racingmail.com","radicalz.com","radiku.ye.vc","radiologist.net","ragingbull.com","ralib.com","rambler.ru","ranmamail.com","rastogi.net","ratt-n-roll.com","rattle-snake.com","raubtierbaendiger.de","ravearena.com","ravefan.com","ravemail.co.za","ravemail.com","razormail.com","rccgmail.org","rcn.com","rcpt.at","realemail.net","realestatemail.net","reality-concept.club","reallyfast.biz","reallyfast.info","reallymymail.com","realradiomail.com","realtyagent.com","realtyalerts.ca","reborn.com","recode.me","reconmail.com","recursor.net","recycledmail.com","recycler.com","recyclermail.com","rediff.com","rediffmail.com","rediffmailpro.com","rednecks.com","redseven.de","redsfans.com","redwhitearmy.com","regbypass.com","reggaefan.com","reggafan.com","regiononline.com","registerednurses.com","regspaces.tk","reincarnate.com","relia.com","reliable-mail.com","religious.com","remail.ga","renren.com","repairman.com","reply.hu","reply.ticketmaster.com","represantive.com","representative.com","rescueteam.com","resgedvgfed.tk","resource.calendar.google.com","resumemail.com","retailfan.com","rexian.com","rezai.com","rhyta.com","richmondhill.com","rickymail.com","rin.ru","ring.by","riopreto.com.br","rklips.com","rmqkr.net","rn.com","ro.ru","roadrunner.com","roanokemail.com","rock.com","rocketmail.com","rocketship.com","rockfan.com","rodrun.com","rogers.com","rojname.com","rol.ro","rome.com","romymichele.com","roosh.com","rootprompt.org","rotfl.com","roughnet.com","royal.net","rpharmacist.com","rr.com","rrohio.com","rsub.com","rt.nl","rtrtr.com","ru.ru","rubyridge.com","runbox.com","rushpost.com","ruttolibero.com","rvshop.com","rxdoc.biz","s-mail.com","s0ny.net","sabreshockey.com","sacbeemail.com","saeuferleber.de","safarimail.com","safe-mail.net","safersignup.de","safetymail.info","safetypost.de","safrica.com","sagra.lu","sagra.lu.lu","sagra.lumarketing.lu","sags-per-mail.de","sailormoon.com","saint-mike.org","saintly.com","saintmail.net","sale-sale-sale.com","salehi.net","salesperson.net","samerica.com","samilan.net","samiznaetekogo.net","sammimail.com","sanchezsharks.com","sandelf.de","sanfranmail.com","sanook.com","sanriotown.com","santanmail.com","sapo.pt","sativa.ro.org","saturnfans.com","saturnperformance.com","saudia.com","savecougars.com","savelife.ml","saveowls.com","sayhi.net","saynotospams.com","sbcglbal.net","sbcglobal.com","sbcglobal.net","scandalmail.com","scanova.in","scanova.io","scarlet.nl","scfn.net","schafmail.de","schizo.com","schmusemail.de","schoolemail.com","schoolmail.com","schoolsucks.com","schreib-doch-mal-wieder.de","schrott-email.de","schweiz.org","sci.fi","science.com.au","scientist.com","scifianime.com","scotland.com","scotlandmail.com","scottishmail.co.uk","scottishtories.com","scottsboro.org","scrapbookscrapbook.com","scubadiving.com","seanet.com","search.ua","search417.com","searchwales.com","sebil.com","seckinmail.com","secret-police.com","secretarias.com","secretary.net","secretemail.de","secretservices.net","secure-mail.biz","secure-mail.cc","seductive.com","seekstoyboy.com","seguros.com.br","sekomaonline.com","selfdestructingmail.com","sellingspree.com","send.hu","sendmail.ru","sendme.cz","sendspamhere.com","senseless-entertainment.com","sent.as","sent.at","sent.com","sentrismail.com","serga.com.ar","servemymail.com","servermaps.net","services391.com","sesmail.com","sexmagnet.com","seznam.cz","sfr.fr","shahweb.net","shaniastuff.com","shared-files.de","sharedmailbox.org","sharewaredevelopers.com","sharklasers.com","sharmaweb.com","shaw.ca","she.com","shellov.net","shieldedmail.com","shieldemail.com","shiftmail.com","shinedyoureyes.com","shitaway.cf","shitaway.cu.cc","shitaway.ga","shitaway.gq","shitaway.ml","shitaway.tk","shitaway.usa.cc","shitmail.de","shitmail.me","shitmail.org","shitware.nl","shmeriously.com","shockinmytown.cu.cc","shootmail.com","shortmail.com","shortmail.net","shotgun.hu","showfans.com","showslow.de","shqiptar.eu","shuf.com","sialkotcity.com","sialkotian.com","sialkotoye.com","sibmail.com","sify.com","sigaret.net","silkroad.net","simbamail.fm","sina.cn","sina.com","sinamail.com","singapore.com","singles4jesus.com","singmail.com","singnet.com.sg","singpost.com","sinnlos-mail.de","sirindia.com","siteposter.net","skafan.com","skeefmail.com","skim.com","skizo.hu","skrx.tk","skunkbox.com","sky.com","skynet.be","slamdunkfan.com","slapsfromlastnight.com","slaskpost.se","slave-auctions.net","slickriffs.co.uk","slingshot.com","slippery.email","slipry.net","slo.net","slotter.com","sm.westchestergov.com","smap.4nmv.ru","smapxsmap.net","smashmail.de","smellfear.com","smellrear.com","smileyface.comsmithemail.net","sminkymail.com","smoothmail.com","sms.at","smtp.ru","snail-mail.net","snail-mail.ney","snakebite.com","snakemail.com","sndt.net","sneakemail.com","sneakmail.de","snet.net","sniper.hu","snkmail.com","snoopymail.com","snowboarding.com","snowdonia.net","so-simple.org","socamail.com","socceraccess.com","socceramerica.net","soccermail.com","soccermomz.com","social-mailer.tk","socialworker.net","sociologist.com","sofimail.com","sofort-mail.de","sofortmail.de","softhome.net","sogetthis.com","sogou.com","sohu.com","sokolniki.net","sol.dk","solar-impact.pro","solcon.nl","soldier.hu","solution4u.com","solvemail.info","songwriter.net","sonnenkinder.org","soodomail.com","soodonims.com","soon.com","soulfoodcookbook.com","soundofmusicfans.com","southparkmail.com","sovsem.net","sp.nl","space-bank.com","space-man.com","space-ship.com","space-travel.com","space.com","spaceart.com","spacebank.com","spacemart.com","spacetowns.com","spacewar.com","spainmail.com","spam.2012-2016.ru","spam4.me","spamail.de","spamarrest.com","spamavert.com","spambob.com","spambob.net","spambob.org","spambog.com","spambog.de","spambog.net","spambog.ru","spambooger.com","spambox.info","spambox.us","spamcannon.com","spamcannon.net","spamcero.com","spamcon.org","spamcorptastic.com","spamcowboy.com","spamcowboy.net","spamcowboy.org","spamday.com","spamdecoy.net","spameater.com","spameater.org","spamex.com","spamfree.eu","spamfree24.com","spamfree24.de","spamfree24.info","spamfree24.net","spamfree24.org","spamgoes.in","spamgourmet.com","spamgourmet.net","spamgourmet.org","spamherelots.com","spamhereplease.com","spamhole.com","spamify.com","spaminator.de","spamkill.info","spaml.com","spaml.de","spammotel.com","spamobox.com","spamoff.de","spamslicer.com","spamspot.com","spamstack.net","spamthis.co.uk","spamtroll.net","spankthedonkey.com","spartapiet.com","spazmail.com","speed.1s.fr","speedemail.net","speedpost.net","speedrules.com","speedrulz.com","speedy.com.ar","speedymail.org","sperke.net","spils.com","spinfinder.com","spiritseekers.com","spl.at","spoko.pl","spoofmail.de","sportemail.com","sportmail.ru","sportsmail.com","sporttruckdriver.com","spray.no","spray.se","spybox.de","spymac.com","sraka.xyz","srilankan.net","ssl-mail.com","st-davids.net","stade.fr","stalag13.com","standalone.net","starbuzz.com","stargateradio.com","starmail.com","starmail.org","starmedia.com","starplace.com","starspath.com","start.com.au","starting-point.com","startkeys.com","startrekmail.com","starwars-fans.com","stealthmail.com","stillchronic.com","stinkefinger.net","stipte.nl","stockracer.com","stockstorm.com","stoned.com","stones.com","stop-my-spam.pp.ua","stopdropandroll.com","storksite.com","streber24.de","streetwisemail.com","stribmail.com","strompost.com","strongguy.com","student.su","studentcenter.org","stuffmail.de","subnetwork.com","subram.com","sudanmail.net","sudolife.me","sudolife.net","sudomail.biz","sudomail.com","sudomail.net","sudoverse.com","sudoverse.net","sudoweb.net","sudoworld.com","sudoworld.net","sueddeutsche.de","suhabi.com","suisse.org","sukhumvit.net","sul.com.br","sunmail1.com","sunpoint.net","sunrise-sunset.com","sunsgame.com","sunumail.sn","suomi24.fi","super-auswahl.de","superdada.com","supereva.it","supergreatmail.com","supermail.ru","supermailer.jp","superman.ru","superposta.com","superrito.com","superstachel.de","surat.com","suremail.info","surf3.net","surfree.com","surfsupnet.net","surfy.net","surgical.net","surimail.com","survivormail.com","susi.ml","sviblovo.net","svk.jp","swbell.net","sweb.cz","swedenmail.com","sweetville.net","sweetxxx.de","swift-mail.com","swiftdesk.com","swingeasyhithard.com","swingfan.com","swipermail.zzn.com","swirve.com","swissinfo.org","swissmail.com","swissmail.net","switchboardmail.com","switzerland.org","sx172.com","sympatico.ca","syom.com","syriamail.com","t-online.de","t.psh.me","t2mail.com","tafmail.com","takoe.com","takoe.net","takuyakimura.com","talk21.com","talkcity.com","talkinator.com","talktalk.co.uk","tamb.ru","tamil.com","tampabay.rr.com","tangmonkey.com","tankpolice.com","taotaotano.com","tatanova.com","tattooedallover.com","tattoofanatic.com","tbwt.com","tcc.on.ca","tds.net","teacher.com","teachermail.net","teachers.org","teamdiscovery.com","teamtulsa.net","tech-center.com","tech4peace.org","techemail.com","techie.com","technisamail.co.za","technologist.com","technologyandstocks.com","techpointer.com","techscout.com","techseek.com","techsniper.com","techspot.com","teenagedirtbag.com","teewars.org","tele2.nl","telebot.com","telebot.net","telefonica.net","teleline.es","telenet.be","telepac.pt","telerymd.com","teleserve.dynip.com","teletu.it","teleworm.com","teleworm.us","telfort.nl","telfortglasvezel.nl","telinco.net","telkom.net","telpage.net","telstra.com","telstra.com.au","temp-mail.com","temp-mail.de","temp-mail.org","temp-mail.ru","temp.headstrong.de","tempail.com","tempe-mail.com","tempemail.biz","tempemail.co.za","tempemail.com","tempemail.net","tempinbox.co.uk","tempinbox.com","tempmail.eu","tempmail.it","tempmail.us","tempmail2.com","tempmaildemo.com","tempmailer.com","tempmailer.de","tempomail.fr","temporarioemail.com.br","temporaryemail.net","temporaryemail.us","temporaryforwarding.com","temporaryinbox.com","temporarymailaddress.com","tempthe.net","tempymail.com","temtulsa.net","tenchiclub.com","tenderkiss.com","tennismail.com","terminverpennt.de","terra.cl","terra.com","terra.com.ar","terra.com.br","terra.com.pe","terra.es","test.com","test.de","tfanus.com.er","tfbnw.net","tfz.net","tgasa.ru","tgma.ru","tgngu.ru","tgu.ru","thai.com","thaimail.com","thaimail.net","thanksnospam.info","thankyou2010.com","thc.st","the-african.com","the-airforce.com","the-aliens.com","the-american.com","the-animal.com","the-army.com","the-astronaut.com","the-beauty.com","the-big-apple.com","the-biker.com","the-boss.com","the-brazilian.com","the-canadian.com","the-canuck.com","the-captain.com","the-chinese.com","the-country.com","the-cowboy.com","the-davis-home.com","the-dutchman.com","the-eagles.com","the-englishman.com","the-fastest.net","the-fool.com","the-frenchman.com","the-galaxy.net","the-genius.com","the-gentleman.com","the-german.com","the-gremlin.com","the-hooligan.com","the-italian.com","the-japanese.com","the-lair.com","the-madman.com","the-mailinglist.com","the-marine.com","the-master.com","the-mexican.com","the-ministry.com","the-monkey.com","the-newsletter.net","the-pentagon.com","the-police.com","the-prayer.com","the-professional.com","the-quickest.com","the-russian.com","the-seasiders.com","the-snake.com","the-spaceman.com","the-stock-market.com","the-student.net","the-whitehouse.net","the-wild-west.com","the18th.com","thecoolguy.com","thecriminals.com","thedoghousemail.com","thedorm.com","theend.hu","theglobe.com","thegolfcourse.com","thegooner.com","theheadoffice.com","theinternetemail.com","thelanddownunder.com","thelimestones.com","themail.com","themillionare.net","theoffice.net","theplate.com","thepokerface.com","thepostmaster.net","theraces.com","theracetrack.com","therapist.net","thereisnogod.com","thesimpsonsfans.com","thestreetfighter.com","theteebox.com","thewatercooler.com","thewebpros.co.uk","thewizzard.com","thewizzkid.com","thexyz.ca","thexyz.cn","thexyz.com","thexyz.es","thexyz.fr","thexyz.in","thexyz.mobi","thexyz.net","thexyz.org","thezhangs.net","thirdage.com","thisgirl.com","thisisnotmyrealemail.com","thismail.net","thoic.com","thraml.com","thrott.com","throwam.com","throwawayemailaddress.com","thundermail.com","tibetemail.com","tidni.com","tilien.com","timein.net","timormail.com","tin.it","tipsandadvice.com","tiran.ru","tiscali.at","tiscali.be","tiscali.co.uk","tiscali.it","tiscali.lu","tiscali.se","tittbit.in","tizi.com","tkcity.com","tlcfan.com","tmail.ws","tmailinator.com","tmicha.net","toast.com","toke.com","tokyo.com","tom.com","toolsource.com","toomail.biz","toothfairy.com","topchat.com","topgamers.co.uk","topletter.com","topmail-files.de","topmail.com.ar","topranklist.de","topsurf.com","topteam.bg","toquedequeda.com","torba.com","torchmail.com","torontomail.com","tortenboxer.de","totalmail.com","totalmail.de","totalmusic.net","totalsurf.com","toughguy.net","townisp.com","tpg.com.au","tradermail.info","trainspottingfan.com","trash-amil.com","trash-mail.at","trash-mail.com","trash-mail.de","trash-mail.ga","trash-mail.ml","trash2009.com","trash2010.com","trash2011.com","trashdevil.com","trashdevil.de","trashemail.de","trashmail.at","trashmail.com","trashmail.de","trashmail.me","trashmail.net","trashmail.org","trashmailer.com","trashymail.com","trashymail.net","travel.li","trayna.com","trbvm.com","trbvn.com","trevas.net","trialbytrivia.com","trialmail.de","trickmail.net","trillianpro.com","trimix.cn","tritium.net","trjam.net","trmailbox.com","tropicalstorm.com","truckeremail.net","truckers.com","truckerz.com","truckracer.com","truckracers.com","trust-me.com","truth247.com","truthmail.com","tsamail.co.za","ttml.co.in","tulipsmail.net","tunisiamail.com","turboprinz.de","turboprinzessin.de","turkey.com","turual.com","tushino.net","tut.by","tvcablenet.be","tverskie.net","tverskoe.net","tvnet.lv","tvstar.com","twc.com","twcny.com","twentylove.com","twinmail.de","twinstarsmail.com","tx.rr.com","tycoonmail.com","tyldd.com","typemail.com","tyt.by","u14269.ml","u2club.com","ua.fm","uae.ac","uaemail.com","ubbi.com","ubbi.com.br","uboot.com","uggsrock.com","uk2.net","uk2k.com","uk2net.com","uk7.net","uk8.net","ukbuilder.com","ukcool.com","ukdreamcast.com","ukmail.org","ukmax.com","ukr.net","ukrpost.net","ukrtop.com","uku.co.uk","ultapulta.com","ultimatelimos.com","ultrapostman.com","umail.net","ummah.org","umpire.com","unbounded.com","underwriters.com","unforgettable.com","uni.de","uni.de.de","uni.demailto.de","unican.es","unihome.com","universal.pt","uno.ee","uno.it","unofree.it","unomail.com","unterderbruecke.de","uogtritons.com","uol.com.ar","uol.com.br","uol.com.co","uol.com.mx","uol.com.ve","uole.com","uole.com.ve","uolmail.com","uomail.com","upc.nl","upcmail.nl","upf.org","upliftnow.com","uplipht.com","uraniomail.com","ureach.com","urgentmail.biz","uroid.com","us.af","usa.com","usa.net","usaaccess.net","usanetmail.com","used-product.fr","userbeam.com","usermail.com","username.e4ward.com","userzap.com","usma.net","usmc.net","uswestmail.net","uymail.com","uyuyuy.com","uzhe.net","v-sexi.com","v8email.com","vaasfc4.tk","vahoo.com","valemail.net","valudeal.net","vampirehunter.com","varbizmail.com","vcmail.com","velnet.co.uk","velnet.com","velocall.com","veloxmail.com.br","venompen.com","verizon.net","verizonmail.com","verlass-mich-nicht.de","versatel.nl","verticalheaven.com","veryfast.biz","veryrealemail.com","veryspeedy.net","vfemail.net","vickaentb.tk","videotron.ca","viditag.com","viewcastmedia.com","viewcastmedia.net","vinbazar.com","violinmakers.co.uk","vip.126.com","vip.21cn.com","vip.citiz.net","vip.gr","vip.onet.pl","vip.qq.com","vip.sina.com","vipmail.ru","viralplays.com","virgilio.it","virgin.net","virginbroadband.com.au","virginmedia.com","virtual-mail.com","virtualactive.com","virtualguam.com","virtualmail.com","visitmail.com","visitweb.com","visto.com","visualcities.com","vivavelocity.com","vivianhsu.net","viwanet.ru","vjmail.com","vjtimail.com","vkcode.ru","vlcity.ru","vlmail.com","vnet.citiz.net","vnn.vn","vnukovo.net","vodafone.nl","vodafonethuis.nl","voila.fr","volcanomail.com","vollbio.de","volloeko.de","vomoto.com","voo.be","vorsicht-bissig.de","vorsicht-scharf.de","vote-democrats.com","vote-hillary.com","vote-republicans.com","vote4gop.org","votenet.com","vovan.ru","vp.pl","vpn.st","vr9.com","vsimcard.com","vubby.com","vyhino.net","w3.to","wahoye.com","walala.org","wales2000.net","walkmail.net","walkmail.ru","walla.co.il","wam.co.za","wanaboo.com","wanadoo.co.uk","wanadoo.es","wanadoo.fr","wapda.com","war-im-urlaub.de","warmmail.com","warpmail.net","warrior.hu","wasteland.rfc822.org","watchmail.com","waumail.com","wazabi.club","wbdet.com","wearab.net","web-contact.info","web-emailbox.eu","web-ideal.fr","web-mail.com.ar","web-mail.pp.ua","web-police.com","web.de","webaddressbook.com","webadicta.org","webave.com","webbworks.com","webcammail.com","webcity.ca","webcontact-france.eu","webdream.com","webemail.me","webemaillist.com","webinbox.com","webindia123.com","webjump.com","webm4il.info","webmail.bellsouth.net","webmail.blue","webmail.co.yu","webmail.co.za","webmail.fish","webmail.hu","webmail.lawyer","webmail.ru","webmail.wiki","webmails.com","webmailv.com","webname.com","webprogramming.com","webskulker.com","webstation.com","websurfer.co.za","webtopmail.com","webtribe.net","webuser.in","wee.my","weedmail.com","weekmail.com","weekonline.com","wefjo.grn.cc","weg-werf-email.de","wegas.ru","wegwerf-emails.de","wegwerfadresse.de","wegwerfemail.com","wegwerfemail.de","wegwerfmail.de","wegwerfmail.info","wegwerfmail.net","wegwerfmail.org","wegwerpmailadres.nl","wehshee.com","weibsvolk.de","weibsvolk.org","weinenvorglueck.de","welsh-lady.com","wesleymail.com","westnet.com","westnet.com.au","wetrainbayarea.com","wfgdfhj.tk","wh4f.org","whale-mail.com","whartontx.com","whatiaas.com","whatpaas.com","wheelweb.com","whipmail.com","whoever.com","wholefitness.com","whoopymail.com","whtjddn.33mail.com","whyspam.me","wickedmail.com","wickmail.net","wideopenwest.com","wildmail.com","wilemail.com","will-hier-weg.de","willhackforfood.biz","willselfdestruct.com","windowslive.com","windrivers.net","windstream.com","windstream.net","winemaven.info","wingnutz.com","winmail.com.au","winning.com","winrz.com","wir-haben-nachwuchs.de","wir-sind-cool.org","wirsindcool.de","witty.com","wiz.cc","wkbwmail.com","wmail.cf","wo.com.cn","woh.rr.com","wolf-web.com","wolke7.net","wollan.info","wombles.com","women-at-work.org","women-only.net","wonder-net.com","wongfaye.com","wooow.it","work4teens.com","worker.com","workmail.co.za","workmail.com","worldbreak.com","worldemail.com","worldmailer.com","worldnet.att.net","wormseo.cn","wosaddict.com","wouldilie.com","wovz.cu.cc","wow.com","wowgirl.com","wowmail.com","wowway.com","wp.pl","wptamail.com","wrestlingpages.com","wrexham.net","writeme.com","writemeback.com","writeremail.com","wronghead.com","wrongmail.com","wtvhmail.com","wwdg.com","www.com","www.e4ward.com","www.mailinator.com","www2000.net","wwwnew.eu","wx88.net","wxs.net","wyrm.supernews.com","x-mail.net","x-networks.net","x.ip6.li","x5g.com","xagloo.com","xaker.ru","xd.ae","xemaps.com","xents.com","xing886.uu.gl","xmail.com","xmaily.com","xmastime.com","xmenfans.com","xms.nl","xmsg.com","xoom.com","xoommail.com","xoxox.cc","xoxy.net","xpectmore.com","xpressmail.zzn.com","xs4all.nl","xsecurity.org","xsmail.com","xtra.co.nz","xtram.com","xuno.com","xww.ro","xy9ce.tk","xyz.am","xyzfree.net","xzapmail.com","y7mail.com","ya.ru","yada-yada.com","yaho.com","yahoo.ae","yahoo.at","yahoo.be","yahoo.ca","yahoo.ch","yahoo.cn","yahoo.co","yahoo.co.id","yahoo.co.il","yahoo.co.in","yahoo.co.jp","yahoo.co.kr","yahoo.co.nz","yahoo.co.th","yahoo.co.uk","yahoo.co.za","yahoo.com","yahoo.com.ar","yahoo.com.au","yahoo.com.br","yahoo.com.cn","yahoo.com.co","yahoo.com.hk","yahoo.com.is","yahoo.com.mx","yahoo.com.my","yahoo.com.ph","yahoo.com.ru","yahoo.com.sg","yahoo.com.tr","yahoo.com.tw","yahoo.com.vn","yahoo.cz","yahoo.de","yahoo.dk","yahoo.es","yahoo.fi","yahoo.fr","yahoo.gr","yahoo.hu","yahoo.ie","yahoo.in","yahoo.it","yahoo.jp","yahoo.net","yahoo.nl","yahoo.no","yahoo.pl","yahoo.pt","yahoo.ro","yahoo.ru","yahoo.se","yahoofs.com","yahoomail.com","yalla.com","yalla.com.lb","yalook.com","yam.com","yandex.com","yandex.mail","yandex.pl","yandex.ru","yandex.ua","yapost.com","yapped.net","yawmail.com","yclub.com","yeah.net","yebox.com","yeehaa.com","yehaa.com","yehey.com","yemenmail.com","yep.it","yepmail.net","yert.ye.vc","yesbox.net","yesey.net","yeswebmaster.com","ygm.com","yifan.net","ymail.com","ynnmail.com","yogamaven.com","yogotemail.com","yomail.info","yopmail.com","yopmail.fr","yopmail.net","yopmail.org","yopmail.pp.ua","yopolis.com","yopweb.com","youareadork.com","youmailr.com","youpy.com","your-house.com","your-mail.com","yourdomain.com","yourinbox.com","yourlifesucks.cu.cc","yourlover.net","yournightmare.com","yours.com","yourssincerely.com","yourteacher.net","yourwap.com","youthfire.com","youthpost.com","youvegotmail.net","yuuhuu.net","yuurok.com","yyhmail.com","z1p.biz","z6.com","z9mail.com","za.com","zahadum.com","zaktouni.fr","zcities.com","zdnetmail.com","zdorovja.net","zeeks.com","zeepost.nl","zehnminuten.de","zehnminutenmail.de","zensearch.com","zensearch.net","zerocrime.org","zetmail.com","zhaowei.net","zhouemail.510520.org","ziggo.nl","zing.vn","zionweb.org","zip.net","zipido.com","ziplip.com","zipmail.com","zipmail.com.br","zipmax.com","zippymail.info","zmail.pt","zmail.ru","zoemail.com","zoemail.net","zoemail.org","zoho.com","zomg.info","zonai.com","zoneview.net","zonnet.nl","zooglemail.com","zoominternet.net","zubee.com","zuvio.com","zuzzurello.com","zvmail.com","zwallet.com","zweb.in","zxcv.com","zxcvbnm.com","zybermail.com","zydecofan.com","zzn.com","zzom.co.uk","zzz.com"],Yo="(?:[_\\p{L}0-9][-_\\p{L}0-9]*\\.)*(?:[\\p{L}0-9][-\\p{L}0-9]{0,62})\\.(?:(?:[a-z]{2}\\.)?[a-z]{2,})",Jo=class{static extractDomainFromEmail(e){const t=$s()(`(?<=@)${Yo}`);return $s().match(e,t)||""}static isProfessional(e){return!Zo.includes(e)}static checkDomainValidity(e){if(!$s()(`^${Yo}$`).test(e))throw new Error("Cannot parse domain. The domain does not match the pattern.");try{if(!new URL(`https://${e}`).host)throw new Error("Cannot parse domain. The domain does not match the pattern.")}catch(e){throw new Error("Cannot parse domain. The domain is not valid.")}}},Xo=class{static clone(e){return new Map(JSON.parse(JSON.stringify(Array.from(e))))}static iterators(e){return[...e.keys()]}static listValues(e){return[...e.values()]}},Qo=class{constructor(e={}){this.allowedDomains=this.mapAllowedDomains(e.data?.allowed_domains||[])}mapAllowedDomains(e){return new Map(e.map((e=>[(0,x.Z)(),e])))}getSettings(){return this.allowedDomains}setSettings(e){this.allowedDomains=this.mapAllowedDomains(e)}};class el extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleSubmit=this.handleSubmit.bind(this),this.handleClose=this.handleClose.bind(this)}handleClose(){this.props.onClose()}async handleSubmit(e){e.preventDefault(),await this.props.onSubmit(),this.props.onClose()}get allowedDomains(){return this.props.adminSelfRegistrationContext.getAllowedDomains()}render(){const e=this.props.adminSelfRegistrationContext.isProcessing();return a.createElement(be,{title:this.props.t("Save self registration settings"),onClose:this.handleClose,disabled:e,className:"save-self-registration-settings-dialog"},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"form-content"},a.createElement(a.Fragment,null,a.createElement("label",null,a.createElement(C.c,null,"Allowed domains")),a.createElement("div",{className:"radiolist-alt"},a.createElement("div",{className:"input radio"},a.createElement("ul",{id:"domains-list"},this.allowedDomains&&Xo.iterators(this.allowedDomains).map((e=>a.createElement("li",{key:e},this.allowedDomains.get(e))))))))),a.createElement("div",{className:"warning message"},a.createElement(C.c,null,"Please review carefully this configuration.")),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{onClick:this.handleClose,disabled:e}),a.createElement(Ee,{value:this.props.t("Save"),disabled:e,processing:e,warning:!0}))))}}el.propTypes={context:d().any,onSubmit:d().func,adminSelfRegistrationContext:d().object,onClose:d().func,t:d().func};const tl=u(ol((0,k.Z)("common")(el)));class sl extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleSubmit=this.handleSubmit.bind(this),this.handleClose=this.handleClose.bind(this)}handleClose(){this.props.onClose()}async handleSubmit(e){e.preventDefault(),await this.props.onSubmit(),this.props.onClose()}render(){const e=this.props.adminSelfRegistrationContext.isProcessing();return a.createElement(be,{title:this.props.t("Disable self registration"),onClose:this.handleClose,disabled:e,className:"delete-self-registration-settings-dialog"},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"form-content"},a.createElement("p",null,a.createElement(C.c,null,"Are you sure to disable the self registration for the organization ?")),a.createElement("p",null,a.createElement(C.c,null,"Users will not be able to self register anymore.")," ",a.createElement(C.c,null,"Only administrators would be able to invite users to register. "))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{onClick:this.handleClose,disabled:e}),a.createElement(Ee,{value:this.props.t("Save"),disabled:e,processing:e,warning:!0}))))}}sl.propTypes={adminSelfRegistrationContext:d().object,onClose:d().func,onSubmit:d().func,t:d().func};const al=ol((0,k.Z)("common")(sl));function nl(){return nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},nl.apply(this,arguments)}const rl=a.createContext({getCurrentSettings:()=>{},getAllowedDomains:()=>{},setAllowedDomains:()=>{},hasSettingsChanges:()=>{},setDomains:()=>{},findSettings:()=>{},setProcessing:()=>{},isProcessing:()=>{},clearContext:()=>{},isSubmitted:()=>{},setSubmitted:()=>{},setErrors:()=>{},getErrors:()=>{},setError:()=>{},save:()=>{},delete:()=>{},shouldFocus:()=>{},setFocus:()=>{},isSaved:()=>{},setSaved:()=>{},validateForm:()=>{}});class il extends a.Component{constructor(e){super(e),this.state=this.defaultState;const t=e.context.getApiClientOptions();this.selfRegistrationService=new class{constructor(e){this.apiClientOptions=e}async find(){this.initClient();const e=(await this.apiClient.findAll())?.body;return e}async save(e){this.initClient(),await this.apiClient.create(e)}async delete(e){this.initClient(),await this.apiClient.delete(e)}async checkDomainAllowed(e){this.initClient("dry-run"),await this.apiClient.create(e)}initClient(e="settings"){this.apiClientOptions.setResourceName(`self-registration/${e}`),this.apiClient=new hs(this.apiClientOptions)}}(t),this.selfRegistrationFormService=new class{constructor(e){this.translate=e}fields=new Map;async validate(e){return this.fields=e,this.validateInputs()}validateInputs(){const e=new Map;return this.fields.forEach(((t,s)=>{this.validateInput(s,t,e)})),e}async validateInput(e,t,s){if(t.length)try{Jo.checkDomainValidity(t)}catch{s.set(e,this.translate("This should be a valid domain"))}else s.set(e,this.translate("A domain is required."));this.checkDuplicateValue(s)}checkDuplicateValue(e){this.fields.forEach(((t,s)=>{Xo.listValues(this.fields).filter((e=>e===t&&""!==e)).length>1&&e.set(s,this.translate("This domain already exist"))}))}}(this.props.t)}get defaultState(){return{errors:new Map,submitted:!1,currentSettings:null,focus:!1,saved:!1,domains:new Qo,processing:!0,getCurrentSettings:this.getCurrentSettings.bind(this),getAllowedDomains:this.getAllowedDomains.bind(this),setAllowedDomains:this.setAllowedDomains.bind(this),setDomains:this.setDomains.bind(this),findSettings:this.findSettings.bind(this),hasSettingsChanges:this.hasSettingsChanges.bind(this),isProcessing:this.isProcessing.bind(this),setProcessing:this.setProcessing.bind(this),clearContext:this.clearContext.bind(this),isSubmitted:this.isSubmitted.bind(this),setSubmitted:this.setSubmitted.bind(this),getErrors:this.getErrors.bind(this),setError:this.setError.bind(this),setErrors:this.setErrors.bind(this),save:this.save.bind(this),shouldFocus:this.shouldFocus.bind(this),setFocus:this.setFocus.bind(this),isSaved:this.isSaved.bind(this),setSaved:this.setSaved.bind(this),deleteSettings:this.deleteSettings.bind(this),validateForm:this.validateForm.bind(this)}}async findSettings(e=(()=>{})){this.setProcessing(!0);const t=await this.selfRegistrationService.find();this.setState({currentSettings:t});const s=new Qo(t);this.setDomains(s,e),this.setProcessing(!1)}getCurrentSettings(){return this.state.currentSettings}getAllowedDomains(){return this.state.domains.allowedDomains}setAllowedDomains(e,t,s=(()=>{})){this.setState((s=>{const a=Xo.clone(s.domains.allowedDomains);return a.set(e,t),{domains:{allowedDomains:a}}}),s)}setDomains(e,t=(()=>{})){this.setState({domains:e},t)}isProcessing(){return this.state.processing}setProcessing(e){this.setState({processing:e})}isSubmitted(){return this.state.submitted}setSubmitted(e){this.setState({submitted:e}),this.setFocus(e)}getErrors(){return this.state.errors}shouldFocus(){return this.state.focus}setFocus(e){this.setState({focus:e})}setError(e,t){this.setState((s=>{const a=Xo.clone(s.errors);return a.set(e,t),{errors:a}}))}setErrors(e){this.setState({errors:e})}hasSettingsChanges(){const e=this.state.currentSettings?.data?.allowed_domains||[],t=Xo.listValues(this.state.domains.allowedDomains);return JSON.stringify(e)!==JSON.stringify(t)}clearContext(){const{currentSettings:e,domains:t,processing:s}=this.defaultState;this.setState({currentSettings:e,domains:t,processing:s})}async save(){this.setSubmitted(!0),await this.validateForm()&&(this.hasSettingsChanges()&&0===this.getAllowedDomains().size?this.displayConfirmDeletionDialog():this.displayConfirmSummaryDialog())}async validateForm(){const e=await this.selfRegistrationFormService.validate(this.state.getAllowedDomains());return this.state.setErrors(e),0===e.size}async handleSubmitError(e){"UserAbortsOperationError"!==e.name&&(console.error(e),await this.handleError(e))}async saveSettings(){try{this.setProcessing(!0);const e=new class{constructor(e,t={}){this.id=t.id,this.provider=t.provider||"email_domains",this.data=this.mapData(e?.allowedDomains)}mapData(e=new Map){return{allowed_domains:Array.from(e.values())}}}(this.state.domains,this.state.currentSettings);await this.selfRegistrationService.save(e),await this.findSettings((()=>this.setSaved(!0))),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The self registration settings for the organization were updated."))}catch(e){this.handleSubmitError(e)}finally{this.setProcessing(!1),this.setSubmitted(!1)}}async handleError(e){this.handleCloseDialog();const t={error:e};this.props.dialogContext.open(we,t)}handleCloseDialog(){this.props.dialogContext.close()}displayConfirmSummaryDialog(){this.props.dialogContext.open(tl,{domains:this.getAllowedDomains(),onSubmit:()=>this.saveSettings(),onClose:()=>this.handleCloseDialog()})}displayConfirmDeletionDialog(){this.props.dialogContext.open(al,{onSubmit:()=>this.deleteSettings(),onClose:()=>this.handleCloseDialog()})}async deleteSettings(){try{this.setProcessing(!0),await this.selfRegistrationService.delete(this.state.currentSettings.id),await this.findSettings(),await this.props.actionFeedbackContext.displaySuccess(this.props.t("The self registration settings for the organization were updated."))}catch(e){this.handleSubmitError(e)}finally{this.setProcessing(!1),this.setSubmitted(!1)}}isSaved(){return this.state.saved}setSaved(e){return this.setState({saved:e})}render(){return a.createElement(rl.Provider,{value:this.state},this.props.children)}}function ol(e){return class extends a.Component{render(){return a.createElement(rl.Consumer,null,(t=>a.createElement(e,nl({adminSelfRegistrationContext:t},this.props))))}}}il.propTypes={context:d().any,children:d().any,t:d().any,dialogContext:d().any,actionFeedbackContext:d().object},u(M(D((0,k.Z)("common")(il))));class ll extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleSave=this.handleSave.bind(this)}get allowedDomains(){return this.props.adminSelfRegistrationContext.getAllowedDomains()}isSaveEnabled(){let e=!1;return this.props.adminSelfRegistrationContext.getCurrentSettings()?.provider||(e=!this.props.adminSelfRegistrationContext.hasSettingsChanges()),!this.props.adminSelfRegistrationContext.isProcessing()&&!e}async handleSave(){this.isSaveEnabled()&&this.props.adminSelfRegistrationContext.save()}render(){return a.createElement("div",{className:"col2_3 actions-wrapper"},a.createElement("div",{className:"actions"},a.createElement("div",null,a.createElement("li",null,a.createElement("a",{className:`button ${this.isSaveEnabled()||"disabled"}`,id:"save-settings",onClick:this.handleSave},a.createElement(de,{name:"save"}),a.createElement("span",null,a.createElement(C.c,null,"Save settings")))))))}}ll.propTypes={adminSelfRegistrationContext:d().object,t:d().func};const cl=(0,k.Z)("common")(ol(ll)),ml=new Map;function dl(e){if("string"!=typeof e)return console.warn("useDynamicRefs: Cannot set ref without key");const t=a.createRef();return ml.set(e,t),t}function hl(e){return e?ml.get(e):console.warn("useDynamicRefs: Cannot get ref without key")}class pl extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.dynamicRefs={getRef:hl,setRef:dl},this.checkForPublicDomainDebounce=Z()(this.checkForWarnings,300),this.bindCallbacks()}async componentDidMount(){this.props.administrationWorkspaceContext.setDisplayAdministrationWorkspaceAction(cl),await this.findSettings()}componentDidUpdate(){this.shouldFocusOnError(),this.shouldCheckWarnings()}componentWillUnmount(){this.props.administrationWorkspaceContext.resetDisplayAdministrationWorkspaceAction(),this.props.adminSelfRegistrationContext.clearContext()}get defaultState(){return{isEnabled:!1,warnings:new Map}}bindCallbacks(){this.handleToggleClicked=this.handleToggleClicked.bind(this),this.handleAddRowClick=this.handleAddRowClick.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleDeleteRow=this.handleDeleteRow.bind(this)}get currentUser(){return this.props.context.loggedInUser}get allowedDomains(){return this.props.adminSelfRegistrationContext.getAllowedDomains()}async findSettings(){await this.props.adminSelfRegistrationContext.findSettings(),this.setState({isEnabled:this.allowedDomains.size>0}),await this.checkForWarnings(),await this.validateForm()}async checkForWarnings(e=(()=>{})){this.setState({warnings:new Map},(async()=>{this.allowedDomains.forEach(((e,t)=>this.checkDomainIsProfessional(t,e))),e()}))}async setupSettings(){if(this.props.adminSelfRegistrationContext.setDomains(new Qo(this.props.adminSelfRegistrationContext.getCurrentSettings())),await this.checkForWarnings(),0===this.allowedDomains.size){const e=Jo.extractDomainFromEmail(this.currentUser?.username);Jo.checkDomainValidity(e),this.populateUserDomain(e)}}shouldFocusOnError(){const e=this.props.adminSelfRegistrationContext.shouldFocus(),[t]=this.props.adminSelfRegistrationContext.getErrors().keys();t&&e&&(this.dynamicRefs.getRef(t).current.focus(),this.props.adminSelfRegistrationContext.setFocus(!1))}async shouldCheckWarnings(){this.props.adminSelfRegistrationContext.isSaved()&&(this.props.adminSelfRegistrationContext.setSaved(!1),await this.checkForWarnings())}populateUserDomain(e){const t=Jo.isProfessional(e)?e:"";this.addRow(t)}addRow(e=""){const t=(0,x.Z)();this.props.adminSelfRegistrationContext.setAllowedDomains(t,e,(()=>{this.dynamicRefs.getRef(t)?.current.focus()}))}handleDeleteRow(e){if(this.canDelete()){const t=this.allowedDomains;t.delete(e),this.props.adminSelfRegistrationContext.setDomains({allowedDomains:t}),this.validateForm(),this.checkForWarnings()}}hasWarnings(){return this.state.warnings.size>0}hasAllInputDisabled(){return this.props.adminSelfRegistrationContext.isProcessing()}handleToggleClicked(){this.setState({isEnabled:!this.state.isEnabled},(()=>{this.state.isEnabled?this.setupSettings():(this.props.adminSelfRegistrationContext.setDomains({allowedDomains:new Map}),this.props.adminSelfRegistrationContext.setErrors(new Map))}))}handleAddRowClick(){this.addRow()}checkDomainIsProfessional(e,t){this.setState((s=>{const a=Xo.clone(s.warnings);return Jo.isProfessional(t)?a.delete(e):a.set(e,"This is not a safe professional domain"),{warnings:a}}))}handleInputChange(e){const t=e.target.value,s=e.target.name;this.props.adminSelfRegistrationContext.setAllowedDomains(s,t,(()=>this.validateForm())),this.checkForPublicDomainDebounce()}async validateForm(){await this.props.adminSelfRegistrationContext.validateForm()}canDelete(){return this.allowedDomains.size>1}render(){const e=this.props.adminSelfRegistrationContext.isSubmitted(),t=this.props.adminSelfRegistrationContext.getErrors();return a.createElement("div",{className:"row"},a.createElement("div",{className:"self-registration col7 main-column"},a.createElement("h3",null,a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"settings-toggle",onChange:this.handleToggleClicked,checked:this.state.isEnabled,disabled:this.hasAllInputDisabled(),id:"settings-toggle"}),a.createElement("label",{htmlFor:"settings-toggle"},a.createElement(C.c,null,"Self Registration")))),this.props.adminSelfRegistrationContext.hasSettingsChanges()&&a.createElement("div",{className:"warning message",id:"self-registration-setting-overridden-banner"},a.createElement("p",null,a.createElement(C.c,null,"Don't forget to save your settings to apply your modification."))),!this.state.isEnabled&&a.createElement("p",{className:"description",id:"disabled-description"},a.createElement(C.c,null,"User self registration is disabled.")," ",a.createElement(C.c,null,"Only administrators can invite users to register.")),this.state.isEnabled&&a.createElement(a.Fragment,null,a.createElement("div",{id:"self-registration-subtitle",className:`input ${this.hasWarnings()&&"warning"} ${e&&t.size>0&&"error"}`},a.createElement("label",{id:"enabled-label"},a.createElement(C.c,null,"Email domain safe list"))),a.createElement("p",{className:"description",id:"enabled-description"},a.createElement(C.c,null,"All the users with an email address ending with the domain in the safe list are allowed to register on passbolt.")),Xo.iterators(this.allowedDomains).map((s=>a.createElement("div",{key:s,className:"input"},a.createElement("div",{className:"domain-row"},a.createElement("input",{type:"text",className:"full-width",onChange:this.handleInputChange,id:`input-${s}`,name:s,value:this.allowedDomains.get(s),disabled:!this.hasAllInputDisabled,ref:this.dynamicRefs.setRef(s),placeholder:this.props.t("domain")}),a.createElement("a",{className:`button button-icon ${this.canDelete()||"disabled"}`,id:`delete-${s}`,onClick:()=>this.handleDeleteRow(s)},a.createElement(de,{name:"trash"}))),this.hasWarnings()&&this.state.warnings.get(s)&&a.createElement("div",{id:"domain-name-input-feedback",className:"warning-message"},a.createElement(C.c,null,this.state.warnings.get(s))),t.get(s)&&e&&a.createElement("div",{className:"error-message"},a.createElement(C.c,null,t.get(s)))))),a.createElement("div",{className:"domain-add"},a.createElement("a",{className:"button",onClick:this.handleAddRowClick},a.createElement(de,{name:"add"}),a.createElement("span",null,a.createElement(C.c,null,"Add")))))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"What is user self registration?")),a.createElement("p",null,a.createElement(C.c,null,"User self registration enables users with an email from a whitelisted domain to create their passbolt account without prior admin invitation.")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/configure/self-registration",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"document"}),a.createElement("span",null,a.createElement(C.c,null,"Read the documentation"))))))}}pl.propTypes={dialogContext:d().any,context:d().any,adminSelfRegistrationContext:d().object,administrationWorkspaceContext:d().object,t:d().func};const ul=u(M(ol(Xn((0,k.Z)("common")(pl))))),gl=[{id:"azure",name:"Microsoft",icon:a.createElement("svg",{width:"65",height:"64",viewBox:"0 0 65 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M31.3512 3.04762H3.92261V30.4762H31.3512V3.04762Z",fill:"#F25022"}),a.createElement("path",{d:"M31.3512 33.5238H3.92261V60.9524H31.3512V33.5238Z",fill:"#00A4EF"}),a.createElement("path",{d:"M61.8274 3.04762H34.3988V30.4762H61.8274V3.04762Z",fill:"#7FBA00"}),a.createElement("path",{d:"M61.8274 33.5238H34.3988V60.9524H61.8274V33.5238Z",fill:"#FFB900"})),defaultConfig:{url:"https://login.microsoftonline.com"}},{id:"google",name:"Google",disabled:!0,icon:a.createElement("svg",{width:"65",height:"64",viewBox:"0 0 65 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M63.9451 32.72C63.9451 30.6133 63.7584 28.6133 63.4384 26.6667H33.3051V38.6933H50.5584C49.7851 42.64 47.5184 45.9733 44.1584 48.24V56.24H54.4517C60.4784 50.6667 63.9451 42.4533 63.9451 32.72Z",fill:"#4285F4"}),a.createElement("path",{d:"M33.305 64C41.945 64 49.1717 61.12 54.4517 56.24L44.1583 48.24C41.2783 50.16 37.625 51.3333 33.305 51.3333C24.9583 51.3333 17.8917 45.7067 15.3583 38.1067H4.745V46.3467C9.99833 56.8 20.7983 64 33.305 64Z",fill:"#34A853"}),a.createElement("path",{d:"M15.3584 38.1067C14.6917 36.1867 14.3451 34.1333 14.3451 32C14.3451 29.8667 14.7184 27.8133 15.3584 25.8933V17.6533H4.74505C2.55838 21.9733 1.30505 26.8267 1.30505 32C1.30505 37.1733 2.55838 42.0267 4.74505 46.3467L15.3584 38.1067Z",fill:"#FBBC05"}),a.createElement("path",{d:"M33.305 12.6667C38.025 12.6667 42.2383 14.2933 45.5717 17.4667L54.6917 8.34667C49.1717 3.17334 41.945 0 33.305 0C20.7983 0 9.99833 7.20001 4.745 17.6533L15.3583 25.8933C17.8917 18.2933 24.9583 12.6667 33.305 12.6667Z",fill:"#EA4335"}))}],fl="form",bl="success";class yl extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{uiState:fl,hasSuccessfullySignedInWithSso:!1,processing:!1,ssoToken:null}}bindCallbacks(){this.handleSignInTestClick=this.handleSignInTestClick.bind(this),this.handleActivateSsoSettings=this.handleActivateSsoSettings.bind(this),this.handleCloseDialog=this.handleCloseDialog.bind(this)}async handleSignInTestClick(e){e.preventDefault();try{this.setState({processing:!0});const e=await this.props.context.port.request(`passbolt.sso.test.${this.props.provider.id}`,this.props.configurationId);this.setState({uiState:bl,hasSuccessfullySignedInWithSso:!0,ssoToken:e})}catch(e){"UserAbortsOperationError"!==e?.name&&this.props.adminSsoContext.handleError(e)}this.setState({processing:!1})}async handleActivateSsoSettings(e){e.preventDefault();try{this.setState({processing:!0}),await this.props.context.port.request("passbolt.sso.activate-settings",this.props.configurationId,this.state.ssoToken),await this.props.context.port.request("passbolt.sso.generate-sso-kit",this.props.provider.id),this.props.onSuccessfulSettingsActivation(),this.handleCloseDialog(),await this.props.actionFeedbackContext.displaySuccess(this.props.t("SSO settings have been registered successfully"))}catch(e){this.props.adminSsoContext.handleError(e)}this.setState({processing:!1})}handleCloseDialog(){this.props.onClose(),this.props.handleClose()}hasAllInputDisabled(){return this.state.processing}canSaveSettings(){return!this.hasAllInputDisabled()&&this.state.hasSuccessfullySignedInWithSso}get title(){return{form:this.translate("Test Single Sign-On configuration"),success:this.translate("Save Single Sign-On configuration")}[this.state.uiState]||""}get translate(){return this.props.t}render(){return a.createElement(be,{className:"test-sso-settings-dialog sso-login-form",title:this.title,onClose:this.handleCloseDialog,disabled:this.hasAllInputDisabled()},a.createElement("form",{onSubmit:this.handleActivateSsoSettings},a.createElement("div",{className:"form-content"},this.state.uiState===fl&&a.createElement(a.Fragment,null,a.createElement("p",null,a.createElement(C.c,null,"Before saving the settings, we need to test if the configuration is working.")),a.createElement("a",{className:`button sso-login-button ${this.hasAllInputDisabled()?"disabled":""} ${this.props.provider.id}`,onClick:this.handleSignInTestClick,disabled:this.hasAllInputDisabled()},a.createElement("span",{className:"provider-logo"},this.props.provider.icon),this.translate("Sign in with {{providerName}}",{providerName:this.props.provider.name}))),this.state.uiState===bl&&a.createElement("p",null,this.translate("You susccessfully signed in with your {{providerName}} account. You can safely save your configuration.",{providerName:this.props.provider.name}))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleCloseDialog}),a.createElement(Ee,{disabled:!this.canSaveSettings(),processing:this.state.processing,value:this.translate("Save settings")}))))}}yl.propTypes={context:d().object,adminSsoContext:d().object,onClose:d().func,t:d().func,provider:d().object,configurationId:d().string,actionFeedbackContext:d().any,handleClose:d().func,onSuccessfulSettingsActivation:d().func};const El=u(Rl(D((0,k.Z)("common")(yl))));class vl extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{processing:!1}}bindCallbacks(){this.handleConfirmDelete=this.handleConfirmDelete.bind(this)}async handleConfirmDelete(e){e.preventDefault(),this.setState({processing:!0}),await this.props.adminSsoContext.deleteSettings(),this.props.onClose(),this.setState({processing:!1})}hasAllInputDisabled(){return this.state.processing}render(){const e=this.hasAllInputDisabled();return a.createElement(be,{className:"delete-sso-settings-dialog",title:this.props.t("Disable Single Sign-On settings?"),onClose:this.props.onClose,disabled:e},a.createElement("form",{onSubmit:this.handleConfirmDelete,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("p",null,a.createElement(C.c,null,"Are you sure you want to disable the current Single Sign-On settings?")),a.createElement("p",null,a.createElement(C.c,null,"This action cannot be undone. All the data associated with SSO will be permanently deleted."))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:e,onClick:this.props.onClose}),a.createElement(Ee,{warning:!0,disabled:e,processing:this.state.processing,value:this.props.t("Disable")}))))}}vl.propTypes={adminSsoContext:d().object,onClose:d().func,t:d().func};const Cl=Rl((0,k.Z)("common")(vl));function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},kl.apply(this,arguments)}const wl=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[0-5][a-fA-F0-9]{3}-[089aAbB][a-fA-F0-9]{3}-[a-fA-F0-9]{12}$/,Sl=a.createContext({ssoConfig:null,isProcessing:()=>{},loadSsoConfiguration:()=>{},getSsoConfiguration:()=>{},isSsoConfigActivated:()=>{},isDataReady:()=>{},save:()=>{},disableSso:()=>{},hasFormChanged:()=>{},validateData:()=>{},saveAndTestConfiguration:()=>{},openTestDialog:()=>{},handleError:()=>{},getErrors:()=>{},deleteSettings:()=>{},showDeleteConfirmationDialog:()=>{},shouldFocusOnError:()=>{}});class xl extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks(),this.isSsoConfigExisting=!1,this.hasError=!1}get defaultState(){return{ssoConfig:this.defaultSsoSettings,errors:{},isLoaded:!1,hasSettingsChanged:!1,processing:!1,getErrors:this.getErrors.bind(this),hasFormChanged:this.hasFormChanged.bind(this),isProcessing:this.isProcessing.bind(this),isDataReady:this.isDataReady.bind(this),loadSsoConfiguration:this.loadSsoConfiguration.bind(this),getSsoConfiguration:this.getSsoConfiguration.bind(this),isSsoConfigActivated:this.isSsoConfigActivated.bind(this),changeProvider:this.changeProvider.bind(this),disableSso:this.disableSso.bind(this),setValue:this.setValue.bind(this),validateData:this.validateData.bind(this),saveAndTestConfiguration:this.saveAndTestConfiguration.bind(this),handleError:this.handleError.bind(this),deleteSettings:this.deleteSettings.bind(this),canDeleteSettings:this.canDeleteSettings.bind(this),showDeleteConfirmationDialog:this.showDeleteConfirmationDialog.bind(this),shouldFocusOnError:this.shouldFocusOnError.bind(this)}}get defaultSsoSettings(){return{provider:null,data:{url:"",client_id:"",tenant_id:"",client_secret:"",client_secret_expiry:""}}}bindCallbacks(){this.handleTestConfigCloseDialog=this.handleTestConfigCloseDialog.bind(this),this.handleSettingsActivation=this.handleSettingsActivation.bind(this)}async loadSsoConfiguration(){let e=null;try{e=await this.props.context.port.request("passbolt.sso.get-current")}catch(e){this.props.dialogContext.open(we,{error:e})}this.isSsoConfigExisting=Boolean(e?.provider),this.setState({ssoConfig:e,isLoaded:!0})}isSsoSettingsExisting(){return this.state.ssoConfig?.provider}getSsoConfiguration(){return this.state.ssoConfig}getSsoConfigurationDto(){const e=this.getSsoConfiguration(),t=e.data;return{provider:e.provider,data:{url:t.url,client_id:t.client_id,tenant_id:t.tenant_id,client_secret:t.client_secret,client_secret_expiry:t.client_secret_expiry}}}isSsoConfigActivated(){return Boolean(this.state.ssoConfig?.provider)}hasFormChanged(){return this.state.hasSettingsChanged}setValue(e,t){const s=this.getSsoConfiguration();s.data[e]=t,this.setState({ssoConfig:s,hasSettingsChanged:!0})}disableSso(){const e=Object.assign({},this.state.ssoConfig,{provider:null,data:{}});this.setState({ssoConfig:e})}isDataReady(){return this.state.isLoaded}isProcessing(){return this.state.processing}changeProvider(e){if(e.disabled)return;const t=gl.find((t=>t.id===e.id));this.setState({ssoConfig:{provider:t.id,data:Object.assign({},this.state.ssoConfig.data,t?.defaultConfig)}})}getErrors(){return this.state.errors}validateData(){const e=this.state.getSsoConfiguration(),t={};if(!this.validate_provider(e.provider,t))return this.setState({errors:t,hasSumittedForm:!0}),!1;const s=this[`validateDataFromProvider_${e.provider}`](e.data,t);return this.setState({errors:t,hasSumittedForm:!0}),s}validate_provider(e,t){const s=gl.find((t=>t.id===e));return s||(t.provider=this.props.t("The Single Sign-On provider must be a supported provider.")),s}validateDataFromProvider_azure(e,t){const{url:s,client_id:a,tenant_id:n,client_secret:r,client_secret_expiry:i}=e;let o=!0;return s&&s?.length?this.isValidUrl(s)||(t.url=this.props.t("The Login URL must be a valid URL"),o=!1):(t.url=this.props.t("The Login URL is required"),o=!1),a&&a?.length?this.isValidUuid(a)||(t.client_id=this.props.t("The Application (client) ID must be a valid UUID"),o=!1):(t.client_id=this.props.t("The Application (client) ID is required"),o=!1),n&&n?.length?this.isValidUuid(n)||(t.tenant_id=this.props.t("The Directory (tenant) ID must be a valid UUID"),o=!1):(t.tenant_id=this.props.t("The Directory (tenant) ID is required"),o=!1),r&&r?.length||(t.client_secret=this.props.t("The Secret is required"),o=!1),i||(t.client_secret_expiry=this.props.t("The Secret expiry is required"),o=!1),this.hasError=!0,o}shouldFocusOnError(){const e=this.hasError;return this.hasError=!1,e}isValidUrl(e){try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){return!1}}isValidUuid(e){return wl.test(e)}async saveAndTestConfiguration(){this.setState({processing:!0});const e=this.getSsoConfigurationDto();let t;try{t=await this.props.context.port.request("passbolt.sso.save-draft",e)}catch(e){return this.handleError(e),void this.setState({processing:!1})}await this.runTestConfig(t);const s=Object.assign({},this.state.ssoConfig,t);this.setState({ssoConfig:s})}canDeleteSettings(){const e=this.getSsoConfiguration();return this.isSsoConfigExisting&&null===e.provider}showDeleteConfirmationDialog(){this.props.dialogContext.open(Cl)}async deleteSettings(){this.setState({processing:!0});try{const e=this.getSsoConfiguration();await this.props.context.port.request("passbolt.sso.delete-settings",e.id),this.props.actionFeedbackContext.displaySuccess(this.props.t("The SSO settings has been deleted successfully")),this.isSsoConfigExisting=!1,this.setState({ssoConfig:this.defaultSsoSettings,processing:!1})}catch(e){this.handleError(e),this.setState({processing:!1})}}async runTestConfig(e){const t=gl.find((t=>t.id===e.provider));this.props.dialogContext.open(El,{provider:t,configurationId:e.id,handleClose:this.handleTestConfigCloseDialog,onSuccessfulSettingsActivation:this.handleSettingsActivation})}handleTestConfigCloseDialog(){this.setState({processing:!1})}handleSettingsActivation(){this.setState({hasSettingsChanged:!1})}handleError(e){console.error(e),this.props.dialogContext.open(we,{error:e})}render(){return a.createElement(Sl.Provider,{value:this.state},this.props.children)}}xl.propTypes={context:d().any,children:d().any,accountRecoveryContext:d().object,dialogContext:d().object,actionFeedbackContext:d().object,t:d().func};const Nl=u(D(M((0,k.Z)("common")(xl))));function Rl(e){return class extends a.Component{render(){return a.createElement(Sl.Consumer,null,(t=>a.createElement(e,kl({adminSsoContext:t},this.props))))}}}class Il extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleSaveClick=this.handleSaveClick.bind(this)}async handleSaveClick(){const e=this.props.adminSsoContext;e.canDeleteSettings()?e.showDeleteConfirmationDialog():e.validateData()&&await e.saveAndTestConfiguration()}isSaveEnabled(){return this.props.adminSsoContext.hasFormChanged()||this.props.adminSsoContext.canDeleteSettings()}render(){return a.createElement("div",{className:"col2_3 actions-wrapper"},a.createElement("div",{className:"actions"},a.createElement("div",null,a.createElement("li",null,a.createElement("a",{className:"button "+(this.isSaveEnabled()?"":"disabled"),onClick:this.handleSaveClick},a.createElement(de,{name:"save"}),a.createElement("span",null,a.createElement(C.c,null,"Save settings")))))))}}Il.propTypes={adminSsoContext:d().object};const Dl=Rl((0,k.Z)("common")(Il));class Tl extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks(),this.createRefs()}get defaultState(){return{loading:!0,providers:[]}}async componentDidMount(){this.props.administrationWorkspaceContext.setDisplayAdministrationWorkspaceAction(Dl),await this.props.adminSsoContext.loadSsoConfiguration(),this.setState({loading:!1,providers:this.props.adminSsoContext.getSsoConfiguration()?.providers||[]})}componentDidUpdate(){if(!this.props.adminSsoContext.shouldFocusOnError())return;const e=this.props.adminSsoContext.getErrors();switch(this.getFirstFieldInError(e,["url","client_id","tenant_id","client_secret","client_secret_expiry"])){case"url":this.urlInputRef.current.focus();break;case"client_id":this.clientIdInputRef.current.focus();break;case"tenant_id":this.tenantIdInputRef.current.focus();break;case"client_secret":this.clientSecretInputRef.current.focus();break;case"client_secret_expiry":this.clientSecretExpiryInputRef.current.focus()}}bindCallbacks(){this.handleInputChange=this.handleInputChange.bind(this),this.handleProviderInputChange=this.handleProviderInputChange.bind(this),this.handleSsoSettingToggle=this.handleSsoSettingToggle.bind(this),this.handleCopyRedirectUrl=this.handleCopyRedirectUrl.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}createRefs(){this.urlInputRef=a.createRef(),this.clientIdInputRef=a.createRef(),this.tenantIdInputRef=a.createRef(),this.clientSecretInputRef=a.createRef(),this.clientSecretExpiryInputRef=a.createRef()}handleInputChange(e){const t=e.target,s="checkbox"===t.type?t.checked:t.value,a=t.name;this.props.adminSsoContext.setValue(a,s)}handleProviderInputChange(e){this.props.adminSsoContext.changeProvider({id:e.target.value})}handleSsoSettingToggle(){this.props.adminSsoContext.disableSso()}async handleCopyRedirectUrl(){await navigator.clipboard.writeText(this.fullRedirectUrl),await this.props.actionFeedbackContext.displaySuccess(this.translate("The redirection URL has been copied to the clipboard."))}async handleFormSubmit(e){e.preventDefault();const t=this.props.adminSsoContext;t.hasFormChanged()&&t.validateData()&&await t.saveAndTestConfiguration()}hasAllInputDisabled(){return this.props.adminSsoContext.isProcessing()||this.state.loading}get supportedSsoProviders(){return this.state.providers.map((e=>{const t=gl.find((t=>t.id===e));if(t&&!t.disabled)return{value:t.id,label:t.name}}))}get fullRedirectUrl(){const e=this.props.adminSsoContext.getSsoConfiguration();return`${this.props.context.userSettings.getTrustedDomain()}/sso/${e?.provider}/redirect`}isReady(){return this.props.adminSsoContext.isDataReady()}getFirstFieldInError(e,t){for(let s=0;s<t.length;s++){const a=t[s];if(void 0!==e[a])return a}return null}get translate(){return this.props.t}render(){const e=this.props.adminSsoContext,t=e.getSsoConfiguration(),s=e.isSsoConfigActivated(),n=e.getErrors();return a.createElement("div",{className:"row"},a.createElement("div",{className:"third-party-provider-settings sso-settings col8 main-column"},a.createElement("h3",null,a.createElement("span",{className:"input toggle-switch form-element"},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"ssoToggle",onChange:this.handleSsoSettingToggle,checked:s,disabled:this.hasAllInputDisabled(),id:"ssoToggle"}),a.createElement("label",{htmlFor:"ssoToggle"},a.createElement(C.c,null,"Single Sign-On")))),this.props.adminSsoContext.hasFormChanged()&&a.createElement("div",{className:"warning message",id:"sso-setting-overridden-banner"},a.createElement("p",null,a.createElement(C.c,null,"Warning, Don't forget to save your settings to apply your modification."))),this.isReady()&&!s&&a.createElement(a.Fragment,null,a.createElement("h4",{className:"no-border"},a.createElement(C.c,null,"Select a provider")),a.createElement("div",{className:"provider-list"},gl.map((e=>a.createElement("div",{key:e.id,className:"provider button "+(e.disabled?"disabled":""),id:e.id,onClick:()=>this.props.adminSsoContext.changeProvider(e)},a.createElement("div",{className:"provider-logo"},e.icon),a.createElement("p",{className:"provider-name"},e.name,a.createElement("br",null),e.disabled&&a.createElement(C.c,null,"(not yet available)"))))))),this.isReady()&&s&&a.createElement("form",{className:"form",onSubmit:this.handleFormSubmit},a.createElement("div",{className:"select-wrapper input"},a.createElement("label",{htmlFor:"sso-provider-input"},a.createElement(C.c,null,"Single Sign-On provider")),a.createElement(qe,{id:"sso-provider-input",name:"provider",items:this.supportedSsoProviders,value:t?.provider,onChange:this.handleProviderInputChange})),"azure"===t?.provider&&a.createElement(a.Fragment,null,a.createElement("hr",null),a.createElement("div",{className:"input text required "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Login URL")),a.createElement("input",{id:"sso-azure-url-input",type:"text",className:"fluid form-element",name:"url",ref:this.urlInputRef,value:t?.data?.url,onChange:this.handleInputChange,placeholder:this.translate("Login URL"),disabled:this.hasAllInputDisabled()}),n.url&&a.createElement("div",{className:"error-message"},n.url),a.createElement("p",null,a.createElement(C.c,null,"The Azure AD authentication endpoint. See ",a.createElement("a",{href:"https://learn.microsoft.com/en-us/azure/active-directory/develop/authentication-national-cloud#azure-ad-authentication-endpoints",rel:"noopener noreferrer",target:"_blank"},"alternatives"),"."))),a.createElement("div",{className:"input text input-wrapper "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Redirect URL")),a.createElement("div",{className:"button-inline"},a.createElement("input",{id:"sso-redirect-url-input",type:"text",className:"fluid form-element disabled",name:"redirect_url",value:this.fullRedirectUrl,placeholder:this.translate("Redirect URL"),readOnly:!0,disabled:!0}),a.createElement("a",{onClick:this.handleCopyRedirectUrl,className:"copy-to-clipboard button button-icon"},a.createElement(de,{name:"copy-to-clipboard"}))),a.createElement("p",null,a.createElement(C.c,null,"The URL to provide to Azure when registering the application."))),a.createElement("hr",null),a.createElement("div",{className:"input text required "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Application (client) ID")),a.createElement("input",{id:"sso-azure-client-id-input",type:"text",className:"fluid form-element",name:"client_id",ref:this.clientIdInputRef,value:t?.data?.client_id,onChange:this.handleInputChange,placeholder:this.translate("Application (client) ID"),disabled:this.hasAllInputDisabled()}),n.client_id&&a.createElement("div",{className:"error-message"},n.client_id),a.createElement("p",null,a.createElement(C.c,null,"The public identifier for the app in Azure in UUID format.")," ",a.createElement("a",{href:"https://learn.microsoft.com/en-us/azure/healthcare-apis/register-application#application-id-client-id",rel:"noopener noreferrer",target:"_blank"},a.createElement(C.c,null,"Where to find it?")))),a.createElement("div",{className:"input text required "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Directory (tenant) ID")),a.createElement("input",{id:"sso-azure-tenant-id-input",type:"text",className:"fluid form-element",name:"tenant_id",ref:this.tenantIdInputRef,value:t?.data?.tenant_id,onChange:this.handleInputChange,placeholder:this.translate("Directory ID"),disabled:this.hasAllInputDisabled()}),n.tenant_id&&a.createElement("div",{className:"error-message"},n.tenant_id),a.createElement("p",null,a.createElement(C.c,null,"The Azure Active Directory tenant ID, in UUID format.")," ",a.createElement("a",{href:"https://learn.microsoft.com/en-gb/azure/active-directory/fundamentals/active-directory-how-to-find-tenant",rel:"noopener noreferrer",target:"_blank"},a.createElement(C.c,null,"Where to find it?")))),a.createElement("div",{className:"input text required "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Secret")),a.createElement(At,{id:"sso-azure-secret-input",className:"fluid form-element",onChange:this.handleInputChange,autoComplete:"off",name:"client_secret",placeholder:this.translate("Secret"),disabled:this.hasAllInputDisabled(),value:t?.data?.client_secret,preview:!0,inputRef:this.clientSecretInputRef}),n.client_secret&&a.createElement("div",{className:"error-message"},n.client_secret),a.createElement("p",null,a.createElement(C.c,null,"Allows Azure and Passbolt API to securely share information.")," ",a.createElement("a",{href:"https://learn.microsoft.com/en-us/azure/marketplace/create-or-update-client-ids-and-secrets#add-a-client-id-and-client-secret",rel:"noopener noreferrer",target:"_blank"},a.createElement(C.c,null,"Where to find it?")))),a.createElement("div",{className:"input text date-wrapper required "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",null,a.createElement(C.c,null,"Secret expiry")),a.createElement("div",{className:"button-inline"},a.createElement("input",{id:"sso-azure-secret-expiry-input",type:"date",className:"fluid form-element "+(t.data.client_secret_expiry?"":"empty"),name:"client_secret_expiry",ref:this.clientSecretExpiryInputRef,value:t?.data?.client_secret_expiry,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled()}),a.createElement(de,{name:"calendar"})),n.client_secret_expiry&&a.createElement("div",{className:"error-message"},n.client_secret_expiry)),a.createElement("div",{className:"warning message"},a.createElement(C.c,null,a.createElement("b",null,"Warning"),": This secret will expire after some time (typically a few months). Make sure you save the expiry date and rotate it on time."))))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Need some help?")),a.createElement("p",null,a.createElement(C.c,null,"For more information about SSO, checkout the dedicated page on the help website.")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/configure/sso",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"document"}),a.createElement("span",null,a.createElement(C.c,null,"Read the documentation")))),"azure"===t?.provider&&a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"How do I configure a AzureAD SSO?")),a.createElement("a",{className:"button",href:"https://docs.microsoft.com/en-us/azure/active-directory/manage-apps/add-application-portal-setup-sso",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"external-link"}),a.createElement("span",null,a.createElement(C.c,null,"Read the documentation"))))))}}Tl.propTypes={administrationWorkspaceContext:d().object,adminSsoContext:d().object,actionFeedbackContext:d().any,context:d().any,t:d().func};const Al=u(D(Xn(Rl((0,k.Z)("common")(Tl))))),Pl=class{constructor(e={remember_me_for_a_month:!1}){this.policy=e.policy,this.rememberMeForAMonth=e.remember_me_for_a_month}};function Ul(){return Ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Ul.apply(this,arguments)}const _l=a.createContext({getCurrentSettings:()=>{},getSettings:()=>{},setSettings:()=>{},hasSettingsChanges:()=>{},findSettings:()=>{},setProcessing:()=>{},isProcessing:()=>{},clearContext:()=>{},save:()=>{}});class Ll extends a.Component{constructor(e){super(e),this.state=this.defaultState;const t=e.context.getApiClientOptions();this.mfaPolicyService=new us(t)}get defaultState(){return{settings:new Pl,currentSettings:new Pl,processing:!0,getCurrentSettings:this.getCurrentSettings.bind(this),getSettings:this.getSettings.bind(this),setSettings:this.setSettings.bind(this),findSettings:this.findSettings.bind(this),hasSettingsChanges:this.hasSettingsChanges.bind(this),isProcessing:this.isProcessing.bind(this),setProcessing:this.setProcessing.bind(this),clearContext:this.clearContext.bind(this),save:this.save.bind(this)}}async findSettings(e=(()=>{})){this.setProcessing(!0);const t=await this.mfaPolicyService.find(),s=new Pl(t);this.setState({currentSettings:s}),this.setState({settings:s},e),this.setProcessing(!1)}async save(){this.setProcessing(!0);const e=new class{constructor(e={rememberMeForAMonth:!1}){this.policy=e.policy||"opt-in",this.remember_me_for_a_month=e.rememberMeForAMonth}}(this.state.settings);await this.mfaPolicyService.save(e),await this.findSettings()}getCurrentSettings(){return this.state.currentSettings}getSettings(){return this.state.settings}setSettings(e,t,s=(()=>{})){const a=Object.assign({},this.state.settings,{[e]:t});this.setState({settings:a},s)}isProcessing(){return this.state.processing}setProcessing(e){this.setState({processing:e})}hasSettingsChanges(){return JSON.stringify(this.state.currentSettings)!==JSON.stringify(this.state.settings)}clearContext(){const{currentSettings:e,settings:t,processing:s}=this.defaultState;this.setState({currentSettings:e,settings:t,processing:s})}render(){return a.createElement(_l.Provider,{value:this.state},this.props.children)}}function Fl(e){return class extends a.Component{render(){return a.createElement(_l.Consumer,null,(t=>a.createElement(e,Ul({adminMfaPolicyContext:t},this.props))))}}}Ll.propTypes={context:d().any,children:d().any,t:d().any,actionFeedbackContext:d().object},u(Ll);class Ml extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleSave=this.handleSave.bind(this)}isSaveEnabled(){return!this.props.adminMfaPolicyContext.isProcessing()}async handleSave(){if(this.isSaveEnabled())try{await this.props.adminMfaPolicyContext.save(),this.handleSaveSuccess()}catch(e){this.handleSaveError(e)}finally{this.props.adminMfaPolicyContext.setProcessing(!1)}}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.props.t("The MFA policy settings were updated."))}async handleSaveError(e){"UserAbortsOperationError"!==e.name&&(console.error(e),await this.props.actionFeedbackContext.displayError(e.message))}render(){return a.createElement("div",{className:"col2_3 actions-wrapper"},a.createElement("div",{className:"actions"},a.createElement("div",null,a.createElement("li",null,a.createElement("a",{className:`button ${this.isSaveEnabled()||"disabled"}`,id:"save-settings",onClick:this.handleSave},a.createElement(de,{name:"save"}),a.createElement("span",null,a.createElement(C.c,null,"Save settings")))))))}}Ml.propTypes={adminMfaPolicyContext:d().object,actionFeedbackContext:d().object,t:d().func};const Ol=Fl(D((0,k.Z)("common")(Ml)));class jl extends a.Component{constructor(e){super(e),this.bindCallbacks()}async componentDidMount(){this.props.administrationWorkspaceContext.setDisplayAdministrationWorkspaceAction(Ol),await this.findSettings()}componentWillUnmount(){this.props.administrationWorkspaceContext.resetDisplayAdministrationWorkspaceAction(),this.props.adminMfaPolicyContext.clearContext()}bindCallbacks(){this.handleInputChange=this.handleInputChange.bind(this)}async findSettings(){await this.props.adminMfaPolicyContext.findSettings()}async handleInputChange(e){const t=e.target.name;let s=e.target.value;"rememberMeForAMonth"===t&&(s=e.target.checked),this.props.adminMfaPolicyContext.setSettings(t,s)}hasAllInputDisabled(){return this.props.adminMfaPolicyContext.isProcessing()}render(){const e=this.props.adminMfaPolicyContext.getSettings();return a.createElement("div",{className:"row"},a.createElement("div",{className:"mfa-policy-settings col8 main-column"},a.createElement("h3",{id:"mfa-policy-settings-title"},a.createElement(C.c,null,"MFA Policy")),this.props.adminMfaPolicyContext.hasSettingsChanges()&&a.createElement("div",{className:"warning message",id:"mfa-policy-setting-banner"},a.createElement("p",null,a.createElement(C.c,null,"Don't forget to save your settings to apply your modification."))),a.createElement("form",{className:"form"},a.createElement("h4",{className:"no-border",id:"mfa-policy-subtitle"},a.createElement(C.c,null,"Default users multi factor authentication policy")),a.createElement("p",{id:"mfa-policy-description"},a.createElement(C.c,null,"You can choose the default behaviour of multi factor authentication for all users.")),a.createElement("div",{className:"radiolist-alt"},a.createElement("div",{className:"input radio "+("mandatory"===e.policy?"checked":""),id:"mfa-policy-mandatory"},a.createElement("input",{type:"radio",value:"mandatory",onChange:this.handleInputChange,name:"policy",checked:"mandatory"===e.policy,id:"mfa-policy-mandatory-radio",disabled:this.hasAllInputDisabled()}),a.createElement("label",{htmlFor:"mfa-policy-mandatory-radio"},a.createElement("span",{className:"name"},a.createElement(C.c,null,"Mandatory")),a.createElement("span",{className:"info"},a.createElement(C.c,null,"Users have to enable multi factor authentication. If they don't, they will be reminded every time they log in.")))),a.createElement("div",{className:"input radio "+("opt-in"===e.policy?"checked":""),id:"mfa-policy-opt-in"},a.createElement("input",{type:"radio",value:"opt-in",onChange:this.handleInputChange,name:"policy",checked:"opt-in"===e.policy,id:"mfa-policy-opt-in-radio",disabled:this.hasAllInputDisabled()}),a.createElement("label",{htmlFor:"mfa-policy-opt-in-radio"},a.createElement("span",{className:"name"},a.createElement(C.c,null,"Opt-in (default)")),a.createElement("span",{className:"info"},a.createElement(C.c,null,"Users have the choice to enable multi factor authentication in their profile workspace."))))),a.createElement("h4",{id:"mfa-policy-remember-subtitle"},"Remember a device for a month"),a.createElement("span",{className:"input toggle-switch form-element "},a.createElement("input",{type:"checkbox",className:"toggle-switch-checkbox checkbox",name:"rememberMeForAMonth",onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),checked:e.rememberMeForAMonth,id:"remember-toggle-button"}),a.createElement("label",{htmlFor:"remember-toggle-button"},a.createElement(C.c,null,"Allow Remember this device for a month. option during MFA."))))),a.createElement("div",{className:"col4 last"},a.createElement("div",{className:"sidebar-help"},a.createElement("h3",null,a.createElement(C.c,null,"Need some help?")),a.createElement("p",null,a.createElement(C.c,null,"For more information about MFA policy settings, checkout the dedicated page on the help website.")),a.createElement("a",{className:"button",href:"https://help.passbolt.com/configure/mfa-policy",target:"_blank",rel:"noopener noreferrer"},a.createElement(de,{name:"life-ring"}),a.createElement("span",null,a.createElement(C.c,null,"Read the documentation"))))))}}jl.propTypes={context:d().object,administrationWorkspaceContext:d().object,adminMfaPolicyContext:d().object,t:d().func};const ql=u(Xn(Fl((0,k.Z)("common")(jl))));class Wl extends a.Component{isMfaSelected(){return Qn.MFA===this.props.administrationWorkspaceContext.selectedAdministration}isMfaPolicySelected(){return Qn.MFA_POLICY===this.props.administrationWorkspaceContext.selectedAdministration}isUserDirectorySelected(){return Qn.USER_DIRECTORY===this.props.administrationWorkspaceContext.selectedAdministration}isEmailNotificationsSelected(){return Qn.EMAIL_NOTIFICATION===this.props.administrationWorkspaceContext.selectedAdministration}isSubscriptionSelected(){return Qn.SUBSCRIPTION===this.props.administrationWorkspaceContext.selectedAdministration}isInternationalizationSelected(){return Qn.INTERNATIONALIZATION===this.props.administrationWorkspaceContext.selectedAdministration}isAccountRecoverySelected(){return Qn.ACCOUNT_RECOVERY===this.props.administrationWorkspaceContext.selectedAdministration}isSmtpSettingsSelected(){return Qn.SMTP_SETTINGS===this.props.administrationWorkspaceContext.selectedAdministration}isSelfRegistrationSelected(){return Qn.SELF_REGISTRATION===this.props.administrationWorkspaceContext.selectedAdministration}isSsoSelected(){return Qn.SSO===this.props.administrationWorkspaceContext.selectedAdministration}render(){const e=this.props.administrationWorkspaceContext.administrationWorkspaceAction;return a.createElement("div",{id:"container",className:"page administration"},a.createElement("div",{id:"app",tabIndex:"1000"},a.createElement("div",{className:"header first"},a.createElement(S,null)),a.createElement("div",{className:"header second"},a.createElement(ns,null),a.createElement(Fs,{disabled:!0}),a.createElement(Cs,{baseUrl:this.props.context.trustedDomain||this.props.context.userSettings.getTrustedDomain(),user:this.props.context.loggedInUser})),a.createElement("div",{className:"header third"},a.createElement("div",{className:"col1 main-action-wrapper"}),a.createElement(e,null)),a.createElement("div",{className:"panel main"},a.createElement("div",null,a.createElement("div",{className:"panel left"},a.createElement(Tr,null)),a.createElement("div",{className:"panel middle"},a.createElement(Kr,null),a.createElement("div",{className:"grid grid-responsive-12"},this.isMfaSelected()&&a.createElement(Hr,null),this.isMfaPolicySelected()&&a.createElement(ql,null),this.isUserDirectorySelected()&&a.createElement(gi,null),this.isEmailNotificationsSelected()&&a.createElement(Si,null),this.isSubscriptionSelected()&&a.createElement(Oi,null),this.isInternationalizationSelected()&&a.createElement(Ki,null),this.isAccountRecoverySelected()&&a.createElement(Eo,null),this.isSmtpSettingsSelected()&&a.createElement($o,null),this.isSelfRegistrationSelected()&&a.createElement(ul,null),this.isSsoSelected()&&a.createElement(Al,null)))))))}}Wl.propTypes={context:d().any,administrationWorkspaceContext:d().object};const zl=u(Xn(Wl));class Gl extends Error{constructor(e){super(e),this.name="UserAbortsOperationError"}}const Hl=Gl;class Vl extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.initEventHandlers(),this.createInputRef()}componentDidMount(){if(this.focusOnPassphrase(),this.hasRememberMeOptions()){const e=this.props.context.siteSettings.getRememberMeOptions(),t=Object.keys(e),s=parseInt(t[0]);this.setState({rememberMeDuration:s})}}getDefaultState(){return{attempt:0,processing:!1,passphrase:"",rememberMe:!1,passphraseError:"",rememberMeDuration:300}}initEventHandlers(){this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleRememberMeDurationSelectChange=this.handleRememberMeDurationSelectChange.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this)}createInputRef(){this.passphraseInputRef=a.createRef()}focusOnPassphrase(){this.passphraseInputRef.current.focus()}close(){const e=new Hl("The dialog has been closed.");this.props.context.port.emit(this.props.context.passphraseRequestId,"ERROR",e),this.props.context.setContext({passphraseRequestId:null}),this.props.onClose()}handleCloseClick(){this.close()}async handleFormSubmit(e){e.preventDefault(),this.setState({processing:!0}),await this.isValidPassphrase()?this.handleValidPassphrase():this.handleInvalidPassphrase()}async isValidPassphrase(){try{await this.props.context.port.request("passbolt.keyring.private.checkpassphrase",this.state.passphrase)}catch(e){return!1}return!0}hasRememberMeOptions(){const e=this.props.context.siteSettings.getRememberMeOptions();return null!==e&&Object.keys(e).length>0}handleValidPassphrase(){let e=!1;this.state.rememberMe&&this.hasRememberMeOptions()&&(e=this.state.rememberMeDuration),this.props.context.port.emit(this.props.context.passphraseRequestId,"SUCCESS",{passphrase:this.state.passphrase,rememberMe:e}),this.props.context.setContext({passphraseRequestId:null}),this.props.onClose()}handleInvalidPassphrase(){const e=""===this.state.passphrase,t=e?this.translate("The passphrase should not be empty."):this.translate("This is not a valid passphrase.");let s=this.state.attempt;e||s++,this.setState({processing:!1,attempt:s,passphraseError:t}),s<3&&this.focusOnPassphrase()}handleInputChange(e){const t=e.target,s="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState({[a]:s})}handleRememberMeDurationSelectChange(e){this.setState({rememberMe:!0,rememberMeDuration:e.target.value})}renderRememberMeOptions(){const e=[],t=this.props.context.siteSettings.getRememberMeOptions();for(const s in t)e.push({value:parseInt(s),label:t[s]});return e}get translate(){return this.props.t}render(){let e=this.translate("You need your passphrase to continue.");this.state.passphraseError&&(e=this.translate("Please enter a valid passphrase."));const t=this.hasRememberMeOptions();return a.createElement(be,{className:"passphrase-entry",title:this.translate("Please enter your passphrase."),onClose:this.handleCloseClick},this.state.attempt<3&&a.createElement("form",{onSubmit:this.handleFormSubmit},a.createElement("div",{className:"form-content"},a.createElement("div",{className:"input-password-wrapper input required "+(this.state.passphraseError?"error":"")},a.createElement("label",{htmlFor:"passphrase-entry-form-passphrase"},e),a.createElement(At,{id:"passphrase-entry-form-passphrase",name:"passphrase",autoComplete:"off",placeholder:this.translate("Passphrase"),inputRef:this.passphraseInputRef,value:this.state.passphrase,onChange:this.handleInputChange,disabled:this.state.processing,preview:!0,securityToken:this.props.context.userSettings.getSecurityToken()})),this.state.passphraseError&&a.createElement("div",{className:"error-message"},this.state.passphraseError),t&&a.createElement("div",{className:"remember-me"},a.createElement("div",{className:"input checkbox"},a.createElement("input",{id:"passphrase-entry-form-remember-me",type:"checkbox",name:"rememberMe",checked:this.state.rememberMe,onChange:this.handleInputChange}),a.createElement("label",{htmlFor:"passphrase-entry-form-remember-me"},a.createElement(C.c,null,"Remember it for")," ")),a.createElement(qe,{className:"inline",name:"rememberMeDuration",items:this.renderRememberMeOptions(),value:this.state.rememberMeDuration,onChange:this.handleRememberMeDurationSelectChange}))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement("a",{className:"cancel",onClick:this.handleCloseClick},a.createElement(C.c,null,"Cancel")),a.createElement("button",{type:"submit",className:"button primary",role:"button"},a.createElement(C.c,null,"Ok")))),3===this.state.attempt&&a.createElement(a.Fragment,null,a.createElement("div",{className:"form-content"},a.createElement("p",null,a.createElement(C.c,null,"Your passphrase is wrong! The operation has been aborted."))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement("a",{className:"button primary",role:"button",onClick:this.handleCloseClick},a.createElement(C.c,null,"Close")))))}}Vl.propTypes={context:d().object,onClose:d().func,t:d().func};const Kl=u((0,k.Z)("common")(Vl));class Bl extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handlePassphraseEntryRequestEvent=this.handlePassphraseEntryRequestEvent.bind(this)}componentDidMount(){this.listen()}listen(){this.props.context.port.on("passbolt.passphrase.request",this.handlePassphraseEntryRequestEvent)}async handlePassphraseEntryRequestEvent(e){await this.props.context.setContext({passphraseRequestId:e}),this.props.dialogContext.open(Kl)}render(){return a.createElement(a.Fragment,null)}}Bl.propTypes={context:d().object,dialogContext:d().any};const $l=u(M(Bl));class Zl extends a.Component{constructor(e){super(e),this.state=this.getStateBasedOnContext(e,this.getDefaultState()),this.moveOptionChangeRef=a.createRef(),this.moveOptionKeepRef=a.createRef(),this.bindEventHandlers()}async componentDidMount(){this.setState({loading:!1,moveOption:"change"}),this.moveOptionChangeRef.current.focus()}getDefaultState(){return{loading:!0,processing:!1,moveOption:"change",cascade:!1}}bindEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this)}getStateBasedOnContext(e,t){const s=e.context.folders,a={message:this.translate("The folder could not be found. Maybe it was deleted or you lost access.")};s||(console.error("No folders context defined."),this.handleError(a));const n=e.context.folders.find((e=>e.id===this.props.context.folderMoveStrategyProps.folders[0]))||!1;return n?t.name=n.name:(console.error(`Folder ${this.props.context.folderMoveStrategyProps.folders[0]} not found in context.`),this.handleError(a)),t}async handleFormSubmit(e){if(e.preventDefault(),!this.state.processing){await this.toggleProcessing();try{await this.props.context.port.emit(this.props.context.folderMoveStrategyProps.requestId,"SUCCESS",{moveOption:this.state.moveOption}),this.handleSaveSuccess()}catch(e){this.handleSaveError(e)}}}handleSaveSuccess(){this.props.context.setContext({folderMoveStrategyProps:{}}),this.props.onClose()}handleSaveError(e){"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e)),this.setState({processing:!1})}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}async toggleProcessing(){const e=this.state.processing;return new Promise((t=>{this.setState({processing:!e},t())}))}handleInputChange(e){const t=e.target,s="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState({[a]:s})}handleClose(){if(this.state.processing)return;const e=new Hl(this.translate("The dialog has been closed."));this.props.context.port.emit(this.props.context.folderMoveStrategyProps.requestId,"ERROR",e),this.props.context.setContext({folderMoveStrategyProps:{}}),this.props.onClose()}hasAllInputDisabled(){return this.state.processing||this.state.loading}getIntroMessage(){let e="";return e=this.isAboutItems()?a.createElement(C.c,null,"You are about to move several items."):this.isAboutAFolder()?a.createElement(C.c,null,"You are about to move a folder."):this.isAboutFolders()?a.createElement(C.c,null,"You are about to move several folders."):this.isAboutAResource()?a.createElement(C.c,null,"You are about to move one resource."):a.createElement(C.c,null,"You are about to move several resources."),e=a.createElement("span",null,e," ",a.createElement(C.c,null,"The permissions do not match the destination folder permissions.")),e}isAboutItems(){return this.props.context.folderMoveStrategyProps.resources&&this.props.context.folderMoveStrategyProps.folders&&this.props.context.folderMoveStrategyProps.resources.length&&this.props.context.folderMoveStrategyProps.folders.length}isAboutResources(){return this.props.context.folderMoveStrategyProps.resources&&this.props.context.folderMoveStrategyProps.resources.length>1}isAboutFolders(){return this.props.context.folderMoveStrategyProps.folders&&this.props.context.folderMoveStrategyProps.folders.length>1}isAboutAFolder(){return this.props.context.folderMoveStrategyProps.folders&&1===this.props.context.folderMoveStrategyProps.folders.length}isAboutAResource(){return this.props.context.folderMoveStrategyProps.resources&&1===this.props.context.folderMoveStrategyProps.resources.length}get translate(){return this.props.t}render(){return a.createElement(be,{className:"move-folder-strategy-dialog",title:this.translate("How do you want to proceed?"),onClose:this.handleClose,disabled:this.hasAllInputDisabled()},a.createElement("form",{className:"folder-create-form",onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("p",null,this.getIntroMessage()),a.createElement("div",{className:"radiolist-alt"},a.createElement("div",{className:"input radio "+("change"===this.state.moveOption?"checked":"")},a.createElement("input",{name:"moveOption",value:"change",id:"moveOptionChange",type:"radio",onChange:this.handleInputChange,ref:this.moveOptionChangeRef,checked:"change"===this.state.moveOption}),a.createElement("label",{htmlFor:"moveOptionChange"},a.createElement("span",{className:"name"},a.createElement(C.c,null,"Change permissions")),a.createElement("span",{className:"info"},a.createElement(C.c,null,"Remove old inherited permissions and apply the new destination folder permissions recursively.")))),a.createElement("div",{className:"input radio last "+("keep"===this.state.moveOption?"checked":"")},a.createElement("input",{name:"moveOption",value:"keep",id:"moveOptionKeep",type:"radio",onChange:this.handleInputChange,ref:this.moveOptionKeepRef,checked:"keep"===this.state.moveOption}),a.createElement("label",{htmlFor:"moveOptionKeep"},a.createElement("span",{className:"name"},a.createElement(C.c,null,"Keep existing permissions")),a.createElement("span",{className:"info"},a.createElement(C.c,null,"Keep the original permissions, do not apply the destination folder permissions.")))))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleClose}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Move")}))))}}Zl.propTypes={context:d().any,onClose:d().func,dialogContext:d().any,t:d().func};const Yl=u(M((0,k.Z)("common")(Zl)));class Jl extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleFolderMoveStrategyRequestEvent=this.handleFolderMoveStrategyRequestEvent.bind(this)}componentDidMount(){this.listen()}listen(){this.props.context.port.on("passbolt.folders.move-strategy.request",this.handleFolderMoveStrategyRequestEvent)}handleFolderMoveStrategyRequestEvent(e,t,s,a){const n={requestId:e,folderParentId:t,folders:s,resources:a};this.props.context.setContext({folderMoveStrategyProps:n}),this.props.dialogContext.open(Yl)}render(){return a.createElement(a.Fragment,null)}}Jl.propTypes={context:d().any,dialogContext:d().any};const Xl=u(M(Jl));class Ql extends a.Component{constructor(e){super(e),this.infiniteTimerUpdateIntervalId=null,this.state=this.defaultState}get defaultState(){return{infiniteTimer:0}}componentDidMount(){this.startInfiniteTimerUpdateProgress()}startInfiniteTimerUpdateProgress(){this.isInfiniteProgressMode()&&(this.infiniteTimerUpdateIntervalId=setInterval((()=>{const e=this.state.infiniteTimer+2;this.setState({infiniteTimer:e})}),500))}componentDidUpdate(){!this.isInfiniteProgressMode()&&this.infiniteTimerUpdateIntervalId&&this.resetInterval()}componentWillUnmount(){this.resetInterval()}isInfiniteProgressMode(){return!this.props.context.progressDialogProps.goals}resetInterval(){this.infiniteTimerUpdateIntervalId&&(clearInterval(this.infiniteTimerUpdateIntervalId),this.infiniteTimerUpdateIntervalId=null)}calculateProgress(){return this.props.context.progressDialogProps?.goals>0?this.calculateGoalsProgress():this.calculateInfiniteProgress()}calculateInfiniteProgress(){return 100-100/Math.pow(1.1,this.state.infiniteTimer)}calculateGoalsProgress(){const e=this.props.context.progressDialogProps.completed||0;let t=Math.round(100*e/this.props.context.progressDialogProps.goals);return t>100&&(t=100),t}render(){const e=this.calculateProgress(),t={width:`${e}%`};return a.createElement("div",{className:"dialog-wrapper progress-dialog"},a.createElement("div",{className:"dialog"},a.createElement("div",{className:"dialog-header"},a.createElement("span",{className:"dialog-title-wrapper"},a.createElement("h2",null,this.props.context.progressDialogProps.title||a.createElement(C.c,null,"Please wait...")))),a.createElement("div",{className:"dialog-content"},a.createElement("div",{className:"form-content"},a.createElement("label",null,a.createElement(C.c,null,"Take a deep breath and enjoy being in the present moment...")),a.createElement("div",{className:"progress-bar-wrapper"},a.createElement("span",{className:"progress-bar"},a.createElement("span",{className:"progress "+(100===e?"completed":""),style:t})),!this.isInfiniteProgressMode()&&a.createElement("div",{className:"progress-details"},a.createElement("span",{className:"progress-step-label"},this.props.context.progressDialogProps.message||a.createElement(C.c,null,"Please wait...")),a.createElement("span",{className:"progress-percent"},e,"%")))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement("a",{className:"button disabled processing"},"Submit",a.createElement(de,{name:"spinner"}))))))}}Ql.propTypes={context:d().any};const ec=u((0,k.Z)("common")(Ql));class tc extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{dialogIndex:null}}bindCallbacks(){this.handleProgressDialogOpenEvent=this.handleProgressDialogOpenEvent.bind(this),this.handleProgressDialogUpdateEvent=this.handleProgressDialogUpdateEvent.bind(this),this.handleProgressDialogUpdateGoalsEvent=this.handleProgressDialogUpdateGoalsEvent.bind(this),this.handleProgressDialogCloseEvent=this.handleProgressDialogCloseEvent.bind(this)}componentDidMount(){this.listen()}listen(){this.props.context.port.on("passbolt.progress.open-progress-dialog",this.handleProgressDialogOpenEvent),this.props.context.port.on("passbolt.progress.update",this.handleProgressDialogUpdateEvent),this.props.context.port.on("passbolt.progress.update-goals",this.handleProgressDialogUpdateGoalsEvent),this.props.context.port.on("passbolt.progress.close-progress-dialog",this.handleProgressDialogCloseEvent)}handleProgressDialogOpenEvent(e,t,s){const a={title:e,goals:t,message:s};this.props.context.setContext({progressDialogProps:a});const n=this.props.dialogContext.open(ec);this.setState({dialogIndex:n})}handleProgressDialogUpdateEvent(e,t){const s=Object.assign({},this.props.context.progressDialogProps,{message:e||this.props.context.progressDialogProps.message,completed:t});this.props.context.setContext({progressDialogProps:s})}handleProgressDialogUpdateGoalsEvent(e){const t=Object.assign({},this.props.context.progressDialogProps,{goals:e});this.props.context.setContext({progressDialogProps:t})}handleProgressDialogCloseEvent(){this.props.dialogContext.close(this.state.dialogIndex),this.props.context.setContext({progressDialogProps:{}})}render(){return a.createElement(a.Fragment,null)}}tc.propTypes={context:d().any,dialogContext:d().any};const sc=u(M(tc));class ac extends a.Component{componentDidMount(){this.listen()}listen(){this.props.context.port.on("passbolt.errors.open-error-dialog",this.handleErrorDialogOpenEvent)}handleErrorDialogOpenEvent(e,t){const s={title:e,error:new Error(t)};this.props.dialogContext.open(we,s)}render(){return a.createElement(a.Fragment,null)}}ac.propTypes={context:d().any,dialogContext:d().any};const nc=u(M(ac));class rc extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.createInputRefs(),this.bindEventHandlers()}componentDidMount(){this.setState({loading:!1,name:""},(()=>{this.nameRef.current.focus()}))}getDefaultState(){return{loading:!0,processing:!1,inlineValidation:!1,name:this.translate("loading..."),nameError:!1,nameWarning:""}}createInputRefs(){this.nameRef=a.createRef()}bindEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleNameInputKeyUp=this.handleNameInputKeyUp.bind(this)}handleClose(){this.props.onClose()}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s},(()=>{this.state.inlineValidation&&this.validate()}))}async handleFormSubmit(e){if(e.preventDefault(),!this.state.processing){if(this.setState({inlineValidation:this.state.inlineValidation||!0}),await this.toggleProcessing(),await this.validate(),this.hasValidationError())return await this.toggleProcessing(),void this.focusFirstFieldError();try{const e=await this.createFolder();await this.handleSaveSuccess(e.id)}catch(e){this.handleSaveError(e)}}}async handleSaveSuccess(e){await this.props.actionFeedbackContext.displaySuccess(this.translate("The folder has been added successfully")),this.selectAndScrollToFolder(e),this.props.onClose()}handleSaveError(e){"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e)),this.setState({processing:!1})}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}async toggleProcessing(){const e=this.state.processing;return new Promise((t=>{this.setState({processing:!e},t())}))}focusFirstFieldError(){this.nameRef.current.focus()}async createFolder(){const e={name:this.state.name,folder_parent_id:this.props.context.folderCreateDialogProps.folderParentId};return await this.props.context.port.request("passbolt.folders.create",e)}selectAndScrollToFolder(e){this.props.context.port.emit("passbolt.folders.select-and-scroll-to",e)}async validate(){return await this.resetValidation(),await this.validateNameInput(),this.hasValidationError()}async resetValidation(){return new Promise((e=>{this.setState({nameError:!1},e())}))}validateNameInput(){let e=!1;const t=this.state.name.trim();return t.length||(e=this.translate("A name is required.")),t.length>256&&(e=this.translate("A name can not be more than 256 char in length.")),new Promise((t=>{this.setState({nameError:e},t)}))}handleNameInputKeyUp(){const e=Ge(this.state.name,Ve,this.translate);this.setState({nameWarning:e})}hasValidationError(){return!1!==this.state.nameError}hasAllInputDisabled(){return this.state.processing||this.state.loading}get translate(){return this.props.t}render(){return a.createElement(be,{className:"folder-create-dialog",title:this.translate("Create a new folder"),onClose:this.handleClose,disabled:this.hasAllInputDisabled()},a.createElement("form",{className:"folder-create-form",onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input text required ${this.state.nameError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"folder-name-input"},a.createElement(C.c,null,"Name"),this.state.nameWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"folder-name-input",name:"name",ref:this.nameRef,type:"text",value:this.state.name,placeholder:this.translate("Untitled folder"),maxLength:"256",required:"required",disabled:this.hasAllInputDisabled(),onChange:this.handleInputChange,onKeyUp:this.handleNameInputKeyUp,autoComplete:"off",autoFocus:!0}),this.state.nameError&&a.createElement("div",{className:"error-message"},this.state.nameError),this.state.nameWarning&&a.createElement("div",{className:"name warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.nameWarning))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleClose}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Save")}))))}}rc.propTypes={context:d().any,actionFeedbackContext:d().any,onClose:d().func,dialogContext:d().any,t:d().func};const ic=u(D(M((0,k.Z)("common")(rc))));class oc extends a.Component{constructor(e){super(e),this.state=this.getStateBasedOnContext(e,this.getDefaultState()),this.createInputRefs(),this.bindEventHandlers()}async componentDidMount(){this.setState({loading:!1},(()=>{this.nameRef.current.focus()}))}getDefaultState(){return{loading:!0,processing:!1,inlineValidation:!1,name:this.translate("loading..."),nameError:!1,nameWarning:""}}getStateBasedOnContext(e,t){const s=e.context.folders,a={message:this.translate("The folder could not be found. Maybe it was deleted or you lost access.")};s||(console.error("No folders context defined."),this.handleError(a));const n=e.context.folders.find((t=>t.id===e.context.folder.id))||!1;return n?t.name=n.name:(console.error(`Folder ${e.context.folder.id} not found in context.`),this.handleError(a)),t}createInputRefs(){this.nameRef=a.createRef()}bindEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleNameInputKeyUp=this.handleNameInputKeyUp.bind(this)}handleClose(){this.props.onClose()}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s},(()=>{this.state.inlineValidation&&this.validate()}))}async handleFormSubmit(e){if(e.preventDefault(),!this.state.processing){if(this.setState({inlineValidation:this.state.inlineValidation||!0}),await this.toggleProcessing(),await this.validate(),this.hasValidationError())return await this.toggleProcessing(),void this.focusFirstFieldError();try{const e=await this.updateFolder();await this.handleSaveSuccess(e.id)}catch(e){this.handleSaveError(e)}}}async handleSaveSuccess(e){await this.props.actionFeedbackContext.displaySuccess(this.translate("The folder was renamed successfully")),this.selectAndScrollToFolder(e),this.props.onClose()}handleSaveError(e){"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e)),this.setState({processing:!1})}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}async toggleProcessing(){const e=this.state.processing;return new Promise((t=>{this.setState({processing:!e},t())}))}focusFirstFieldError(){this.nameRef.current.focus()}async updateFolder(){const e={id:this.props.context.folder.id,name:this.state.name};return await this.props.context.port.request("passbolt.folders.update",e)}selectAndScrollToFolder(e){this.props.context.port.emit("passbolt.folders.select-and-scroll-to",e)}async validate(){return await this.resetValidation(),await this.validateNameInput(),this.hasValidationError()}async resetValidation(){return new Promise((e=>{this.setState({nameError:!1},e())}))}validateNameInput(){let e=!1;const t=this.state.name.trim();return t.length||(e=this.translate("A name is required.")),t.length>256&&(e=this.translate("A name can not be more than 256 char in length.")),new Promise((t=>{this.setState({nameError:e},t)}))}handleNameInputKeyUp(){const e=Ge(this.state.name,256,this.translate);this.setState({nameWarning:e})}hasValidationError(){return!1!==this.state.nameError}hasAllInputDisabled(){return this.state.processing||this.state.loading}get translate(){return this.props.t}render(){return a.createElement(be,{className:"rename-folder-dialog",title:this.translate("Rename a folder"),onClose:this.handleClose,disabled:this.hasAllInputDisabled()},a.createElement("form",{className:"folder-rename-form",onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input text required ${this.state.nameError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"folder-name-input"},a.createElement(C.c,null,"Folder name"),this.state.nameWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"folder-name-input",name:"name",ref:this.nameRef,type:"text",value:this.state.name,placeholder:this.translate("Untitled folder"),maxLength:"256",required:"required",onChange:this.handleInputChange,onKeyUp:this.handleNameInputKeyUp,disabled:this.hasAllInputDisabled(),autoComplete:"off",autoFocus:!0}),this.state.nameError&&a.createElement("div",{className:"name error-message"},this.state.nameError),this.state.nameWarning&&a.createElement("div",{className:"name warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.nameWarning))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleClose}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Rename")}))))}}oc.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,dialogContext:d().any,t:d().func};const lc=u(M(D((0,k.Z)("common")(oc))));class cc extends a.Component{constructor(e){super(e),this.state=this.getStateBasedOnContext(e,this.getDefaultState()),this.bindEventHandlers()}async componentDidMount(){this.setState({loading:!1})}getDefaultState(){return{loading:!0,processing:!1,cascade:!1}}bindEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this)}getStateBasedOnContext(e,t){const s=e.context.folders,a={message:this.translate("The folder could not be found. Maybe it was deleted or you lost access.")};s||(console.error("No folders context defined."),this.handleError(a));const n=e.context.folders.find((t=>t.id===e.context.folder.id))||!1;return n?t.name=n.name:(console.error(`Folder ${e.context.folder.id} not found in context.`),this.handleError(a)),t}async handleFormSubmit(e){if(e.preventDefault(),!this.state.processing){await this.toggleProcessing();try{this.props.loadingContext.add(),await this.props.context.port.request("passbolt.folders.delete",this.props.context.folder.id,this.state.cascade),await this.handleSaveSuccess()}catch(e){this.handleSaveError(e)}}}async handleSaveSuccess(){this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The folder was deleted successfully")),this.props.onClose()}handleSaveError(e){this.props.loadingContext.remove(),"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e)),this.setState({processing:!1})}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}async toggleProcessing(){const e=this.state.processing;return new Promise((t=>{this.setState({processing:!e},t())}))}handleInputChange(e){const t=e.target,s="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState({[a]:s})}handleClose(){this.state.processing||this.props.onClose()}hasAllInputDisabled(){return this.state.processing||this.state.loading}get translate(){return this.props.t}render(){return a.createElement(be,{className:"folder-create-dialog",title:this.translate("Delete folder?"),onClose:this.handleClose,disabled:this.hasAllInputDisabled()},a.createElement("form",{className:"folder-create-form",onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("p",null,a.createElement(C.c,null,"Are you sure you want to delete the folder ",a.createElement("strong",{className:"dialog-variable"},{folderName:this.state.name}),"?")),a.createElement("p",null,a.createElement(C.c,null,"This action cant be undone. Other users may lose access.")),a.createElement("div",{className:"input checkbox"},a.createElement("input",{id:"delete-cascade",type:"checkbox",name:"cascade",onChange:this.handleInputChange,autoFocus:!0,disabled:this.hasAllInputDisabled()}),"",a.createElement("label",{htmlFor:"delete-cascade"},a.createElement(C.c,null,"Also delete items inside this folder.")))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleClose}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Delete"),warning:!0}))))}}cc.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,dialogContext:d().any,loadingContext:d().any,t:d().func};const mc=u(H(M(D((0,k.Z)("common")(cc)))));class dc{constructor(e,t){this._folders=t||[],this._resources=e||[],this._permissions=[],this._aroPermissions=[],this._aros={},this._acos=[],this._resources.forEach((e=>{e._type="Resource",this._acos.push(e)})),this._folders.forEach((e=>{e._type="Folder",this._acos.push(e)})),this._acos.forEach((e=>{e.permissions.forEach((e=>{const t=e.user||e.group;this._aros[t.id]||(this._aros[t.id]=t),this._permissions.push(e)}))})),this._changes=[]}getChanges(){return this._changes}getResourcesChanges(){return this._changes.filter((e=>"Resource"===e.aco))}getFoldersChanges(){return this._changes.filter((e=>"Folder"===e.aco))}getAcos(){return this._acos}isOriginalResourcesOwner(){return this._acos.reduce(((e,t)=>e&&15===t.permission.type),!0)}aggregatePermissionsByAro(){const e=this._permissions.reduce(((e,t)=>{let s=e.find((e=>e.id===t.aro_foreign_key));if(!s){const a=t.user||t.group;s={id:a.id,aro:a,type:t.type,permissions:[]},e.push(s)}return s.type=s.type===t.type?s.type:-1,s.permissions.push(t),e}),[]);return e.forEach((e=>{e.permissions.length!==this._acos.length&&(e.type=-1),-1===e.type&&(e.variesDetails=this._acos.reduce(((t,s)=>{const a=e.permissions.filter((e=>e.aco_foreign_key===s.id));return a.length?t[a[0].type].push(s.name):t[0].push(s.name),t}),{0:[],1:[],7:[],15:[]}))})),e.sort(((e,t)=>{const s=e.aro.profile?e.aro.profile.first_name:e.aro.name,a=t.aro.profile?t.aro.profile.first_name:t.aro.name;return s<a?-1:s>a?1:0})),this._aroPermissions=e,this._aroPermissions}hasChanges(e){return void 0!==this._changes.find((t=>t.aro_foreign_key===e))}addAroPermissions(e){return this._aros[e.id]=e,this.updateAroPermissions(e.id,1),{id:e.id,aro:e,type:1,permissions:[]}}updateAroPermissions(e,t){this._removeAroChanges(e),this._acos.forEach((s=>{const a=this.getAcoAroPermission(s,e);if(a){if(a.type!==t){const e=JSON.parse(JSON.stringify(a));e.type=t,this._changes.push(e)}}else{const a=this._aros[e],n=this._buildChange(s,a,t);this._changes.push(n)}}))}deleteAroPermissions(e){this._removeAroChanges(e),this._acos.forEach((t=>{const s=this.getAcoAroPermission(t,e);if(s){const e=JSON.parse(JSON.stringify(s));e.delete=!0,this._changes.push(e)}})),delete this._aros[e]}getAcoAroPermission(e,t){return this._permissions.find((s=>s.aro_foreign_key===t&&s.aco_foreign_key===e.id))}getResourcesWithNoOwner(){return this._acos.filter((e=>{const t=this._changes.filter((t=>t.aco_foreign_key===e.id));if(t.find((e=>15===e.type&&!e.delete)))return!1;const s=this._permissions.reduce(((t,s)=>(s.aco_foreign_key===e.id&&15===s.type&&(t=[...t,s.id]),t)),[]);return t.filter((e=>(e.delete||15!==e.type)&&-1!==s.indexOf(e.id))).length===s.length}))}_removeAroChanges(e){this._acos.forEach((t=>{this._changes=this._changes.filter((s=>!(s.aco_foreign_key===t.id&&s.aro_foreign_key===e)))}))}_buildChange(e,t,s){return{is_new:!0,aro:t.profile?"User":"Group",aro_foreign_key:t.id,aco:e._type,aco_foreign_key:e.id,type:s}}}class hc extends a.Component{handleCloseClick(){this.props.onClose()}getClassName(){let e="remove-item button button-transparent";return this.props.disabled&&(e+=" disabled"),e}render(){return a.createElement("a",{className:this.getClassName(),onClick:this.handleCloseClick.bind(this),role:"button"},a.createElement(de,{name:"close"}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"Remove")))}}hc.propTypes={onClose:d().func,disabled:d().bool};const pc=(0,k.Z)("common")(hc);class uc extends a.Component{render(){return a.createElement("span",{className:"share-varies-details"},this.props.variesDetails[0].length>0&&a.createElement("span",null,a.createElement("strong",null,a.createElement(C.c,null,"No access"),": ",this.props.variesDetails[0].join(", ")),a.createElement("br",null)),this.props.variesDetails[1].length>0&&a.createElement("span",null,a.createElement("strong",null,a.createElement(C.c,null,"Can read"),": ",this.props.variesDetails[1].join(", ")),a.createElement("br",null)),this.props.variesDetails[7].length>0&&a.createElement("span",null,a.createElement("strong",null,a.createElement(C.c,null,"Can edit"),": ",this.props.variesDetails[7].join(", ")),a.createElement("br",null)),this.props.variesDetails[15].length>0&&a.createElement("span",null,a.createElement("strong",null,a.createElement(C.c,null,"Is owner"),": ",this.props.variesDetails[15].join(", ")),a.createElement("br",null)))}}uc.propTypes={variesDetails:d().object};const gc=(0,k.Z)("common")(uc);class fc extends a.Component{constructor(e){if(super(e),this.state={},!Number.isInteger(e.permissionType))throw new TypeError(this.translate("Invalid permission type for share permission item."));this.state.permissionType=e.permissionType,this.bindEventHandlers()}async componentDidMount(){if(this.isUser()){const e=await this.findUserGpgKey(this.props.aro.profile.user_id);this.setState({gpgKey:e})}}componentDidUpdate(e){e.permissionType!==this.props.permissionType&&this.setState({permissionType:this.props.permissionType})}bindEventHandlers(){this.handleUpdate=this.handleUpdate.bind(this),this.handleDelete=this.handleDelete.bind(this)}async findUserGpgKey(e){return await this.props.context.port.request("passbolt.keyring.get-public-key-info-by-user",e)}getAroDetails(){return this.props.aro.profile?this.props.aro.username:"Group"}isInputDisabled(){return this.props.disabled}getSelectClassName(){return this.isInputDisabled()?"permission inline disabled":"permission inline"}getAroName(){if(this.props.aro.profile){const e=this.props.aro.profile;return`${e.first_name} ${e.last_name}`}return this.props.aro.name}get tooltipMessage(){return a.createElement(a.Fragment,null,a.createElement("div",{className:"email"},a.createElement("strong",null,this.props.aro.username)),a.createElement("div",{className:"fingerprint"},this.formatFingerprint(this.state.gpgKey.fingerprint)))}formatFingerprint(e){const t=e.toUpperCase().replace(/.{4}/g,"$& ");return a.createElement(a.Fragment,null,t.substr(0,24),a.createElement("br",null),t.substr(25))}isUser(){return!this.isGroup()}isGroup(){return!(this.props.aro&&this.props.aro.profile)}hasGpgKey(){return this.state.gpgKey&&this.state.gpgKey.fingerprint}getClassName(){let e="row";return this.props.updated&&(e+=" permission-updated"),e}handleUpdate(e){const t=parseInt(e.target.value);this.props.onUpdate(this.props.id,t)}handleDelete(){this.props.onDelete(this.props.id)}get permissions(){const e=[{value:"1",label:this.translate("can read")},{value:"7",label:this.translate("can update")},{value:"15",label:this.translate("is owner")}];return this.props.variesDetails&&e.push({value:"-1",label:this.translate("varies")}),e}get translate(){return this.props.t}render(){return a.createElement("li",{id:`permission-item-${this.props.id}`,className:this.getClassName()},this.isUser()&&a.createElement(xe,{user:this.props.aro,baseUrl:this.props.context.userSettings.getTrustedDomain()}),this.isGroup()&&a.createElement(Re,{group:this.props.aro,baseUrl:this.props.context.userSettings.getTrustedDomain()}),a.createElement("div",{className:"aro"},a.createElement("div",{className:"aro-name"},a.createElement("span",{className:"ellipsis"},this.getAroName()),this.hasGpgKey()&&a.createElement(ge,{message:this.tooltipMessage},a.createElement(de,{name:"info-circle"}))),a.createElement("div",{className:"aro-details"},a.createElement("span",{className:"ellipsis"},this.getAroDetails()))),this.props.variesDetails&&a.createElement(ge,{message:a.createElement(gc,{variesDetails:this.props.variesDetails}),direction:"left"},a.createElement(de,{name:"info-circle"})),a.createElement("div",{className:"rights"},a.createElement(qe,{name:"permissionSelect",className:this.getSelectClassName(),items:this.permissions,value:this.state.permissionType.toString(),disabled:this.isInputDisabled(),onChange:this.handleUpdate,direction:this.props.isLastItemDisplayed?"top":"bottom"})),a.createElement("div",{className:"actions"},a.createElement(pc,{onClose:this.handleDelete,disabled:this.isInputDisabled()})))}}fc.propTypes={context:d().any,id:d().string,aro:d().object,variesDetails:d().object,updated:d().bool,disabled:d().bool,onUpdate:d().func,onDelete:d().func,permissionType:d().number,isLastItemDisplayed:d().bool,t:d().func};const bc=u((0,k.Z)("common")(fc));class yc extends a.Component{constructor(e){super(e),this.resources=[],this.folders=[],this.state=this.getDefaultState(),this.shareChanges=null,this.permissionListRef=a.createRef(),this.bindEventHandlers()}async componentDidMount(){this.props.context.shareDialogProps.resourcesIds&&(this.resources=await this.props.context.port.request("passbolt.share.get-resources",this.props.context.shareDialogProps.resourcesIds)),this.props.context.shareDialogProps.foldersIds&&(this.folders=await this.props.context.port.request("passbolt.share.get-folders",this.props.context.shareDialogProps.foldersIds)),this.shareChanges=new dc(this.resources,this.folders);const e=this.shareChanges.aggregatePermissionsByAro();this.setState({loading:!1,name:"",permissions:e},(()=>{this.permissionListRef.current.scrollTo(0)}))}getDefaultState(){return{loading:!0,processing:!1,permissions:null,autocompleteOpen:!1}}bindEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleAutocompleteSelect=this.handleAutocompleteSelect.bind(this),this.handleAutocompleteClose=this.handleAutocompleteClose.bind(this),this.handleAutocompleteOpen=this.handleAutocompleteOpen.bind(this),this.fetchAutocompleteItems=this.fetchAutocompleteItems.bind(this),this.handlePermissionUpdate=this.handlePermissionUpdate.bind(this),this.handlePermissionDelete=this.handlePermissionDelete.bind(this),this.renderItem=this.renderItem.bind(this),this.renderContainer=this.renderContainer.bind(this)}handleClose(){this.props.onClose()}handleAutocompleteOpen(){this.setState({autocompleteOpen:!0})}handleAutocompleteClose(){this.setState({autocompleteOpen:!1})}async handleFormSubmit(e){if(e.preventDefault(),!this.state.autocompleteOpen&&!this.state.processing&&!this.state.autocompleteItems){await this.toggleProcessing();try{await this.shareSave(),await this.handleSaveSuccess()}catch(e){this.handleSaveError(e)}}}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.translate("The permissions have been changed successfully.")),await this.props.resourceWorkspaceContext.onResourceShared(),this.props.onClose()}handleSaveError(e){"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e)),this.setState({processing:!1})}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}handleAutocompleteSelect(e){const t=this.state.permissions.filter((t=>t.aro.id===e.id));if(t.length>0)return;const s=this.shareChanges.addAroPermissions(e);s.updated=!0;const a=this.state.permissions;a.push(s),this.setState({permissions:a},(()=>{this.permissionListRef.current.scrollTo(this.state.permissions.length-1)}))}handlePermissionUpdate(e,t){this.shareChanges.updateAroPermissions(e,t);const s=this.state.permissions.map((s=>(s.aro.id===e&&(s.type=t,s.updated=this.shareChanges.hasChanges(e)),s)));this.setState({permissions:s})}handlePermissionDelete(e){this.shareChanges.deleteAroPermissions(e);const t=this.state.permissions.filter((t=>t.aro.id!==e));this.setState({permissions:t})}async shareSave(){if(this.props.context.shareDialogProps.resourcesIds&&this.props.context.shareDialogProps.foldersIds)throw new Error(this.translate("Multi resource and folder share is not implemented."));this.props.context.shareDialogProps.resourcesIds?await this.props.context.port.request("passbolt.share.resources.save",this.resources,this.shareChanges.getResourcesChanges()):this.props.context.shareDialogProps.foldersIds&&await this.props.context.port.request("passbolt.share.folders.save",this.folders,this.shareChanges.getFoldersChanges())}async fetchAutocompleteItems(e){const t=(e=e.toLowerCase())&&e.split(/\s+/)||[""],s=(e,t)=>(e=>new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(e),"i"))(e).test(t),a=this.state.permissions,n=e=>a.some((t=>t.id===e));let r=0;const i=this.props.context.groups.filter((e=>{const a=r<Le.DISPLAY_LIMIT&&(e=>t.every((t=>((e,t)=>s(e,t.name))(t,e))))(e)&&!n(e.id);return a&&r++,a})),o=this.props.context.users.filter((e=>{const a=r<Le.DISPLAY_LIMIT&&!0===e.active&&(e=>t.every((t=>((e,t)=>((e,t)=>s(e,t.username))(e,t)||((e,t)=>s(e,t.profile.first_name)||s(e,t.profile.last_name))(e,t))(t,e))))(e)&&!n(e.id);return a&&r++,a}));return await Promise.all(o.map((async e=>{e.gpgkey||(e.gpgkey={fingerprint:await this.getFingerprintForUser(e.id)})}))),[...o,...i]}async getFingerprintForUser(e){return(await this.props.context.port.request("passbolt.keyring.get-public-key-info-by-user",e)).fingerprint}hasAllInputDisabled(){return this.state.processing||this.state.loading}isAboutItems(){return this.props.context.shareDialogProps.resourcesIds&&this.props.context.shareDialogProps.foldersIds&&this.props.context.shareDialogProps.resourcesIds.length&&this.props.context.shareDialogProps.foldersIds.length}isAboutResources(){return this.props.context.shareDialogProps.resourcesIds&&this.props.context.shareDialogProps.resourcesIds.length>1}isAboutFolders(){return this.props.context.shareDialogProps.foldersIds&&this.props.context.shareDialogProps.foldersIds.length>1}isAboutAFolder(){return this.props.context.shareDialogProps.foldersIds&&1===this.props.context.shareDialogProps.foldersIds.length}isAboutAResource(){return this.props.context.shareDialogProps.resourcesIds&&1===this.props.context.shareDialogProps.resourcesIds.length}getTitle(){return this.state.loading?this.translate("Loading..."):this.isAboutItems()?this.translate("Share {{numberItems}} items",{numberItems:this.props.context.shareDialogProps.resourcesIds.length+this.props.context.shareDialogProps.foldersIds.length}):this.isAboutAResource()?this.translate("Share resource"):this.isAboutResources()?this.translate("Share {{numberResource}} resources",{numberResource:this.props.context.shareDialogProps.resourcesIds.length}):this.isAboutAFolder()?this.translate("Share folder"):this.isAboutFolders()?this.translate("Share {numberFolder} folders",{numberFolder:this.props.context.shareDialogProps.foldersIds.length}):void 0}getSubtitle(){if(!this.state.loading)return this.isAboutAResource()?this.resources[0].name:this.isAboutAFolder()?this.folders[0].name:void 0}getTooltip(){if(!this.shareChanges)return"";const e=this.shareChanges.getAcos();return e&&e.length&&1!==e.length?e.map((e=>e.name)).join(", "):""}async toggleProcessing(){const e=this.state.processing;return new Promise((t=>{this.setState({processing:!e},t())}))}hasNoOwner(){return this.shareChanges&&this.shareChanges.getResourcesWithNoOwner().length>0}hasChanges(){return this.shareChanges&&this.shareChanges.getChanges().length>0}hasSubmitDisabled(){return this.hasNoOwner()||this.hasAllInputDisabled()||!this.hasChanges()}renderItem(e,t){const s=this.state.permissions[e],n=s.aro.id;return a.createElement(bc,{id:s.aro.id,key:n,aro:s.aro,permissionType:s.type,variesDetails:s.variesDetails,updated:s.updated,disabled:this.hasAllInputDisabled(),onUpdate:this.handlePermissionUpdate,onDelete:this.handlePermissionDelete,isLastItemDisplayed:t>=2})}renderContainer(e,t){return a.createElement("ul",{className:"permissions",ref:t},e)}get translate(){return this.props.t}render(){return a.createElement(be,{title:this.getTitle(),subtitle:this.getSubtitle(),tooltip:this.getTooltip(),onClose:this.handleClose,disabled:this.hasAllInputDisabled()},a.createElement("form",{className:"share-form",onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content scroll permission-edit"},this.state.loading&&a.createElement("ul",{className:"permissions"},a.createElement(Me,null),a.createElement(Me,null),a.createElement(Me,null)),!this.state.loading&&a.createElement(ce(),{itemRenderer:this.renderItem,itemsRenderer:this.renderContainer,length:this.state.permissions.length,minSize:this.props.listMinSize,type:this.state.permissions.length<3?"simple":"uniform",ref:this.permissionListRef,threshold:30})),this.hasNoOwner()&&a.createElement("div",{className:"message error"},a.createElement(C.c,null,"Please make sure there is at least one owner.")),this.hasChanges()&&!this.hasNoOwner()&&a.createElement("div",{className:"message warning"},a.createElement(C.c,null,"Click save to apply your pending changes.")),a.createElement("div",{className:"form-content permission-add"},a.createElement(Le,{id:"share-name-input",name:"name",label:this.translate("Share with people or groups"),placeholder:this.translate("Start typing a user or group name"),searchCallback:this.fetchAutocompleteItems,onSelect:this.handleAutocompleteSelect,onOpen:this.handleAutocompleteOpen,onClose:this.handleAutocompleteClose,disabled:this.hasAllInputDisabled(),baseUrl:this.props.context.userSettings.getTrustedDomain()})),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleClose}),a.createElement(Ee,{disabled:this.hasSubmitDisabled(),processing:this.state.processing,value:this.translate("Save")}))))}}yc.defaultProps={listMinSize:4},yc.propTypes={context:d().any,onClose:d().func,resourceWorkspaceContext:d().any,actionFeedbackContext:d().any,dialogContext:d().any,listMinSize:d().number,t:d().func};const Ec=u(ee(D(M((0,k.Z)("common")(yc)))));class vc extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers(),this.createReferences()}get defaultState(){return{password:"",keyFile:null,actions:{processing:!1}}}bindHandlers(){this.handleInputChange=this.handleInputChange.bind(this),this.handleSelectFile=this.handleSelectFile.bind(this),this.handleFileSelected=this.handleFileSelected.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}createReferences(){this.fileUploaderRef=a.createRef(),this.passwordInputRef=a.createRef()}get selectedFilename(){return this.state.keyFile?this.state.keyFile.name:""}get isProcessing(){return this.state.actions.processing}get areActionsAllowed(){return!this.isProcessing}handleSelectFile(){this.fileUploaderRef.current.click()}async handleFileSelected(e){const[t]=e.target.files;await this.setState({keyFile:t})}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}handleCancel(){this.close()}async handleSubmit(e){e.preventDefault(),await this.setState({actions:{processing:!0}}),await this.export().then(this.onExportSuccess.bind(this)).catch(this.onExportFailure.bind(this))}async export(){const e={credentials:{password:this.state.password,keyfile:await this.readFile()}},t={format:"kdbx",folders_ids:this.props.resourceWorkspaceContext.resourcesToExport.foldersIds,resources_ids:this.props.resourceWorkspaceContext.resourcesToExport.resourcesIds,options:e};await this.props.context.port.request("passbolt.export-resources.export-to-file",t)}readFile(){if(!this.state.keyFile)return;const e=new FileReader;return new Promise(((t,s)=>{e.onloadend=e=>{try{const s=e.target.result.split(",")[1];t(s)}catch(e){s(e)}},e.readAsDataURL(this.state.keyFile)}))}async onExportSuccess(){await this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds:null,foldersIds:null}),await this.props.actionFeedbackContext.displaySuccess(this.translate("The passwords have been exported successfully")),this.close()}onExportFailure(e){if("UserAbortsOperationError"===e.name)return void this.setState({actions:{processing:!1}});const t={error:e};this.setState({actions:{processing:!1}}),this.props.dialogContext.open(we,t)}close(){this.props.onClose()}get translate(){return this.props.t}render(){return a.createElement(be,{title:this.translate("Enter the password and/or key file"),className:"export-password-dialog",onClose:this.handleCancel,disabled:!this.areActionsAllowed},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"form-content"},a.createElement("div",{className:"input-password-wrapper input "+(this.areActionsAllowed?"":"disabled")},a.createElement("label",{htmlFor:"password"},a.createElement(C.c,null,"Keepass password")),a.createElement(At,{id:"password",name:"password",value:this.state.password,onChange:this.handleInputChange,placeholder:this.translate("Passphrase"),autoComplete:"off",inputRef:this.passwordInputRef,preview:!0,disabled:!this.areActionsAllowed})),a.createElement("div",{className:"input file "+(this.areActionsAllowed?"":"disabled")},a.createElement("input",{type:"file",ref:this.fileUploaderRef,id:"dialog-exports-passwords",onChange:this.handleFileSelected}),a.createElement("label",{htmlFor:"dialog-exports-passwords"},a.createElement(C.c,null,"Keepass key file (optional)")),a.createElement("div",{className:"input-file-inline"},a.createElement("input",{type:"text",placeholder:this.translate("No key file selected"),disabled:!0,value:this.selectedFilename}),a.createElement("button",{type:"button",className:"button primary",disabled:!this.areActionsAllowed,onClick:this.handleSelectFile},a.createElement("span",null,a.createElement(C.c,null,"Choose a file")))))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:!this.areActionsAllowed,onClick:this.handleCancel}),a.createElement(Ee,{disabled:!this.areActionsAllowed,processing:this.isProcessing,value:this.translate("Export")}))))}}vc.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,dialogContext:d().any,resourceWorkspaceContext:d().any,t:d().func};const Cc=u(ee(D(M((0,k.Z)("common")(vc)))));class kc extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers()}get defaultState(){return{selectedExportFormat:this.exportFormats[0].value,actions:{processing:!1}}}bindHandlers(){this.handleExport=this.handleExport.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleClose=this.handleClose.bind(this),this.handleExportFormatSelected=this.handleExportFormatSelected.bind(this)}componentDidMount(){this.findContentToExport()}findContentToExport(){const e=this.findFoldersIdsToExport(),t=this.findResourcesIdsToExport(e);this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds:t,foldersIds:e})}get isProcessing(){return this.state.actions.processing}get areActionsAllowed(){return!this.isProcessing}get hasFoldersToExport(){const e=this.props.resourceWorkspaceContext.resourcesToExport.foldersIds;return e&&e.length>0}get hasResourcesToExport(){const e=this.props.resourceWorkspaceContext.resourcesToExport.resourcesIds;return e&&e.length>0}findFoldersIdsToExport(){if(!this.hasFoldersToExport)return[];const e=this.props.resourceWorkspaceContext.resourcesToExport.foldersIds,t=e.map((e=>this.getChildrenFoldersIds(e))).flat();return[...e,...t]}getChildrenFoldersIds(e){const t=this.props.context.folders.filter((t=>t.folder_parent_id===e)).map((e=>e.id));if(0!==t.length){const e=t.map((e=>this.getChildrenFoldersIds(e)));return[...t,...e.flat()]}return[]}findResourcesIdsToExport(e){const t=this.getResourcesIdsOfFoldersToExport(e),s=this.props.resourceWorkspaceContext.resourcesToExport.resourcesIds||[];return Array.from(new Set([...s,...t]))}getResourcesIdsOfFoldersToExport(e){return this.props.context.resources.filter((t=>e.some((e=>e===t.folder_parent_id)))).map((e=>e.id))}get exportFormats(){return[{label:"kdbx (keepass / keepassx)",value:"kdbx"},{label:"csv (keepass / keepassx)",value:"csv-kdbx"},{label:"csv (lastpass)",value:"csv-lastpass"},{label:"csv (1password)",value:"csv-1password"}]}handleExportFormatSelected(e){this.selectFormat(e.target.value)}async handleExport(e){e.preventDefault(),this.state.selectedExportFormat.startsWith("csv")?(await this.setState({actions:{processing:!0}}),this.export().then(this.onExportSuccess.bind(this)).catch(this.onExportFailure.bind(this))):(await this.props.dialogContext.open(Cc),this.close())}async handleCancel(){await this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds:null,foldersIds:null}),this.close()}async handleClose(){await this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds:null,foldersIds:null}),this.close()}selectFormat(e){this.setState({selectedExportFormat:e})}async export(){const e=this.props.resourceWorkspaceContext.resourcesToExport.foldersIds,t=this.props.resourceWorkspaceContext.resourcesToExport.resourcesIds,s={format:this.state.selectedExportFormat,folders_ids:e,resources_ids:t};await this.props.context.port.request("passbolt.export-resources.export-to-file",s)}async onExportSuccess(){await this.setState({actions:{processing:!1}}),await this.props.actionFeedbackContext.displaySuccess(this.translate("The passwords have been exported successfully")),await this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds:null,foldersIds:null}),this.close()}onExportFailure(e){if("UserAbortsOperationError"===e.name)return void this.setState({actions:{processing:!1}});const t={error:e};this.setState({actions:{processing:!1}}),this.props.dialogContext.open(we,t)}close(){this.props.onClose()}get translate(){return this.props.t}render(){const e=this.hasFoldersToExport&&this.props.resourceWorkspaceContext.resourcesToExport.foldersIds,t=this.hasResourcesToExport&&this.props.resourceWorkspaceContext.resourcesToExport.resourcesIds;return a.createElement(be,{title:this.translate("Export passwords"),onClose:this.handleClose,disabled:!this.areActionsAllowed},a.createElement("form",{onSubmit:this.handleExport,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:"select-wrapper input required "+(this.areActionsAllowed?"":"disabled")},a.createElement("label",{htmlFor:"export-format"},a.createElement(C.c,null,"Choose the export format (csv and kdbx are supported)")),a.createElement(qe,{id:"export-format",value:this.state.selectedExportFormat,items:this.exportFormats,onChange:this.handleExportFormatSelected,disabled:!this.areActionsAllowed})),this.hasFoldersToExport&&a.createElement("p",null,a.createElement("em",null,this.translate("{{count}} folder is going to be exported.",{count:e.length}))),this.hasResourcesToExport&&a.createElement("p",null,a.createElement("em",null,this.translate("{{count}} password is going to be exported.",{count:t.length})))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:!this.areActionsAllowed,processing:this.isProcessing,onClick:this.handleCancel}),a.createElement(Ee,{disabled:!this.areActionsAllowed,processing:this.isProcessing,value:this.translate("Export")}))))}}kc.propTypes={context:d().any,onClose:d().func,resourceWorkspaceContext:d().object,dialogContext:d().object,actionFeedbackContext:d().object,t:d().func};const wc=u(D(M(ee((0,k.Z)("common")(kc)))));class Sc extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{}}bindCallbacks(){this.handleCreateFolderItemClickEvent=this.handleCreateFolderItemClickEvent.bind(this),this.handleRenameFolderItemClickEvent=this.handleRenameFolderItemClickEvent.bind(this),this.handleShareFolderItemClickEvent=this.handleShareFolderItemClickEvent.bind(this),this.handleExportFolderItemClickEvent=this.handleExportFolderItemClickEvent.bind(this),this.handleDeleteFolderItemClickEvent=this.handleDeleteFolderItemClickEvent.bind(this),this.handleHide=this.handleHide.bind(this)}handleHide(){"function"==typeof this.props.onBeforeHide&&this.props.onBeforeHide(),this.props.hide()}handleCreateFolderItemClickEvent(){this.canUpdate()&&(this.props.context.setContext({folderCreateDialogProps:{folderParentId:this.props.folder.id}}),this.props.dialogContext.open(ic),this.handleHide())}handleRenameFolderItemClickEvent(){this.canUpdate()&&(this.props.context.setContext({folder:this.props.folder}),this.props.dialogContext.open(lc),this.handleHide())}handleShareFolderItemClickEvent(){if(this.canShare()){const e=[this.props.folder.id];this.props.context.setContext({shareDialogProps:{foldersIds:e}}),this.props.dialogContext.open(Ec),this.handleHide()}}async handleExportFolderItemClickEvent(){this.canExport()&&(await this.export(),this.handleHide())}handleDeleteFolderItemClickEvent(){this.canUpdate()&&(this.props.context.setContext({folder:this.props.folder}),this.props.dialogContext.open(mc),this.handleHide())}canUpdate(){return this.props.folder.permission.type>=7}canShare(){return 15===this.props.folder.permission.type}canExport(){return this.props.context.siteSettings.canIUse("export")}async export(){const e=[this.props.folder.id];await this.props.resourceWorkspaceContext.onResourcesToExport({foldersIds:e}),await this.props.dialogContext.open(wc)}render(){const e=this.canUpdate(),t=this.canShare(),s=this.canExport();return a.createElement(ht,{hide:this.handleHide,left:this.props.left,top:this.props.top,className:this.props.className},a.createElement("li",{key:"option-create-folder",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleCreateFolderItemClickEvent,className:e?"":"disabled"},a.createElement("span",null,a.createElement(C.c,null,"Create folder"))))))),a.createElement("li",{key:"option-rename-folder",className:"separator-after ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleRenameFolderItemClickEvent,className:e?"":"disabled"},a.createElement("span",null,a.createElement(C.c,null,"Rename"))))))),a.createElement("li",{key:"option-share-folder",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleShareFolderItemClickEvent,className:t?"":"disabled"},a.createElement("span",null,a.createElement(C.c,null,"Share"))))))),a.createElement("li",{key:"option-export-folder",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{className:s?"":"disabled",onClick:this.handleExportFolderItemClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Export"))))))),a.createElement("li",{key:"option-delete-folder",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleDeleteFolderItemClickEvent,className:e?"":"disabled"},a.createElement("span",null,a.createElement(C.c,null,"Delete"))))))))}}Sc.propTypes={context:d().any,folder:d().object,hide:d().func,onBeforeHide:d().func,left:d().number,top:d().number,className:d().string,dialogContext:d().any,resourceWorkspaceContext:d().any};const xc=u(ee(M((0,k.Z)("common")(Sc))));function Nc(){return Nc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Nc.apply(this,arguments)}const Rc=a.createContext({dragAndDrops:null,dragging:!1,draggedItems:null,onDragStart:()=>{},onDragEnd:()=>{}});class Ic extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.createRefs()}createRefs(){this.elementRef=a.createRef()}get defaultState(){return{displayDraggedItemsComponent:[],dragging:!1,draggedItems:null,onDragStart:this.handleDragStart.bind(this),onDragEnd:this.handleDragEnd.bind(this)}}async handleDragStart(e,t,s){await this.setState({displayDraggedItemsComponent:[{draggedItemComponent:t}],dragging:!0,draggedItems:s}),e.dataTransfer.setDragImage(this.elementRef.current,10,10)}async handleDragEnd(){await this.setState({displayDraggedItemsComponent:[],dragging:!1,draggedItems:null})}render(){return a.createElement(Rc.Provider,{value:this.state},a.createElement("div",{className:"drag-and-drop-wrapper",ref:this.elementRef},this.state.displayDraggedItemsComponent.map(((e,t)=>a.createElement(e.draggedItemComponent,{key:t})))),this.props.children)}}function Dc(e){return class extends a.Component{render(){return a.createElement(Rc.Consumer,null,(t=>a.createElement(e,Nc({dragContext:t},this.props))))}}}Ic.displayName="dragContextProvider",Ic.propTypes={children:d().any};class Tc extends a.Component{isDragging(){return this.props.dragContext.dragging}get draggedItems(){return this.props.dragContext.draggedItems}canDragItems(e){let t=e.folders.reduce(((e,t)=>e&&this.canDragItem(t)),!0);const s=e.resources;return t=t&&s.reduce(((e,t)=>e&&this.canDragItem(t)),!0),t}canDragItem(e){if(null===e.folder_parent_id)return!0;const t=this.props.context.folders.find((t=>t.id===e.folder_parent_id));return!(!t.personal&&(t.permission.type<7||e.permission.type<7))}render(){const e=this.canDragItems(this.draggedItems),t=e?this.draggedItems.folders[0].name:"You are not allowed to move this content";return a.createElement("div",{className:"drag-and-drop item-1"},!e&&a.createElement(de,{name:"ban"}),a.createElement("span",{className:"message "+(e?"":"not-allowed")},t),a.createElement("span",{className:"count"},"1"))}}Tc.contextType=g,Tc.propTypes={context:d().any,resourceWorkspaceContext:d().any,dragContext:d().any};const Ac=u(ee(Dc(Tc)));class Pc extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{draggingOver:!1,draggingOverSince:null,open:!1,moreMenuOpen:!1}}bindCallbacks(){this.handleCloseMoreMenu=this.handleCloseMoreMenu.bind(this),this.handleToggleOpenFolder=this.handleToggleOpenFolder.bind(this),this.handleContextualMenuEvent=this.handleContextualMenuEvent.bind(this),this.handleDragEndEvent=this.handleDragEndEvent.bind(this),this.handleDragLeaveEvent=this.handleDragLeaveEvent.bind(this),this.handleDragOverEvent=this.handleDragOverEvent.bind(this),this.handleDragStartEvent=this.handleDragStartEvent.bind(this),this.handleDropEvent=this.handleDropEvent.bind(this),this.handleMoreClickEvent=this.handleMoreClickEvent.bind(this),this.handleSelectEvent=this.handleSelectEvent.bind(this)}handleCloseMoreMenu(){this.setState({moreMenuOpen:!1})}handleDragStartEvent(e){e.persist();const t={folders:[this.props.folder],resources:[]};this.props.dragContext.onDragStart(e,Ac,t)}handleToggleOpenFolder(e){e.stopPropagation();const t=!this.state.open;this.setState({open:t})}openFolderParentTree(e){const t=this.props.context.folders.find((t=>t.id===e));t.folder_parent_id&&(t.folder_parent_id===this.props.folder.id?this.setState({open:!0}):this.openFolderParentTree(t.folder_parent_id))}isOpen(){return this.state.open}handleContextualMenuEvent(e){e.preventDefault();const t=e.pageY,s=e.pageX,a={folder:this.props.folder,left:s,top:t};this.props.contextualMenuContext.show(xc,a)}handleMoreClickEvent(e){const t=!this.state.moreMenuOpen;if(this.setState({moreMenuOpen:t}),t){const{left:t,top:s}=e.currentTarget.getBoundingClientRect(),a={folder:this.props.folder,left:t,top:s+18,className:"right",onBeforeHide:this.handleCloseMoreMenu};this.props.contextualMenuContext.show(xc,a)}}handleDragEndEvent(){this.props.dragContext.onDragEnd()}handleDragLeaveEvent(){this.setState({draggingOver:!1,draggingOverSince:null})}handleDragOverEvent(e){if(e.preventDefault(),this.state.draggingOver)return void this.openOnLongDragOver(e);const t=Date.now();this.setState({draggingOver:!0,draggingOverSince:t})}openOnLongDragOver(e){this.isOpen()||Date.now()-this.state.draggingOverSince>2e3&&this.handleToggleOpenFolder(e)}handleDropEvent(){const e=this.props.dragContext.draggedItems.folders.map((e=>e.id)),t=this.props.dragContext.draggedItems.resources.map((e=>e.id)),s=this.props.folder.id;this.draggedItems.folders.some((e=>e.id===s))||this.props.context.port.request("passbolt.folders.open-move-confirmation-dialog",{folders:e,resources:t,folderParentId:s}),this.setState({draggingOver:!1})}handleSelectEvent(){this.props.history.push(`/app/folders/view/${this.props.folder.id}`)}isSelected(){const e=this.props.resourceWorkspaceContext.filter;return!(e.type!==te.FOLDER||!e.payload.folder)&&e.payload.folder.id===this.props.folder.id}isChildOfAny(e,t){for(const s in t)if(e.folder_parent_id===t[s].id)return!0;if(null!==e.folder_parent_id){const s=this.props.context.folders.find((t=>t.id===e.folder_parent_id));return this.isChildOfAny(s,t)}return!1}canDragItem(e){if(null===e.folder_parent_id)return!0;const t=this.props.context.folders.find((t=>t.id===e.folder_parent_id));return!(!t.personal&&(t.permission.type<7||e.permission.type<7))}canDragItems(e){let t=e.folders.reduce(((e,t)=>e&&this.canDragItem(t)),!0);return t&=e.resources.reduce(((e,t)=>e&&this.canDragItem(t)),!0),t}getItemsListLowestPermission(e){return e.reduce(((e,t)=>(t.permission.type<e&&(e=t.permission.type),e)),15)}getDraggedItemsLowestPermission(){const e=this.getItemsListLowestPermission(this.draggedItems.folders),t=this.getItemsListLowestPermission(this.draggedItems.resources);return e<t?e:t}canDropInto(){if(!this.isDragging())return!1;if(this.props.folder.permission.type<7)return!1;if(!this.props.folder.personal&&this.getDraggedItemsLowestPermission()<7)return!1;if(this.isChildOfAny(this.props.folder,this.draggedItems.folders))return!1;for(const e in this.draggedItems.folders)if(this.props.folder.id===this.draggedItems.folders[e].id)return!1;return!0}isDragged(){return!!this.isDragging()&&this.draggedItems.folders.some((e=>e.id===this.props.folder.id))}isDisabled(){if(this.isDragging()){if(!this.canDragItems(this.draggedItems))return!0;if(!this.canDropInto())return!0}return!1}sortFoldersAlphabetically(e){e.sort(((e,t)=>{const s=e.name.toLowerCase(),a=t.name.toLowerCase();return s<a?-1:s>a?1:0}))}getChildrenFolders(){const e=this.props.context.folders.filter((e=>e.folder_parent_id===this.props.folder.id));return this.sortFoldersAlphabetically(e),e}get draggedItems(){return this.props.dragContext.draggedItems}isDragging(){return this.props.dragContext.dragging}render(){const e=this.getChildrenFolders(),t=e.length>0,s=this.isSelected(),n=this.isDisabled(),r=this.isDragged(),i=this.isOpen(),o=this.canDropInto(),l=this.state.draggingOver&&o;return a.createElement("li",{className:(i?"opened":"closed")+" folder-item"},a.createElement("div",{className:`row ${s?"selected":""} ${n?"disabled":""} ${r?"is-dragged":""} ${l?"drop-focus":""} ${t?"":"no-child"} ${this.state.moreMenuOpen?"highlight":""}`,draggable:"true",onDrop:this.handleDropEvent,onDragOver:this.handleDragOverEvent,onDragEnd:this.handleDragEndEvent,onDragLeave:this.handleDragLeaveEvent,onDragStart:this.handleDragStartEvent},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell",onClick:this.handleSelectEvent,onContextMenu:this.handleContextualMenuEvent},a.createElement("a",{role:"button"},t&&a.createElement("div",{className:"toggle-folder",onClick:this.handleToggleOpenFolder},i&&a.createElement(de,{name:"caret-down"}),!i&&a.createElement(de,{name:"caret-right"})),!this.props.folder.personal&&a.createElement(de,{name:"folder-shared"}),this.props.folder.personal&&a.createElement(de,{name:"folder"}),a.createElement("span",{title:this.props.folder.name,className:"folder-name"},this.props.folder.name)))),!r&&a.createElement("div",{className:"dropdown right-cell more-ctrl"},a.createElement("a",{className:"button "+(this.state.moreMenuOpen?"open":""),onClick:this.handleMoreClickEvent},a.createElement(de,{name:"3-dots-h"})))),t&&i&&a.createElement("ul",{className:"folders-tree"},e.map((e=>a.createElement(Uc,{key:`folders-tree-${e.id}`,folder:e})))))}}Pc.propTypes={context:d().any,contextualMenuContext:d().any,history:d().object,match:d().object,folder:d().object,resourceWorkspaceContext:d().any,dragContext:d().any};const Uc=(0,c.EN)(u(at(ee(Dc(Pc))))),_c=(0,c.EN)(u(at(ee(Dc(Pc)))));class Lc extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleCreateFolderItemClickEvent=this.handleCreateFolderItemClickEvent.bind(this),this.handleExportFolderItemClickEvent=this.handleExportFolderItemClickEvent.bind(this),this.handleHide=this.handleHide.bind(this)}handleHide(){"function"==typeof this.props.onBeforeHide&&this.props.onBeforeHide(),this.props.hide()}handleCreateFolderItemClickEvent(){this.props.context.setContext({folderCreateDialogProps:{folderParentId:null}}),this.props.dialogContext.open(ic),this.handleHide()}async handleExportFolderItemClickEvent(){await this.export(),this.handleHide()}canExport(){return this.props.context.siteSettings.canIUse("export")}async export(){const e=this.props.context.folders.filter((e=>null===e.folder_parent_id)).map((e=>e.id)),t=this.props.context.resources.filter((e=>null===e.folder_parent_id)).map((e=>e.id));await this.props.resourceWorkspaceContext.onResourcesToExport({foldersIds:e,resourcesIds:t}),await this.props.dialogContext.open(wc)}render(){return a.createElement(ht,{hide:this.handleHide,left:this.props.left,top:this.props.top,className:this.props.className},a.createElement("li",{key:"option-create-folder",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleCreateFolderItemClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Create folder"))))))),a.createElement("li",{key:"option-export-folder",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{className:this.canExport()?"":"disabled",onClick:this.handleExportFolderItemClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Export all"))))))))}}Lc.propTypes={context:d().any,hide:d().func,onBeforeHide:d().func,left:d().number,top:d().number,className:d().string,dialogContext:d().any,resourceWorkspaceContext:d().any};const Fc=u(ee(M((0,k.Z)("common")(Lc))));class Mc extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{draggingOverTitle:!1,draggingOverTitleSince:null,open:!0,moreMenuOpen:!1}}shouldComponentUpdate(e,t){return t!==this.state||e.context.folders!==this.props.context.folders||e.resourceWorkspaceContext.filter.type!==this.props.resourceWorkspaceContext.filter.type}bindCallbacks(){this.handleCloseMoreMenu=this.handleCloseMoreMenu.bind(this),this.handleClickOnTitle=this.handleClickOnTitle.bind(this),this.handleTitleContextualMenuEvent=this.handleTitleContextualMenuEvent.bind(this),this.handleDragLeaveTitle=this.handleDragLeaveTitle.bind(this),this.handleDragOverTitle=this.handleDragOverTitle.bind(this),this.handleDropTitle=this.handleDropTitle.bind(this),this.handleTitleMoreClickEvent=this.handleTitleMoreClickEvent.bind(this)}handleCloseMoreMenu(){this.setState({moreMenuOpen:!1})}handleClickOnTitle(){const e={type:te.ROOT_FOLDER};this.props.history.push("/app/passwords",{filter:e})}get isSelected(){return this.props.resourceWorkspaceContext.filter.type===te.ROOT_FOLDER}handleTitleContextualMenuEvent(e){e.preventDefault();const t=e.pageY,s={left:e.pageX,top:t};this.props.contextualMenuContext.show(Fc,s)}handleTitleMoreClickEvent(e){const t=!this.state.moreMenuOpen;if(this.setState({moreMenuOpen:t}),t){const{left:t,top:s}=e.currentTarget.getBoundingClientRect(),a={left:t,top:s+18,className:"right",onBeforeHide:this.handleCloseMoreMenu};this.props.contextualMenuContext.show(Fc,a)}}handleSectionTitleClickCaretEvent(){const e=!this.state.open;this.setState({open:e})}handleDragLeaveTitle(){this.setState({draggingOverTitle:!1,draggingOverTitleSince:null})}handleDragOverTitle(e){if(e.preventDefault(),this.state.draggingOverTitle)return void this.openTitleOnLongDragOver();const t=Date.now();this.setState({draggingOverTitle:!0,draggingOverTitleSince:t})}openTitleOnLongDragOver(){this.state.open||Date.now()-this.state.draggingOverTitleSince>2e3&&this.handleSectionTitleClickCaretEvent()}handleDropTitle(){const e=this.props.dragContext.draggedItems.folders.map((e=>e.id)),t=this.props.dragContext.draggedItems.resources.map((e=>e.id));this.props.context.port.request("passbolt.folders.open-move-confirmation-dialog",{folders:e,resources:t,folderParentId:null}),this.setState({draggingOverTitle:!1})}canDragItem(e){if(null===e.folder_parent_id)return!0;const t=this.props.context.folders.find((t=>t.id===e.folder_parent_id));return!(!t.personal&&(t.permission.type<7||e.permission.type<7))}canDragItems(e){let t=e.folders.reduce(((e,t)=>e&&this.canDragItem(t)),!0);const s=e.resources;return t=t&&s.reduce(((e,t)=>e&&this.canDragItem(t)),!0),t}isLoading(){return null===this.props.context.folders}sortFoldersAlphabetically(e){e.sort(((e,t)=>{const s=e.name.toLowerCase(),a=t.name.toLowerCase();return s<a?-1:s>a?1:0}))}getRootFolders(){let e=[];return this.isLoading()||(e=this.props.context.folders.filter((e=>null===e.folder_parent_id))),this.sortFoldersAlphabetically(e),e}isDragging(){return this.props.dragContext.dragging}get draggedItems(){return this.props.dragContext.draggedItems}render(){const e=this.isLoading(),t=this.state.open,s=this.getRootFolders();let n=!1,r=!1;return this.isDragging()&&this.state.draggingOverTitle&&(this.canDragItems(this.draggedItems)?n=!0:r=!0),a.createElement("div",{className:"navigation-secondary-tree navigation-secondary navigation-folders accordion"},a.createElement("div",{className:"accordion-header"},a.createElement("div",{className:(t?"open":"close")+" node root"},a.createElement("div",{className:`row title ${this.isSelected?"selected":""} ${n?"drop-focus":""} ${r?"disabled":""} ${this.state.moreMenuOpen?"highlight":""}`},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("h3",null,a.createElement("span",{className:"folders-label"},a.createElement("a",{role:"button",onDragOver:this.handleDragOverTitle,onDragLeave:this.handleDragLeaveTitle,onDrop:this.handleDropTitle,onClick:this.handleClickOnTitle,onContextMenu:this.handleTitleContextualMenuEvent},!e&&a.createElement("div",{className:"toggle-folder",onClick:()=>this.handleSectionTitleClickCaretEvent()},t&&a.createElement(de,{name:"caret-down"}),!t&&a.createElement(de,{name:"caret-right"})),a.createElement(C.c,null,"Folders")))))),a.createElement("div",{className:"dropdown right-cell more-ctrl"},a.createElement("a",{className:"button "+(this.state.moreMenuOpen?"open":""),onClick:this.handleTitleMoreClickEvent},a.createElement(de,{name:"3-dots-h"})))))),a.createElement("div",{className:"accordion-content"},!e&&t&&0===s.length&&a.createElement("em",{className:"empty-content"},a.createElement(C.c,null,"empty")),!e&&t&&s.length>0&&a.createElement(ce(),{itemRenderer:(e,t)=>a.createElement(_c,{key:t,folder:s[e]}),itemsRenderer:(e,t)=>a.createElement("ul",{ref:t,className:"folders-tree"},e),length:s.length,pageSize:20,minSize:20,type:"simple"})))}}Mc.propTypes={context:d().any,contextualMenuContext:d().any,history:d().object,resourceWorkspaceContext:d().object,dialogContext:d().any,dragContext:d().any};const Oc=(0,c.EN)(M(at(ee(u(Dc((0,k.Z)("common")(Mc)))))));class jc extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!0}}bindCallbacks(){this.handleFolderParentClickEvent=this.handleFolderParentClickEvent.bind(this),this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this)}handleFolderParentClickEvent(){if(this.folder.folder_parent_id){const e=this.props.context.folders.find((e=>e.id===this.folder.folder_parent_id));this.props.history.push(`/app/folders/view/${e.id}`)}else{const e={type:te.ROOT_FOLDER};this.props.history.push("/app/passwords",{filter:e})}}handleTitleClickEvent(){const e=!this.state.open;this.setState({open:e})}get folder(){return this.props.resourceWorkspaceContext.details.folder}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.props.t("Just now"):t.toRelative({locale:this.props.context.locale})}getUserUsername(e){if(this.props.context.users){const t=this.props.context.users.find((t=>t.id===e));if(t)return t.username}return""}getFolderName(e){return null===e?"/":this.props.context.folders?this.props.context.folders.find((t=>t.id===e)).name:""}render(){const e=this.getUserUsername(this.folder.created_by),t=this.getUserUsername(this.folder.modified_by),s=this.formatDateTimeAgo(this.folder.created),n=this.formatDateTimeAgo(this.folder.modified),r=this.getFolderName(this.folder.folder_parent_id);return a.createElement("div",{className:"detailed-information accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClickEvent,role:"button"},a.createElement(C.c,null,"Information"),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("div",{className:"accordion-content"},a.createElement("ul",null,a.createElement("li",{className:"username"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Name")),a.createElement("span",{className:"value"},this.folder.name)),a.createElement("li",{className:"modified"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Modified")),a.createElement("span",{className:"value",title:this.folder.modified},n)),a.createElement("li",{className:"modified-by"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Modified by")),a.createElement("span",{className:"value"},t)),a.createElement("li",{className:"modified"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Created")),a.createElement("span",{className:"value",title:this.folder.created},s)),a.createElement("li",{className:"modified-by"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Created by")),a.createElement("span",{className:"value"},e)),a.createElement("li",{className:"location"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Location")),a.createElement("span",{className:"value"},a.createElement("a",{onClick:this.handleFolderParentClickEvent,className:"folder-link "+(this.props.context.folders?"":"disabled")},a.createElement(de,{name:"folder"})," ",r))))))}}jc.propTypes={context:d().any,history:d().object,resourceWorkspaceContext:d().object,t:d().func};const qc=u((0,c.EN)(ee((0,k.Z)("common")(jc))));class Wc extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{permissions:null,open:!1,loading:!0}}bindCallbacks(){this.handlePermissionsEditClickEvent=this.handlePermissionsEditClickEvent.bind(this),this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this)}async componentDidUpdate(e){await this.handleFolderChange(e.resourceWorkspaceContext.details.folder)}handleFolderChange(e){this.folder.id!==e.id&&this.state.open&&this.fetch()}async fetch(){this.setState({loading:!0});const e=await this.props.context.port.request("passbolt.folders.find-permissions",this.folder.id);e&&e.sort(((e,t)=>this.sortPermissions(e,t))),this.setState({permissions:e,loading:!1})}sortPermissions(e,t){return e.user&&t.user?e.user.profile.first_name===t.user.profile.first_name?e.user.profile.last_name<t.user.profile.last_name?-1:1:e.user.profile.first_name<t.user.profile.first_name?-1:1:!e.user&&t.user?1:e.user&&!t.user||e.group.name<t.group.name?-1:1}handleTitleClickEvent(){const e=!this.state.open;e&&this.fetch(),this.setState({open:e})}handlePermissionsEditClickEvent(){const e=[this.folder.id];this.props.context.setContext({shareDialogProps:{foldersIds:e}}),this.props.dialogContext.open(Ec)}get folder(){return this.props.resourceWorkspaceContext.details.folder}getPermissionAroName(e){if(e.user){const t=e.user.profile;return`${t.first_name} ${t.last_name}`}return e.group.name}getPermissionLabel(e){switch(e.type){case 1:return this.translate("can read");case 7:return this.translate("can update");case 15:return this.translate("is owner")}}isLoading(){return this.state.loading}canShare(){return this.folder.permission&&15===this.folder.permission.type}get translate(){return this.props.t}render(){return a.createElement("div",{className:"sharedwith accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClickEvent,role:"button"},a.createElement(C.c,null,"Shared with"),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("div",{className:"accordion-content"},this.canShare()&&a.createElement("a",{onClick:this.handlePermissionsEditClickEvent,className:"section-action button button-transparent"},a.createElement(de,{name:"edit"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"modify"))),a.createElement("div",null,a.createElement("ul",{className:"shared-with ready"},this.isLoading()&&a.createElement("div",{className:"processing-wrapper"},a.createElement(de,{name:"spinner"}),a.createElement("span",{className:"processing-text"},a.createElement(C.c,null,"Retrieving permissions"))),this.state.permissions&&this.state.permissions.map((e=>a.createElement("li",{key:e.id,className:"usercard-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",{className:"name"},this.getPermissionAroName(e)),a.createElement("div",{className:"subinfo"},this.getPermissionLabel(e)))),e.user&&a.createElement(xe,{user:e.user,baseUrl:this.props.context.userSettings.getTrustedDomain()}),e.group&&a.createElement(Re,{group:e.group,baseUrl:this.props.context.userSettings.getTrustedDomain()}))))))))}}Wc.propTypes={context:d().any,resourceWorkspaceContext:d().object,dialogContext:d().any,t:d().func};const zc=u(M(ee((0,k.Z)("common")(Wc))));class Gc extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{activities:null,activitiesPage:1,loadingMore:!1,open:!1,loading:!0}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleMoreClickEvent=this.handleMoreClickEvent.bind(this)}async componentDidUpdate(e){await this.handleResourceChange(e.resourceWorkspaceContext.details.folder)}async handleResourceChange(e){if(this.state.open&&this.folder.id!==e.id){const e=Object.assign({},this.defaultState,{open:!0});await this.setState(e),await this.fetch(),this.setState({loading:!1})}}async handleTitleClickEvent(){if(this.state.open){const e=this.defaultState;this.setState(e)}else await this.setState({loading:!0,open:!0}),await this.fetch(),this.setState({loading:!1})}async handleMoreClickEvent(){const e=this.state.activitiesPage+1;await this.setState({activitiesPage:e,loadingMore:!0}),await this.fetch(),this.setState({loadingMore:!1})}async fetch(){const e={limit:5,page:this.state.activitiesPage},t=await this.props.context.port.request("passbolt.actionlogs.find-all-for","Folder",this.folder.id,e);let s;s=this.state.activitiesPage>1?[...this.state.activities||[],...t]:[...t],this.setState({activities:s})}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}getActivityCreatorFullName(e){return`${e.profile.first_name} ${e.profile.last_name}`}getFolderPermalink(e){return`${this.props.context.userSettings.getTrustedDomain()}/app/folders/view/${e.id}`}getPermissionAroName(e){if(e.user){const t=e.user.profile;return`${t.first_name} ${t.last_name}`}return e.group.name}getPermissionLabel(e){switch(e.type){case 1:return this.translate("can read");case 7:return this.translate("can update");case 15:return this.translate("is owner")}}getPermissionChangeTypeLabel(e){switch(e){case"created":return this.translate("new");case"updated":return this.translate("updated");case"removed":return this.translate("deleted")}}renderFolderCreatedActivity(e){const t=this.getActivityCreatorFullName(e.creator),s=this.getFolderPermalink(this.folder),n=this.folder.name,r=this.formatDateTimeAgo(e.created);return a.createElement("li",{key:e.action_log_id,className:"usercard-detailed-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",{className:"name"},a.createElement(C.c,null,a.createElement("span",{className:"creator"},{activityCreatorName:t})," created folder ",a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:s},{folderName:n}))),a.createElement("div",{className:"subinfo light"},r))),a.createElement(xe,{user:e.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderFolderUpdatedActivity(e){const t=this.getActivityCreatorFullName(e.creator),s=this.getFolderPermalink(this.folder),n=this.folder.name,r=this.formatDateTimeAgo(e.created);return a.createElement("li",{key:e.action_log_id,className:"usercard-detailed-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",{className:"name"},a.createElement(C.c,null,a.createElement("span",{className:"creator"},{activityCreatorName:t})," updated folder ",a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:s},{folderName:n}))),a.createElement("div",{className:"subinfo light"},r))),a.createElement(xe,{user:e.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderSharedActivityPermissionChangeItem(e,t){const s=this.getPermissionLabel(e),n=this.getPermissionAroName(e),r=this.getPermissionChangeTypeLabel(t);return a.createElement("li",{key:e.id,className:"clearfix"},e.user&&a.createElement(xe,{user:e.user,baseUrl:this.props.context.userSettings.getTrustedDomain()}),e.group&&a.createElement(Re,{group:e.group,baseUrl:this.props.context.userSettings.getTrustedDomain()}),a.createElement("div",{className:"name"},a.createElement("span",{className:"creator"},n),a.createElement("span",{className:"permission-type"}," - ",s)),a.createElement("div",{className:"type"},a.createElement("span",{className:t},r)))}renderPermissionsUpdatedActivity(e){const t=this.getActivityCreatorFullName(e.creator),s=this.getFolderPermalink(this.folder),n=this.folder.name,r=this.formatDateTimeAgo(e.created);return a.createElement("li",{key:e.action_log_id,className:"usercard-detailed-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",{className:"name"},a.createElement(C.c,null,a.createElement("span",{className:"creator"},{activityCreatorName:t})," changed permissions of folder ",a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:s},{folderName:n})," with")),a.createElement("div",{className:"subinfo light"},r),a.createElement("ul",{className:"permissions-list"},e.data.permissions.added.map((e=>this.renderSharedActivityPermissionChangeItem(e,"created"))),e.data.permissions.updated.map((e=>this.renderSharedActivityPermissionChangeItem(e,"updated"))),e.data.permissions.removed.map((e=>this.renderSharedActivityPermissionChangeItem(e,"removed")))))),a.createElement(xe,{user:e.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderUnknownActivity(){return a.createElement("li",{className:"usercard-detailed-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement(C.c,null,"Unknown activity, please contact your administrator."))))}renderActivity(e){let t;switch(e.type){case"Folders.created":t=this.renderFolderCreatedActivity(e);break;case"Folders.updated":t=this.renderFolderUpdatedActivity(e);break;case"Permissions.updated":t=this.renderPermissionsUpdatedActivity(e);break;default:t=this.renderUnknownActivity(e)}return t}isMoreButtonVisible(){return null!==this.state.activities&&!this.state.activities.some((e=>"Folders.created"===e.type))}get folder(){return this.props.resourceWorkspaceContext.details.folder}get translate(){return this.props.t}render(){const e=null===this.state.activities,t=this.isMoreButtonVisible();return a.createElement("div",{className:"activity accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClickEvent,role:"button"},a.createElement(C.c,null,"Activity"),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("div",{className:"accordion-content"},e&&a.createElement("div",{className:"processing-wrapper"},a.createElement(de,{name:"spinner"}),a.createElement("span",{className:"processing-text"},a.createElement(C.c,null,"Retrieving activities"))),!e&&a.createElement(a.Fragment,null,a.createElement("ul",{className:"ready"},this.state.activities.map((e=>this.renderActivity(e)))),t&&a.createElement("div",{className:"actions"},a.createElement("a",{onClick:this.handleMoreClickEvent,className:"button action-logs-load-more "+(this.state.loadingMore?"processing disabled":""),role:"button"},a.createElement("span",null,a.createElement(C.c,null,"More")))))))}}Gc.propTypes={context:d().any,resourceWorkspaceContext:d().any,t:d().func};const Hc=u(ee((0,k.Z)("common")(Gc)));class Vc extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handlePermalinkClick=this.handlePermalinkClick.bind(this)}handleCloseClick(){this.props.resourceWorkspaceContext.onLockDetail()}async handlePermalinkClick(){const e=`${this.props.context.userSettings.getTrustedDomain()}/app/folders/view/${this.props.resourceWorkspaceContext.details.folder.id}`;await qt.copy(e,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The permalink has been copied to clipboard"))}get translate(){return this.props.t}render(){return a.createElement("div",{className:"panel aside ready"},a.createElement("div",{className:"sidebar resource"},a.createElement("div",{className:"sidebar-header"},a.createElement("div",{className:"teaser-image"},a.createElement(de,{name:"folder"})),a.createElement("h3",null,a.createElement("div",{className:"title-wrapper"},a.createElement("span",{className:"name"},this.props.resourceWorkspaceContext.details.folder.name),a.createElement("a",{className:"title-link",title:this.translate("Copy the link to this folder"),onClick:this.handlePermalinkClick},a.createElement(de,{name:"link"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Copy the link to this folder")))),a.createElement("span",{className:"subtitle"},a.createElement(C.c,null,"folder"))),a.createElement("a",{className:"dialog-close",onClick:this.handleCloseClick},a.createElement(de,{name:"close"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Close")))),a.createElement(qc,null),a.createElement(zc,null),a.createElement(Hc,null)))}}Vc.propTypes={context:d().any,groups:d().array,onSelectFolderParent:d().func,onSelectRoot:d().func,onEditPermissions:d().func,users:d().array,resourceWorkspaceContext:d().object,actionFeedbackContext:d().any,t:d().func};const Kc=u(ee(D((0,k.Z)("common")(Vc))));class Bc extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!0,previewedPassword:null}}bindCallbacks(){this.handleFolderParentClickEvent=this.handleFolderParentClickEvent.bind(this),this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleUsernameClickEvent=this.handleUsernameClickEvent.bind(this),this.handlePasswordClickEvent=this.handlePasswordClickEvent.bind(this),this.handleViewPasswordButtonClick=this.handleViewPasswordButtonClick.bind(this),this.handleGoToResourceUriClick=this.handleGoToResourceUriClick.bind(this)}async componentDidUpdate(e){await this.handleResourceChange(e.resourceWorkspaceContext.details.resource)}handleResourceChange(e){const t=this.resource.id!==e.id,s=this.resource.modified!==e.modified;(t||s)&&this.state.open&&this.setState({previewedPassword:null})}get resource(){return this.props.resourceWorkspaceContext.details.resource}get safeUri(){return V(this.resource.uri,{whiteListedProtocols:se,defaultProtocol:K.HTTPS})}handleFolderParentClickEvent(){if(this.resource.folder_parent_id){const e=this.props.context.folders.find((e=>e.id===this.resource.folder_parent_id));this.props.history.push(`/app/folders/view/${e.id}`)}else{const e={type:te.ROOT_FOLDER};this.props.history.push("/app/passwords",{filter:e})}}handleTitleClickEvent(){const e=!this.state.open;this.setState({open:e})}async handleUsernameClickEvent(){await qt.copy(this.resource.username,this.props.context.port),this.displaySuccessNotification(this.translate("The username has been copied to clipboard"))}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}getUserUsername(e){if(this.props.context.users){const t=this.props.context.users.find((t=>t.id===e));if(t)return t.username}return""}getFolderName(e){if(null===e)return this.translate("root");if(this.props.context.folders){const t=this.props.context.folders.find((t=>t.id===e));if(t)return t.name}return""}async handlePasswordClickEvent(){await this.copyPasswordToClipboard()}async handleViewPasswordButtonClick(){await this.togglePreviewPassword()}async copyPasswordToClipboard(){const e=this.resource.id;let t;if(this.isPasswordPreviewed())t=this.state.previewedPassword;else try{const s=await this.decryptResourceSecret(e);t=this.extractPlaintextPassword(s)}catch(e){return void("UserAbortsOperationError"!==e.name&&this.props.actionFeedbackContext.displayError(e.message))}await qt.copy(t,this.props.context.port),await this.props.resourceWorkspaceContext.onResourceCopied(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The secret has been copied to clipboard"))}async togglePreviewPassword(){this.isPasswordPreviewed()?this.hidePreviewedPassword():await this.previewPassword()}hidePreviewedPassword(){this.setState({previewedPassword:null})}async previewPassword(){const e=this.resource.id;let t;try{const s=await this.decryptResourceSecret(e);t=this.extractPlaintextPassword(s),this.setState({previewedPassword:t})}catch(e){"UserAbortsOperationError"!==e.name&&this.props.actionFeedbackContext.displayError(e.message)}}decryptResourceSecret(e){return this.props.context.port.request("passbolt.secret.decrypt",e,{showProgress:!0})}extractPlaintextPassword(e){if(!e)throw new TypeError("The secret plaintext is empty.");if("string"==typeof e)return e;if("object"!=typeof e)throw new TypeError("The secret plaintext must be a string or an object.");if(!Object.prototype.hasOwnProperty.call(e,"password"))throw new TypeError("The secret plaintext must have a password property.");return e.password}isPasswordPreviewed(){return null!==this.state.previewedPassword}get canUsePreviewPassword(){return this.props.context.siteSettings.canIUse("previewPassword")}handleGoToResourceUriClick(){this.props.resourceWorkspaceContext.onGoToResourceUriRequested(this.resource)}displaySuccessNotification(e){this.props.actionFeedbackContext.displaySuccess(e)}get translate(){return this.props.t}render(){const e=this.props.context.siteSettings.canIUse("folders"),t=this.getUserUsername(this.resource.created_by),s=this.getUserUsername(this.resource.modified_by),n=this.formatDateTimeAgo(this.resource.created),r=this.formatDateTimeAgo(this.resource.modified),i=this.isPasswordPreviewed();return a.createElement("div",{className:"detailed-information accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClickEvent,role:"button"},a.createElement(C.c,null,"Information"),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("ul",{className:"accordion-content"},a.createElement("li",{className:"username"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Username")),a.createElement("span",{className:"value"},a.createElement("a",{onClick:this.handleUsernameClickEvent},this.resource.username))),a.createElement("li",{className:"password"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Password")),a.createElement("div",{className:"value"},a.createElement("div",{className:"secret "+(i?"":"secret-copy"),title:i?this.state.previewedPassword:"secret"},a.createElement("a",{onClick:this.handlePasswordClickEvent},a.createElement("span",null,i&&this.state.previewedPassword,!i&&a.createElement(C.c,null,"Copy password to clipboard")))),this.canUsePreviewPassword&&a.createElement("a",{onClick:this.handleViewPasswordButtonClick,className:"password-view button button-transparent"},a.createElement(de,{name:i?"eye-close":"eye-open"}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"View"))))),a.createElement("li",{className:"uri"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"URI")),a.createElement("span",{className:"value"},this.safeUri&&a.createElement("a",{onClick:this.handleGoToResourceUriClick},this.resource.uri),!this.safeUri&&a.createElement("span",null,this.resource.uri))),a.createElement("li",{className:"modified"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Modified")),a.createElement("span",{className:"value",title:this.resource.modified},r)),a.createElement("li",{className:"modified-by"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Modified by")),a.createElement("span",{className:"value"},s)),a.createElement("li",{className:"modified"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Created")),a.createElement("span",{className:"value",title:this.resource.created},n)),a.createElement("li",{className:"modified-by"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Created by")),a.createElement("span",{className:"value"},t)),e&&a.createElement("li",{className:"location"},a.createElement("span",{className:"label"},a.createElement(C.c,null,"Location")),a.createElement("span",{className:"value"},a.createElement("a",{onClick:this.handleFolderParentClickEvent,className:"folder-link "+(this.props.context.folders?"":"disabled")},a.createElement(de,{name:"folder"})," ",this.getFolderName(this.resource.folder_parent_id))))))}}Bc.propTypes={context:d().any,onSelectFolderParent:d().func,onSelectRoot:d().func,history:d().object,resourceWorkspaceContext:d().object,actionFeedbackContext:d().any,t:d().func};const $c=u((0,c.EN)(D(ee((0,k.Z)("common")(Bc)))));class Zc extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleOnClickTag=this.handleOnClickTag.bind(this)}handleOnClickTag(e,t){e.stopPropagation();const s={type:te.TAG,payload:{tag:t}};this.props.history.push({pathname:"/app/passwords",state:{filter:s}})}isLoading(){return!this.props.tags}getTags(){return this.isLoading()?null:this.props.tags.sort(((e,t)=>e.slug.localeCompare(t.slug)))}render(){const e=this.isLoading();return a.createElement("div",null,e&&a.createElement("div",{className:"processing-wrapper"},a.createElement(de,{name:"spinner"}),a.createElement("span",{className:"processing-text"},a.createElement(C.c,null,"Retrieving tags"))),!e&&0===this.props.tags.length&&a.createElement("span",{className:"empty-content",onClick:this.props.toggleInputTagEditor},a.createElement(C.c,null,"There is no tag, click here to add one")),!e&&this.props.tags.length>0&&a.createElement("ul",{className:"tags tags-list",onClick:this.props.toggleInputTagEditor},this.getTags().map((e=>a.createElement("li",{key:e.id,className:"tag-list-item"},a.createElement("a",{onClick:t=>this.handleOnClickTag(t,e),className:"tag ellipsis"},a.createElement("span",{className:"tag-content"},e.slug)))))))}}Zc.propTypes={tags:d().array,toggleInputTagEditor:d().func,resourceWorkspaceContext:d().any,history:d().any};const Yc=(0,c.EN)(ee((0,k.Z)("common")(Zc)));class Jc extends a.Component{constructor(e){super(e),this.bindEventHandlers()}bindEventHandlers(){this.onClick=this.onClick.bind(this)}getClassName(){return this.props.selected?"row selected":"row"}onClick(e){this.props.onClick(e,this.props.id)}render(){return a.createElement("li",{className:"autocomplete-item"},a.createElement("div",{className:`autocomplete-suggestion ${this.getClassName()} `},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell "},a.createElement("a",{role:"button",onClick:e=>this.onClick(e)},a.createElement("div",{className:"user"},a.createElement("span",{className:"name ellipsis"},this.props.slug)))))))}}Jc.propTypes={id:d().number,slug:d().string,selected:d().bool,onClick:d().func};const Xc=Jc;class Qc extends a.Component{constructor(e){super(e),this.bindEventHandlers(),this.createInputRefs(),this.state=this.getDefaultState()}getDefaultState(){return{selected:-1}}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown,{capture:!0})}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown,{capture:!0})}createInputRefs(){this.listRef=a.createRef()}bindEventHandlers(){this.handleKeyDown=this.handleKeyDown.bind(this),this.selectNext=this.selectNext.bind(this),this.selectPrevious=this.selectPrevious.bind(this),this.handleSelect=this.handleSelect.bind(this)}handleKeyDown(e){if(this.props.autocompleteItems){if(40===e.keyCode)return e.preventDefault(),void this.selectNext();if(38===e.keyCode)return e.preventDefault(),void this.selectPrevious();if(8!==e.keyCode){if(13===e.keyCode||9===e.keyCode){if(null===this.state.selected||-1===this.state.selected)return;e.preventDefault();const t=this.props.autocompleteItems[this.state.selected];this.props.onSelect(t)}}else this.setState({selected:-1})}}handleSelect(e,t){const s=this.props.autocompleteItems[t];this.props.onSelect(s),e.nativeEvent.stopImmediatePropagation()}handleArrowFocus(){if(-1===this.state.selected)this.props.onArrowFocus(this.props.value);else{const e=this.props.autocompleteItems[this.state.selected].slug;this.props.onArrowFocus(e)}}selectPrevious(){-1===this.state.selected?this.setState({selected:this.props.autocompleteItems.length-1}):this.setState({selected:this.state.selected-1}),this.scrollToSelectedItem(),this.handleArrowFocus()}selectNext(){this.state.selected===this.props.autocompleteItems.length-1?this.setState({selected:-1}):this.setState({selected:this.state.selected+1}),this.scrollToSelectedItem(),this.handleArrowFocus()}isItemSelected(e){return null!==this.state.selected&&e===this.state.selected}getStyle(){const e=this.props.width-this.props.left;return{left:this.props.left,top:this.props.top,maxWidth:e}}scrollToSelectedItem(){if(this.props.autocompleteItems&&0!==this.props.autocompleteItems.length&&-1!==this.state.selected){const e=this.listRef.current.scrollHeight/this.props.autocompleteItems.length,t=this.listRef.current.clientHeight,s=t-e*Math.round(t/e),a=e*this.state.selected,n=this.listRef.current.scrollTop;if(a-s<n)return void(this.listRef.current.scrollTop=this.listRef.current.scrollTop-t);if(a>n+t)return void(this.listRef.current.scrollTop=a)}else this.listRef.current.scrollTop=0}render(){return a.createElement("div",{className:"autocomplete-suggestions",style:this.getStyle()},a.createElement("div",{className:"autocomplete-content scroll",ref:this.listRef},a.createElement("ul",null,!this.state.processing&&this.props.autocompleteItems&&this.props.autocompleteItems.map(((e,t)=>a.createElement(Xc,{key:t,id:t,slug:e.slug,selected:this.isItemSelected(t),onClick:this.handleSelect}))),this.state.processing&&a.createElement("li",{className:"autocomplete-suggestion row"},a.createElement(de,{name:"spinner"})))))}}Qc.propTypes={id:d().string,autocompleteItems:d().array,top:d().number,left:d().number,width:d().number,onSelect:d().func,onArrowFocus:d().func,value:d().string};const em=Qc;class tm extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.createRefs(),this.bindCallbacks()}getDefaultState(){return{tags:this.getResourceTags(),inputTagValue:"",processing:!1,loading:!0,tagAlreadyPresent:"",allTags:null,autocompletePosition:{top:0,left:0,width:0},suggestedTags:null,errorMessage:""}}getResourceTags(){return this.props.tags?[...this.props.tags]:[]}createRefs(){this.elementRef=a.createRef(),this.inputTagRef=a.createRef()}bindCallbacks(){this.handleEditorClickEvent=this.handleEditorClickEvent.bind(this),this.handleOnSubmit=this.handleOnSubmit.bind(this),this.handleOnInput=this.handleOnInput.bind(this),this.handleKeyPressed=this.handleKeyPressed.bind(this),this.handleOnKeyDown=this.handleOnKeyDown.bind(this),this.deleteTag=this.deleteTag.bind(this),this.focusOnInputTag=this.focusOnInputTag.bind(this),this.handleAutocompleteSelect=this.handleAutocompleteSelect.bind(this),this.handleAutocompleteArrowFocus=this.handleAutocompleteArrowFocus.bind(this)}componentDidMount(){document.addEventListener("click",this.handleEditorClickEvent,{capture:!0}),this.fetchAllTags(),this.setState({loading:!1},(()=>{this.focusOnInputTag()}))}componentWillUnmount(){document.removeEventListener("click",this.handleEditorClickEvent,{capture:!0})}focusOnInputTag(){this.inputTagRef.current.focus()}async fetchAllTags(){const e=await this.props.context.port.request("passbolt.tags.find-all");e&&this.setState({allTags:e})}hasAllInputDisabled(){return this.state.processing||this.state.loading}handleEditorClickEvent(e){this.elementRef.current.contains(e.target)||(this.inputTagRef.current.contains(e.target)?this.focusOnInputTag():this.props.toggleInputTagEditor())}handleOnInput(){this.setInputTagValue(),this.getSuggestedTags(),this.getPositionOfInputTag()}setInputTagValue(){const e=this.inputTagRef.current.textContent;this.setState({inputTagValue:e})}resetInputTagValue(){this.inputTagRef.current.textContent="",this.setInputTagValue()}getPositionOfInputTag(){const e=this.inputTagRef.current.offsetTop+30,t={left:this.inputTagRef.current.offsetLeft,top:e,width:this.elementRef.current.getBoundingClientRect().width};this.setState({autocompletePosition:t})}createTag(e){let t=!1;return e.startsWith("#")&&(t=!0),{slug:e,is_shared:t}}isTagDeletable(e){return(this.props.isOwner||!e.is_shared)&&!this.hasAllInputDisabled()}isTagAlreadyPresent(e){return!!this.state.tags.filter((t=>t.slug===e)).shift()}setErrorMessage(e){this.setState({errorMessage:e})}blinkTagAlreadyPresent(e){this.setState({tagAlreadyPresent:e}),setTimeout((()=>{this.setState({tagAlreadyPresent:""})}),2e3)}isTagExceedMaxLength(e){return e.length>128}validateTag(e){return!(!e&&0===e.trim().length||(this.isTagExceedMaxLength(e.trim())?(this.setErrorMessage(this.translate("This tag can't be added, the length cannot exceed {{tagMaxLength}}",{tagMaxLength:128})),1):!this.props.isOwner&&e.startsWith("#")?(this.setErrorMessage(this.translate("This shared tag can't be added, you are not the owner")),1):this.isTagAlreadyPresent(e.trim())&&(this.blinkTagAlreadyPresent(e.trim()),this.setErrorMessage(this.translate("This tag is already present")),this.resetInputTagValue(),1)))}checkTagToBeSaved(){const e=this.inputTagRef.current.textContent;if(this.setErrorMessage(""),!e&&0===e.trim().length)return!0;if(this.validateTag(e)){const t=this.createTag(e.trim());return this.insertTag(t),this.resetInputTagValue(),this.hideAutocomplete(),!0}return!1}insertTag(e){const t=this.state.tags;t.push(e),this.setState({tags:t})}handleKeyPressed(e){13!==e.which||this.inputTagRef.current.textContent?13!==e.which&&44!==e.which||(e.preventDefault(),this.checkTagToBeSaved()):this.handleOnSubmit()}checkTagToDelete(){if(!this.inputTagRef.current.textContent){const e=this.state.tags.slice(-1)[0];if(this.isTagDeletable(e)){const e=this.state.tags;e.pop(),this.setState({tags:e}),this.setErrorMessage("")}else this.setErrorMessage(this.translate("This shared tag can't be deleted, you are not the owner"))}}deleteTag(e,t){e.nativeEvent.stopImmediatePropagation();const s=this.state.tags;s.splice(t,1),this.setState({tags:s})}mustShowAutocomplete(){return this.state.suggestedTags&&this.state.suggestedTags.length>0}hideAutocomplete(){this.setState({suggestedTags:null})}handleOnKeyDown(e){8===e.which?this.checkTagToDelete():27===e.which&&(this.mustShowAutocomplete()?(this.inputTagRef.current.textContent=this.state.inputTagValue,this.setCaretCursorToEnd(),this.hideAutocomplete()):this.props.toggleInputTagEditor())}async handleOnSubmit(){this.state.processing||(this.setState({processing:!0}),this.checkTagToBeSaved()?await this.updateTags():this.setState({processing:!1}))}async updateTags(){try{this.props.loadingContext.add(),await this.props.context.port.request("passbolt.tags.update-resource-tags",this.props.resourceId,this.state.tags),this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The tags have been updated successfully")),this.setState({processing:!1}),this.props.toggleInputTagEditor()}catch(e){this.props.loadingContext.remove(),console.error(e),this.setState({errorMessage:e.message,processing:!1})}}getSuggestedTags(){const e=this.inputTagRef.current.textContent;if(e&&this.state.allTags){const t=this.state.allTags.filter((t=>0===this.state.tags.filter((e=>e.slug===t.slug)).length&&this.isTagDeletable(t)&&-1!=t.slug.toLowerCase().indexOf(e.toLowerCase())));this.setState({suggestedTags:t})}else this.setState({suggestedTags:null})}handleAutocompleteSelect(e){this.insertTag(e),this.resetInputTagValue(),this.focusOnInputTag(),this.hideAutocomplete()}handleAutocompleteArrowFocus(e){this.inputTagRef.current.textContent=e,this.setCaretCursorToEnd(),this.getPositionOfInputTag()}setCaretCursorToEnd(){const e=document.createRange(),t=window.getSelection();e.setStart(this.inputTagRef.current.childNodes[0],this.inputTagRef.current.textContent.length),e.collapse(!0),t.removeAllRanges(),t.addRange(e)}get translate(){return this.props.t}render(){return a.createElement("div",{className:"form-content",ref:this.elementRef},a.createElement("div",{className:"input tag-editor"},a.createElement("div",{className:"tag-editor-input-wrapper",onClick:this.focusOnInputTag},this.state.tags&&this.state.tags.map(((e,t)=>a.createElement("div",{key:t,className:"tag"},a.createElement("span",{className:"tag-content ellipsis "+(this.state.tagAlreadyPresent===e.slug?"blink-fast":"")},e.slug),this.isTagDeletable(e)&&a.createElement("span",{className:"tag-delete",onClick:e=>this.deleteTag(e,t)},a.createElement(de,{name:"close"}))))),a.createElement("div",{ref:this.inputTagRef,className:"tag-editor-input",contentEditable:!this.hasAllInputDisabled(),suppressContentEditableWarning:"true",onKeyPress:this.handleKeyPressed,onKeyDown:this.handleOnKeyDown,onInput:this.handleOnInput}),this.mustShowAutocomplete()&&a.createElement(em,{id:"tag-autocomplete",value:this.state.inputTagValue,autocompleteItems:this.state.suggestedTags,left:this.state.autocompletePosition.left,top:this.state.autocompletePosition.top,width:this.state.autocompletePosition.width,onSelect:this.handleAutocompleteSelect,onArrowFocus:this.handleAutocompleteArrowFocus})),this.state.errorMessage&&a.createElement("div",{className:"error-message"},this.state.errorMessage)),a.createElement("div",{className:"actions"},a.createElement("a",{className:"button cancel tag-editor-cancel "+(this.hasAllInputDisabled()?"disabled":""),role:"button",onClick:this.props.toggleInputTagEditor},a.createElement("span",null,a.createElement(C.c,null,"Cancel"))),a.createElement("a",{className:"button primary tag-editor-submit "+(this.hasAllInputDisabled()?"processing disabled":""),onClick:this.handleOnSubmit},a.createElement("span",null,a.createElement(C.c,null,"Save")))),!this.state.errorMessage&&this.props.isOwner&&a.createElement("div",{className:"message notice"},a.createElement("strong",null,a.createElement(C.c,null,"Pro tip"),":")," ",a.createElement(C.c,null,"Tags starting with # are shared with all users who have access. Separate tags using commas.")))}}tm.propTypes={context:d().any,tags:d().array,isOwner:d().bool,toggleInputTagEditor:d().func,resourceId:d().string,actionFeedbackContext:d().any,loadingContext:d().any,t:d().func};const sm=u(H(D((0,k.Z)("common")(tm))));class am extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!1,showTagEditor:!1}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.toggleInputTagEditor=this.toggleInputTagEditor.bind(this)}handleTitleClickEvent(){const e=!this.state.open;this.setState({open:e})}get resource(){return this.props.resourceWorkspaceContext.details.resource}toggleInputTagEditor(){const e=!this.state.showTagEditor;this.setState({showTagEditor:e})}render(){const e=this.resource,t=e&&15===this.resource.permission.type,s=e&&this.resource.tags;return a.createElement("div",{className:"detailed-information accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClickEvent,role:"button"},a.createElement(C.c,null,"Tags"),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("div",{className:"accordion-content"},a.createElement("a",{className:"section-action button button-transparent",onClick:this.toggleInputTagEditor},a.createElement(de,{name:"edit"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Edit"))),!this.state.showTagEditor&&a.createElement(Yc,{tags:s,toggleInputTagEditor:this.toggleInputTagEditor}),this.state.showTagEditor&&a.createElement(sm,{tags:s,isOwner:t,toggleInputTagEditor:this.toggleInputTagEditor,resourceId:this.resource.id})))}}am.propTypes={history:d().any,resourceWorkspaceContext:d().any};const nm=ee((0,k.Z)("common")(am));class rm extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks(),this.createRefs()}componentDidMount(){this.textareaRef.current.focus()}getDefaultState(){return{content:"",actions:{processing:!1},errors:{}}}bindCallbacks(){this.handleSubmitEvent=this.handleSubmitEvent.bind(this),this.handleCancelEvent=this.handleCancelEvent.bind(this),this.handleContentChanged=this.handleContentChanged.bind(this),this.handleEscapeKeyPressed=this.handleEscapeKeyPressed.bind(this)}createRefs(){this.textareaRef=a.createRef()}get isValid(){return Object.values(this.state.errors).every((e=>!e))}async handleSubmitEvent(e){if(e.preventDefault(),await this.validate(),this.isValid)try{await this.setState({actions:{processing:!0}}),this.props.loadingContext.add();const e=await this.add();await this.handleSubmitSuccess(e)}catch(e){await this.handleSubmitFailure(e)}}async handleSubmitSuccess(e){this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The comment has been added successfully")),this.props.onAdd(e)}async handleSubmitFailure(e){this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displayError(e.message),await this.setState({actions:{processing:!1},errors:{technicalError:e.message}})}handleCancelEvent(){this.props.onCancel()}handleContentChanged(e){this.setState({content:e.target.value})}handleEscapeKeyPressed(e){27===e.keyCode&&this.props.cancellable&&(e.stopPropagation(),this.props.onCancel())}async add(){const e=this.state.content.trim(),t={foreign_key:this.props.resource.id,foreign_model:"Resource",content:e,user_id:this.props.context.loggedInUser.id};return await this.props.context.port.request("passbolt.comments.create",t)}async validate(){const e={isEmpty:""===this.state.content.trim(),isTooLong:this.state.content.length>256};await this.setState({errors:e})}get translate(){return this.props.t}render(){return a.createElement("form",{className:"comment",autoComplete:"off"},a.createElement("div",{className:"wrap-right-column"},a.createElement("div",{className:"right-column"},a.createElement("div",{className:"form-content"},a.createElement("div",{className:"input textarea required"},a.createElement("textarea",{ref:this.textareaRef,placeholder:this.translate("Add a comment"),onChange:this.handleContentChanged,onKeyDown:this.handleEscapeKeyPressed,disabled:this.state.actions.processing}),a.createElement("div",{className:"error-message"},this.state.errors.isEmpty&&this.translate("A comment is required."),this.state.errors.isTooLong&&this.translate("A comment must be less than 256 characters"),this.state.errors.technicalError)),a.createElement("div",{className:"metadata"},a.createElement("span",{className:"author username"},a.createElement(C.c,null,"You")),a.createElement("span",{className:"modified"},a.createElement(C.c,null,"right now"))),a.createElement("div",{className:"actions"},this.props.cancellable&&a.createElement("button",{type:"button",className:"button cancel",role:"button",onClick:this.handleCancelEvent,disabled:this.state.actions.processing},a.createElement("span",null,a.createElement(C.c,null,"Cancel"))),a.createElement("button",{className:"button primary comment-submit",type:"submit",onClick:this.handleSubmitEvent,disabled:this.state.actions.processing},a.createElement(C.c,null,"Save")))))),a.createElement("div",{className:"left-column"},a.createElement(xe,{user:this.props.context.loggedInUser,baseUrl:this.props.context.siteSettings.settings.app.url,className:"author profile picture avatar"})))}}rm.propTypes={context:d().any,resource:d().object,onAdd:d().func,onCancel:d().func,cancellable:d().bool,actionFeedbackContext:d().any,loadingContext:d().any,t:d().func};const im=u(H(D((0,k.Z)("common")(rm))));class om extends a.Component{constructor(e,t){super(e,t),this.state=this.defaultState,this.bindEventHandlers()}get defaultState(){return{actions:{processing:!1}}}bindEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleConfirm=this.handleConfirm.bind(this)}async handleConfirm(e){e.preventDefault();try{await this.setState({actions:{processing:!0}}),this.props.loadingContext.add(),await this.props.context.port.request("passbolt.comments.delete",this.props.context.resourceCommentId),this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The comment has been deleted successfully")),await this.setState({actions:{processing:!1}}),this.props.context.setContext({resourceCommentId:null,mustRefreshComments:!0}),this.props.onClose()}catch(e){await this.setState({actions:{processing:!1}}),await this.props.actionFeedbackContext.displayError(e),this.props.context.setContext({resourceCommentId:null,mustRefreshComments:!1}),this.props.onClose()}}handleClose(){this.props.context.setContext({resourceCommentId:null}),this.props.onClose()}get translate(){return this.props.t}render(){return a.createElement("div",null,a.createElement(be,{className:"comment-delete-dialog",title:this.translate("Delete comment?"),onClose:this.handleClose,disabled:this.state.actions.processing},a.createElement("form",{className:"comment-delete-form",onSubmit:this.handleConfirm,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("p",null,a.createElement(C.c,null,"Are you sure you want to delete the comment?")),a.createElement("p",null,a.createElement(C.c,null,"Once the comment is deleted, itll be removed permanently and will not be recoverable."))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.state.actions.processing,onClick:this.handleClose}),a.createElement(Ee,{disabled:this.state.actions.processing,processing:this.state.processing,value:this.translate("Delete"),warning:!0})))))}}om.propTypes={context:d().any,actionFeedbackContext:d().object,loadingContext:d().object,onClose:d().func,t:d().func};const lm=u(H(D((0,k.Z)("common")(om))));class cm extends a.Component{constructor(e){super(e),this.bindEventHandlers()}bindEventHandlers(){this.delete=this.delete.bind(this)}delete(){this.props.context.setContext({resourceCommentId:this.props.commentId}),this.props.dialogContext.open(lm)}render(){return a.createElement("a",{className:"delete-comment button button-transparent",onClick:this.delete},a.createElement("span",{className:"svg-icon"},a.createElement(de,{name:"trash"})),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Delete")))}}cm.propTypes={context:d().any,commentId:d().string,dialogContext:d().any};const mm=u(M((0,k.Z)("common")(cm)));class dm extends a.Component{constructor(e){super(e),this.state=this.getDefaultState()}getDefaultState(){return{comments:[],actions:{loading:!1}}}async componentDidMount(){await this.fetch()}componentDidUpdate(e){this.checkRefresh(e.mustRefresh)}async fetch(){await this.setState({actions:{loading:!0}});const e=this.props.resource.id,t=await this.props.context.port.request("passbolt.comments.find-all-by-resource",e);await this.setState({comments:t.sort(((e,t)=>B.ou.fromISO(t.created)<B.ou.fromISO(e.created)?-1:1))}),this.props.onFetch(t),await this.setState({actions:{loading:!1}})}checkRefresh(e){(this.props.mustRefresh&&!e||this.props.context.mustRefreshComments)&&this.fetch(),this.props.context.mustRefreshComments&&this.props.context.setContext({mustRefreshComments:!1})}canDeleteComment(e){return this.isOwner(e)}isOwner(e){return this.props.context.loggedInUser.id===e.created_by}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.props.t("Just now"):t.toRelative({locale:this.props.context.locale})}render(){return a.createElement(a.Fragment,null,!this.state.actions.loading&&a.createElement("ul",null,this.state.comments.map(((e,t)=>a.createElement("li",{key:t,className:"comment"},a.createElement("div",{className:"wrap-right-column"},a.createElement("div",{className:"right-column"},a.createElement("p",null," ",e.content," "),a.createElement("div",{className:"metadata"},this.isOwner(e)&&a.createElement("span",{className:"author username"},a.createElement(C.c,null,"You")),!this.isOwner(e)&&a.createElement("span",{className:"author username"},e.creator.profile.first_name," ",e.creator.profile.last_name),a.createElement("span",{className:"modified"},this.formatDateTimeAgo(e.created))),a.createElement("div",{className:"actions"},a.createElement("ul",null,a.createElement("li",null,this.canDeleteComment(e)&&a.createElement(mm,{commentId:e.id})))))),a.createElement("div",{className:"left-column"},a.createElement(xe,{user:e.creator,baseUrl:this.props.context.siteSettings.settings.app.url,className:"author profile picture avatar"})))))),this.state.actions.loading&&a.createElement("div",{className:"processing-wrapper"},a.createElement(de,{name:"spinner"}),a.createElement("span",{className:"processing-text"},a.createElement(C.c,null,"Retrieving comments"))))}}const hm=u((0,k.Z)("common")(dm));dm.propTypes={context:d().any,resource:d().object,onFetch:d().func,mustRefresh:d().bool,t:d().func};class pm extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!1,comments:[],canAdd:!1,canAddByIcon:!1,mustRefresh:!1}}componentDidUpdate(e){this.handleResourceChange(e.resourceWorkspaceContext.details.resource)}bindCallbacks(){this.handleTitleClickedEvent=this.handleTitleClickedEvent.bind(this),this.handleAddedEvent=this.handleAddedEvent.bind(this),this.handleCancelledAddEvent=this.handleCancelledAddEvent.bind(this),this.handleRequestedAddEvent=this.handleRequestedAddEvent.bind(this),this.handleFetchedEvent=this.handleFetchedEvent.bind(this)}async handleResourceChange(e){this.state.open&&this.resource.id!==e.id&&await this.setState({mustRefresh:!0})}async handleTitleClickedEvent(){const e=!this.state.open;this.setState({open:e})}async handleAddedEvent(){await this.setState({mustRefresh:!0,canAdd:!1,canAddByIcon:!0})}async handleCancelledAddEvent(){await this.setState({canAdd:!1})}async handleRequestedAddEvent(){await this.setState({canAdd:!0})}async handleFetchedEvent(e){const t=e&&e.length>0;await this.setState({mustRefresh:!1,canAdd:!t,canAddByIcon:t})}get resource(){return this.props.resourceWorkspaceContext.details.resource}render(){return a.createElement("div",{className:"comments accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClickedEvent,role:"button"},a.createElement(C.c,null,"Comments"),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),this.state.open&&a.createElement("div",{className:"accordion-content"},this.state.canAddByIcon&&a.createElement("a",{className:"section-action button button-transparent",href:"#",onClick:this.handleRequestedAddEvent},a.createElement(de,{name:"plus-circle"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Create"))),this.state.canAdd&&a.createElement(im,{resource:this.resource,onAdd:this.handleAddedEvent,onCancel:this.handleCancelledAddEvent,cancellable:this.state.canAddByIcon}),a.createElement(hm,{resource:this.resource,onFetch:this.handleFetchedEvent,mustRefresh:this.state.mustRefresh})))}}pm.propTypes={resourceWorkspaceContext:d().any};const um=ee((0,k.Z)("common")(pm));class gm extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks(),this.createInputRef()}getDefaultState(){return{encryptDescription:!1,description:void 0,plaintextDto:void 0,loading:!0,processing:!1,error:""}}bindCallbacks(){this.handleEditorClickEvent=this.handleEditorClickEvent.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleDescriptionToggle=this.handleDescriptionToggle.bind(this)}createInputRef(){this.elementRef=a.createRef(),this.textareaRef=a.createRef()}componentDidMount(){this.handleOutsideEditorClickEvent();const e={loading:!1,plaintextDto:this.props.plaintextDto,description:this.props.description,encryptDescription:this.mustEncryptDescription()};this.setState(e,this.setFocusOnDescriptionEditor.bind(this))}componentWillUnmount(){this.removeOutsideEditorClickEvent()}mustEncryptDescription(){return this.props.context.resourceTypesSettings.mustEncryptDescription(this.props.resource.resource_type_id)}get resourceTypesSettings(){return this.props.context.resourceTypesSettings}isEncryptedDescriptionEnabled(){return this.resourceTypesSettings.isEncryptedDescriptionEnabled()}areResourceTypesEnabled(){return this.resourceTypesSettings.areResourceTypesEnabled()}get description(){return this.state.description}get plaintextDto(){return this.state.plaintextDto}async save(){this.setState({processing:!0});try{await this.updateResource(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The description has been updated successfully")),await this.props.resourceWorkspaceContext.onResourceDescriptionEdited(),this.close(this.state.description)}catch(e){"UserAbortsOperationError"===e.name?this.setState({processing:!1}):(console.error(e),this.setState({error:e.message,processing:!1}))}}async updateResource(){return this.state.encryptDescription?this.updateWithEncryptedDescription():this.updateCleartextDescription()}async updateCleartextDescription(){const e={...this.props.resource};return e.description=this.description,this.props.context.port.request("passbolt.resources.update",e,null)}async updateWithEncryptedDescription(){const e={...this.props.resource};e.description="",e.resource_type_id=this.props.context.resourceTypesSettings.findResourceTypeIdBySlug(this.props.context.resourceTypesSettings.DEFAULT_RESOURCE_TYPES_SLUGS.PASSWORD_AND_DESCRIPTION);let t={};if(void 0===this.plaintextDto){const s=await this.props.context.port.request("passbolt.secret.decrypt",e.id,{showProgress:!1});t.password=s}else t={...this.plaintextDto};return t.description=this.description,await this.setState({plaintextDto:t}),this.props.context.port.request("passbolt.resources.update",e,t)}close(e){return this.props.onClose(e,this.plaintextDto)}removeOutsideEditorClickEvent(){document.removeEventListener("click",this.handleEditorClickEvent,{capture:!0})}handleOutsideEditorClickEvent(){document.addEventListener("click",this.handleEditorClickEvent,{capture:!0})}setFocusOnDescriptionEditor(){const e=this.description?this.description.length:0;this.textareaRef.current.selectionStart=e,this.textareaRef.current.selectionEnd=e,this.textareaRef.current.focus()}handleEditorClickEvent(e){this.elementRef.current.contains(e.target)||this.state.processing||this.close(this.props.description)}hasAllInputDisabled(){return this.state.processing||this.state.loading}handleKeyDown(e){27===e.keyCode&&(e.stopPropagation(),this.close(this.props.description))}handleCancel(){this.close(this.props.description)}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}async handleFormSubmit(e){e.preventDefault(),this.state.processing||(this.props.loadingContext.add(),await this.save(),this.props.loadingContext.remove())}async handleDescriptionToggle(e){if(e.nativeEvent.stopImmediatePropagation(),(this.isEncryptedDescriptionEnabled()||this.state.encryptDescription)&&!this.mustEncryptDescription()){const e=!this.state.encryptDescription;this.setState({encryptDescription:e})}}get translate(){return this.props.t}render(){return a.createElement("form",{onKeyDown:this.handleKeyDown,noValidate:!0,className:"description-editor"},a.createElement("div",{className:"form-content",ref:this.elementRef},a.createElement("div",{className:"input textarea required"},a.createElement("textarea",{name:"description",className:"fluid",ref:this.textareaRef,maxLength:"10000",placeholder:this.translate("Enter a description"),value:this.description,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),autoComplete:"off"})),this.state.error&&a.createElement("div",{className:"feedbacks error-message"},this.state.error),a.createElement("div",{className:"actions"},a.createElement("div",{className:"description-lock"},!this.areResourceTypesEnabled()&&a.createElement(ge,{message:this.translate("Do not store sensitive data. Unlike the password, this data is not encrypted. Upgrade to version 3 to encrypt this information.")},a.createElement(de,{name:"info-circle"})),this.areResourceTypesEnabled()&&!this.state.encryptDescription&&a.createElement("a",{role:"button",onClick:e=>this.handleDescriptionToggle(e),className:"lock-toggle"},a.createElement(ge,{message:this.translate("Do not store sensitive data or click here to enable encryption for the description field.")},a.createElement(de,{name:"lock-open"}))),this.areResourceTypesEnabled()&&this.state.encryptDescription&&a.createElement("a",{role:"button",onClick:e=>this.handleDescriptionToggle(e),className:"lock-toggle"},a.createElement(ge,{message:this.translate("The description content will be encrypted."),icon:""},a.createElement(de,{name:"lock"})))),a.createElement("a",{className:"cancel button "+(this.hasAllInputDisabled()?"disabled":""),role:"button",onClick:this.handleCancel},a.createElement(C.c,null,"Cancel")),a.createElement("a",{className:"button primary description-editor-submit "+(this.hasAllInputDisabled()?"processing disabled":""),onClick:this.handleFormSubmit,role:"button"},a.createElement("span",null,a.createElement(C.c,null,"Save"))))))}}gm.propTypes={context:d().any,description:d().string,resource:d().any,plaintextDto:d().any,onClose:d().func,resourceWorkspaceContext:d().any,actionFeedbackContext:d().any,loadingContext:d().any,t:d().func};const fm=u(ee(H(D((0,k.Z)("common")(gm)))));class bm extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!1,error:!1,isSecretDecrypting:!1,showDescriptionEditor:!1,description:void 0,plaintextDto:void 0}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.toggleInputDescriptionEditor=this.toggleInputDescriptionEditor.bind(this),this.onCloseDescriptionEditor=this.onCloseDescriptionEditor.bind(this),this.handleEditClickEvent=this.handleEditClickEvent.bind(this),this.handleRetryDecryptClickEvent=this.handleRetryDecryptClickEvent.bind(this)}componentDidMount(){this.state.open&&this.setDescription()}componentDidUpdate(e){(this.resource.id!==e.resourceWorkspaceContext.details.resource.id||this.resource.modified!==e.resourceWorkspaceContext.details.resource.modified&&!this.state.showDescriptionEditor)&&(this.state.open?this.setDescription():this.setState({description:void 0}))}setDescription(){this.isResourceDescriptionEncrypted()?this.decryptSecret():this.setState({description:this.resource.description,error:!1})}isResourceDescriptionEncrypted(){return!!this.resource.resource_type_id&&this.props.context.resourceTypesSettings.assertResourceTypeIdHasEncryptedDescription(this.resource.resource_type_id)}getSecretDescription(e){let t;return"string"==typeof e?t=e:e.description&&(t=e.description),t}async decryptSecret(){this.setState({isSecretDecrypting:!0});try{const e=await this.props.context.port.request("passbolt.secret.decrypt",this.resource.id,{showProgress:!1}),t=this.getSecretDescription(e);this.setState({plaintextDto:e,description:t,isSecretDecrypting:!1,error:!1}),this.props.resourceWorkspaceContext.onResourceDescriptionDecrypted()}catch(e){return console.error(e),this.setState({description:void 0,isSecretDecrypting:!1,error:!0,errorMsg:this.props.t("Decryption failed, click here to retry")+(e.message||"")}),!1}return!0}get resource(){return this.props.resourceWorkspaceContext.details.resource}get plaintextDto(){return this.state.plaintextDto}get resourceTypesSettings(){return this.props.context.resourceTypesSettings.resourceTypesSettings}get description(){return this.state.description}handleTitleClickEvent(){const e=!this.state.open;e&&void 0===this.state.description&&this.setDescription(),this.setState({open:e})}toggleInputDescriptionEditor(){if(!Boolean(window.getSelection().toString())&&this.canEdit()){const e=!this.state.showDescriptionEditor;this.setState({showDescriptionEditor:e})}}handleEditClickEvent(){void 0===this.state.description&&this.handleRetryDecryptClickEvent(),this.toggleInputDescriptionEditor()}handleRetryDecryptClickEvent(){this.setDescription()}onCloseDescriptionEditor(e,t){this.setState({description:e,plaintextDto:t,showDescriptionEditor:!1})}hasNoDescription(){return!this.description}canEdit(){return this.resource.permission&&this.resource.permission.type>=7}mustShowDescriptionEditor(){return!this.state.error&&!this.state.isSecretDecrypting&&this.canEdit()&&this.state.showDescriptionEditor}mustShowEmptyDescription(){return!this.state.error&&!this.state.isSecretDecrypting&&this.hasNoDescription()&&!this.state.showDescriptionEditor}mustShowDescription(){return!(this.state.error||this.state.isSecretDecrypting||this.hasNoDescription()||this.state.showDescriptionEditor)}render(){return a.createElement("div",{className:"detailed-information accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClickEvent,role:"button",className:"section-opener"},a.createElement(C.c,null,"Description"),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("div",{className:"accordion-content"},this.canEdit()&&a.createElement("a",{className:"section-action button button-transparent",onClick:this.handleEditClickEvent},a.createElement(de,{name:"edit"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Edit"))),this.state.isSecretDecrypting&&a.createElement("p",{className:"description-content"},a.createElement("span",{className:"processing-wrapper"},a.createElement(de,{name:"spinner"}),a.createElement("span",{className:"processing-text"},a.createElement(C.c,null,"Decrypting")))),this.state.error&&a.createElement("p",{className:"description-content error-message"},a.createElement("a",{className:"empty-content",onClick:this.handleRetryDecryptClickEvent},this.state.errorMsg)),this.mustShowEmptyDescription()&&a.createElement("p",{className:"description-content"},!this.canEdit()&&a.createElement("span",{className:"empty-content"},a.createElement(C.c,null,"There is no description.")),this.canEdit()&&a.createElement("span",{className:"empty-content",onClick:this.toggleInputDescriptionEditor},a.createElement(C.c,null,"There is no description yet, click here to add one."))),this.mustShowDescription()&&a.createElement("p",{className:"description-content",onClick:this.toggleInputDescriptionEditor},this.description),this.mustShowDescriptionEditor()&&a.createElement(fm,{description:this.description,resource:this.resource,plaintextDto:this.state.plaintextDto,onClose:this.onCloseDescriptionEditor})))}}bm.propTypes={context:d().any,resourceWorkspaceContext:d().any,t:d().func};const ym=u(ee((0,k.Z)("common")(bm))),Em={1:"can read",7:"can update",15:"is owner"};class vm extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{permissions:null,open:!1,loading:!0}}bindCallbacks(){this.handlePermissionsEditClickEvent=this.handlePermissionsEditClickEvent.bind(this),this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this)}async componentDidUpdate(e){await this.handleResourceChange(e.resourceWorkspaceContext.details.resource),await this.handleResourcePermissionsRefresh(e.resourceWorkspaceContext.refresh.permissions)}get resource(){return this.props.resourceWorkspaceContext.details.resource}handleResourceChange(e){this.resource.id!==e.id&&this.state.open&&this.fetch()}async handleResourcePermissionsRefresh(e){!e&&this.props.resourceWorkspaceContext.refresh.permissions&&(await this.fetch(),await this.props.resourceWorkspaceContext.onResourcePermissionsRefreshed())}async fetch(){this.setState({loading:!0});const e=await this.props.context.port.request("passbolt.resources.find-permissions",this.resource.id);e&&e.sort(((e,t)=>this.sortPermissions(e,t))),this.setState({permissions:e,loading:!1})}sortPermissions(e,t){return e.user&&t.user?e.user.profile.first_name===t.user.profile.first_name?e.user.profile.last_name<t.user.profile.last_name?-1:1:e.user.profile.first_name<t.user.profile.first_name?-1:1:!e.user&&t.user?1:e.user&&!t.user||e.group.name<t.group.name?-1:1}handleTitleClickEvent(){const e=!this.state.open;e&&this.fetch(),this.setState({open:e})}handlePermissionsEditClickEvent(){const e=[this.resource.id];this.props.context.setContext({shareDialogProps:{resourcesIds:e}}),this.props.dialogContext.open(Ec)}getPermissionAroName(e){if(e.user){const t=e.user.profile;return`${t.first_name} ${t.last_name} (${e.user.username})`}return e.group.name}isLoading(){return this.state.loading}canShare(){return this.resource.permission&&15===this.resource.permission.type}render(){return a.createElement("div",{className:"sharedwith accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClickEvent,role:"button"},a.createElement(C.c,null,"Shared with"),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("div",{className:"accordion-content"},this.canShare()&&a.createElement("a",{onClick:this.handlePermissionsEditClickEvent,className:"section-action button button-transparent"},a.createElement(de,{name:"edit"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"modify"))),this.isLoading()&&a.createElement("div",{className:"processing-wrapper"},a.createElement(de,{name:"spinner"}),a.createElement("span",{className:"processing-text"},a.createElement(C.c,null,"Retrieving permissions"))),!this.isLoading()&&a.createElement("ul",{className:"shared-with ready"},this.state.permissions&&this.state.permissions.map((e=>a.createElement("li",{key:e.id,className:"usercard-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",{className:"name"},this.getPermissionAroName(e)),a.createElement("div",{className:"subinfo"},this.props.t(Em[e.type])))),e.user&&a.createElement(xe,{user:e.user,baseUrl:this.props.context.userSettings.getTrustedDomain()}),e.group&&a.createElement(Re,{group:e.group,baseUrl:this.props.context.userSettings.getTrustedDomain()})))))))}}vm.propTypes={context:d().any,resourceWorkspaceContext:d().object,dialogContext:d().any,t:d().func};const Cm=u(M(ee((0,k.Z)("common")(vm))));class km extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{activities:null,activitiesPage:1,loadingMore:!1,open:!1,loading:!0}}async componentDidUpdate(e){e.resourceWorkspaceContext.details&&await this.handleResourceChange(e.resourceWorkspaceContext.details.resource),e.resourceWorkspaceContext.refresh&&await this.handleResourceActivitiesRefresh(e.resourceWorkspaceContext.refresh.activities)}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleMoreClickEvent=this.handleMoreClickEvent.bind(this)}async handleResourceChange(e){if(!this.state.open)return;if(this.resource.id===e.id)return;const t=Object.assign({},this.getDefaultState(),{open:!0});await this.setState(t),await this.fetch(),this.setState({loading:!1})}async handleResourceActivitiesRefresh(e){!e&&this.props.resourceWorkspaceContext.refresh.activities&&(await this.fetch(),await this.props.resourceWorkspaceContext.onResourceActivitiesRefreshed())}async handleTitleClickEvent(){if(this.state.open){const e=this.getDefaultState();this.setState(e)}else await this.setState({loading:!0,open:!0}),await this.fetch(),this.setState({loading:!1})}async handleMoreClickEvent(){const e=this.state.activitiesPage+1;await this.setState({activitiesPage:e,loadingMore:!0}),await this.fetch(),this.setState({loadingMore:!1})}async fetch(){const e={limit:5,page:this.state.activitiesPage},t=await this.props.context.port.request("passbolt.actionlogs.find-all-for","Resource",this.resource.id,e);let s;s=this.state.activitiesPage>1?[...this.state.activities||[],...t]:[...t],this.setState({activities:s})}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}getActivityCreatorFullName(e){return`${e.profile.first_name} ${e.profile.last_name}`}getPermissionAroName(e){if(e.user){const t=e.user.profile;return`${t.first_name} ${t.last_name}`}return e.group.name}getPermissionLabel(e){switch(e.type){case 1:return this.translate("can read");case 7:return this.translate("can update");case 15:return this.translate("is owner")}}getPermissionChangeTypeLabel(e){switch(e){case"created":return this.translate("new");case"updated":return this.translate("updated");case"removed":return this.translate("deleted")}}renderResouceCreatedActivity(e){const t=this.getActivityCreatorFullName(e.creator),s=`/app/passwords/view/${this.resource.id}`,n=this.resource.name,r=this.formatDateTimeAgo(e.created);return a.createElement("li",{key:e.id,className:"usercard-detailed-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",{className:"name"},a.createElement(C.c,null,a.createElement("span",{className:"creator"},{activityCreatorName:t})," created item ",a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:s},{resourceName:n}))),a.createElement("div",{className:"subinfo light"},r))),a.createElement(xe,{user:e.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderResourceUpdatedActivity(e){const t=this.getActivityCreatorFullName(e.creator),s=`/app/passwords/view/${this.resource.id}`,n=this.resource.name,r=this.formatDateTimeAgo(e.created);return a.createElement("li",{key:e.id,className:"usercard-detailed-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",{className:"name"},a.createElement(C.c,null,a.createElement("span",{className:"creator"},{activityCreatorName:t})," updated item ",a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:s},{resourceName:n}))),a.createElement("div",{className:"subinfo light"},r))),a.createElement(xe,{user:e.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderSecretReadActivity(e){const t=this.getActivityCreatorFullName(e.creator),s=`/app/passwords/view/${this.resource.id}`,n=this.resource.name,r=this.formatDateTimeAgo(e.created);return a.createElement("li",{key:e.id,className:"usercard-detailed-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",{className:"name"},a.createElement(C.c,null,a.createElement("span",{className:"creator"},{activityCreatorName:t})," accessed secret of item ",a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:s},{resourceName:n}))),a.createElement("div",{className:"subinfo light"},r))),a.createElement(xe,{user:e.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderSecretUpdatedActivity(e){const t=this.getActivityCreatorFullName(e.creator),s=`/app/passwords/view/${this.resource.id}`,n=this.resource.name,r=this.formatDateTimeAgo(e.created);return a.createElement("li",{key:e.id,className:"usercard-detailed-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",{className:"name"},a.createElement(C.c,null,a.createElement("span",{className:"creator"},{activityCreatorName:t})," updated secret of item ",a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:s},{resourceName:n}))),a.createElement("div",{className:"subinfo light"},r))),a.createElement(xe,{user:e.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderSharedActivityPermissionChangeItem(e,t){const s=this.getPermissionLabel(e),n=this.getPermissionAroName(e),r=this.getPermissionChangeTypeLabel(t);return a.createElement("li",{key:e.id,className:"clearfix"},e.user&&a.createElement(xe,{user:e.user,baseUrl:this.props.context.userSettings.getTrustedDomain()}),e.group&&a.createElement(Re,{group:e.group,baseUrl:this.props.context.userSettings.getTrustedDomain()}),a.createElement("div",{className:"name"},a.createElement("span",{className:"creator"},n),a.createElement("span",{className:"permission-type"}," - ",s)),a.createElement("div",{className:"type"},a.createElement("span",{className:t},r)))}renderPermissionsUpdatedActivity(e){const t=this.getActivityCreatorFullName(e.creator),s=`/app/passwords/view/${this.resource.id}`,n=this.resource.name,r=this.formatDateTimeAgo(e.created);return a.createElement("li",{key:e.id,className:"usercard-detailed-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement("div",{className:"name"},a.createElement(C.c,null,a.createElement("span",{className:"creator"},{activityCreatorName:t})," changed permissions of item ",a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:s},{resourceName:n})," with")),a.createElement("div",{className:"subinfo light"},r),a.createElement("ul",{className:"permissions-list"},e.data.permissions.added.map((e=>this.renderSharedActivityPermissionChangeItem(e,"created"))),e.data.permissions.updated.map((e=>this.renderSharedActivityPermissionChangeItem(e,"updated"))),e.data.permissions.removed.map((e=>this.renderSharedActivityPermissionChangeItem(e,"removed")))))),a.createElement(xe,{user:e.creator,baseUrl:this.props.context.userSettings.getTrustedDomain()}))}renderUnknownActivity(e){return a.createElement("li",{key:e.id,className:"usercard-detailed-col-2"},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"content"},a.createElement(C.c,null,"Unknown activity, please contact your administrator."))))}renderActivity(e){let t;switch(e.type){case"Resources.created":t=this.renderResouceCreatedActivity(e);break;case"Resources.updated":t=this.renderResourceUpdatedActivity(e);break;case"Permissions.updated":t=this.renderPermissionsUpdatedActivity(e);break;case"Resource.Secrets.read":t=this.renderSecretReadActivity(e);break;case"Resource.Secrets.updated":t=this.renderSecretUpdatedActivity(e);break;default:t=this.renderUnknownActivity(e)}return t}mustDisplayMoreButton(){return!this.state.activities.some((e=>"Resources.created"===e.type))}get resource(){return this.props.resourceWorkspaceContext.details.resource}get translate(){return this.props.t}render(){return a.createElement("div",{className:"activity accordion sidebar-section "+(this.state.open?"":"closed")},a.createElement("div",{className:"accordion-header"},a.createElement("h4",null,a.createElement("a",{onClick:this.handleTitleClickEvent,role:"button"},a.createElement(C.c,null,"Activity"),this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})))),a.createElement("div",{className:"accordion-content"},this.state.loading&&a.createElement("div",{className:"processing-wrapper"},a.createElement(de,{name:"spinner"}),a.createElement("span",{className:"processing-text"},a.createElement(C.c,null,"Retrieving activities"))),!this.state.loading&&a.createElement(a.Fragment,null,a.createElement("ul",{className:"ready"},this.state.activities.map((e=>this.renderActivity(e)))),this.mustDisplayMoreButton()&&a.createElement("div",{className:"actions"},a.createElement("a",{onClick:this.handleMoreClickEvent,className:"button action-logs-load-more "+(this.state.loadingMore?"processing disabled":""),role:"button"},a.createElement("span",null,a.createElement(C.c,null,"More")))))))}}km.propTypes={context:d().any,resourceWorkspaceContext:d().any,t:d().func};const wm=u(ee((0,k.Z)("common")(km)));class Sm extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handlePermalinkClick=this.handlePermalinkClick.bind(this),this.handleCloseClick=this.handleCloseClick.bind(this)}get subtitle(){const e=this.translate("Resource"),t=this.props.resourceWorkspaceContext.details.resource;return this.props.context.resourceTypesSettings?t.resource_type_id&&this.props.context.resourceTypesSettings.findResourceTypeSlugById(t.resource_type_id)===this.props.context.resourceTypesSettings.DEFAULT_RESOURCE_TYPES_SLUGS.PASSWORD_AND_DESCRIPTION?this.translate("Resource with encrypted description"):e:""}async handlePermalinkClick(){const e=`${this.props.context.userSettings.getTrustedDomain()}/app/passwords/view/${this.props.resourceWorkspaceContext.details.resource.id}`;await qt.copy(e,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The permalink has been copied to clipboard"))}handleCloseClick(){this.props.resourceWorkspaceContext.onLockDetail()}get translate(){return this.props.t}render(){const e=this.props.context.siteSettings.canIUse("tags"),t=this.props.context.siteSettings.canIUse("auditLog")||this.props.context.siteSettings.canIUse("audit_log");return a.createElement("div",{className:"panel aside ready"},a.createElement("div",{className:"sidebar resource"},a.createElement("div",{className:"sidebar-header"},a.createElement("div",{className:"teaser-image"},a.createElement(de,{name:"key"})),a.createElement("h3",null,a.createElement("div",{className:"title-wrapper"},a.createElement("span",{className:"name"},this.props.resourceWorkspaceContext.details.resource.name),a.createElement("a",{className:"title-link",title:this.translate("Copy the link to this password"),onClick:this.handlePermalinkClick},a.createElement(de,{name:"link"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Copy the link to this password")))),a.createElement("span",{className:"subtitle"},this.subtitle)),a.createElement("a",{className:"dialog-close button button-transparent",onClick:this.handleCloseClick},a.createElement(de,{name:"close"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"Close")))),a.createElement($c,null),a.createElement(ym,null),a.createElement(Cm,null),e&&a.createElement(nm,null),a.createElement(um,null),t&&a.createElement(wm,null)))}}Sm.propTypes={context:d().any,resourceWorkspaceContext:d().object,actionFeedbackContext:d().any,t:d().func};const xm=u(ee(D((0,k.Z)("common")(Sm))));class Nm extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.initEventHandlers(),this.createInputRef()}getDefaultState(){return{name:"",nameError:"",nameWarning:"",processing:!1}}initEventHandlers(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleNameInputKeyUp=this.handleNameInputKeyUp.bind(this)}createInputRef(){this.nameInputRef=a.createRef()}componentDidMount(){this.setState({name:this.props.context.tagToEdit.slug})}async handleFormSubmit(e){e.preventDefault(),this.state.processing||await this.save()}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}handleNameInputKeyUp(){const e=this.validateNameInput();this.setState(e);const t=Ge(this.state.name,128,this.translate);this.setState({nameWarning:t})}handleCloseClick(){this.props.context.setContext({tagToEdit:null}),this.props.onClose()}async save(){if(this.setState({processing:!0}),!await this.validate())return void this.handleValidateError();const e={id:this.props.context.tagToEdit.id,slug:this.state.name,is_shared:this.props.context.tagToEdit.is_shared};try{this.props.loadingContext.add();const t=await this.props.context.port.request("passbolt.tags.update",e);await this.handleSaveSuccess(t)}catch(e){return this.handleSaveError(e),this.setState({processing:!1}),void this.focusFieldError()}}handleValidateError(){this.setState({processing:!1}),this.focusFieldError()}async handleSaveSuccess(e){this.props.loadingContext.remove(),this.props.onClose(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The tag has been updated successfully"));const t=this.props.context.tagToEdit.id;this.props.context.setContext({tagToEdit:null}),this.selectUpdatedTag(t,e)}selectUpdatedTag(e,t){if(this.props.resourceWorkspaceContext.filter.type===te.TAG&&this.props.resourceWorkspaceContext.filter.payload.tag.id===e){const e={type:te.TAG,payload:{tag:t}};this.props.history.push({pathname:"/app/passwords",state:{filter:e}})}}handleSaveError(e){if(this.props.loadingContext.remove(),"UserAbortsOperationError"===e.name)this.setState({processing:!1});else{console.error(e);const t={error:e};this.props.dialogContext.open(we,t)}}focusFieldError(){this.state.nameError&&this.nameInputRef.current.focus()}validateNameInput(){const e=this.state.name.trim();let t="";return e.length||(t=this.translate("A tag name is required.")),new Promise((e=>{this.setState({nameError:t},e)}))}async validate(){return this.setState({error:"",nameError:""}),await this.validateNameInput(),""===this.state.nameError}hasAllInputDisabled(){return this.state.processing}get translate(){return this.props.t}render(){return a.createElement(be,{title:this.translate("Edit tag"),onClose:this.handleCloseClick,disabled:this.state.processing,className:"edit-tag-dialog"},a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input text required ${this.state.nameError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"edit-tag-form-name"},a.createElement(C.c,null,"Tag name"),this.state.nameWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"edit-tag-form-name",name:"name",type:"text",value:this.state.name,onKeyUp:this.handleNameInputKeyUp,onChange:this.handleInputChange,disabled:this.state.processing,ref:this.nameInputRef,className:"required fluid",maxLength:"128",required:"required",autoComplete:"off",autoFocus:!0}),this.state.nameError&&a.createElement("div",{className:"name error-message"},this.state.nameError),this.state.nameWarning&&a.createElement("div",{className:"name warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.nameWarning))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleCloseClick}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Save")}))))}}Nm.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,dialogContext:d().any,loadingContext:d().any,resourceWorkspaceContext:d().any,location:d().object,match:d().object,history:d().object,t:d().func};const Rm=u((0,c.EN)(ee(H(D(M((0,k.Z)("common")(Nm)))))));class Im extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.initEventHandlers()}getDefaultState(){return{processing:!1}}initEventHandlers(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}async handleFormSubmit(e){e.preventDefault(),this.state.processing||await this.delete()}handleCloseClick(){this.props.onClose(),this.props.context.setContext({tagToDelete:null})}async delete(){this.setState({processing:!0});try{this.props.loadingContext.add(),await this.props.context.port.request("passbolt.tags.delete",this.props.context.tagToDelete.id),this.props.loadingContext.remove(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The tag has been deleted successfully")),this.props.onClose(),this.props.context.setContext({tagToDelete:null})}catch(e){this.props.loadingContext.remove(),"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e)),this.setState({processing:!1})}}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}hasAllInputDisabled(){return this.state.processing}get translate(){return this.props.t}render(){return a.createElement(be,{title:this.translate("Delete tag?"),onClose:this.handleCloseClick,disabled:this.state.processing,className:"delete-tag-dialog"},a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("p",null,a.createElement(C.c,null,"Are you sure you want to delete the tag ",a.createElement("strong",{className:"dialog-variable"},{tagName:this.props.context.tagToDelete.slug}),"?")),a.createElement("p",null,a.createElement(C.c,null,"Once the tag is deleted, itll be removed permanently and will not be recoverable."))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleCloseClick}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Delete"),warning:!0}))))}}Im.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,dialogContext:d().any,loadingContext:d().any,t:d().func};const Dm=u(H(D(M((0,k.Z)("common")(Im)))));class Tm extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleEditClickEvent=this.handleEditClickEvent.bind(this),this.handleDeleteClickEvent=this.handleDeleteClickEvent.bind(this),this.handleHide=this.handleHide.bind(this)}handleEditClickEvent(){this.props.context.setContext({tagToEdit:this.props.selectedTag}),this.props.dialogContext.open(Rm),this.handleHide()}handleDeleteClickEvent(){this.props.context.setContext({tagToDelete:this.props.selectedTag}),this.props.dialogContext.open(Dm),this.handleHide()}handleHide(){"function"==typeof this.props.onBeforeHide&&this.props.onBeforeHide(this.props.selectedTag.id),this.props.hide()}render(){return a.createElement(ht,{hide:this.handleHide,left:this.props.left,top:this.props.top,className:this.props.className},a.createElement("li",{key:"option-edit-tag",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"edit-tag",onClick:this.handleEditClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Edit tag"))))))),a.createElement("li",{key:"option-delete-tag",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"delete-tag",onClick:this.handleDeleteClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Delete Tag"))))))))}}Tm.propTypes={context:d().any,hide:d().func,onBeforeHide:d().func,left:d().number,top:d().number,selectedTag:d().object,className:d().string,dialogContext:d().any};const Am=u(M((0,k.Z)("common")(Tm)));class Pm extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!0,selectedTag:null,draggingOverTagId:null,moreMenuOpenTagId:null}}bindCallbacks(){this.handleContextualMenuEvent=this.handleContextualMenuEvent.bind(this),this.handleMoreClickEvent=this.handleMoreClickEvent.bind(this),this.handleCloseMoreMenu=this.handleCloseMoreMenu.bind(this),this.handleDropEvent=this.handleDropEvent.bind(this),this.handleDragOverEvent=this.handleDragOverEvent.bind(this),this.handleDragLeaveEvent=this.handleDragLeaveEvent.bind(this)}handleContextualMenuEvent(e,t){e.preventDefault(),t.is_shared||this.showContextualMenu(e.pageY,e.pageX,t)}handleMoreClickEvent(e,t){const s=this.state.moreMenuOpenTagId===t.id?null:t.id;if(this.setState({moreMenuOpenTagId:s}),s){const{left:s,top:a}=e.currentTarget.getBoundingClientRect();this.showContextualMenu(a+18,s,t,"right",this.handleCloseMoreMenu)}}handleCloseMoreMenu(e){this.state.moreMenuOpenTagId===e&&this.setState({moreMenuOpenTagId:null})}showContextualMenu(e,t,s,a="",n=null){const r={left:t,selectedTag:s,onBeforeHide:n,top:e,className:a};this.props.contextualMenuContext.show(Am,r)}handleOnClickTag(e){const t={type:te.TAG,payload:{tag:e}};this.props.history.push({pathname:"/app/passwords",state:{filter:t}})}async componentDidUpdate(e){this.handleAllFilterRequired(e.tags)}handleAllFilterRequired(e){if(e&&this.props.tags.length!==e.length){const e=this.props.resourceWorkspaceContext.filter;if(e&&e.type===te.TAG&&!(this.props.tags.filter((t=>t.id===e.payload.tag.id)).length>0)){const e={type:te.ALL};this.props.history.push({pathname:"/app/passwords",state:{filter:e}})}}}async handleDropEvent(e,t){this.setState({draggingOverTagId:null});try{const e=this.props.dragContext.draggedItems.resources.map((e=>e.id));this.props.context.port.request("passbolt.tags.add-resources-tag",{resources:e,tag:t})}catch(e){this.onUnexpectedError(e)}}onUnexpectedError(e){const t={error:e};this.props.dialogContext.open(we,t)}handleDragOverEvent(e,t){e.preventDefault(),this.setState({draggingOverTagId:t})}handleDragLeaveEvent(){this.setState({draggingOverTagId:null})}get filters(){return{[_m.personal]:e=>!e.is_shared,[_m.shared]:e=>e.is_shared,[_m.all]:e=>e}}get filteredTags(){const e=this.props.filterType||_m.all,t=this.filters[e];return this.props.tags.filter(t)}isLoading(){return!this.props.tags}isSelected(e){const t=this.props.resourceWorkspaceContext.filter;return t.type===te.TAG&&t.payload.tag.id===e}isDragging(){return this.props.dragContext.dragging}isDisabled(e){if(this.isDragging()){if(e.is_shared)return!0;if(!this.canDropInto())return!0}return!1}showDropFocus(e){return e.id===this.state.draggingOverTagId&&!this.isDisabled(e)}canDropInto(){return this.draggedItems.resources.length>0}get draggedItems(){return this.props.dragContext.draggedItems}render(){return a.createElement("div",{className:"accordion-content"},this.isLoading()&&a.createElement("div",{className:"processing-wrapper"},a.createElement(de,{name:"spinner"}),a.createElement("span",{className:"processing-text"},a.createElement(C.c,null,"Retrieving tags"))),!this.isLoading()&&0===this.filteredTags.length&&a.createElement("em",{className:"empty-content"},a.createElement(C.c,null,"empty")),!this.isLoading()&&this.filteredTags.length>0&&a.createElement("ul",{className:"tree ready"},this.filteredTags.map((e=>a.createElement("li",{className:"open node root tag-item",key:e.id},a.createElement("div",{className:`row ${this.isSelected(e.id)?"selected":""} ${this.isDisabled(e)?"disabled":""} ${this.showDropFocus(e)?"drop-focus":""}`,onDrop:t=>this.handleDropEvent(t,e),onDragOver:t=>this.handleDragOverEvent(t,e.id),onDragLeave:this.handleDragLeaveEvent},a.createElement("div",{className:"main-cell-wrapper",onClick:()=>this.handleOnClickTag(e),onContextMenu:t=>this.handleContextualMenuEvent(t,e)},a.createElement("div",{className:"main-cell"},a.createElement("a",{title:e.slug},a.createElement("span",{className:"ellipsis tag-name"},e.slug)))),!e.is_shared&&a.createElement("div",{className:"dropdown right-cell more-ctrl"},a.createElement("a",{className:"button "+(this.state.moreMenuOpenTagId===e.id?"open":""),onClick:t=>this.handleMoreClickEvent(t,e)},a.createElement(de,{name:"3-dots-h"})))))))))}}Pm.propTypes={context:d().any,contextualMenuContext:d().any,tags:d().array,filterType:d().string,resourceWorkspaceContext:d().object,history:d().any,dialogContext:d().any,dragContext:d().any};const Um=(0,c.EN)(u(M(ee(at(Dc((0,k.Z)("common")(Pm))))))),_m={all:"all",shared:"shared",personal:"personal"};class Lm extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleFilterClickEvent=this.handleFilterClickEvent.bind(this),this.handleHide=this.handleHide.bind(this)}handleFilterClickEvent(e){this.props.onFilterSelected(e),this.handleHide()}handleHide(){"function"==typeof this.props.onBeforeHide&&this.props.onBeforeHide(),this.props.hide()}render(){return a.createElement(ht,{hide:this.handleHide,left:this.props.left,top:this.props.top,className:this.props.className},a.createElement("li",{key:"option-filter-all-tag",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"all-tag",onClick:()=>this.handleFilterClickEvent(_m.all)},a.createElement("span",null,a.createElement(C.c,null,"All tags"))))))),a.createElement("li",{key:"option-filter-personal-tag",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"personal-tag",onClick:()=>this.handleFilterClickEvent(_m.personal)},a.createElement("span",null,a.createElement(C.c,null,"My tags"))))))),a.createElement("li",{key:"option-filter-share-tag",className:"ready closed"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"shared-tag",onClick:()=>this.handleFilterClickEvent(_m.shared)},a.createElement("span",null,a.createElement(C.c,null,"Shared tags"))))))))}}Lm.propTypes={onFilterSelected:d().func,left:d().number,hide:d().func,onBeforeHide:d().func,top:d().number,className:d().string};const Fm=(0,k.Z)("common")(Lm);class Mm extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.bindCallbacks()}getDefaultState(){return{open:!0,title:this.translate("Tags"),filterType:null,moreMenuOpen:!1}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleTitleContextualMenuEvent=this.handleTitleContextualMenuEvent.bind(this),this.handleTitleMoreClickEvent=this.handleTitleMoreClickEvent.bind(this),this.handleCloseMoreMenu=this.handleCloseMoreMenu.bind(this),this.handleFilterTagsType=this.handleFilterTagsType.bind(this)}handleTitleClickEvent(){const e=!this.state.open;this.setState({open:e})}handleTitleContextualMenuEvent(e){e.preventDefault(),this.showContextualMenu(e.pageY,e.pageX)}handleCloseMoreMenu(){this.setState({moreMenuOpen:!1})}handleTitleMoreClickEvent(e){const t=!this.state.moreMenuOpen;if(this.setState({moreMenuOpen:t}),t){const{left:t,top:s}=e.currentTarget.getBoundingClientRect();this.showContextualMenu(s+18,t,"right")}}showContextualMenu(e,t,s=""){const a={left:t,onFilterSelected:this.handleFilterTagsType,onBeforeHide:this.handleCloseMoreMenu,top:e,className:s};this.props.contextualMenuContext.show(Fm,a)}handleFilterTagsType(e){if(this.isAllFilterRequire(e)){const e={type:te.ALL};this.props.history.push({pathname:"/app/passwords",state:{filter:e}})}this.setState({filterType:e},(()=>{this.updateTitle()}))}isAllFilterRequire(e){const t=this.props.resourceWorkspaceContext.filter,s=t.type===te.TAG&&t.payload.tag.is_shared;return!s&&"shared"===e||s&&"personal"===e}get titles(){return{personal:this.translate("My tags"),shared:this.translate("Shared tags"),default:this.translate("Tags")}}updateTitle(){const e=this.titles[this.state.filterType]||this.titles.default;this.setState({title:e})}getTagsFromResources(){return this.props.context.resources?this.props.context.resources.map((e=>e.tags)).flat().reduce(((e,t)=>(t&&!e.find((e=>e.id===t.id))&&e.push(t),e)),[]).sort(((e,t)=>e.slug.localeCompare(t.slug))):null}get translate(){return this.props.t}render(){return a.createElement("div",{className:"navigation-secondary-tree navigation-secondary navigation-tags accordion"},a.createElement("ul",{className:"accordion-header"},a.createElement("li",{className:"node root "+(this.state.open?"open":"close")},a.createElement("div",{className:"row title"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("h3",null,a.createElement("span",{className:"folders-label",onClick:this.handleTitleClickEvent,onContextMenu:this.handleTitleContextualMenuEvent},a.createElement("a",{role:"button"},a.createElement(a.Fragment,null,this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})),this.state.title))))),a.createElement("div",{className:"dropdown right-cell more-ctrl"},a.createElement("a",{className:"button "+(this.state.moreMenuOpen?"open":""),onClick:this.handleTitleMoreClickEvent},a.createElement(de,{name:"3-dots-h"})))))),this.state.open&&a.createElement(Um,{tags:this.getTagsFromResources(),filterType:this.state.filterType}))}}Mm.propTypes={context:d().any,contextualMenuContext:d().any,resourceWorkspaceContext:d().object,history:d().any,t:d().func};const Om=(0,c.EN)(u(ee(at((0,k.Z)("common")(Mm)))));class jm extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}bindCallbacks(){this.handleSearchEvent=this.handleSearchEvent.bind(this)}get defaultState(){return{text:"",debounceTimeoutIt:null}}componentDidUpdate(e){this.handleFilterChanged(e.resourceWorkspaceContext.filter)}componentWillUnmount(){clearTimeout(this.state.debounceTimeoutIt)}handleFilterChanged(e){const t=e.type===te.TEXT,s=this.props.resourceWorkspaceContext.filter.type===te.TEXT;t&&!s&&this.setState({text:""})}handleSearchEvent(e){this.search(e)}search(e){clearTimeout(this.state.debounceTimeoutId);const t=setTimeout((()=>{const t=this.generateFilter(e);this.props.history.push({pathname:"/app/passwords",state:{filter:t}})}),300);this.setState({debounceTimeoutId:t,text:e})}generateFilter(e){return e.length>0?{type:te.TEXT,payload:e}:{type:te.ALL}}render(){return a.createElement(Fs,{disabled:this.props.disabled,onSearch:this.handleSearchEvent,placeholder:this.props.placeholder,value:this.state.text})}}jm.propTypes={disabled:d().bool,placeholder:d().string,resourceWorkspaceContext:d().object,history:d().object},jm.defaultProps={disabled:!1,placeholder:"Search"};const qm=(0,c.EN)(ee(jm));class Wm extends a.Component{constructor(e){super(e),this.bindHandlers()}bindHandlers(){this.handleAllItemsClick=this.handleAllItemsClick.bind(this),this.handleItemsIOwnClick=this.handleItemsIOwnClick.bind(this),this.handleFavoriteClick=this.handleFavoriteClick.bind(this),this.handleSharedWithMeClick=this.handleSharedWithMeClick.bind(this),this.handleRecentlyModifiedClick=this.handleRecentlyModifiedClick.bind(this)}get isAllItemsSelected(){return this.props.resourceWorkspaceContext.filter.type===te.ALL}get isItemsIOwnSelected(){return this.props.resourceWorkspaceContext.filter.type===te.ITEMS_I_OWN}get isFavoriteSelected(){return this.props.resourceWorkspaceContext.filter.type===te.FAVORITE}get isSharedWithMeSelected(){return this.props.resourceWorkspaceContext.filter.type===te.SHARED_WITH_ME}get isRecentlyModifiedSelected(){return this.props.resourceWorkspaceContext.filter.type===te.RECENTLY_MODIFIED}handleAllItemsClick(){const e={type:te.ALL};this.props.history.push({pathname:"/app/passwords",state:{filter:e}})}handleRecentlyModifiedClick(){const e={type:te.RECENTLY_MODIFIED};this.props.history.push({pathname:"/app/passwords",state:{filter:e}})}handleFavoriteClick(){const e={type:te.FAVORITE};this.props.history.push({pathname:"/app/passwords",state:{filter:e}})}handleItemsIOwnClick(){const e={type:te.ITEMS_I_OWN};this.props.history.push({pathname:"/app/passwords",state:{filter:e}})}handleSharedWithMeClick(){const e={type:te.SHARED_WITH_ME};this.props.history.push({pathname:"/app/passwords",state:{filter:e}})}render(){return a.createElement("div",{className:"navigation-secondary navigation-shortcuts"},a.createElement("ul",null,a.createElement("li",null,a.createElement("div",{className:"row "+(this.isAllItemsSelected?"selected":""),onClick:this.handleAllItemsClick},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",null,a.createElement("span",null,a.createElement(C.c,null,"All items"))))))),a.createElement("li",null,a.createElement("div",{className:"row "+(this.isFavoriteSelected?"selected":""),onClick:this.handleFavoriteClick},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",null,a.createElement("span",null,a.createElement(C.c,null,"Favorites"))))))),a.createElement("li",null,a.createElement("div",{className:"row "+(this.isRecentlyModifiedSelected?"selected":""),onClick:this.handleRecentlyModifiedClick},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",null,a.createElement("span",null,a.createElement(C.c,null,"Recently modified"))))))),a.createElement("li",null,a.createElement("div",{className:"row "+(this.isSharedWithMeSelected?"selected":""),onClick:this.handleSharedWithMeClick},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",null,a.createElement("span",null,a.createElement(C.c,null,"Shared with me"))))))),a.createElement("li",null,a.createElement("div",{className:"row "+(this.isItemsIOwnSelected?"selected":""),onClick:this.handleItemsIOwnClick},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",null,a.createElement("span",null,a.createElement(C.c,null,"Owned by me")))))))))}}Wm.propTypes={history:d().object,resourceWorkspaceContext:d().object};const zm=(0,c.EN)(ee((0,k.Z)("common")(Wm)));class Gm extends a.Component{get items(){const e=[this.allItemsBreadcrumb];switch(this.props.resourceWorkspaceContext.filter.type){case te.NONE:return[];case te.ALL:return e;case te.TEXT:{const t=!this.props.resourceWorkspaceContext.filter.payload,s=this.props.resourceWorkspaceContext.filter.payload;return t?e:[...e,this.getLastBreadcrumb(`${this.translate("Search:")} ${s}`)]}case te.FAVORITE:return[...e,this.getLastBreadcrumb(this.translate("Favorite"))];case te.RECENTLY_MODIFIED:return[...e,this.getLastBreadcrumb(this.translate("Recently modified"))];case te.SHARED_WITH_ME:return[...e,this.getLastBreadcrumb(this.translate("Shared with me"))];case te.ITEMS_I_OWN:return[...e,this.getLastBreadcrumb(this.translate("Items I own"))];case te.TAG:{const t=this.props.resourceWorkspaceContext.filter.payload.tag.slug;return[...e,this.getLastBreadcrumb(`${t} ${this.translate("(tag)")}`)]}case te.ROOT_FOLDER:return[...e,this.getLastBreadcrumb(this.translate("root (folder)"))];case te.FOLDER:{const t=this.props.resourceWorkspaceContext.filter.payload.folder,s=t&&t.name||this.translate("N/A");return[...e,this.getLastBreadcrumb(`${s} ${this.translate("(folder)")}`)]}case te.GROUP:{const t=this.props.resourceWorkspaceContext.filter.payload.group,s=t&&t.name||this.translate("N/A");return[...e,this.getLastBreadcrumb(`${s} ${this.translate("(group)")}`)]}}return e}get allItemsBreadcrumb(){return a.createElement(na,{name:this.translate("All items"),onClick:this.props.navigationContext.onGoToPasswordsRequested})}getLastBreadcrumb(e){return a.createElement(na,{name:e,onClick:this.onLastBreadcrumbClick.bind(this)})}async onLastBreadcrumbClick(){const e=this.props.location.pathname;this.props.history.push({pathname:e})}get translate(){return this.props.t}render(){return a.createElement(sa,{items:this.items})}}Gm.propTypes={resourceWorkspaceContext:d().object,location:d().object,history:d().object,navigationContext:d().any,t:d().func};const Hm=(0,c.EN)(v(ee((0,k.Z)("common")(Gm))));class Vm extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.initEventHandlers()}getDefaultState(){return{processing:!1}}initEventHandlers(){this.handleCloseClick=this.handleCloseClick.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}get resources(){return this.props.context.passwordDeleteDialogProps.resources}async handleFormSubmit(e){e.preventDefault(),this.state.processing||await this.delete()}handleCloseClick(){this.props.onClose()}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.translate("The password has been deleted successfully",{count:this.resources.length})),this.props.onClose()}handleSaveError(e){"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e)),this.setState({processing:!1})}async delete(){this.setState({processing:!0});try{const e=this.resources.map((e=>e.id));await this.props.context.port.request("passbolt.resources.delete-all",e),await this.handleSaveSuccess()}catch(e){this.handleSaveError(e)}}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}hasAllInputDisabled(){return this.state.processing}hasMultipleResources(){return this.resources.length>1}get translate(){return this.props.t}render(){return a.createElement(be,{title:this.translate("Delete password?",{count:this.resources.length}),onClose:this.handleCloseClick,disabled:this.state.processing,className:"delete-password-dialog"},a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},!this.hasMultipleResources()&&a.createElement(a.Fragment,null,a.createElement("p",null,a.createElement(C.c,null,"Are you sure you want to delete the password ",a.createElement("strong",{className:"dialog-variable"},{resourceName:this.resources[0].name}),"?")),a.createElement("p",null,a.createElement(C.c,null,"Once the password is deleted, itll be removed permanently and will not be recoverable."))),this.hasMultipleResources()&&a.createElement("p",null,a.createElement(C.c,null,"Please confirm you really want to delete the passwords. After clicking ok, the passwords will be deleted permanently."))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleCloseClick}),a.createElement(Ee,{disabled:this.hasAllInputDisabled(),processing:this.state.processing,value:this.translate("Delete"),warning:!0}))))}}Vm.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,dialogContext:d().any,resourceWorkspaceContext:d().any,t:d().func};const Km=u(ee(D(M((0,k.Z)("common")(Vm)))));class Bm extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(e),this.initEventHandlers()}getDefaultState(e){return{configuration:JSON.parse(JSON.stringify(e.configuration))}}initEventHandlers(){this.handleInputChange=this.handleInputChange.bind(this),this.handleWordCountChange=this.handleWordCountChange.bind(this)}handleInputChange(e){const t=e.target,s=t.value,a=t.name,n={...this.state.configuration};n.default_options[a]=s,this.setState({configuration:n}),this.props.onChanged(n)}handleWordCountChange(e){const t={...this.state.configuration};t.default_options.word_count=e.target.value,this.setState({configuration:t}),this.props.onChanged(t)}get numberOfWords(){const{default_options:e}=this.state.configuration;return{default:e.word_count,min:e.min_word,max:e.max_word}}get separator(){return this.state.configuration.default_options.separator}get wordCase(){return this.state.configuration.default_options.word_case}get wordCaseList(){return[{value:"lowercase",label:this.translate("Lower case")},{value:"uppercase",label:this.translate("Upper case")},{value:"camelcase",label:this.translate("Camel case")}]}get translate(){return this.props.t}render(){return a.createElement(a.Fragment,null,a.createElement("div",{className:"input text "+(this.props.disabled?"disabled":"")},a.createElement("label",{htmlFor:"configure-passphrase-generator-form-word-count"},a.createElement(C.c,null,"Number of words")),a.createElement("div",{className:"slider"},a.createElement("input",{name:"word_count",min:this.numberOfWords.min,max:this.numberOfWords.max,value:this.numberOfWords.default,type:"range",onChange:this.handleInputChange,disabled:this.props.disabled}),a.createElement("input",{type:"number",id:"configure-passphrase-generator-form-word-count",name:"word_count",min:this.numberOfWords.min,max:this.numberOfWords.max,value:this.numberOfWords.default,onChange:this.handleWordCountChange,disabled:this.props.disabled}))),a.createElement("div",{className:"input text "+(this.props.disabled?"disabled":"")},a.createElement("label",{htmlFor:"configure-passphrase-generator-form-words-separator"},a.createElement(C.c,null,"Words separator")),a.createElement("input",{type:"text",id:"configure-passphrase-generator-form-words-separator",name:"separator",value:this.separator,onChange:this.handleInputChange,placeholder:this.translate("Type one or more characters"),disabled:this.props.disabled})),a.createElement("div",{className:"select-wrapper input "+(this.props.disabled?"disabled":"")},a.createElement("label",{htmlFor:"configure-passphrase-generator-form-words-case"},a.createElement(C.c,null,"Words case")),a.createElement(qe,{id:"configure-passphrase-generator-form-words-case",name:"word_case",items:this.wordCaseList,value:this.wordCase,onChange:this.handleInputChange,disabled:this.props.disabled})))}}Bm.propTypes={configuration:d().object,onChanged:d().func,disabled:d().bool,t:d().func};const $m=(0,k.Z)("common")(Bm);class Zm extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{configuration:JSON.parse(JSON.stringify(this.props.configuration))}}get length(){const{default_options:e}=this.state.configuration;return{default:e.length,min:e.min_length,max:e.max_length}}get masks(){return this.state.configuration.masks}get isExcludeLookAlikeCharacters(){return this.state.configuration.default_options.look_alike}bindCallbacks(){this.handleLengthChanged=this.handleLengthChanged.bind(this),this.handleMaskToggled=this.handleMaskToggled.bind(this),this.handleExcludeLookAlikeCharactersToggled=this.handleExcludeLookAlikeCharactersToggled.bind(this)}handleLengthChanged(e){const t=e.target.value,s={...this.state.configuration};s.default_options.length=t,this.setState({configuration:s}),this.props.onChanged(s)}handleMaskToggled(e,t){t.preventDefault();const s={...this.state.configuration};s.masks=s.masks.map((t=>t.name!==e||t.required?t:{...t,active:!t.active})),this.setState({configuration:s}),this.props.onChanged(s)}handleExcludeLookAlikeCharactersToggled(){const e={...this.state.configuration};e.default_options.look_alike=!e.default_options.look_alike,this.setState({configuration:e}),this.props.onChanged(e)}render(){return a.createElement(a.Fragment,null,a.createElement("div",{className:"input text "+(this.props.disabled?"disabled":"")},a.createElement("label",{htmlFor:"configure-password-generator-form-length"},a.createElement(C.c,null,"Length")),a.createElement("div",{className:"slider"},a.createElement("input",{name:"length",min:this.length.min,max:this.length.max,value:this.length.default,step:"1",type:"range",onChange:this.handleLengthChanged,disabled:this.props.disabled}),a.createElement("input",{id:"configure-password-generator-form-length",type:"number",min:this.length.min,max:this.length.max,value:this.length.default,onChange:this.handleLengthChanged,disabled:this.props.disabled}))),a.createElement("div",{className:"input text "+(this.props.disabled?"disabled":"")},a.createElement("label",{htmlFor:"configure-password-generator-form-masks"},a.createElement(C.c,null,"Character Types")),a.createElement("div",{className:"button-group button-group--nowrap"},this.masks.map((e=>a.createElement("button",{key:e.name,className:"button button-toggle "+(e.active||e.required?"selected":""),onClick:t=>this.handleMaskToggled(e.name,t),disabled:this.props.disabled},e.label))))),a.createElement("div",{className:"input checkbox"},a.createElement("input",{id:"configure-password-generator-form-exclude-look-alike",type:"checkbox",name:"exclude-look-alike",checked:this.isExcludeLookAlikeCharacters,onChange:this.handleExcludeLookAlikeCharactersToggled,disabled:this.props.disabled}),a.createElement("label",{htmlFor:"configure-password-generator-form-exclude-look-alike"},a.createElement(C.c,null,"Exclude look-alike characters"))))}}Zm.propTypes={configuration:d().object,onChanged:d().func,disabled:d().bool};const Ym=(0,k.Z)("common")(Zm);class Jm extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.initEventHandlers()}get defaultState(){return{password:"",isObfuscated:!0,generator:{},loading:!0,processing:!1}}async componentDidMount(){const e=this.props.resourcePasswordGeneratorContext.settings.default_generator,t=this.generators.find((t=>t.type===e));await this.handleGeneratorChanged(t),this.setState({loading:!1})}initEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleViewPasswordToggle=this.handleViewPasswordToggle.bind(this),this.handleGeneratePassword=this.handleGeneratePassword.bind(this),this.handleGeneratorChanged=this.handleGeneratorChanged.bind(this),this.handleCopyPassword=this.handleCopyPassword.bind(this)}get generators(){return this.props.resourcePasswordGeneratorContext.settings.generators}async handleGeneratorChanged(e){await this.setState({generator:e}),this.generatePassword()}handleGeneratePassword(){this.generatePassword()}handleClose(){this.props.onClose()}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}handleViewPasswordToggle(){this.state.processing||this.setState({isObfuscated:!this.state.isObfuscated})}async handleSubmit(e){e.preventDefault(),await this.setState({processing:!0}),await this.props.resourcePasswordGeneratorContext.onPasswordGenerated(this.state.password,this.state.generator),this.props.onClose()}async handleCopyPassword(){await qt.copy(this.state.password,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The password has been copied to clipboard"))}generatePassword(){const e=pn(this.state.generator);this.setState({password:e})}get translate(){return this.props.t}isPasswordEmpty(){return""===this.state.password}render(){const e=this.state.password?un(this.state.password):null;return a.createElement(a.Fragment,null,!this.state.loading&&a.createElement(be,{title:this.translate("Password Generator"),className:"generate-resource-password-dialog",disabled:this.state.processing,onClose:this.handleClose},a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:"input-password-wrapper input "+(this.state.processing?"disabled":"")},a.createElement("label",{htmlFor:"generate-resource-password-form-password"},a.createElement(C.c,null,"Password")),a.createElement("div",{className:"password-button-inline"},a.createElement(At,{id:"generate-resource-password-form-password",name:"password",autoComplete:"off",readOnly:!0,placeholder:this.translate("Password"),preview:!0,value:this.state.password,onChange:this.handleInputChange,disabled:this.state.processing}),a.createElement("a",{onClick:this.handleGeneratePassword,className:"password-generate button-icon button "+(this.state.processing?"disabled":"")},a.createElement(de,{name:"dice",big:!0}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"Generate"))),a.createElement("a",{onClick:this.handleCopyPassword,className:"copy-to-clipboard button button-icon "+(this.state.processing?"disabled":"")},a.createElement(de,{name:"copy-to-clipboard",big:!0}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"View")))),a.createElement(fn,{entropy:e})),a.createElement(oo,{activeTabName:this.state.generator.name},this.generators.map((e=>a.createElement(ro,{key:e.name,name:e.name,type:e.type,onClick:()=>this.handleGeneratorChanged(e)},"password"===e.type&&a.createElement(Ym,{configuration:this.state.generator,onChanged:this.handleGeneratorChanged,disabled:this.state.processing}),"passphrase"===e.type&&a.createElement($m,{configuration:this.state.generator,onChanged:this.handleGeneratorChanged,disabled:this.state.processing})))))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.state.processing,onClick:this.handleClose}),a.createElement(Ee,{value:this.translate("Apply"),disabled:this.state.processing||this.isPasswordEmpty(),processing:this.state.processing})))))}}Jm.propTypes={context:d().any,resourcePasswordGeneratorContext:d().any,actionFeedbackContext:d().any,onClose:d().func,t:d().func};const Xm=u(D(oe((0,k.Z)("common")(Jm))));class Qm extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.initEventHandlers(),this.createInputRef(),this.isPwndProcessingPromise=null,this.evaluatePasswordIsInDictionaryDebounce=Z()(this.evaluatePasswordIsInDictionary,300)}get defaultState(){const e=this.props.context.resources.find((e=>e.id===this.props.context.passwordEditDialogProps.id))||{};return{nameOriginal:e.name||"",name:e.name||"",nameError:"",nameWarning:"",username:e.username||"",usernameError:"",usernameWarning:"",uri:e.uri||"",uriError:"",uriWarning:"",password:"",passwordError:"",passwordWarning:"",description:e.description||"",descriptionError:"",descriptionWarning:"",isSecretDecrypting:!0,encryptDescription:null,resourceTypeId:e.resource_type_id||"",isPwnedServiceAvailable:!0,passwordInDictionary:!1}}initEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handlePasswordInputKeyUp=this.handlePasswordInputKeyUp.bind(this),this.handleOpenGenerator=this.handleOpenGenerator.bind(this),this.handleGeneratePasswordButtonClick=this.handleGeneratePasswordButtonClick.bind(this),this.handleDescriptionInputFocus=this.handleDescriptionInputFocus.bind(this),this.handleDescriptionInputBlur=this.handleDescriptionInputBlur.bind(this),this.handleDescriptionToggle=this.handleDescriptionToggle.bind(this),this.handleDescriptionInputKeyUp=this.handleDescriptionInputKeyUp.bind(this),this.handleUriInputKeyUp=this.handleUriInputKeyUp.bind(this),this.handleUsernameInputKeyUp=this.handleUsernameInputKeyUp.bind(this),this.handleNameInputKeyUp=this.handleNameInputKeyUp.bind(this)}createInputRef(){this.nameInputRef=a.createRef(),this.passwordInputRef=a.createRef(),this.descriptionInputRef=a.createRef()}componentDidMount(){this.pownedService=new bn(this.props.context.port),this.initialize()}componentDidUpdate(e){this.handleLastGeneratedPasswordChanged(e.resourcePasswordGeneratorContext.lastGeneratedPassword)}async initialize(){if(await this.decryptSecret()){const e=this.mustEncryptDescription();this.setState({encryptDescription:e})}this.evaluatePasswordIsInDictionary()}get currentGeneratorConfiguration(){const e=this.props.resourcePasswordGeneratorContext.settings.default_generator;return this.props.resourcePasswordGeneratorContext.settings.generators.find((t=>t.type===e))}handleLastGeneratedPasswordChanged(e){const t=this.props.resourcePasswordGeneratorContext.lastGeneratedPassword;e!==t&&this.setState({password:t})}isEncryptedDescriptionEnabled(){return this.props.context.resourceTypesSettings.isEncryptedDescriptionEnabled()}areResourceTypesEnabled(){return this.props.context.resourceTypesSettings.areResourceTypesEnabled()}mustEncryptDescription(){return this.props.context.resourceTypesSettings.mustEncryptDescription(this.state.resourceTypeId)}async handleFormSubmit(e){if(e.preventDefault(),!this.state.processing){if(await this.toggleProcessing(),!await this.validate())return await this.toggleProcessing(),void this.focusFirstFieldError();try{const e=await this.updateResource();await this.handleSaveSuccess(e)}catch(e){await this.toggleProcessing(),this.handleSaveError(e)}}}async toggleProcessing(){const e=this.state.processing;return new Promise((t=>{this.setState({processing:!e},t())}))}async validate(){return this.setState({error:"",nameError:"",uriError:"",usernameError:"",passwordError:"",descriptionError:""}),await Promise.all([this.validateNameInput(),this.validatePasswordInput()]),""===this.state.nameError&&""===this.state.passwordError}validateNameInput(){const e=this.state.name.trim();let t="";return e.length||(t=this.translate("A name is required.")),new Promise((e=>{this.setState({nameError:t},e)}))}validatePasswordInput(){const e=this.state.password;let t="";return e.length||(t=this.translate("A password is required.")),new Promise((e=>{this.setState({passwordError:t},e)}))}async evaluatePasswordIsInDictionary(){if(this.state.isPwnedServiceAvailable){const e=await this.pownedService.evaluateSecret(this.state.password,this.state.isPwnedServiceAvailable);this.setState({isPwnedServiceAvailable:e.isPwnedServiceAvailable,passwordInDictionary:e.inDictionary})}}async updateResource(){const e={id:this.props.context.passwordEditDialogProps.id,name:this.state.name,username:this.state.username,uri:this.state.uri};return this.areResourceTypesEnabled()?this.state.encryptDescription?this.updateWithEncryptedDescription(e):this.updateWithoutEncryptedDescription(e):this.updateResourceLegacy(e)}async updateResourceLegacy(e){e.description=this.state.description;const t=this.state.password;return this.props.context.port.request("passbolt.resources.update",e,t)}async updateWithoutEncryptedDescription(e){e.description=this.state.description,e.resource_type_id=this.props.context.resourceTypesSettings.findResourceTypeIdBySlug(this.props.context.resourceTypesSettings.DEFAULT_RESOURCE_TYPES_SLUGS.PASSWORD_STRING);const t=this.state.password;return this.props.context.port.request("passbolt.resources.update",e,t)}async updateWithEncryptedDescription(e){e.resource_type_id=this.props.context.resourceTypesSettings.findResourceTypeIdBySlug(this.props.context.resourceTypesSettings.DEFAULT_RESOURCE_TYPES_SLUGS.PASSWORD_AND_DESCRIPTION),e.description="";const t={description:this.state.description,password:this.state.password};return this.props.context.port.request("passbolt.resources.update",e,t)}async handleSaveSuccess(){await this.props.actionFeedbackContext.displaySuccess(this.translate("The password has been updated successfully")),this.selectAndScrollToResource(this.props.context.passwordEditDialogProps.id),this.props.resourceWorkspaceContext.onResourceEdited(),this.props.onClose(),this.props.context.setContext({passwordEditDialogProps:null})}handleSaveError(e){"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e))}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}focusFirstFieldError(){this.state.nameError?this.nameInputRef.current.focus():this.state.passwordError&&this.passwordInputRef.current.focus()}selectAndScrollToResource(e){this.props.context.port.emit("passbolt.resources.select-and-scroll-to",e)}handleInputChange(e){const t=e.target,s=t.value,a=t.name;"password"===a&&s.length&&(this.isPwndProcessingPromise=this.evaluatePasswordIsInDictionaryDebounce()),this.setState({[a]:s})}async handleDescriptionInputFocus(){this.setState({passwordInputHasFocus:!0}),this.descriptionInputRef.current.focus()}handleDescriptionInputBlur(){this.setState({descriptionInputHasFocus:!1})}async handleNameInputKeyUp(){await this.validateNameInput();const e=Ge(this.state.name,Ve,this.translate);this.setState({nameWarning:e})}async handlePasswordInputKeyUp(){await this.validatePasswordInput();const e=Ge(this.state.password,4096,this.translate);this.setState({passwordWarning:e})}handleGeneratePasswordButtonClick(){if(this.hasAllInputDisabled())return;const e=pn(this.currentGeneratorConfiguration);this.setState({password:e})}handleOpenGenerator(){this.props.dialogContext.open(Xm)}handleClose(){this.props.context.setContext({passwordEditDialogProps:null}),this.props.onClose()}async handleDescriptionToggle(){if((this.isEncryptedDescriptionEnabled()||this.state.encryptDescription)&&!this.mustEncryptDescription()){const e=!this.state.encryptDescription;this.setState({encryptDescription:e})}}handleDescriptionInputKeyUp(){const e=Ge(this.state.description,1e4,this.translate);this.setState({descriptionWarning:e})}handleUriInputKeyUp(){const e=Ge(this.state.uri,1024,this.translate);this.setState({uriWarning:e})}handleUsernameInputKeyUp(){const e=Ge(this.state.username,Ve,this.translate);this.setState({usernameWarning:e})}async decryptSecret(){this.setState({isSecretDecrypting:!0});try{const e=await this.getDecryptedSecret();return this.setState({password:e.password,description:e.description,isSecretDecrypting:!1}),!0}catch(e){return this.handleClose(),!1}}async getDecryptedSecret(){const e=await this.props.context.port.request("passbolt.secret.decrypt",this.props.context.passwordEditDialogProps.id,{showProgress:!1});return"string"==typeof e?{password:e,description:this.state.description}:e}getPasswordInputPlaceholder(){let e=this.translate("Password");return this.state.isSecretDecrypting&&(e=this.translate("Decrypting")),e}getDescriptionPlaceholder(){return this.state.isSecretDecrypting&&this.mustEncryptDescription()?this.translate("Decrypting"):this.translate("Description")}hasAllInputDisabled(){return this.state.processing}isPasswordDisabled(){return this.state.isSecretDecrypting}isDescriptionDisabled(){return this.state.isSecretDecrypting&&this.mustEncryptDescription()}get canUsePasswordGenerator(){return this.props.context.siteSettings.canIUse("passwordGenerator")}get translate(){return this.props.t}render(){const e=this.state.password?un(this.state.password):null,t=this.getPasswordInputPlaceholder();return a.createElement(be,{title:this.translate("Edit resource"),subtitle:this.state.nameOriginal,className:"edit-password-dialog",disabled:this.hasAllInputDisabled(),onClose:this.handleClose},a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input text required ${this.state.nameError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"edit-password-form-name"},a.createElement(C.c,null,"Name"),this.state.nameWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"edit-password-form-name",name:"name",type:"text",value:this.state.name,onKeyUp:this.handleNameInputKeyUp,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),ref:this.nameInputRef,className:"required fluid",maxLength:"255",required:"required",autoComplete:"off",autoFocus:!0}),this.state.nameError&&a.createElement("div",{className:"name error-message"},this.state.nameError),this.state.nameWarning&&a.createElement("div",{className:"name warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.nameWarning)),a.createElement("div",{className:`input text ${this.state.uriError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"edit-password-form-uri"},a.createElement(C.c,null,"URI"),this.state.uriWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"edit-password-form-uri",name:"uri",className:"fluid",maxLength:"1024",type:"text",autoComplete:"off",value:this.state.uri,onChange:this.handleInputChange,placeholder:this.translate("URI"),onKeyUp:this.handleUriInputKeyUp,disabled:this.hasAllInputDisabled()}),this.state.uriError&&a.createElement("div",{className:"error-message"},this.state.uriError),this.state.uriWarning&&a.createElement("div",{className:"uri warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.uriWarning)),a.createElement("div",{className:`input text ${this.state.usernameError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"edit-password-form-username"},a.createElement(C.c,null,"Username"),this.state.usernameWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"edit-password-form-username",name:"username",type:"text",className:"fluid",maxLength:"255",autoComplete:"off",value:this.state.username,onChange:this.handleInputChange,onKeyUp:this.handleUsernameInputKeyUp,placeholder:this.translate("Username"),disabled:this.hasAllInputDisabled()}),this.state.usernameError&&a.createElement("div",{className:"error-message"},this.state.usernameError),this.state.usernameWarning&&a.createElement("div",{className:"username warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.usernameWarning)),a.createElement("div",{className:`input-password-wrapper input required ${this.state.passwordError?"error":""} ${this.hasAllInputDisabled()?"disabled":""}`},a.createElement("label",{htmlFor:"edit-password-form-password"},a.createElement(C.c,null,"Password"),(this.state.passwordWarning||this.state.passwordInDictionary||!this.state.isPwnedServiceAvailable)&&a.createElement(de,{name:"exclamation"})),a.createElement("div",{className:"password-button-inline"},a.createElement(At,{id:"edit-password-form-password",name:"password",onKeyUp:this.handlePasswordInputKeyUp,value:this.state.password,placeholder:t,onChange:this.handleInputChange,autoComplete:"new-password",disabled:this.hasAllInputDisabled()||this.isPasswordDisabled(),preview:!0,inputRef:this.passwordInputRef}),a.createElement("a",{onClick:this.handleGeneratePasswordButtonClick,className:"password-generate button-icon button "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement(de,{name:"dice",big:!0}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"Generate"))),this.canUsePasswordGenerator&&a.createElement("a",{onClick:this.handleOpenGenerator,className:"password-generator button-icon button "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement(de,{name:"settings",big:!0}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"Open generator")))),a.createElement(fn,{entropy:e,error:Boolean(this.state.passwordError)}),this.state.passwordError&&a.createElement("div",{className:"password error-message"},this.state.passwordError),this.state.passwordWarning&&a.createElement("div",{className:"password warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.passwordWarning),!this.state.isPwnedServiceAvailable&&a.createElement("div",{className:"pwned-password invalid-passphrase warning-message"},a.createElement(C.c,null,"The pwnedpasswords service is unavailable, your password might be part of an exposed data breach")),this.state.passwordInDictionary&&a.createElement("div",{className:"pwned-password invalid-passphrase warning-message"},a.createElement(C.c,null,"The password is part of an exposed data breach."))),a.createElement("div",{className:"input textarea "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",{htmlFor:"edit-password-form-description"},a.createElement(C.c,null,"Description"),this.state.descriptionWarning&&a.createElement(de,{name:"exclamation"}),!this.areResourceTypesEnabled()&&a.createElement(ge,{message:this.translate("Do not store sensitive data. Unlike the password, this data is not encrypted. Upgrade to version 3 to encrypt this information.")},a.createElement(de,{name:"info-circle"})),this.areResourceTypesEnabled()&&!this.state.encryptDescription&&a.createElement("a",{role:"button",onClick:this.handleDescriptionToggle,className:"lock-toggle"},a.createElement(ge,{message:this.translate("Do not store sensitive data or click here to enable encryption for the description field.")},a.createElement(de,{name:"lock-open"}))),this.areResourceTypesEnabled()&&this.state.encryptDescription&&a.createElement("a",{role:"button",onClick:this.handleDescriptionToggle,className:"lock-toggle"},a.createElement(ge,{message:this.translate("The description content will be encrypted.")},a.createElement(de,{name:"lock"})))),a.createElement("textarea",{id:"edit-password-form-description",name:"description",maxLength:"10000",className:"required",placeholder:this.getDescriptionPlaceholder(),value:this.state.description,disabled:this.hasAllInputDisabled()||this.isDescriptionDisabled(),onChange:this.handleInputChange,ref:this.descriptionInputRef,onFocus:this.handleDescriptionInputFocus,onBlur:this.handleDescriptionInputBlur,onKeyUp:this.handleDescriptionInputKeyUp}),this.state.descriptionError&&a.createElement("div",{className:"error-message"},this.state.descriptionError),this.state.descriptionWarning&&a.createElement("div",{className:"description warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.descriptionWarning))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled()||this.isPasswordDisabled()||this.isDescriptionDisabled(),onClick:this.handleClose}),a.createElement(Ee,{value:this.translate("Save"),disabled:this.hasAllInputDisabled()||this.isPasswordDisabled()||this.isDescriptionDisabled(),processing:this.hasAllInputDisabled()}))))}}Qm.propTypes={context:d().any,onClose:d().func,resourcePasswordGeneratorContext:d().any,resourceWorkspaceContext:d().any,actionFeedbackContext:d().any,dialogContext:d().any,t:d().func};const ed=u(ee(oe(D(M((0,k.Z)("common")(Qm))))));class td extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.createRefs(),this.bindCallbacks()}get defaultState(){return{moreMenuOpen:!1}}createRefs(){this.moreMenuRef=a.createRef()}bindCallbacks(){this.handleDocumentClickEvent=this.handleDocumentClickEvent.bind(this),this.handleDocumentContextualMenuEvent=this.handleDocumentContextualMenuEvent.bind(this),this.handleDocumentDragStartEvent=this.handleDocumentDragStartEvent.bind(this),this.handleMoreClickEvent=this.handleMoreClickEvent.bind(this),this.handleDeleteClickEvent=this.handleDeleteClickEvent.bind(this),this.handleEditClickEvent=this.handleEditClickEvent.bind(this),this.handleCopyPermalinkClickEvent=this.handleCopyPermalinkClickEvent.bind(this),this.handleCopyUsernameClickEvent=this.handleCopyUsernameClickEvent.bind(this),this.handleShareClickEvent=this.handleShareClickEvent.bind(this),this.handleCopySecretClickEvent=this.handleCopySecretClickEvent.bind(this),this.handleViewDetailClickEvent=this.handleViewDetailClickEvent.bind(this),this.handleExportClickEvent=this.handleExportClickEvent.bind(this)}componentDidMount(){document.addEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.addEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.addEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.removeEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.removeEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0})}handleDocumentClickEvent(e){this.moreMenuRef.current.contains(e.target)||this.handleCloseMoreMenu()}handleDocumentContextualMenuEvent(e){this.moreMenuRef.current.contains(e.target)||this.handleCloseMoreMenu()}handleDocumentDragStartEvent(){this.handleCloseMoreMenu()}handleMoreClickEvent(){const e=!this.state.moreMenuOpen;this.setState({moreMenuOpen:e})}handleDeleteClickEvent(){const e={resources:this.selectedResources};this.props.context.setContext({passwordDeleteDialogProps:e}),this.props.dialogContext.open(Km),this.handleCloseMoreMenu()}handleEditClickEvent(){const e={id:this.selectedResources[0].id};this.props.context.setContext({passwordEditDialogProps:e}),this.props.dialogContext.open(ed)}async handleShareClickEvent(){const e=this.selectedResources.map((e=>e.id));await this.props.context.setContext({shareDialogProps:{resourcesIds:e}}),this.props.dialogContext.open(Ec)}async handleCopyPermalinkClickEvent(){this.handleCloseMoreMenu();const e=`${this.props.context.userSettings.getTrustedDomain()}/app/passwords/view/${this.selectedResources[0].id}`;await qt.copy(e,this.props.context.port),this.displaySuccessNotification(this.translate("The permalink has been copied to clipboard"))}async handleCopyUsernameClickEvent(){this.handleCloseMoreMenu(),await qt.copy(this.selectedResources[0].username,this.props.context.port),this.displaySuccessNotification(this.translate("The username has been copied to clipboard"))}async copyPasswordToClipboard(e){if(!e)throw new TypeError(this.translate("The password is empty."));if("string"==typeof e)await qt.copy(e,this.props.context.port);else{if(!Object.prototype.hasOwnProperty.call(e,"password"))throw new TypeError(this.translate("The password field is not defined."));await qt.copy(e.password,this.props.context.port)}}async handleCopySecretClickEvent(){this.handleCloseMoreMenu();try{const e=await this.props.context.port.request("passbolt.secret.decrypt",this.selectedResources[0].id,{showProgress:!0});await this.copyPasswordToClipboard(e),this.props.resourceWorkspaceContext.onResourceCopied(),this.props.actionFeedbackContext.displaySuccess(this.translate("The secret has been copied to clipboard"))}catch(e){"UserAbortsOperationError"!==e.name&&this.props.actionFeedbackContext.displayError(e.message)}}handleExportClickEvent(){this.export()}displaySuccessNotification(e){this.props.actionFeedbackContext.displaySuccess(e)}handleCloseMoreMenu(){this.setState({moreMenuOpen:!1})}get selectedResources(){return this.props.resourceWorkspaceContext.selectedResources}hasResourceSelected(){return this.selectedResources.length>0}hasOneResourceSelected(){return 1===this.selectedResources.length}hasMultipleResourcesSelected(){return this.selectedResources.length>1}canUpdate(){return this.hasResourceSelected()&&this.selectedResources.every((e=>e.permission.type>=7))}canShare(){return this.hasResourceSelected()&&this.selectedResources.every((e=>15===e.permission.type))}canExport(){return this.hasResourceSelected()&&this.props.context.siteSettings.canIUse("export")}canCopyUsername(){return this.hasOneResourceSelected()&&this.selectedResources[0].username}hasMoreActionAllowed(){return!!this.hasOneResourceSelected()||!!this.hasMultipleResourcesSelected&&this.canUpdate()}handleViewDetailClickEvent(){this.props.resourceWorkspaceContext.onLockDetail()}hasLockDetail(){return this.props.resourceWorkspaceContext.lockDisplayDetail}async export(){const e=this.selectedResources.map((e=>e.id));await this.props.resourceWorkspaceContext.onResourcesToExport({resourcesIds:e}),await this.props.dialogContext.open(wc)}get translate(){return this.props.t}render(){return a.createElement("div",{className:"col2_3 actions-wrapper"},a.createElement("div",{className:"actions"},a.createElement("ul",null,a.createElement("li",{id:"password_action"},a.createElement("a",{className:"button "+(this.hasOneResourceSelected()?"":"disabled"),onClick:this.handleCopySecretClickEvent},a.createElement(de,{name:"copy-to-clipboard"}),a.createElement("span",null,a.createElement(C.c,null,"Copy")))),a.createElement("li",{id:"edit_action"},a.createElement("a",{className:"button "+(this.hasOneResourceSelected()&&this.canUpdate()?"":"disabled"),onClick:this.handleEditClickEvent},a.createElement(de,{name:"edit"}),a.createElement("span",null,a.createElement(C.c,null,"Edit")))),a.createElement("li",{id:"share_action"},a.createElement("a",{className:"button "+(this.hasResourceSelected()&&this.canShare()?"":"disabled"),onClick:this.handleShareClickEvent},a.createElement(de,{name:"share"}),a.createElement("span",null,a.createElement(C.c,null,"Share")))),a.createElement("li",{id:"export_action"},a.createElement("a",{className:"button "+(this.hasResourceSelected()&&this.canExport()?"":"disabled"),onClick:this.handleExportClickEvent},a.createElement(de,{name:"download"}),a.createElement("span",null,a.createElement(C.c,null,"Export")))),a.createElement("li",null,a.createElement("div",{className:"dropdown",ref:this.moreMenuRef},a.createElement("a",{className:`button more ${this.state.moreMenuOpen?"open":""} ${this.hasMoreActionAllowed()?"":"disabled"}`,onClick:this.handleMoreClickEvent},a.createElement("span",null,a.createElement(C.c,null,"More")),a.createElement(de,{name:"caret-down"})),a.createElement("ul",{className:"dropdown-content menu right "+(this.state.moreMenuOpen?"visible":"")},a.createElement("li",{id:"username_action"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{className:this.canCopyUsername()?"":"disabled",onClick:this.handleCopyUsernameClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Copy username to clipboard"))))))),a.createElement("li",{id:"secret_action"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{className:this.hasOneResourceSelected()?"":"disabled",onClick:this.handleCopySecretClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Copy password to clipboard"))))))),a.createElement("li",{id:"delete_action"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{className:this.canUpdate()?"":"disabled",onClick:this.handleDeleteClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Delete"))))))),a.createElement("li",{id:"permalink_action"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{className:this.hasOneResourceSelected()?"":"disabled",onClick:this.handleCopyPermalinkClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Copy permalink to clipboard")))))))))))),a.createElement("div",{className:"actions secondary"},a.createElement("ul",null,a.createElement("li",null,a.createElement("a",{className:"button button-toggle info "+(this.hasLockDetail()?"selected":""),onClick:this.handleViewDetailClickEvent},a.createElement(de,{name:"info-circle",big:!0}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"View detail")))))))}}td.propTypes={context:d().any,actionFeedbackContext:d().any,resourceWorkspaceContext:d().any,dialogContext:d().any,t:d().func};const sd=u(M(ee(D((0,k.Z)("common")(td)))));class ad extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers()}get defaultState(){return{showErrorsDetails:!1}}bindHandlers(){this.handleClose=this.handleClose.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleErrorDetailsToggle=this.handleErrorDetailsToggle.bind(this),this.handleReferenceFolderClick=this.handleReferenceFolderClick.bind(this),this.handleReferenceTagClick=this.handleReferenceTagClick.bind(this)}handleClose(){this.close()}handleSubmit(e){e.preventDefault(),this.close()}handleErrorDetailsToggle(){this.toggleErrorDetails()}handleReferenceFolderClick(){const e=this.resultReferenceFolder;this.props.history.push(`/app/folders/view/${e.id}`),this.close()}handleReferenceTagClick(){const e=this.resultReferenceTag,t={type:te.TAG,payload:{tag:e}};this.props.history.push({pathname:"/app/passwords",state:{filter:t}}),this.close()}close(){this.props.onClose()}toggleErrorDetails(){this.setState({showErrorDetails:!this.state.showErrorDetails})}get canIUseTags(){return this.props.context.siteSettings.canIUse("tags")}get canIUseFolders(){return this.props.context.siteSettings.canIUse("folders")}get result(){return this.props.resourceWorkspaceContext.resourceFileImportResult||{}}get resultCreated(){return this.result.created||{}}get resultCreatedFoldersCount(){return this.resultCreated.foldersCount||0}get resultCreatedResourcesCount(){return this.resultCreated.resourcesCount||0}get resultReferences(){return this.result.references||{}}get resultReferenceTag(){return this.resultReferences.tag||null}get resultReferenceFolder(){return this.resultReferences.folder||null}get resultErrors(){return this.result.errors||{}}get resultErrorsResources(){return this.resultErrors.resources||[]}get resultErrorsFolders(){return this.resultErrors.folders||[]}get hasErrorsResources(){return this.resultErrorsResources.length>0}get resultHasErrorsFolders(){return this.resultErrorsFolders.length>0}get resultHasErrors(){return this.hasErrorsResources||this.resultHasErrorsFolders}get formatErrors(){let e="";return this.hasErrorsResources&&(e+=`----------------------------\n${this.translate("Resources errors")}\n----------------------------\n${JSON.stringify(this.resultErrorsResources,null,4)}\n\n`),this.resultHasErrorsFolders&&(e+=`----------------------------\n${this.translate("Folder errors")}\n----------------------------\n${JSON.stringify(this.resultErrorsFolders,null,4)}`),e}get translate(){return this.props.t}render(){const e=this.resultCreatedResourcesCount+this.resultErrorsResources.length,t=this.resultCreatedFoldersCount+this.resultErrorsFolders.length;return a.createElement(be,{title:this.resultHasErrors?this.translate("Something went wrong!"):this.translate("Import success!"),onClose:this.handleClose},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"form-content"},!this.hasErrorsResources&&a.createElement("p",null,a.createElement("strong",null,this.translate("{{count}} password has been imported successfully.",{count:this.resultCreatedResourcesCount}))),this.hasErrorsResources&&a.createElement(a.Fragment,null,a.createElement("p",{className:"error inline-error"},a.createElement(C.c,null,"There was an issue while importing passwords:")),a.createElement("p",null,a.createElement(C.c,{count:e},a.createElement("strong",null,{numberResourceSuccess:this.resultCreatedResourcesCount}," out of ",{count:this.resultCreatedResourcesCount+this.resultErrorsResources.length})," password has been imported."))),this.canIUseFolders&&!this.resultHasErrorsFolders&&a.createElement("p",null,a.createElement("strong",null,this.translate("{{count}} folder has been imported successfully.",{count:this.resultCreatedFoldersCount}))),this.canIUseFolders&&this.resultHasErrorsFolders&&a.createElement(a.Fragment,null,a.createElement("p",{className:"error inline-error"},a.createElement(C.c,null,"There was an issue while importing folders:")),a.createElement("p",null,a.createElement(C.c,{count:t},a.createElement("strong",null,{numberFolderSuccess:this.resultCreatedFoldersCount}," out of ",{count:this.resultCreatedFoldersCount+this.resultErrorsFolders.length})," folder has been imported."))),this.canIUseFolders&&this.resultReferenceFolder&&a.createElement("p",null,a.createElement(C.c,null,"You can find these newly imported passwords in the folder ",a.createElement("a",{onClick:this.handleReferenceFolderClick},{folderName:this.resultReferenceFolder.name}),".")),this.canIUseTags&&!this.resultReferenceFolder&&this.resultReferenceTag&&a.createElement("p",null,a.createElement(C.c,null,"You can find these newly imported passwords under the tag ",a.createElement("a",{onClick:this.handleReferenceTagClick},{tagName:this.resultReferenceTag.slug}),".")),this.resultHasErrors&&a.createElement("div",{className:"accordion error-details"},a.createElement("div",{className:"accordion-header"},a.createElement("a",{onClick:this.handleErrorDetailsToggle},a.createElement(C.c,null,"Error details"),a.createElement(de,{name:this.state.showErrorDetails?"caret-up":"caret-down"}))),this.state.showErrorDetails&&a.createElement("div",{className:"accordion-content"},a.createElement("div",{className:"input text"},a.createElement("label",{htmlFor:"js_field_debug",className:"visuallyhidden"},a.createElement(C.c,null,"Error details")),a.createElement("textarea",{id:"js_field_debug",defaultValue:`${this.formatErrors}`,readOnly:!0}))))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ee,{value:this.translate("Ok")}))))}}ad.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,history:d().object,resourceWorkspaceContext:d().any,t:d().func};const nd=(0,c.EN)(u(ee(D((0,k.Z)("common")(ad)))));class rd extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers(),this.createReferences()}get defaultState(){return{processing:!1,password:"",keyFile:null,errors:{}}}bindHandlers(){this.handleSelectFile=this.handleSelectFile.bind(this),this.handleFileSelected=this.handleFileSelected.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}createReferences(){this.fileUploaderRef=a.createRef(),this.passwordInputRef=a.createRef()}get selectedFilename(){return this.state.keyFile?this.state.keyFile.name:""}get fileToImport(){return this.props.resourceWorkspaceContext.resourceFileToImport}handleSelectFile(){this.fileUploaderRef.current.click()}async handleFileSelected(e){const[t]=e.target.files;await this.setState({keyFile:t})}handleInputChange(e){const t=e.target,s=t.value,a=t.name;this.setState({[a]:s})}handleCancel(){this.props.resourceWorkspaceContext.onResourceFileToImport(null),this.close()}async handleSubmit(e){e.preventDefault(),this.state.processing||this.import()}readFile(){if(!this.state.keyFile)return;const e=new FileReader;return new Promise(((t,s)=>{e.onloadend=e=>{try{const s=e.target.result.split(",")[1];t(s)}catch(e){s(e)}},e.readAsDataURL(this.state.keyFile)}))}async import(){const e=this.fileToImport,t=e.b64FileContent,s=e.fileType,a=this.state.password,n=await this.readFile(),r=Object.assign({},e.options,{credentials:{password:a,keyfile:n}});this.toggleProcessing(),await this.resetValidation();try{const e=await this.props.context.port.request("passbolt.import-resources.import-file",s,t,r);this.handleImportSuccess(e)}catch(e){this.handleImportError(e)}}async resetValidation(){await this.setState({errors:{}})}async handleImportSuccess(e){await this.props.resourceWorkspaceContext.onResourceFileImportResult(e),await this.props.resourceWorkspaceContext.onResourceFileToImport(null),await this.props.dialogContext.open(nd),this.close()}handleImportError(e){const t="UserAbortsOperationError"===e.name,s="InvalidKey"===e.code||"InvalidArg"===e.code;if(this.toggleProcessing(),t);else if(s)this.setState({errors:{invalidPasswordOrKeyfile:!0}});else{const t={error:e};this.props.dialogContext.open(we,t)}}close(){this.props.onClose()}async toggleProcessing(){const e=this.state.processing;return this.setState({processing:!e})}hasAllInputDisabled(){return this.state.processing}get translate(){return this.props.t}render(){const e=this.state.errors,t=e&&e.invalidPasswordOrKeyfile;return a.createElement(be,{title:this.translate("Enter the password and/or key file"),className:"import-password-dialog",disabled:this.hasAllInputDisabled(),onClose:this.handleCancel},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"form-content"},a.createElement("div",{className:"input-password-wrapper input "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("label",{htmlFor:"import-password-dialog-password"},a.createElement(C.c,null,"Keepass password")),a.createElement(At,{id:"import-password-dialog-password",name:"password",autoComplete:"off",value:this.state.password,onChange:this.handleInputChange,disabled:this.hasAllInputDisabled(),placeholder:this.translate("Passphrase"),preview:!0,inputRef:this.passwordInputRef})),a.createElement("div",{className:"input file "+(this.hasAllInputDisabled()?"disabled":"")},a.createElement("input",{type:"file",id:"dialog-import-passwords",ref:this.fileUploaderRef,onChange:this.handleFileSelected}),a.createElement("label",{htmlFor:"dialog-import-passwords"},a.createElement(C.c,null,"Keepass key file (optional)")),a.createElement("div",{className:"input-file-inline"},a.createElement("input",{type:"text",placeholder:this.translate("No key file selected"),disabled:!0,value:this.selectedFilename}),a.createElement("button",{className:"button primary",type:"button",disabled:this.hasAllInputDisabled(),onClick:this.handleSelectFile},a.createElement("span",null,a.createElement(C.c,null,"Choose a file")))),t&&a.createElement("div",{className:"error-message"},a.createElement(C.c,null,"Cannot decrypt the file, invalid credentials.")))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleCancel}),a.createElement(Ee,{value:this.translate("Continue import"),disabled:this.hasAllInputDisabled(),processing:this.state.processing}))))}}rd.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,dialogContext:d().any,resourceWorkspaceContext:d().any,t:d().func};const id=u(ee(D(M((0,k.Z)("common")(rd)))));class od extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindHandlers(),this.createReferences()}get defaultState(){const e=this.props.context.siteSettings.canIUse("tags");return{processing:!1,fileToImport:null,options:{folders:this.props.context.siteSettings.canIUse("folders"),tags:e},errors:{}}}bindHandlers(){this.handleSelectFile=this.handleSelectFile.bind(this),this.handleFileSelected=this.handleFileSelected.bind(this),this.handleImportOptionFoldersChanged=this.handleImportOptionFoldersChanged.bind(this),this.handleImportOptionTagsChanged=this.handleImportOptionTagsChanged.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}createReferences(){this.fileUploaderRef=a.createRef()}async componentDidUpdate(e){await this.handleFileToImportChange(e.resourceWorkspaceContext.resourceFileToImport)}hasSubmitButtonDisabled(){return!this.state.fileToImport||this.state.processing}hasAllInputDisabled(){return this.state.processing}get selectedFilename(){return this.state.fileToImport?this.state.fileToImport.name:""}get selectedFileExtension(){const e=this.state.fileToImport.name.split(".");return e[e.length-1]}handleSelectFile(){this.fileUploaderRef.current.click()}async handleFileSelected(e){const[t]=e.target.files;await this.resetValidation(),this.setState({fileToImport:t})}async handleImportOptionFoldersChanged(){const e=Object.assign({},this.state.options,{folders:!this.state.options.folders});await this.setState({options:e})}async handleImportOptionTagsChanged(){const e=Object.assign({},this.state.options,{tags:!this.state.options.tags});await this.setState({options:e})}async handleFileToImportChange(e){e&&!this.props.resourceWorkspaceContext.resourceFileToImport&&this.close()}handleCancel(){this.props.resourceWorkspaceContext.onResourceFileToImport(null),this.close()}handleSubmit(e){e.preventDefault(),this.state.processing||this.import()}async toggleProcessing(){const e=this.state.processing;return this.setState({processing:!e})}close(){this.props.onClose()}toBinary(e){const t=new Uint16Array(e.length);for(let s=0;s<t.length;s++)t[s]=e.charCodeAt(s);return new Uint8Array(t.buffer).reduce(((e,t)=>e+String.fromCharCode(t)),"")}readFileCsv(){const e=new FileReader;return new Promise(((t,s)=>{e.onloadend=e=>{try{const s=this.toBinary(e.target.result),a=btoa(s);t(a)}catch(e){s(e)}},e.readAsText(this.state.fileToImport)}))}readFileKdbx(){const e=new FileReader;return new Promise(((t,s)=>{e.onloadend=e=>{try{const s=e.target.result.split(",")[1];t(s)}catch(e){s(e)}},e.readAsDataURL(this.state.fileToImport)}))}async import(){const e=this.selectedFileExtension,t="kdbx"===e?await this.readFileKdbx():await this.readFileCsv(),s=Object.assign({},this.state.options,{credentials:{password:null,keyFile:null}});await this.toggleProcessing();try{const a=await this.props.context.port.request("passbolt.import-resources.import-file",e,t,s);this.handleImportSuccess(a)}catch(s){this.handleImportError(s,t,e)}}async handleImportSuccess(e){await this.props.resourceWorkspaceContext.onResourceFileImportResult(e),await this.props.resourceWorkspaceContext.onResourceFileToImport(null),await this.props.dialogContext.open(nd),this.toggleProcessing(),this.close()}handleImportError(e,t,s){const a="UserAbortsOperationError"===e.name,n="KdbxError"===e.name&&"BadSignature"===e.code,r="KdbxError"===e.name&&("InvalidKey"===e.code||"InvalidArg"===e.code),i="FileFormatError"===e.name;if(this.toggleProcessing(),a);else if(r)this.importProtectedKeepassFile(t,s),this.close();else if(n)this.setState({errors:{invalidKdbxFile:this.translate("Keepass file format not recognized")}});else if(i)this.setState({errors:{invalidCsvFile:e.message}});else{const t={error:e};this.props.dialogContext.open(we,t)}}async importProtectedKeepassFile(e,t){const s={b64FileContent:e,fileType:t,options:this.state.options};await this.props.resourceWorkspaceContext.onResourceFileToImport(s),this.props.dialogContext.open(id)}async invalidate(e){await this.setState({errors:{invalidCsvFile:e.message}})}async resetValidation(){await this.setState({errors:{}})}get translate(){return this.props.t}render(){const e=this.state.errors,t=e&&e.invalidCsvFile,s=e&&e.invalidKdbxFile,n=t||s?"errors":"",r=this.props.context.siteSettings.canIUse("tags"),i=this.props.context.siteSettings.canIUse("folders");return a.createElement(be,{title:this.translate("Import passwords"),className:"import-password-dialog",disabled:this.hasAllInputDisabled(),onClose:this.handleCancel},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input file ${this.hasAllInputDisabled()?"disabled":""} ${n}`},a.createElement("input",{type:"file",id:"dialog-import-passwords",ref:this.fileUploaderRef,onChange:this.handleFileSelected,accept:".csv, .kdbx, .kdb"}),a.createElement("label",{htmlFor:"dialog-import-passwords"},a.createElement(C.c,null,"Select a file to import"),"",a.createElement(ge,{message:this.translate("csv exports from browsers (chrome, edge, brave, opera, vivaldi), keepassx, lastpass, 1password and bitwarden are supported")},"(",a.createElement("a",{role:"link"},"csv")),"",this.translate("or"),"",a.createElement(ge,{message:this.translate("kdbx files are files generated by keepass v2.x")},a.createElement("a",{role:"link"},"kdbx"),")")),a.createElement("div",{className:"input-file-inline"},a.createElement("input",{type:"text",disabled:!0,placeholder:this.translate("No file selected"),defaultValue:this.selectedFilename}),a.createElement("button",{className:"button primary",type:"button",disabled:this.hasAllInputDisabled(),onClick:this.handleSelectFile},a.createElement("span",null,a.createElement(C.c,null,"Choose a file")))),t&&a.createElement("div",{className:"error-message"},this.state.errors.invalidCsvFile),s&&a.createElement("div",{className:"error-message"},this.state.errors.invalidKdbxFile)),r&&a.createElement("div",{className:"input checkbox"},a.createElement("input",{id:"dialog-import-passwords-import-tags",type:"checkbox",checked:this.state.options.tags,disabled:this.hasAllInputDisabled(),onChange:this.handleImportOptionTagsChanged}),a.createElement("label",{htmlFor:"dialog-import-passwords-import-tags"},a.createElement(C.c,null,"Add a unique import tag to passwords"))),i&&a.createElement("div",{className:"input checkbox"},a.createElement("input",{id:"dialog-import-passwords-import-folders",type:"checkbox",checked:this.state.options.folders,disabled:this.hasAllInputDisabled(),onChange:this.handleImportOptionFoldersChanged}),a.createElement("label",{htmlFor:"dialog-import-passwords-import-folders"},a.createElement(C.c,null,"Import folders")))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.hasAllInputDisabled(),onClick:this.handleCancel}),a.createElement(Ee,{value:this.translate("Import"),disabled:this.hasSubmitButtonDisabled(),processing:this.state.processing}))))}}od.propTypes={context:d().any,onClose:d().func,actionFeedbackContext:d().any,dialogContext:d().any,resourceWorkspaceContext:d().any,t:d().func};const ld=u(ee(D(M((0,k.Z)("common")(od)))));class cd extends a.Component{constructor(){super(),this.state=this.getDefaultState(),this.initEventHandlers(),this.createInputRef(),this.isPwndProcessingPromise=null,this.evaluatePasswordIsInDictionaryDebounce=Z()(this.evaluatePasswordIsInDictionaryDebounce,300)}getDefaultState(){return{name:"",nameError:"",nameWarning:"",username:"",usernameError:"",usernameWarning:"",uri:"",uriError:"",uriWarning:"",password:"",passwordError:"",passwordWarning:"",description:"",descriptionError:"",descriptionWarning:"",encryptDescription:!1,hasAlreadyBeenValidated:!1,isPwnedServiceAvailable:!0,passwordInDictionary:!1}}initEventHandlers(){this.handleClose=this.handleClose.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleNameInputKeyUp=this.handleNameInputKeyUp.bind(this),this.handlePasswordInputKeyUp=this.handlePasswordInputKeyUp.bind(this),this.handleGeneratePasswordButtonClick=this.handleGeneratePasswordButtonClick.bind(this),this.handleDescriptionToggle=this.handleDescriptionToggle.bind(this),this.handleDescriptionInputKeyUp=this.handleDescriptionInputKeyUp.bind(this),this.handleUriInputKeyUp=this.handleUriInputKeyUp.bind(this),this.handleUsernameInputKeyUp=this.handleUsernameInputKeyUp.bind(this),this.handleOpenGenerator=this.handleOpenGenerator.bind(this),this.handleLastGeneratedPasswordChanged=this.handleLastGeneratedPasswordChanged.bind(this)}createInputRef(){this.nameInputRef=a.createRef(),this.passwordInputRef=a.createRef()}componentDidMount(){this.pownedService=new bn(this.props.context.port),this.isEncryptedDescriptionEnabled()&&this.setState({encryptDescription:!0})}componentDidUpdate(e){this.handleLastGeneratedPasswordChanged(e.resourcePasswordGeneratorContext.lastGeneratedPassword)}get currentGeneratorConfiguration(){const e=this.props.resourcePasswordGeneratorContext.settings.default_generator;return this.props.resourcePasswordGeneratorContext.settings.generators.find((t=>t.type===e))}handleLastGeneratedPasswordChanged(e){const t=this.props.resourcePasswordGeneratorContext.lastGeneratedPassword;e!==t&&this.setState({password:t})}isEncryptedDescriptionEnabled(){return this.props.context.resourceTypesSettings.isEncryptedDescriptionEnabled()}isLegacyResourceTypeEnabled(){return this.props.context.resourceTypesSettings.isLegacyResourceTypeEnabled()}areResourceTypesEnabled(){return this.props.context.resourceTypesSettings.areResourceTypesEnabled()}async handleFormSubmit(e){if(e.preventDefault(),!this.state.processing){if(await this.setState({hasAlreadyBeenValidated:!0}),await this.toggleProcessing(),!await this.validate())return await this.toggleProcessing(),void this.focusFirstFieldError();try{const e=await this.createResource();await this.handleSaveSuccess(e)}catch(e){await this.toggleProcessing(),await this.handleSaveError(e)}}}async toggleProcessing(){const e=this.state.processing;return new Promise((t=>{this.setState({processing:!e},t())}))}async validate(){return this.setState({nameError:"",uriError:"",usernameError:"",passwordError:"",descriptionError:""}),await Promise.all([this.validateNameInput(),this.validatePasswordInput()]),""===this.state.nameError&&""===this.state.passwordError}validatePasswordInput(){const e=this.state.password;let t="";return e.length||(t=this.translate("A password is required.")),new Promise((e=>{this.setState({passwordError:t},e)}))}validateNameInput(){const e=this.state.name.trim();let t="";return e.length||(t=this.translate("A name is required.")),new Promise((e=>{this.setState({nameError:t},e)}))}async evaluatePasswordIsInDictionaryDebounce(){if(this.state.isPwnedServiceAvailable){const e=await this.pownedService.evaluateSecret(this.state.password);this.setState({isPwnedServiceAvailable:e.isPwnedServiceAvailable,passwordInDictionary:e.inDictionary})}}async createResource(){const e={name:this.state.name,username:this.state.username,uri:this.state.uri,folder_parent_id:this.props.context.resourceCreateDialogProps.folderParentId};return this.areResourceTypesEnabled()?this.state.encryptDescription?this.createWithEncryptedDescription(e,{description:this.state.description,password:this.state.password}):this.createWithoutEncryptedDescription(e,this.state.password):this.createResourceLegacy(e,this.state.password)}async createResourceLegacy(e,t){return e.description=this.state.description,this.props.context.port.request("passbolt.resources.create",e,t)}async createWithEncryptedDescription(e,t){return e.resource_type_id=this.props.context.resourceTypesSettings.findResourceTypeIdBySlug(this.props.context.resourceTypesSettings.DEFAULT_RESOURCE_TYPES_SLUGS.PASSWORD_AND_DESCRIPTION),this.props.context.port.request("passbolt.resources.create",e,t)}async createWithoutEncryptedDescription(e,t){return e.resource_type_id=this.props.context.resourceTypesSettings.findResourceTypeIdBySlug(this.props.context.resourceTypesSettings.DEFAULT_RESOURCE_TYPES_SLUGS.PASSWORD_STRING),e.description=this.state.description,this.props.context.port.request("passbolt.resources.create",e,t)}async handleSaveSuccess(e){await this.props.actionFeedbackContext.displaySuccess(this.translate("The password has been added successfully")),e.folder_parent_id?this.selectAndScrollToFolder(e.folder_parent_id):this.selectAndScrollToResource(e.id),this.props.context.setContext({passwordEditDialogProps:null}),this.props.history.push(`/app/passwords/view/${e.id}`),this.props.onClose()}async handleSaveError(e){"UserAbortsOperationError"===e.name||(console.error(e),this.handleError(e))}handleError(e){const t={error:e};this.props.dialogContext.open(we,t)}focusFirstFieldError(){this.state.nameError?this.nameInputRef.current.focus():this.state.passwordError&&this.passwordInputRef.current.focus()}selectAndScrollToResource(e){this.props.context.port.emit("passbolt.resources.select-and-scroll-to",e)}selectAndScrollToFolder(e){this.props.context.port.emit("passbolt.folders.select-and-scroll-to",e)}handleInputChange(e){const t=e.target,s=t.value,a=t.name;"password"===a&&s.length&&(this.isPwndProcessingPromise=this.evaluatePasswordIsInDictionaryDebounce()),this.setState({[a]:s})}handleNameInputKeyUp(){if(this.state.hasAlreadyBeenValidated){const e=this.validateNameInput();this.setState(e)}else{const e=Ge(this.state.name,Ve,this.translate);this.setState({nameWarning:e})}}handlePasswordInputKeyUp(){if(this.state.hasAlreadyBeenValidated){const e=this.validatePasswordInput();this.setState(e)}else{const e=Ge(this.state.password,4096,this.translate);this.setState({passwordWarning:e})}}handleGeneratePasswordButtonClick(){if(this.state.processing)return;const e=pn(this.currentGeneratorConfiguration);this.setState({password:e,passwordError:""})}handleOpenGenerator(){this.props.dialogContext.open(Xm)}handleClose(){this.props.onClose(),this.props.context.setContext({resourceCreateDialogProps:null})}handleDescriptionToggle(){const e=this.state.encryptDescription;return e&&this.isLegacyResourceTypeEnabled()?this.setState({encryptDescription:!1}):!e&&this.isEncryptedDescriptionEnabled()?this.setState({encryptDescription:!0}):void 0}handleDescriptionInputKeyUp(){if(!this.state.hasAlreadyBeenValidated){const e=Ge(this.state.description,1e4,this.translate);this.setState({descriptionWarning:e})}}handleUriInputKeyUp(){if(!this.state.hasAlreadyBeenValidated){const e=Ge(this.state.uri,1024,this.translate);this.setState({uriWarning:e})}}handleUsernameInputKeyUp(){if(!this.state.hasAlreadyBeenValidated){const e=Ge(this.state.username,Ve,this.translate);this.setState({usernameWarning:e})}}get canUsePasswordGenerator(){return this.props.context.siteSettings.canIUse("passwordGenerator")}get translate(){return this.props.t}render(){const e=this.state.password?un(this.state.password):null;return a.createElement(be,{title:this.translate("Create a password"),className:"create-password-dialog",disabled:this.state.processing,onClose:this.handleClose},a.createElement("form",{onSubmit:this.handleFormSubmit,noValidate:!0},a.createElement("div",{className:"form-content"},a.createElement("div",{className:`input text required ${this.state.nameError?"error":""} ${this.state.processing?"disabled":""}`},a.createElement("label",{htmlFor:"create-password-form-name"},a.createElement(C.c,null,"Name"),this.state.nameWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"create-password-form-name",name:"name",type:"text",value:this.state.name,onKeyUp:this.handleNameInputKeyUp,onChange:this.handleInputChange,disabled:this.state.processing,ref:this.nameInputRef,className:"required fluid",maxLength:"255",required:"required",autoComplete:"off",autoFocus:!0,placeholder:this.translate("Name")}),this.state.nameError&&a.createElement("div",{className:"name error-message"},this.state.nameError),this.state.nameWarning&&a.createElement("div",{className:"name warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.nameWarning)),a.createElement("div",{className:`input text ${this.state.uriError?"error":""} ${this.state.processing?"disabled":""}`},a.createElement("label",{htmlFor:"create-password-form-uri"},a.createElement(C.c,null,"URI"),this.state.uriWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"create-password-form-uri",name:"uri",className:"fluid",maxLength:"1024",type:"text",onKeyUp:this.handleUriInputKeyUp,autoComplete:"off",value:this.state.uri,onChange:this.handleInputChange,placeholder:this.translate("URI"),disabled:this.state.processing}),this.state.uriError&&a.createElement("div",{className:"error-message"},this.state.uriError),this.state.uriWarning&&a.createElement("div",{className:"uri warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.uriWarning)),a.createElement("div",{className:`input text ${this.state.usernameError?"error":""} ${this.state.processing?"disabled":""}`},a.createElement("label",{htmlFor:"create-password-form-username"},a.createElement(C.c,null,"Username"),this.state.usernameWarning&&a.createElement(de,{name:"exclamation"})),a.createElement("input",{id:"create-password-form-username",name:"username",type:"text",className:"fluid",maxLength:"255",onKeyUp:this.handleUsernameInputKeyUp,autoComplete:"off",value:this.state.username,onChange:this.handleInputChange,placeholder:this.translate("Username"),disabled:this.state.processing}),this.state.usernameError&&a.createElement("div",{className:"error-message"},this.state.usernameError),this.state.usernameWarning&&a.createElement("div",{className:"username warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.usernameWarning)),a.createElement("div",{className:`input-password-wrapper input required ${this.state.passwordError?"error":""} ${this.state.processing?"disabled":""}`},a.createElement("label",{htmlFor:"create-password-form-password"},a.createElement(C.c,null,"Password"),(this.state.passwordWarning||this.state.passwordInDictionary||!this.state.isPwnedServiceAvailable)&&a.createElement(de,{name:"exclamation"})),a.createElement("div",{className:"password-button-inline"},a.createElement(At,{id:"create-password-form-password",name:"password",autoComplete:"new-password",placeholder:this.translate("Password"),preview:!0,onKeyUp:this.handlePasswordInputKeyUp,value:this.state.password,onChange:this.handleInputChange,disabled:this.state.processing,inputRef:this.passwordInputRef}),a.createElement("a",{onClick:this.handleGeneratePasswordButtonClick,className:"password-generate button-icon button "+(this.state.processing?"disabled":"")},a.createElement(de,{name:"dice",big:!0}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"Generate"))),this.canUsePasswordGenerator&&a.createElement("a",{onClick:this.handleOpenGenerator,className:"password-generator button-icon button "+(this.state.processing?"disabled":"")},a.createElement(de,{name:"settings",big:!0}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"Open generator")))),a.createElement(fn,{entropy:e,error:Boolean(this.state.passwordError)}),this.state.passwordError&&a.createElement("div",{className:"password error-message"},this.state.passwordError),this.state.passwordWarning&&a.createElement("div",{className:"password warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.passwordWarning),!this.state.isPwnedServiceAvailable&&a.createElement("div",{className:"pwned-password warning-message"},a.createElement(C.c,null,"The pwnedpasswords service is unavailable, your password might be part of an exposed data breach")),this.state.passwordInDictionary&&a.createElement("div",{className:"pwned-password warning-message"},a.createElement(C.c,null,"The password is part of an exposed data breach."))),a.createElement("div",{className:"input textarea "+(this.state.processing?"disabled":"")},a.createElement("label",{htmlFor:"create-password-form-description"},a.createElement(C.c,null,"Description"),this.state.descriptionWarning&&a.createElement(de,{name:"exclamation"}),!this.areResourceTypesEnabled()&&a.createElement(ge,{message:this.translate("Do not store sensitive data. Unlike the password, this data is not encrypted. Upgrade to version 3 to encrypt this information.")},a.createElement(de,{name:"info-circle"})),this.areResourceTypesEnabled()&&!this.state.encryptDescription&&a.createElement("a",{onClick:this.handleDescriptionToggle,className:"lock-toggle"},a.createElement(ge,{message:this.translate("Do not store sensitive data or click here to enable encryption for the description field.")},a.createElement(de,{name:"lock-open"}))),this.areResourceTypesEnabled()&&this.state.encryptDescription&&a.createElement("a",{onClick:this.handleDescriptionToggle,className:"lock-toggle"},a.createElement(ge,{message:this.translate("The description content will be encrypted.")},a.createElement(de,{name:"lock"})))),a.createElement("textarea",{id:"create-password-form-description",name:"description",maxLength:"10000",className:"required",placeholder:this.translate("Add a description"),value:this.state.description,disabled:this.state.processing,onKeyUp:this.handleDescriptionInputKeyUp,onChange:this.handleInputChange}),this.state.descriptionError&&a.createElement("div",{className:"error-message"},this.state.descriptionError),this.state.descriptionWarning&&a.createElement("div",{className:"description warning-message"},a.createElement("strong",null,a.createElement(C.c,null,"Warning:"))," ",this.state.descriptionWarning))),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement(Ce,{disabled:this.state.processing,onClick:this.handleClose}),a.createElement(Ee,{value:this.translate("Create"),disabled:this.state.processing,processing:this.state.processing}))))}}cd.propTypes={context:d().any,history:d().object,onClose:d().func,resourcePasswordGeneratorContext:d().any,actionFeedbackContext:d().any,dialogContext:d().any,t:d().func};const md=oe(u(D((0,c.EN)(M((0,k.Z)("common")(cd))))));class dd extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks(),this.createRefs()}get defaultState(){return{createMenuOpen:!1}}createRefs(){this.createMenuRef=a.createRef()}bindCallbacks(){this.handleDocumentClickEvent=this.handleDocumentClickEvent.bind(this),this.handleDocumentContextualMenuEvent=this.handleDocumentContextualMenuEvent.bind(this),this.handleDocumentDragStartEvent=this.handleDocumentDragStartEvent.bind(this),this.handleCreateClickEvent=this.handleCreateClickEvent.bind(this),this.handleCreateMenuPasswordClickEvent=this.handleCreateMenuPasswordClickEvent.bind(this),this.handleMenuCreateFolderClickEvent=this.handleMenuCreateFolderClickEvent.bind(this),this.handleImportClickEvent=this.handleImportClickEvent.bind(this)}componentDidMount(){document.addEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.addEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.addEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClickEvent,{capture:!0}),document.removeEventListener("contextmenu",this.handleDocumentContextualMenuEvent,{capture:!0}),document.removeEventListener("dragstart",this.handleDocumentDragStartEvent,{capture:!0})}handleDocumentClickEvent(e){this.createMenuRef.current.contains(e.target)||this.handleCloseCreateMenu()}handleDocumentContextualMenuEvent(e){this.createMenuRef.current.contains(e.target)||this.handleCloseCreateMenu()}handleDocumentDragStartEvent(){this.handleCloseCreateMenu()}handleCreateClickEvent(){if(this.props.context.siteSettings.canIUse("folders")){const e=!this.state.createMenuOpen;this.setState({createMenuOpen:e})}else this.openPasswordCreateDialog()}handleCreateMenuPasswordClickEvent(){this.openPasswordCreateDialog(),this.handleCloseCreateMenu()}handleImportClickEvent(){this.props.dialogContext.open(ld)}openPasswordCreateDialog(){const e={folderParentId:this.folderIdSelected};this.props.context.setContext({resourceCreateDialogProps:e}),this.props.dialogContext.open(md)}handleMenuCreateFolderClickEvent(){this.openFolderCreateDialog(),this.handleCloseCreateMenu()}openFolderCreateDialog(){const e={folderParentId:this.folderIdSelected};this.props.context.setContext({folderCreateDialogProps:e}),this.props.dialogContext.open(ic)}handleCloseCreateMenu(){this.setState({createMenuOpen:!1})}get folderSelected(){const e=this.props.resourceWorkspaceContext.filter;return e&&e.type===te.FOLDER?e.payload.folder:null}get folderIdSelected(){return this.folderSelected&&this.folderSelected.id}get canImport(){return this.props.context.siteSettings.canIUse("import")}canCreate(){return null===this.folderSelected||this.folderSelected.permission.type>=7}render(){return a.createElement(a.Fragment,null,a.createElement("div",{className:"dropdown",ref:this.createMenuRef},a.createElement("a",{className:`button create primary ${this.canCreate()?"":"disabled"} ${this.state.createMenuOpen?"open":""}`,onClick:this.handleCreateClickEvent},a.createElement(de,{name:"add"}),a.createElement("span",null,a.createElement(C.c,null,"Create"))),a.createElement("ul",{className:"dropdown-content menu right "+(this.state.createMenuOpen?"visible":"")},a.createElement("li",{id:"password_action"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleCreateMenuPasswordClickEvent},a.createElement("span",null,a.createElement(C.c,null,"New password"))))))),a.createElement("li",{id:"folder_action"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{onClick:this.handleMenuCreateFolderClickEvent},a.createElement("span",null,a.createElement(C.c,null,"New folder"))))))))),this.canImport&&a.createElement("a",{className:"button button-action-icon",onClick:this.handleImportClickEvent},a.createElement(de,{name:"upload"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"upload"))))}}dd.propTypes={context:d().any,dialogContext:d().any,resourceWorkspaceContext:d().any};const hd=u(M(ee((0,k.Z)("common")(dd))));class pd extends a.Component{constructor(e){super(e),this.state=this.defaultState,this.bindCallbacks()}get defaultState(){return{open:!0}}bindCallbacks(){this.handleTitleClickEvent=this.handleTitleClickEvent.bind(this),this.handleClickGroupEvent=this.handleClickGroupEvent.bind(this)}handleTitleClickEvent(){const e=!this.state.open;this.setState({open:e})}handleClickGroupEvent(e){const t={type:te.GROUP,payload:{group:e}};this.props.history.push({pathname:"/app/passwords",state:{filter:t}})}isSelected(e){const t=this.props.resourceWorkspaceContext.filter;return t.type===te.GROUP&&t.payload.group.id===e}hasGroup(){return this.props.context.groups&&this.groups.length>0}get groups(){return this.props.context.groups.filter((e=>null!==e.my_group_user))}get groupsSorted(){return this.groups.sort(((e,t)=>e.name.localeCompare(t.name)))}render(){return a.createElement(a.Fragment,null,this.hasGroup()&&a.createElement("div",{className:"navigation-secondary-tree navigation-secondary navigation-groups accordion"},a.createElement("ul",{className:"accordion-header"},a.createElement("li",{className:"node root "+(this.state.open?"open":"close")},a.createElement("div",{className:"row title",onClick:this.handleTitleClickEvent},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("h3",null,a.createElement("span",{className:"folders-label"},a.createElement("a",{role:"button"},a.createElement(a.Fragment,null,this.state.open&&a.createElement(de,{name:"caret-down"}),!this.state.open&&a.createElement(de,{name:"caret-right"})),a.createElement(C.c,null,"Groups"))))))))),this.state.open&&a.createElement("div",{className:"accordion-content"},a.createElement("ul",{className:"tree ready"},this.groupsSorted.map((e=>a.createElement("li",{className:"node root group-item",key:e.id},a.createElement("div",{className:"row "+(this.isSelected(e.id)?"selected":""),onClick:()=>this.handleClickGroupEvent(e)},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{title:e.name},a.createElement(de,{name:"users"}),a.createElement("span",{className:"ellipsis"},e.name))))))))))))}}pd.propTypes={context:d().any,resourceWorkspaceContext:d().any,history:d().object};const ud=(0,c.EN)(u(ee((0,k.Z)("common")(pd))));class gd extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleEditClickEvent=this.handleEditClickEvent.bind(this),this.handleShareClickEvent=this.handleShareClickEvent.bind(this),this.handleUsernameClickEvent=this.handleUsernameClickEvent.bind(this),this.handleUriClickEvent=this.handleUriClickEvent.bind(this),this.handlePermalinkClickEvent=this.handlePermalinkClickEvent.bind(this),this.handlePasswordClickEvent=this.handlePasswordClickEvent.bind(this),this.handleDeleteClickEvent=this.handleDeleteClickEvent.bind(this),this.handleGoToResourceUriClick=this.handleGoToResourceUriClick.bind(this)}handleEditClickEvent(){const e={id:this.resource.id};this.props.context.setContext({passwordEditDialogProps:e}),this.props.dialogContext.open(ed),this.props.hide()}handleShareClickEvent(){const e=[this.resource.id];this.props.context.setContext({shareDialogProps:{resourcesIds:e}}),this.props.dialogContext.open(Ec),this.props.hide()}async handleUsernameClickEvent(){await qt.copy(this.resource.username,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The username has been copied to clipboard")),this.props.hide()}async handleUriClickEvent(){await qt.copy(this.resource.uri,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The uri has been copied to clipboard")),this.props.hide()}async handlePermalinkClickEvent(){const e=`${this.props.context.userSettings.getTrustedDomain()}/app/passwords/view/${this.resource.id}`;await qt.copy(e,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The permalink has been copied to clipboard")),this.props.hide()}async copyPasswordToClipboard(e){if(!e)throw new TypeError(this.translate("The password is empty."));if("string"==typeof e)await qt.copy(e,this.props.context.port),this.props.resourceWorkspaceContext.onResourceCopied();else{if(!Object.prototype.hasOwnProperty.call(e,"password"))throw new TypeError(this.translate("The password field is not defined."));await qt.copy(e.password,this.props.context.port),this.props.resourceWorkspaceContext.onResourceCopied()}}async handlePasswordClickEvent(){this.props.hide();try{const e=await this.props.context.port.request("passbolt.secret.decrypt",this.resource.id,{showProgress:!0});await this.copyPasswordToClipboard(e),this.props.actionFeedbackContext.displaySuccess(this.translate("The secret has been copied to clipboard"))}catch(e){"UserAbortsOperationError"!==e.name&&this.props.actionFeedbackContext.displayError(e.message)}}handleDeleteClickEvent(){const e=[this.resource];this.props.context.setContext({passwordDeleteDialogProps:{resources:e}}),this.props.dialogContext.open(Km),this.props.hide()}handleGoToResourceUriClick(){this.props.resourceWorkspaceContext.onGoToResourceUriRequested(this.resource)}get resource(){return this.props.resource}get safeUri(){return V(this.resource.uri,{whiteListedProtocols:se,defaultProtocol:K.HTTPS})}canUpdate(){return this.resource.permission.type>=7}canShare(){return 15===this.resource.permission.type}canCopyUsername(){return""!==this.resource.username}canCopyUri(){return""!==this.resource.uri}get translate(){return this.props.t}render(){return a.createElement(ht,{hide:this.props.hide,left:this.props.left,top:this.props.top},a.createElement("li",{key:"option-username-resource",className:"ready"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"username",className:this.canCopyUsername()?"":"disabled",onClick:this.handleUsernameClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Copy username"))))))),a.createElement("li",{key:"option-copy-password-resource",className:"ready"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"password",onClick:this.handlePasswordClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Copy password"))))))),a.createElement("li",{key:"option-copy-uri-resource",className:"ready"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"username",className:this.canCopyUri()?"":"disabled",onClick:this.handleUriClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Copy URI"))))))),a.createElement("li",{key:"option-permalink-resource",className:"ready"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"permalink",onClick:this.handlePermalinkClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Copy permalink"))))))),a.createElement("li",{key:"option-open-uri-resource",className:"ready separator-after"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"permalink",className:this.safeUri?"":"disabled",onClick:this.handleGoToResourceUriClick},a.createElement("span",null,a.createElement(C.c,null,"Open URI in a new Tab"))))))),a.createElement("li",{key:"option-edit-resource",className:"ready"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"edit",className:this.canUpdate()?"":"disabled",onClick:this.handleEditClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Edit"))))))),a.createElement("li",{key:"option-share-resource",className:"ready"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"share",className:this.canShare()?"":"disabled",onClick:this.handleShareClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Share"))))))),a.createElement("li",{key:"option-delete-resource",className:"ready"},a.createElement("div",{className:"row"},a.createElement("div",{className:"main-cell-wrapper"},a.createElement("div",{className:"main-cell"},a.createElement("a",{id:"delete",className:this.canUpdate()?"":"disabled",onClick:this.handleDeleteClickEvent},a.createElement("span",null,a.createElement(C.c,null,"Delete"))))))))}}gd.propTypes={context:d().any,hide:d().func,left:d().number,top:d().number,resourceWorkspaceContext:d().any,dialogContext:d().any,resource:d().object,actionFeedbackContext:d().any,t:d().func};const fd=u(ee(M(D((0,k.Z)("common")(gd)))));class bd extends a.Component{get selectedResources(){return this.props.resourceWorkspaceContext.selectedResources}isMultipleSelected(){return this.props.resourceWorkspaceContext.selectedResources.length>1}hasMoreThanThreeResourcesSelected(){return this.props.resourceWorkspaceContext.selectedResources.length>3}get numberOfResources(){return this.props.resourceWorkspaceContext.selectedResources.length>99?"99+":this.props.resourceWorkspaceContext.selectedResources.length}render(){return a.createElement("div",{className:"drag-and-drop "+(this.hasMoreThanThreeResourcesSelected()?"item-n":`item-${this.numberOfResources}`)},a.createElement("span",{className:"message"},this.selectedResources[0].name),this.isMultipleSelected()&&a.createElement("span",{className:"count"},this.numberOfResources))}}bd.contextType=g,bd.propTypes={resourceWorkspaceContext:d().any};const yd=ee(bd);class Ed extends a.Component{constructor(e){super(e),this.state=this.getDefaultState(),this.initEventHandlers(),this.handleFavoriteClickDebounced=Z()(this.handleFavoriteUpdate,200),this.createRefs()}getDefaultState(){return{resources:[],selectStrategy:""}}initEventHandlers(){this.handleSelectAllChange=this.handleSelectAllChange.bind(this),this.handleResourceSelected=this.handleResourceSelected.bind(this),this.handleResourceRightClick=this.handleResourceRightClick.bind(this),this.handleCheckboxWrapperClick=this.handleCheckboxWrapperClick.bind(this),this.handleCopyPasswordClick=this.handleCopyPasswordClick.bind(this),this.handleCopyUsernameClick=this.handleCopyUsernameClick.bind(this),this.handleFavoriteClick=this.handleFavoriteClick.bind(this),this.handleSortByColumnClick=this.handleSortByColumnClick.bind(this),this.handleGoToResourceUriClick=this.handleGoToResourceUriClick.bind(this),this.handlePreviewPasswordButtonClick=this.handlePreviewPasswordButtonClick.bind(this)}componentDidUpdate(){this.handleResourceScroll()}shouldComponentUpdate(e,t){const{filteredResources:s,selectedResources:a,sorter:n,scrollTo:r}=this.props.resourceWorkspaceContext,i=e.resourceWorkspaceContext.filteredResources!==s,o=1===a.length&&1===e.resourceWorkspaceContext.selectedResources.length&&a[0].id!==e.resourceWorkspaceContext.selectedResources[0].id,l=e.resourceWorkspaceContext.selectedResources.length!==a.length,c=n!==e.resourceWorkspaceContext.sorter,m=Boolean(r.resource&&r.resource.id),d=t.previewedPassword!==this.state.previewedPassword;return(i||o||l||c)&&this.hidePreviewedPassword(),i||l||o||c||m||d}createRefs(){this.listRef=a.createRef()}handleSelectAllChange(e){const t=e.target.checked?"all":"none";this.props.resourceWorkspaceContext.onResourceSelected[t]()}async handleResourceSelected(e,t){e.preventDefault(),e.stopPropagation(),await this.selectResource(t,e)}handleSelectResources(e){const t=e;this.setState({selectedFolders:[],selectedResources:t},(()=>{1===e.length&&this.props.history.push(`/app/passwords/view/${e[0].id}`)}))}handleResourceRightClick(e,t){e.preventDefault(),this.handleSelectResources([t]);const s={left:e.pageX,top:e.pageY,resource:t};this.props.contextualMenuContext.show(fd,s)}async handleCheckboxWrapperClick(e,t){e.stopPropagation(),e&&e.shiftKey?await this.props.resourceWorkspaceContext.onResourceSelected.range(t):await this.props.resourceWorkspaceContext.onResourceSelected.multiple(t)}handleResourceScroll(){const e=this.props.resourceWorkspaceContext.scrollTo.resource;e&&(this.scrollTo(e.id),this.props.resourceWorkspaceContext.onResourceScrolled())}get resources(){return this.props.resourceWorkspaceContext.filteredResources}get selectedResources(){return this.props.resourceWorkspaceContext.selectedResources}get canUsePreviewPassword(){return this.props.context.siteSettings.canIUse("previewPassword")}isResourceSelected(e){return this.selectedResources.some((t=>e.id===t.id))}async handleCopyUsernameClick(e,t){e.stopPropagation(),await qt.copy(t.username,this.props.context.port),this.props.actionFeedbackContext.displaySuccess(this.translate("The username has been copied to clipboard"))}async handleCopyPasswordClick(e,t){e.stopPropagation(),await this.copyPasswordToClipboard(t.id)}async handlePreviewPasswordButtonClick(e,t){e.stopPropagation(),await this.togglePreviewPassword(t)}extractPlaintextPassword(e){if(!e)throw new TypeError(this.translate("The secret plaintext is empty."));if("string"==typeof e)return e;if("object"!=typeof e)throw new TypeError("The secret plaintext must be a string or an object.");if(!Object.prototype.hasOwnProperty.call(e,"password"))throw new TypeError("The secret plaintext must have a password property.");return e.password}async copyPasswordToClipboard(e){let t;if(this.isPasswordPreviewed(e))t=this.state.previewedPassword.password;else try{const s=await this.decryptResourceSecret(e);t=this.extractPlaintextPassword(s)}catch(e){return void("UserAbortsOperationError"!==e.name&&this.props.actionFeedbackContext.displayError(e.message))}await qt.copy(t,this.props.context.port),await this.props.resourceWorkspaceContext.onResourceCopied(),await this.props.actionFeedbackContext.displaySuccess(this.translate("The secret has been copied to clipboard"))}async togglePreviewPassword(e){this.isPasswordPreviewed(e)?this.hidePreviewedPassword():await this.previewPassword(e)}hidePreviewedPassword(){this.setState({previewedPassword:null})}async previewPassword(e){let t;try{const s=await this.decryptResourceSecret(e);t=this.extractPlaintextPassword(s);const a={resourceId:e,password:t};this.setState({previewedPassword:a})}catch(e){"UserAbortsOperationError"!==e.name&&this.props.actionFeedbackContext.displayError(e.message)}}decryptResourceSecret(e){return this.props.context.port.request("passbolt.secret.decrypt",e,{showProgress:!0})}async handleFavoriteClick(e,t){e.stopPropagation(),await this.handleFavoriteClickDebounced(t)}handleFavoriteUpdate(e){null===e.favorite?this.favoriteResource(e):this.unfavoriteResource(e)}async handleSortByColumnClick(e,t){this.props.resourceWorkspaceContext.onSorterChanged(t)}async handleDragStartEvent(e,t){e.persist(),this.isResourceSelected(t)||await this.props.resourceWorkspaceContext.onResourceSelected.single(t);const s={resources:this.props.resourceWorkspaceContext.selectedResources,folders:[]};this.props.dragContext.onDragStart(e,yd,s)}handleDragEndEvent(){this.props.dragContext.onDragEnd()}async selectResource(e,t){const s=t&&t.metaKey,a=t&&t.shiftKey;!t||s?await this.props.resourceWorkspaceContext.onResourceSelected.multiple(e):a?await this.props.resourceWorkspaceContext.onResourceSelected.range(e):await this.props.resourceWorkspaceContext.onResourceSelected.single(e)}async favoriteResource(e){try{await this.props.context.port.request("passbolt.favorite.add",e.id),this.displaySuccessNotification(this.translate("The password has been added as a favorite"))}catch(e){this.displayErrorNotification(e.message)}}async unfavoriteResource(e){try{await this.props.context.port.request("passbolt.favorite.delete",e.id),this.displaySuccessNotification(this.translate("The password has been removed from favorites"))}catch(e){this.displayErrorNotification(e.message)}}displaySuccessNotification(e){this.props.actionFeedbackContext.displaySuccess(e)}displayErrorNotification(e){this.props.actionFeedbackContext.displayError(e)}scrollTo(e){if(null!==this.listRef.current){const t=this.resources.findIndex((t=>t.id===e)),[s,a]=this.listRef.current.getVisibleRange();(t<s||t>a)&&this.listRef.current.scrollTo(t)}}renderTable(e,t){return a.createElement("table",{style:{MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none"}},a.createElement("tbody",{ref:t},e))}isSortedColumn(e){return this.props.resourceWorkspaceContext.sorter.propertyName===e}isSortedAsc(){return this.props.resourceWorkspaceContext.sorter.asc}handleGoToResourceUriClick(e){this.props.resourceWorkspaceContext.onGoToResourceUriRequested(e)}isPasswordPreviewed(e){return this.state.previewedPassword&&this.state.previewedPassword.resourceId===e}safeUri(e){return V(e.uri,{whiteListedProtocols:se,defaultProtocol:K.HTTPS})||""}formatDateTimeAgo(e){const t=B.ou.fromISO(e),s=t.diffNow().toMillis();return s>-1e3&&s<0?this.translate("Just now"):t.toRelative({locale:this.props.context.locale})}renderItem(e,t){const s=this.resources[e],n=this.isResourceSelected(s),r=null!==s.favorite&&void 0!==s.favorite,i=this.safeUri(s),o=this.formatDateTimeAgo(s.modified),l=this.isPasswordPreviewed(s.id);return a.createElement("tr",{id:`resource_${s.id}`,key:t,draggable:"true",className:n?"selected":"",unselectable:"range"===this.state.selectStrategy?"on":"",onClick:e=>this.handleResourceSelected(e,s),onContextMenu:e=>this.handleResourceRightClick(e,s),onDragStart:e=>this.handleDragStartEvent(e,s),onDragEnd:e=>this.handleDragEndEvent(e,s)},a.createElement("td",{className:"cell-multiple-select selections s-cell"},a.createElement("div",{className:"ready"},a.createElement("div",{className:"input checkbox"},a.createElement("input",{type:"checkbox",id:`checkbox_multiple_select_checkbox_${s.id}`,checked:n,readOnly:!0,onClick:e=>this.handleCheckboxWrapperClick(e,s)}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"Select resource"))))),a.createElement("td",{className:"cell-favorite selections s-cell"},a.createElement("div",{className:"ready"},a.createElement("a",{className:"no-text "+(r?"fav":"unfav"),onClick:e=>this.handleFavoriteClick(e,s)},a.createElement(de,{name:"star"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"fav"))))),a.createElement("td",{className:"cell-name m-cell uri"},a.createElement("div",{title:s.name},s.name)),a.createElement("td",{className:"cell-username m-cell username"},a.createElement("div",{title:s.username},a.createElement("a",{onClick:e=>this.handleCopyUsernameClick(e,s)},s.username))),a.createElement("td",{className:"cell-secret m-cell password"},a.createElement("div",{className:"secret "+(l?"":"secret-copy"),title:l?this.state.previewedPassword.password:"secret"},a.createElement("a",{onClick:async e=>this.handleCopyPasswordClick(e,s)},a.createElement("span",null,l&&this.state.previewedPassword.password,!l&&"Copy password to clipboard"))),this.canUsePreviewPassword&&a.createElement("a",{onClick:async e=>this.handlePreviewPasswordButtonClick(e,s.id),className:"password-view button button-transparent"},a.createElement(de,{name:this.isPasswordPreviewed(s.id)?"eye-close":"eye-open"}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"View")))),a.createElement("td",{className:"cell-uri l-cell"},a.createElement("div",{title:s.uri},i&&a.createElement("a",{onClick:()=>this.handleGoToResourceUriClick(s)},s.uri),!i&&a.createElement("span",null,s.uri))),a.createElement("td",{className:"cell-modified m-cell"},a.createElement("div",{title:s.modified},o)))}get translate(){return this.props.t}render(){const e=null!==this.resources,t=e&&0===this.resources.length,s=e&&this.resources.length===this.selectedResources.length,n=this.props.resourceWorkspaceContext.filter.type;return a.createElement("div",{className:`tableview ready ${t?"empty":""} ${["default","modified"].includes(n)?"all_items":""}`},a.createElement(a.Fragment,null,t&&n===te.TEXT&&a.createElement("div",{className:"empty-content"},a.createElement("h2",null,a.createElement(C.c,null,"None of your passwords matched this search.")),a.createElement("p",null,a.createElement(C.c,null,"Try another search or use the left panel to navigate into your passwords."))),t&&n===te.FAVORITE&&a.createElement("div",{className:"empty-content"},a.createElement("h2",null,a.createElement(C.c,null,"None of your passwords are yet marked as favorite.")),a.createElement("p",null,a.createElement(C.c,null,"Add stars to passwords you want to easily find later."))),t&&n===te.GROUP&&a.createElement("div",{className:"empty-content"},a.createElement("h2",null,a.createElement(C.c,null,"No passwords are shared with this group yet.")),a.createElement("p",null,a.createElement(C.c,null,"Share a password with this group or wait for a team member to share one with this group."))),t&&(n===te.FOLDER||n===te.ROOT_FOLDER)&&a.createElement("div",{className:"empty-content"},a.createElement("h2",null,a.createElement(C.c,null,"No passwords in this folder yet.")),a.createElement("p",null,a.createElement(C.c,null,"It does feel a bit empty here."))),t&&n===te.SHARED_WITH_ME&&a.createElement("div",{className:"empty-content"},a.createElement("h2",null,a.createElement(C.c,null,"No passwords are shared with you yet.")),a.createElement("p",null,a.createElement(C.c,null,"It does feel a bit empty here."),"",a.createElement(C.c,null,"Wait for a team member to share a password with you."))),t&&(n===te.ITEMS_I_OWN||n===te.RECENTLY_MODIFIED||n===te.ALL)&&a.createElement(a.Fragment,null,a.createElement("div",{className:"empty-content"},a.createElement("h1",null,a.createElement(C.c,null,"Welcome to passbolt!")),a.createElement("p",null,a.createElement(C.c,null,"It does feel a bit empty here."),"",a.createElement(C.c,null,"Create your first password or wait for a team member to share one with you.")))),!t&&a.createElement(a.Fragment,null,a.createElement("div",{className:"tableview-header"},a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{className:"cell-multiple-select selections s-cell"},a.createElement("div",{className:"input checkbox"},a.createElement("input",{id:"passwords-select-all",type:"checkbox",name:"select all",checked:s,onChange:this.handleSelectAllChange}),a.createElement("span",{className:"visually-hidden"},a.createElement(C.c,null,"Select all")))),a.createElement("th",{className:"cell-favorite selections s-cell sortable"},a.createElement("a",{onClick:e=>this.handleSortByColumnClick(e,"favorite"),className:"unfav"},a.createElement(de,{name:"star"}),a.createElement("span",{className:"visuallyhidden"},a.createElement(C.c,null,"fav")),a.createElement("span",{className:"cell-header-icon-sort"},this.isSortedColumn("favorite")&&this.isSortedAsc()&&a.createElement(de,{name:"ascending"}),this.isSortedColumn("favorite")&&!this.isSortedAsc()&&a.createElement(de,{name:"descending"})))),a.createElement("th",{className:"cell-name m-cell sortable"},a.createElement("a",{onClick:e=>this.handleSortByColumnClick(e,"name")},a.createElement("div",{className:"cell-header"},a.createElement("span",{className:"cell-header-text"},a.createElement(C.c,null,"Resource")),a.createElement("span",{className:"cell-header-icon-sort"},this.isSortedColumn("name")&&this.isSortedAsc()&&a.createElement(de,{name:"ascending"}),this.isSortedColumn("name")&&!this.isSortedAsc()&&a.createElement(de,{name:"descending"}))))),a.createElement("th",{className:"cell-username m-cell username sortable"},a.createElement("a",{onClick:e=>this.handleSortByColumnClick(e,"username")},a.createElement("div",{className:"cell-header"},a.createElement("span",{className:"cell-header-text"},a.createElement(C.c,null,"Username")),a.createElement("span",{className:"cell-header-icon-sort"},this.isSortedColumn("username")&&this.isSortedAsc()&&a.createElement(de,{name:"ascending"}),this.isSortedColumn("username")&&!this.isSortedAsc()&&a.createElement(de,{name:"descending"}))))),a.createElement("th",{className:"cell-secret m-cell password"},a.createElement("div",{className:"cell-header"},a.createElement("span",{className:"cell-header-text"},a.createElement(C.c,null,"Password")))),a.createElement("th",{className:"cell-uri l-cell sortable"},a.createElement("a",{onClick:e=>this.handleSortByColumnClick(e,"uri")},a.createElement("div",{className:"cell-header"},a.createElement("span",{className:"cell-header-text"},a.createElement(C.c,null,"URI")),a.createElement("span",{className:"cell-header-icon-sort"},this.isSortedColumn("uri")&&this.isSortedAsc()&&a.createElement(de,{name:"ascending"}),this.isSortedColumn("uri")&&!this.isSortedAsc()&&a.createElement(de,{name:"descending"}))))),a.createElement("th",{className:"cell-modified m-cell sortable"},a.createElement("a",{onClick:e=>this.handleSortByColumnClick(e,"modified")},a.createElement("div",{className:"cell-header"},a.createElement("span",{className:"cell-header-text"},a.createElement(C.c,null,"Modified")),a.createElement("span",{className:"cell-header-icon-sort"},this.isSortedColumn("modified")&&this.isSortedAsc()&&a.createElement(de,{name:"ascending"}),this.isSortedColumn("modified")&&!this.isSortedAsc()&&a.createElement(de,{name:"descending"}))))))))),e&&a.createElement("div",{className:"tableview-content scroll"},a.createElement(ce(),{itemRenderer:(e,t)=>this.renderItem(e,t),itemsRenderer:(e,t)=>this.renderTable(e,t),length:this.resources.length,pageSize:20,minSize:20,type:"uniform",ref:this.listRef})))))}}Ed.propTypes={context:d().any,resourceWorkspaceContext:d().any,actionFeedbackContext:d().any,contextualMenuContext:d().any,history:d().any,dragContext:d().any,t:d().func};const vd=u((0,c.EN)(D(at(ee(Dc((0,k.Z)("common")(Ed)))))));class Cd extends a.Component{hasLockDetail(){return this.props.resourceWorkspaceContext.lockDisplayDetail}render(){const e=this.props.context.siteSettings.canIUse("folders"),t=this.props.context.siteSettings.canIUse("tags");return a.createElement("div",null,a.createElement("div",{className:"header second"},a.createElement(ns,null),a.createElement(qm,{placeholder:this.props.t("Search passwords")}),a.createElement(Cs,{baseUrl:this.props.context.userSettings.getTrustedDomain(),user:this.props.context.loggedInUser})),a.createElement("div",{className:"header third"},a.createElement("div",{className:"col1 main-action-wrapper"},a.createElement(hd,null)),a.createElement(sd,null)),a.createElement("div",{className:"panel main"},a.createElement("div",{className:"panel left"},a.createElement(zm,null),e&&a.createElement(Oc,null),a.createElement(ud,null),t&&a.createElement(Om,null)),a.createElement("div",{className:"panel middle"},a.createElement(Hm,null),a.createElement(vd,null),this.props.resourceWorkspaceContext.details.folder&&this.hasLockDetail()&&a.createElement(Kc,null),this.props.resourceWorkspaceContext.details.resource&&this.hasLockDetail()&&a.createElement(xm,null))))}}Cd.propTypes={context:d().any,resourceWorkspaceContext:d().any,t:d().func};const kd=u(ee((0,k.Z)("common")(Cd)));class wd{constructor(e){this.port=e}async getOrganizationAccountRecoverySettings(){return await this.port.request("passbolt.account-recovery.get-organization-policy")}}function Sd(){return Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Sd.apply(this,arguments)}class xd extends a.Component{constructor(e){super(e),this.bindCallback()}bindCallback(){this.stop=this.stop.bind(this)}async stop(e){this.props.workflowContext.stop(e)}render(){return a.createElement(a.Fragment,null,this.props.workflowContext.workflows.map((({key:e,Workflow:t,workflowProps:s})=>a.createElement(t,Sd({key:e,onStop:()=>this.stop(e)},s)))),this.props.children)}}xd.propTypes={workflowContext:d().any,children:d().any};const Nd=St(xd);class Rd extends a.Component{getPathnameFromUrlParameter(){const e=new URLSearchParams(this.props.location.search).get("pathname");return this.validatePathname(e)?e:""}validatePathname(e){return/^[A-Za-z0-9\-\/]*$/.test(e)}get pathnameToRedirectTo(){return this.getPathnameFromUrlParameter()||"/app/passwords"}render(){return a.createElement(c.l_,{to:this.pathnameToRedirectTo})}}Rd.propTypes={location:d().object};const Id=(0,c.EN)(Rd);class Dd extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}async handleSubmit(e){e.preventDefault(),this.props.onClose(),await this.props.history.push({pathname:"/app/settings/account-recovery/edit"})}async handleCancel(){await this.props.context.port.request("passbolt.account-recovery.postpone-user-setting-invitation"),this.props.onClose()}get translate(){return this.props.t}render(){return a.createElement(be,{title:`${this.translate("Account recovery enrollment")}`,onClose:this.handleCancel,className:"recovery-account-policy-dialog"},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"form-content"},a.createElement("p",null,{mandatory:a.createElement(C.c,null,"It is mandatory to share securely a copy of your private key with your organization recovery contacts. Would you like to continue?"),"opt-out":a.createElement(C.c,null,"It is recommended to share securely a copy of your private key with your organization recovery contacts. Would you like to continue?")}[this.props.policy])),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement("a",{className:"cancel",role:"button",onClick:this.handleCancel},a.createElement(C.c,null,"Later")),a.createElement(Ee,{value:this.translate("Continue")}))))}}Dd.propTypes={context:d().object,policy:d().string,onClose:d().func,t:d().func,history:d().object};const Td=(0,c.EN)(u((0,k.Z)("common")(Dd)));class Ad extends a.Component{constructor(e){super(e),this.bindCallbacks()}bindCallbacks(){this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this)}async handleSubmit(e){e.preventDefault(),await this.props.navigationContext.onGoToUserSettingsMfaRequested(),this.props.onClose()}async handleCancel(){await this.props.context.port.request("passbolt.mfa-policy.postpone-user-setting-invitation"),this.props.onClose()}get translate(){return this.props.t}render(){return a.createElement(be,{title:`${this.translate("Enable Multi Factor Authentication")}`,onClose:this.handleCancel,className:"mfa-policy-dialog"},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"form-content"},a.createElement("p",null,"Your administrator requires you to configure a Multi Factor Authentication method for your account.")),a.createElement("div",{className:"submit-wrapper clearfix"},a.createElement("a",{className:"cancel",role:"button",onClick:this.handleCancel},a.createElement(C.c,null,"Later")),a.createElement(Ee,{value:this.translate("Go to MFA settings")}))))}}Ad.propTypes={context:d().object,navigationContext:d().any,onClose:d().func,t:d().func,history:d().object};const Pd=v(u((0,k.Z)("common")(Ad)));class Ud extends a.Component{constructor(e){super(e),this.state=this.getDefaultState()}getDefaultState(){return{shouldDisplayMFA:!1,shouldDisplayAccountRecovery:!1}}async componentDidMount(){await this.checkToDisplayDialog(),await this.displayDialog()}async componentDidUpdate(){(this.state.shouldDisplayAccountRecovery||this.state.shouldDisplayMFA)&&await this.displayDialog()}async checkToDisplayDialog(){if(this.props.context.siteSettings.canIUse("accountRecovery")){const e=await this.checkAccountRecovery();this.setState({shouldDisplayAccountRecovery:e})}if(this.props.context.siteSettings.canIUse("mfaPolicies")){const e=await this.checkMfaPolicy();this.setState({shouldDisplayMFA:e})}}isOrganizationPolicyRequiresAUserChoiceForAccountRecovery(){const e=this.props.accountRecoveryContext.getPolicy();return e===Rt.POLICY_MANDATORY||e===Rt.POLICY_OPT_OUT}isOrganizationPolicyRequiresAUserChoiceForMfa(){return this.props.mfaContext.getPolicy()===rs}async checkAccountRecovery(){if(await this.props.accountRecoveryContext.loadAccountRecoveryPolicy(),!this.isOrganizationPolicyRequiresAUserChoiceForAccountRecovery())return;if(await this.props.context.port.request("passbolt.account-recovery.has-user-postponed-user-setting-invitation"))return;if(this.props.accountRecoveryContext.getUserAccountRecoverySubscriptionStatus()!==Rt.STATUS_PENDING)return;const e=this.props.location.pathname;return!e.startsWith("/app/settings/account-recovery")&&!e.startsWith("/app/settings/mfa")||void 0}async checkMfaPolicy(){if(await this.props.mfaContext.findPolicy(),await this.props.mfaContext.findMfaSettings(),!this.isOrganizationPolicyRequiresAUserChoiceForMfa())return;if(await this.props.context.port.request("passbolt.mfa-policy.has-user-postponed-user-setting-invitation"))return;const e=this.props.location.pathname;return e.startsWith("/app/settings/mfa")||e.startsWith("/app/settings/account-recovery")?void 0:!this.props.mfaContext.hasMfaSettings()||void 0}async displayDialog(){if(await this.props.accountRecoveryContext.loadAccountRecoveryPolicy(),0===this.props.dialogContext.dialogs.length)if(!this.state.shouldDisplayAccountRecovery&&this.state.shouldDisplayMFA)this.props.dialogContext.open(Pd),this.setState({shouldDisplayMFA:!1});else if(this.state.shouldDisplayAccountRecovery){const e=this.props.accountRecoveryContext.getPolicy();this.props.dialogContext.open(Td,{policy:e}),this.setState({shouldDisplayAccountRecovery:!1})}}render(){return null}}Ud.propTypes={dialogContext:d().any,navigationContext:d().any,accountRecoveryContext:d().object,mfaContext:d().object,context:d().object,location:d().object};const _d=(0,c.EN)(u(Dt(Es(M(Ud)))));class Ld extends a.Component{render(){const e=new wd(this.props.port);return a.createElement(wr,{port:this.props.port,storage:this.props.storage},a.createElement(g.Consumer,null,(t=>a.createElement(Ir,{loadingPath:"/webAccessibleResources/locales/{{lng}}/{{ns}}.json"},a.createElement(It,{accountRecoveryUserService:e},a.createElement(ys,null,a.createElement(wt,null,a.createElement(I,null,a.createElement(F,null,a.createElement(sr,null,a.createElement(st,null,a.createElement(G,null,a.createElement(U,null),a.createElement($l,null),a.createElement(Xl,null),a.createElement(sc,null),a.createElement(nc,null),a.createElement(Gn,null),t.loggedInUser&&"admin"===t.loggedInUser.role.name&&t.siteSettings.canIUse("ee")&&a.createElement(fr,null),a.createElement(l.VK,null,a.createElement(E,null,t.loggedInUser&&(t.siteSettings.canIUse("accountRecovery")||t.siteSettings.canIUse("mfaPolicies"))&&a.createElement(_d,null),a.createElement(Bn,null),a.createElement(c.rs,null,a.createElement(c.AW,{path:"/webAccessibleResources/passbolt-iframe-app.html",component:Id}),a.createElement(c.AW,{exact:!0,path:["/app/administration","/app/administration/mfa","/app/administration/users-directory","/app/administration/email-notification","/app/administration/smtp-settings","/app/settings/mfa"]}),a.createElement(c.AW,{path:["/app/folders/view/:filterByFolderId","/app/passwords/view/:selectedResourceId","/app/passwords"]},a.createElement(Q,null,a.createElement(ie,null,a.createElement(q,null),a.createElement(it,null),a.createElement(ir,null),a.createElement(Ic,null,a.createElement("div",{id:"container",className:"page password"},a.createElement("div",{id:"app",className:"app ready",tabIndex:"1000"},a.createElement("div",{className:"header first"},a.createElement(S,null)),a.createElement(kd,{onMenuItemClick:this.handleWorkspaceSelect}))))))),a.createElement(c.AW,{path:["/app/account-recovery/requests/review/:accountRecoveryRequestId","/app/groups/view/:selectedGroupId","/app/groups/edit/:selectedGroupId","/app/users/view/:selectedUserId","/app/users"]},a.createElement(Je,null,a.createElement(q,null),a.createElement(Nd,null),a.createElement(it,null),a.createElement(ir,null),a.createElement("div",{id:"container",className:"page user"},a.createElement("div",{id:"app",className:"app ready",tabIndex:"1000"},a.createElement("div",{className:"header first"},a.createElement(S,null)),a.createElement(ma,null))))),a.createElement(c.AW,{path:"/app/settings"},a.createElement(va,null,a.createElement(q,null),a.createElement(ir,null),a.createElement("div",{id:"container",className:"page settings"},a.createElement("div",{id:"app",className:"app ready",tabIndex:"1000"},a.createElement("div",{className:"header first"},a.createElement(S,null)),a.createElement(jn,null))))),a.createElement(c.AW,{exact:!0,path:["/app/administration/subscription","/app/administration/account-recovery","/app/administration/sso"]},a.createElement(Jn,null,a.createElement(Yi,null,a.createElement(Di,null,a.createElement(Nl,null,a.createElement(q,null),a.createElement(Nd,null),a.createElement(zl,null)))))),a.createElement(c.AW,{path:"/"},a.createElement(ha,null))))),a.createElement(mt,null),a.createElement(Vn,null)))))))))))))}}Ld.propTypes={onClose:d().func,disabled:d().bool,port:d().object,storage:d().object};const Fd=Ld;var Md=s(17187);s(24889);!async function(){const e=new URLSearchParams(window.location.search).get("passbolt"),t=new class{constructor(e){if(this._listeners={},this.lock=new class{constructor(){this._locked=!1,this._ee=new Md.EventEmitter}acquire(){return new Promise((e=>{if(!this._locked)return this._locked=!0,e();const t=()=>{if(!this._locked)return this._locked=!0,this._ee.removeListener("release",t),e()};this._ee.on("release",t)}))}release(){this._locked=!1,setImmediate((()=>this._ee.emit("release")))}},void 0===e)throw Error("A port name is required.");if("string"!=typeof e)throw Error("The port name should be a valid string.");this._name=e}connect(){let e;const t=new Promise((t=>{e=t}));return this._port=o.runtime.connect({name:this._name}),this._connected=!0,this.initListener(),this.once("passbolt.port.ready",e),t}initListener(){this._port.onDisconnect.addListener((()=>{console.warn(`port disconnected from addon code: ${this._name}`),this._connected=!1})),this._port.onMessage.addListener((e=>{this._onMessage(e)}))}_onMessage(e){const t=JSON.parse(e),s=t[0];if(Array.isArray(this._listeners[s])){const e=this._listeners[s];for(let a=0;a<e.length;a++){const n=e[a],r=Array.prototype.slice.call(t,1);n.callback.apply(this,r),n.once&&(this._listeners[s].splice(a,1),0===this._listeners[s].length&&delete this._listeners[s],a--)}}}_addListener(e,t,s){Array.isArray(this._listeners[e])||(this._listeners[e]=[]),this._listeners[e].push({name:e,callback:t,once:s})}on(e,t){this._addListener(e,t,!1)}once(e,t){this._addListener(e,t,!0)}async emit(...e){const t=JSON.stringify(e);await this.connectIfDisconnected(),this._port.postMessage(t)}request(e,...t){const s=(0,x.Z)(),a=[e,s].concat(t);return new Promise(((e,t)=>{this.once(s,((s,...a)=>{"SUCCESS"===s?e.apply(null,a):"ERROR"===s&&t.apply(null,a)})),this.emit.apply(this,a)}))}async connectIfDisconnected(){await this.lock.acquire(),this._connected||await this.connect(),this.lock.release()}}(e);await t.connect();const s=o.storage,r=document.createElement("div");document.body.appendChild(r),n.render(a.createElement(Fd,{port:t,storage:s}),r)}()}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={id:e,loaded:!1,exports:{}};return a[e].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.m=a,e=[],r.O=(t,s,a,n)=>{if(!s){var i=1/0;for(m=0;m<e.length;m++){for(var[s,a,n]=e[m],o=!0,l=0;l<s.length;l++)(!1&n||i>=n)&&Object.keys(r.O).every((e=>r.O[e](s[l])))?s.splice(l--,1):(o=!1,n<i&&(i=n));if(o){e.splice(m--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var m=e.length;m>0&&e[m-1][2]>n;m--)e[m]=e[m-1];e[m]=[s,a,n]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var n=Object.create(null);r.r(n);var i={};t=t||[null,s({}),s([]),s(s)];for(var o=2&a&&e;"object"==typeof o&&!~t.indexOf(o);o=s(o))Object.getOwnPropertyNames(o).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,r.d(n,i),n},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.j=143,(()=>{var e={143:0};r.O.j=t=>0===e[t];var t=(t,s)=>{var a,n,[i,o,l]=s,c=0;if(i.some((t=>0!==e[t]))){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);if(l)var m=l(r)}for(t&&t(s);c<i.length;c++)n=i[c],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(m)},s=self.dataChunkLoadingGlobal=self.dataChunkLoadingGlobal||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var i=r.O(void 0,[216],(()=>r(54094)));i=r.O(i)})();